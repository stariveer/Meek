{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 39c4e0fc6746d39fad6d","webpack:///./src/main.js","webpack:///./src/meek/config.js","webpack:///./src/utils/counter.js","webpack:///./src/utils/helpers.js","webpack:///./src/utils/obj.js","webpack:///./src/utils/math.js","webpack:///./src/utils/coordinate.js","webpack:///./src/utils/canvas.js","webpack:///./src/geometry/support/geometryutil.js","webpack:///./src/geometry/geometry.js","webpack:///./src/core/baseobject.js","webpack:///./src/core/event.js","webpack:///./src/meek/eventtype.js","webpack:///./src/geometry/support/extentutil.js","webpack:///./src/style/style.js","webpack:///./src/style/fillstyle.js","webpack:///./src/style/basestyle.js","webpack:///./src/style/textstyle.js","webpack:///./src/style/linestyle.js","webpack:///./src/style/pointstyle.js","webpack:///./src/core/eventmanager.js","webpack:///./src/geometry/extent.js","webpack:///./src/geometry/point.js","webpack:///./src/geometry/line.js","webpack:///./src/geometry/support/interpolate.js","webpack:///./src/utils/array.js","webpack:///./src/geometry/polygon.js","webpack:///./src/geometry/support/orient.js","webpack:///./src/geometry/mutilpolygon.js","webpack:///./src/geometry/parallelogram.js","webpack:///./src/lyr/image/imagestate.js","webpack:///./src/lyr/image/imageevent.js","webpack:///./src/core/baseevent.js","webpack:///./src/lyr/image/singleimage.js","webpack:///./src/core/baseimage.js","webpack:///./src/lyr/featurelayer.js","webpack:///./src/lyr/baselayer.js","webpack:///./src/meek/featureevent.js","webpack:///./src/lyr/singleimagelayer.js","webpack:///./src/utils/domutil.js","webpack:///./src/components/draw.js","webpack:///./src/components/component.js","webpack:///./src/meek/browserevent.js","webpack:///./src/meek/feature.js","webpack:///./src/components/drawevent.js","webpack:///./src/utils/functions.js","webpack:///./src/components/select.js","webpack:///./src/components/selectevent.js","webpack:///./src/components/modify.js","webpack:///./src/components/modifyevent.js","webpack:///./src/utils/mousekey.js","webpack:///./src/components/dragpan.js","webpack:///./src/components/mousewheelzoom.js","webpack:///./src/control/control.js","webpack:///./src/control/zoom.js","webpack:///./src/meek/map.js","webpack:///./src/renderer/canvas/canvasrenderer.js","webpack:///./src/renderer/renderer.js","webpack:///./src/renderer/canvas/featurelayerrenderer.js","webpack:///./src/renderer/canvas/layerrenderer.js","webpack:///./src/data/matrix/transform.js","webpack:///./src/renderer/render/pointrender.js","webpack:///./src/renderer/render/geomertyrender.js","webpack:///./src/renderer/render/linerender.js","webpack:///./src/renderer/render/polygonrender.js","webpack:///./src/renderer/render/textrender.js","webpack:///./src/renderer/canvas/imagelayerrenderer.js","webpack:///./src/renderer/rendereventtype.js","webpack:///./src/renderer/renderevent.js","webpack:///./src/meek/browsereventhandler.js","webpack:///./src/meek/view.js","webpack:///./src/components/componentdefaults.js","webpack:///./src/components/kinetic.js","webpack:///./src/components/keyboardhome.js","webpack:///./src/components/keyboardzoom.js","webpack:///./src/components/keyboardpan.js","webpack:///./src/control/controldefaults.js","webpack:///./src/control/home.js","webpack:///./src/control/zoompercentage.js","webpack:///./src/meek/overlay.js","webpack:///./src/data/json/geojson.js","webpack:///./src/geometry/analysis/intersects.js","webpack:///./src/geometry/analysis/splitpolygon.js","webpack:///./src/geometry/analysis/contains.js","webpack:///./src/geometry/analysis/polygonwithhole.js"],"names":["version","Config","Coordinate","Canvas","Event","SelectEvent","FeatureEvent","ModifyEvent","EventManager","Counter","Helpers","ImageState","ImageEvent","SingleImage","Geometry","Extent","Point","Line","Polygon","MutilPolygon","Parallelogram","Style","PointStyle","LineStyle","FillStyle","TextStyle","FeatureLayer","SingleImageLayer","Draw","DrawEvent","BrowserEvent","EventType","Feature","Map","View","Overlay","GeometryUtil","ExtentUtil","Select","Modify","DragPan","Control","Zoom","Obj","Math","MouseWheelZoom","GeoJSON","intersects","splitPolygonByPolyline","contains","polygonWithHole","DEBUG","DEFAULT_ZOOM_FACTOR","DEFAULT_MAX_ZOOM","DEFAULT_MIN_ZOOM","MOUSE_WHEEL_ZOOM_MAXDELTA","DEFAULT_TILE_SIZE","getUid","uid","colorToString","color","alpha","r","g","b","getValues","object","values","property","push","clear","Reflect","deleteProperty","objectToMap","obj","map","Object","keys","ke","set","mapToObject","undefined","forEach","value","key","clamp","lerp","min","max","a","x","add","coordinate","delta","rotate","angle","cosAngle","cos","sinAngle","sin","y","scale","rotateAtOffset","context","rotation","offsetX","offsetY","translate","pointIntersectPoint","pointIntersectLine","squaredSegmentDistance","squaredDistanceToSegment","equals","squaredDistance","distance","closestOnSegment","linearRingsContainsXY","linearRingContainsXY","getPointInExtendedLineByDistanceFromAB","simplify","pointA","pointB","tolerance","toleranceDistance","line","path","squaredSegmentDistanceFn","find","i","ii","length","nowP","nextP","sqrt","x1","y1","x2","y2","dx","dy","t","segment","closestCoordinate","coordinate1","coordinate2","coord1","coord2","x0","y0","start","end","along","flatCoordinates","offset","ends","stride","wn","xa","ya","xb","yb","d","xab","yab","xbd","xd","yd","geometry","coordinates","geoType","geometryType","POLYGON","getCoordinates","LINE","sliceCoords","slice","newCoords","len","setCoordinates","_extent","pointInExtent","containsPoint","extent","intersect","geomtry","getFormShowPosition","getFlatInteriorPoint","containsXY","move","opts","origin","anchor","toJSON","clone","UNDEFINED","fp","sp","f1","f2","f3","EXTENT","BaseObject","POINT","MULTI_POINT","MULTI_LINE","MULTI_POLYGON","CIRCLE","PARALLELOGRAM","_id","_revision","changed","dispatchEvent","CHANGE","_pendingRemovals","_listeners","_dispatching","nullFunction","getListeners","type","hasListener","optType","has","removeEventListener","listener","listeners","index","indexOf","splice","addEventListener","event","evt","target","propagate","call","propagationStopped","pendingRemovals","VIEW_CHANGED","ERROR","LOAD","RESIZE","createEmpty","Infinity","createOrUpdateFromFlatCoordinates","opt_extent","createOrUpdateEmpty","extendFlatCoordinates","extendXY","createOrUpdate","minX","minY","maxX","maxY","getCenter","createScaleExtent","center","boundingExtentFromTwoPoints","point1","point2","xmin","ymin","xmax","ymax","boundingExtent","extendCoordinate","getBottomLeft","getBottomRight","getTopRight","getTopLeft","boundingSimpleExtent","point","Array","isArray","buffer","optExtent","minMaxToRing","ring","getHeight","getWidth","updateExtent","newCoordinates","dragSegments","dragSegment","extentCoordinates","segment1","segment2","isVertex","getIntersection","extent1","extent2","intersection","containsExtent","isEmpty","getForViewAndSize","resolution","size","cosRotation","sinRotation","xCos","xSin","yCos","ySin","x3","y3","defaultFunction","_default","white","blue","width","createDefaultEditing","styles","LineCap","ROUND","LineJion","createDefaultSelecting","outsideLine","insideLine","createFunction","styleFunction","feature","borderStyle","style","SOLID","_borderStyle","textStyle","newStyle","BaseStyle","_color","_style","_alpha","_textStyle","optOptions","options","text","font","DEFAULT_FONT","rotateWithView","DEFAULT_SCALE","textAlign","DEFAULT_TEXT_ALIGN","textBaseline","DEFAULT_BASE_LINE","fill","DEFAULT_FILL_COLOR","stroke","DEFAULT_STROKE","_text","_font","_rotation","_rotateWithView","_scale","_textAlign","_textBaseline","_fill","_stroke","_offsetX","_offsetY","lineCap","lineJion","BUTT","MITER","miterLimit","_width","_lineCap","_lineJion","_miterLimit","DASH","DOT","DASHDOT","DASHDOTDOT","NULL","SQUARE","BEVEL","xoffset","yoffset","_size","_xoffset","_yoffset","_angle","CROSS","X","TRIANGLE","unlistenByKey","listen","listenOnce","listenerMap","ol_lm","removeListeners","boundListener","deleteIndex","bindListener","listenerObj","bindTo","callOnce","findListener","optThis","optSetDeleteIndex","getListenerMap","optOnce","opt_this","_xmin","_ymin","_xmax","_ymax","_rings","_flatInteriorPointRevision","_flatInteriorPoint","revision","centerX","centerY","beyond","minPoint","height","newMinPoint","newCoordiante","rings","extentArr","getCoordinateIndex","coord","findIndex","points","abs","xValue","yValue","nx","ny","opt","update","equal","geom","Number","isNaN","extentObj","_x","_y","_path","addPath","forEachSegment","callback","interiorPoint","fraction","lastPoint","coords","newLine","me","POSITIVE_INFINITY","NEGATIVE_INFINITY","coors","p","np","lineString","linearRings","linearRingss","centerLinearRingss","opt_dest","pointX","NaN","pointY","n","cumulativeLengths","o","flatCenters","flatCentersOffset","intersections","maxSegmentLength","sort","numberSafeCompareFunction","segmentLength","endss","interiorPoints","linearFindNearest","stableSort","binarySearch","arr","direction","compareFnc","tmp","haystack","needle","opt_comparator","mid","cmp","comparator","low","high","found","arr1","arr2","len1","addRing","outRing","_inOneRing","coordsTemp","inHole","some","px","py","flag","l","j","sx","sy","tx","ty","flatCenter","orientedFlatCoordinates","getOrientedFlatCoordinates","hasHoles","jLen","ringIndex","outRings","newPolygon","orientLinearRingss","orientLinearRings","linearRingssAreOriented","linearRingsAreOriented","linearRingIsClockwise","opt_right","right","isClockwise","reverse","edge","_polygons","getPolygon","innerRing","polygon","polygons","onePolygon","orderArray","lastLen","currLen","polygonCoods","iiLen","polygonIndex","allCoords","newMutilPolygon","allPolygonCoords","polyCoods","getTheLastPoint","firstPoint","secondPoint","thirdPoint","updateCoordinatesForModification","vertex","oldVertex","dis","oldRingsCoordinates","oldCoordinates","segement","edgeIndex","firstCoord","nowCood","otherCood","newCood1","tempXX","tempYY","tempX2","tempY2","newCood2","IDLE","LOADING","LOADED","image","BaseEvent","Type","IMAGELOADSTART","IMAGELOADEND","IMAGELOADERROR","propagatinoStopped","stopPropagation","preventDefault","pixelRatio","attributions","src","crossOrigin","imageLoadFunction","_src","domImage","Image","getDomImage","_imageByContext","_imageListenerKeys","state","_imageLoadFunction","opt_context","_domImage","cloneNode","_handleImageError","_unlistenImage","_handleImageLoad","load","BaseImage","_attributions","_pixelRatio","_resolution","_state","optContext","_features","_styleFunction","_featureChangeKeys","features","addFeatures","zIndex","_renderBuffer","renderBufferValue","unlistenByKeyFn","CLEAR","FEATURE_COLLECTION_CHANGED","findFeature","id","f","_addFeaturesInner","hasFeature","featureId","_setupChangeEvents","ADD_FEATURE","addFeature","forEachFeatureAtPiexl","frameState","piexl","_getCurrentExtentFeatures","extentFeatures","_getIntersectedFeatures","piexlX","piexlY","viewState","result","filter","removeFeature","delete","REMOVE_FEATURE","featureKey","_handleFeatureChange","loadFeature","newFeatures","pointFeatures","lineFeatures","display","geometryExtent","concat","BaseLayer","baseOptions","assign","name","visible","datasource","opacity","dataExtent","maxResolution","minResolution","_mapRenderKey","_map","render","_visible","_opacity","_minResolution","_maxResolution","_dataExtent","_datasource","_zIndex","imageExtent","defaultImageLoadFunction","_singleImage","url","_imageSize","imageSize","singleImage","handleImageChange","getImageInternal","imageWidth","imageHeight","targetWidth","ceil","canvas","drawImage","_dispatchImageEvent","_attributes","createCanvasContext2D","outerWidth","outerHeight","removeNode","removeChildren","optWidth","optHeight","document","createElement","getContext","element","offsetWidth","getComputedStyle","parseInt","marginLeft","marginRight","offsetHeight","marginTop","marginBottom","node","parentNode","removeChild","lastChild","applyHandleEventOption","handleDownEvent","_handleDownEvent","handleMouseEvent","handleUpEvent","_handleUpEvent","_drawLayer","drawLayer","_downPointPx","_finishCoordinate","drawMode","getDrawMode","_sketchCoords","_sketchLine","_finishCondition","finishCondition","functions","TURE","_undoCondition","undoCondition","_undoStep","freehandUndoStep","_handleKeyboardEvent","_sketchLayer","FeaureLayer","getDefaultStyleFunction","_sketchPoint","_enableSketchPoint","enableSketchPoint","_sketchFeature","_geometryFunction","_sketchLineCoords","_freehand","freehand","_snapTolerance","snapTolerance","_maxLinePoints","maxLinePoints","_maxPolygonPoints","maxPolygonPoints","_minPoints","minPoints","DrawMode","_condition","condition","_shouldHandle","_squaredClickTolerance","clickUpTolerance","pcoordinates","_finishDrawing","_undoDrawing","_existInDrawMode","constructor","String","modeValue","toUpperCase","val","_geometryFactory","Constructor","mode","_initGeometryFunction","geometryFunction","opt_geometry","_freehandEnable","buttons","originalEvent","coordinateBeyond","pass","eventType","MOUSE_DRAG","_addToDrawing","MOUSE_MOVE","_handleMove","DBLCLICK","downPx","clickPx","pixel","_modifyDrawing","_updateSketchPoint","_startDrawing","_atFinish","_abortDrawing","startPoint","_drawMode","_updateSketchFeatures","DRAW_START","last","lastSecondPoint","lstPoint","tempLastRing","lastPoint2","pop","sketchPointGeom","sketchLineGeom","done","sketchFeature","DRAW_END","MultiPolygon","at","potentiallyDone","potentiallyFinishCoordinates","finishCoordinate","finishPixel","getPixelFromCoordinate","sketchPointgeom","_autoPan","undoStep","polygonDeleteStep","_updateState","active","shouldStopEvent","isIn","mapValue","addLayer","_active","Component","targetPointers","_trackedPointers","handlingDownUpSequence","_handleDragEvent","handleDragEvent","_handleMoveEvent","handleMoveEvent","browserEvent","stopEvent","_updateTrackedPointers","MOUSE_UP","handledUp","MOUSE_DOWN","handled","_isPointerDraggingEvent","pointerId","pan","view","currentCenter","zoomByDelta","opt_anchor","opt_duration","currentResolution","constrainResolution","calculateCenterZoom","constrainCenter","zoomWithoutConstraints","getViewDataExtent","allowCoordinatesBeyondImage","newCoordinate","e","oriEvent","eventTyle","getEventPixel","getCoordinateFromPixel","SINGLE_CLICK","CLICK","MOUSE_OVER","MOUSE_OUT","WHEEL","MOUSE_WHEEL","KEYDOWN","KEYPRESS","attributes","displayText","_geometryChangeKey","initArribute","textDisplay","styleHighLight","_handleGeometryChanged","_attributesMap","get","forEachAttribute","cloneAttributesMap","newMap","entries","renderStyleArr","_geometry","_displayText","_styleHighLight","newStyles","s","firstStyle","cloneStyle","unshift","_display","_textDisplay","FALSE","hasMutilSelectedSymbol","Symbol","_hitTolerance","hitTolerance","_hasSelectedStyle","_multiSelectMode","_selectLayer","_selectFeatures","selectMode","_selectMultiMode","selectMultiMode","_handleCtrlKeyDwon","_handleCtrlKeyUp","_keyPress","selectFeatures","_forEachStyle","SELECT","_isInSelectFeatures","_selectMode","selectedFeatures","_pixelTolerance","pixelTolerance","_movableGeometrys","movableGeometrys","_hasMoveableGeometrys","movableGeometrySet","Set","_deleteCondition","deleteCondition","_defaultDeleteCondition","_vertexEditableCondition","vertexEditableCondition","_edgeEditableCondition","edgeEditableCondition","_snappedToVertex","_snapSegments","_vertexFeature","_lastPixel","_overLayer","_dragSegments","_modified","_changingFeature","_ignoreNextSingleClick","_shouldAddToVertexs","_insertVertices","_downPoint","_currentMovedGeometry","_oldEditedVertex","lastPointerEvent_","_handlePointerMove","removePoint","_lastPointerEvent","willModifyFeatures_","_removeVertex","MODIFY_END","_compareIndexes","_willModifyFeatures","MODIFY_START","vertexFeature","insertVertices","filters","_handlePointerAtPixel","pixelCoordinate","sortByDistance","s1","s2","d1","_pointDistanceToSegment","d2","nodes","_getInExtent","closestSegment","_closestOnSegment","vertexPixel","dist","vertexEditable","MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX","pixel1","pixel2","squaredDist1","squaredDist2","coordinateIndex","_createOrUpdateVertexFeature","_insertVertex","segmentData","depth","MODIFY_SEGMENT_CIRCLE_CENTER_INDEX","setCenter","setRadius","_setGeometryCoordinates","downPoint","newSegmentData","tolarance","_ExtentUtil","gometryExtent","bufferExtent","jj","nextPoints","pathExtent","pathBufferExtent","circleGeometry","distanceToCenterSquared","distanceToCircumference","getRadius","mapBrowserEvent","isActive","singleClick","mouseWheel","noModifierKeys","targetNotEditable","altKey","metaKey","ctrlKey","shiftKey","tagName","lastCentroid","_kinetic","kinetic","_lastPointersCount","_noKinetic","begin","centroid","deltaX","deltaY","getViewState","pointerEvents","clientX","clientY","_delta","_useAnchor","useAnchor","_duration","duration","_lastAnchor","_startTime","_timeout","timeout","_timeoutId","_mode","wheelEvent","wheelDeltaY","now","Date","timeLeft","clearTimeout","setTimeout","_handleWheelZoom","maxDelta","_element","_target","_listenerKeys","overlayContainerStopEvent","appendChild","getElementById","className","zoomInLabel","zoomOutLabel","zoomInTipLabel","zoomOutTipLabel","inElement","setAttribute","title","createTextNode","outElement","cssClasses","_handleClick","_handleClickIn","_zoomByDelta","newResolution","_frameState","_layers","_toPixelTransform","Transform","create","_toCoordinateTransform","_animationDelayKey","_components","_controls","_createViewport","_overlayContainer","viewport","_overlayContainerStopEvent","overlayEvents","overlayEvent","optionsInner","parseOptionsInner","_renderer","rendererClass","_createBrowserEventHandler","_animationDelay","_renderFrame","layers","components","addComponents","component","controls","addControl","control","_overlayIdIndex","_overlays","overlays","_addOverlayInternal","overlay","_handleViewChange","_handleMouseWheelEvent","position","overflow","_viewport","_createRenderer","CanvasRenderer","_browserEventHandler","BrowserEventHandler","_handleBrowserEvent","keyboardEvent","cpts","cpt","cont","toPixelTransform","toCoordinateTransform","renderFrame","window","requestAnimationFrame","isRendered","layer","getFeaturesLayer","overlayId","toString","getTargetElement","updateSize","targetElement","computedStyle","parseFloat","viewportPosition","getBoundingClientRect","eventPosition","left","top","pixelPoint","apply","handleRize","bind","container","_context","_canvas","_rendererVisible","_layerRenderers","_transform","_addToContainer","insertBefore","childNodes","canvasWidth","canvasHeight","clearRect","sortByZIndex","updateTransform","_dispatchComposeEvent","RenderEventType","PRERENDER","layerRender","getLayerRenderer","prepareFrame","composeFrame","POSTRENDER","layerKey","layerRenderer","createLayerRenderer","ImageLayerRenderer","FeatureLayerRenderer","coordinateToPixelTransform","pixelToCoordinateTransform","compose","invert","setFromArray","state1","state2","composeEvent","RenderEvent","Renderer","contianer","_geometryRenderGroup","_textRender","TextRender","_maxExtent","_renderFeatures","_renderResolution","_renderExtent","_renderRevision","_cacheableThisTime","_getGeometryRender","GeometryRender","_renderFeaturesInOrder","frameExtent","layerRevision","featureLayerRenderBuffer","renderBuffer","renderExtent","frameStateOpt","transform","getTransform","preCompose","_clipExtent","renderStyle","_cloneRenderStyle","geomertyRender","_resetRender","restore","postCompose","rs","flatClipCoords","getClipCoords","save","beginPath","moveTo","lineTo","clip","maxExtent","transform2D","resetRenderOption","LayerRenderer","PointRender","LineRender","PolygonRender","_layer","renderedResolution","dx1","dy1","dx2","dy2","loadImage","imageState","_handleImageChange","renderIfReadyAndVisible","topLeft","topRight","bottomRight","bottomLeft","optTransform","tmp_","reset","dest","multiply","transform1","transform2","a1","b1","c1","e1","a2","b2","c2","e2","c","det","determinant","mat","_pixelCoordinates","ctx","styleArray","geomerty","pixelCoordinates","styleObj","renderOptions","radius","fillStyle","drawCircle","arc","PI","strokeStyle","lineWidth","lineDash","setLineDash","closePath","GeomertyRender","renderedTransform","equalsTransform","geometryCoordinates","hasDash","drawLine","renderOpt","lineJoin","geometryCoordinages","renderCoords","polygonCoords","renderMutilPolygon","renderPolygon","drawStylePolygon","k","kk","cd","_setTextStyle","lines","split","numLines","fontSize","lineY","round","measureText","lineIndex","lineText","strokeText","fillText","_image","_imageTransform","coordinateToCanvasPixelTransform","viewCenter","viewResolution","imageLayer","renderedExtent","projection","loaded","imageResolution","imagePixelRatio","imageTransform","clipped","globalAlpha","dw","dh","imageSmoothingEnabled","RENDER","trasform","_dragging","_down","_dragListenerKeys","_clickTimeoutId","_mapping","_mousedown","_mousemove","_mouseup","_mouseover","_mouseout","_registerSource","events","getEvents","eventName","documentDom","_isMoving","newEvent","_emulateClick","_innerOptions","_applyOptions","resolutionConstraint","_createResolutionConstraint","_zoomFactor","zoomFactor","_resolutions","resolutions","_minZoom","minZoom","centerConstraint","_createCenterConstraint","constraint","rotationConstraint","_createRotationConstraint","_constraints","_calculateCenter","zoom","_originalCenter","_originalResolution","_options","defaultMaxZoom","defaultZoomFactor","defaultMinZoom","defaultTileSize","maxZoom","createSnapToResolutions","defaultMaxResolution","pow","defaultMinResolution","floor","log","createSnapToPower","power","opt_maxLevel","oldLevel","newLevel","reso","z","opt_delta","opt_direction","_center","componentsDefaults","Kinetic","dragPan","mouseWheelZoom","zoomDuration","keyboard","keyborad","KeyboardHome","KeyboardPan","KeyboardZoom","zoomDelta","decay","minVelocity","delay","_decay","_minVelocity","_delay","_points","_initialVelocity","lastIndex","firstIndex","atan2","getDistance","_defaultCondition","keyCode","_goToHome","orignalCenter","originalCenter","originalResolution","keyEvent","charCode","charCodeAt","_pixelDelta","pixelDelta","mapUnitsDelta","controlDefaults","zoomControl","zoomOptions","homeControl","home","Home","homeOptions","zoomPercentageControl","zoomPercentage","zoomPercentageOptions","homeLabel","homeLabelTip","homeElement","ZoomPercentage","_innerElement","toFixed","html","innerHTML","_offset","_position","_positioning","_overlay","_insertFirst","insertFirst","_stopEvent","autoPan","_autoPanAnimation","autoPanAnimation","_autoPanMargin","autoPanMargin","_rendered","_bottom","_left","_right","_top","_mapPostrenderListenerKey","popupEelement","positioning","OverlayPositioning","TOP_LEFT","updatePixelPosition","setVisible","mapSize","updateRenderedPosition","BOTTOM_RIGHT","CENTER_RIGHT","TOP_RIGHT","left_","right_","BOTTOM_CENTER","CENTER_CENTER","TOP_CENTER","BOTTOM_LEFT","top_","bottom","bottom_","CENTER_LEFT","_panIntoView","mapRect","_getRect","clientHeight","clientWidth","overlayRect","margin","offsetLeft","offsetRight","offsetTop","offsetBottom","centerPx","newCenterPx","box","pageXOffset","pageYOffset","_setElement","pelement","_overlayId","_popupEelement","overlayContainer","read","json","featuresObj","featureObj","geometryObj","Error","propertiesObj","properties","write","featuresArr","getGeoJSONGeometryType","jsonType","geometry1","geometry2","ext1Arr","ext2Arr","pointIntersectsGeometry","lineIntersectsGeometry","polygonIntersectsGeometry","lineIntersectsLine","lineIntersectsPolygon","line1","line2","lineLinearRings1","lineLinearRings2","intersectsByLinearRings","poly","polygonIntersectsPolygon","lineLinearRings","polygon2LinearRings","LinearRing1","LinearRings2","segs1","getSortedSegments","segs2","seg1","seg1x1","seg1x2","seg1y1","seg1y2","seg2","seg2y1","seg2y2","jlen","segmentsIntersect","numSeg","segments","byX1","x11_21","y11_21","x12_11","y12_11","y22_21","x22_21","n1","n2","along1","along2","segs","seg","source","distanceToSegment","distanceSquaredToSegment","isDividedPointSymbol","alreadyUsedSymbol","dividePointSymbol","targetPolygon","splitLine","polygonCoordinates","lineCoordinates","dividedPointList","findIntersectionPoints","afterInsertLineCoords","insertDiveidePointsToSplitLineCoords","allPartsScliedFromLineCoords","sliceDividedPointFromLine","vertexListAfterDivide","insertDividePointsToCoordinates","results","renewal","featureCollection","arrs","handleHolesForPolygon","isInArray","singlePolygonCoords","item","findPartners","parts","ep","newParts","findNextPoint","m","mlen","goThrough","ePoint","ffpoint","eepoint","endPoint","nextPoint","updataStatus","isInOneSegment","onePoint","otherPoint","allPartsScliedFromLineCoordsTemp","findCount","group","jjlen","fPoint","tp","allParts","singleParts","isDividePointStart","getDividePoints","fP","eP","dfPoint","dp","intersectFrom","fromPoint","dePoint","afterArr","dividePoints","firstPointXY","item1","item2","p1","p2","afterInserted","isInDividedPointList","orialPoint","originPoint","ofPoint","oePoint","toPoint","itemDividedPoint","findOneIntersectionPoints","lineCoordinatesExtent","lineCoordinatesExtentBuffer","ntersectionPoints","intersectPoint","_findOneIntersectionPoints","intersectionPoints","ntp","intersectIndex","geometryCollection","addHoleToPolygon","needPoly","lineCoords","dividedPoints","polyGeometryType","isContained","targetGeometryType","polyContainsLine","polyContainsPoly","polygonContainsLinestring","poly2","poly2Type","hasOne","polygonWithHoles","polygon1","polygon2","holePolygon","resultPolygon","holeCoordinates","holeOutRings","polygonOutRings","tempHoleOutRings","tempPolygonOutRings","holeOriented","polygonOutRingOriented"],"mappings":"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","file":"meek.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Datatang\"] = factory();\n\telse\n\t\troot[\"Datatang\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"<%=baseUrl%>/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 39c4e0fc6746d39fad6d","/**\n * Created by zypc on 2016/11/28.\n */\n\nimport {Config} from 'meek/config'\nimport Counter from 'utils/counter'\nimport Helpers from 'utils/helpers'\nimport Obj from 'utils/obj'\nimport {Math} from 'utils/math'\nimport {Coordinate} from 'utils/coordinate'\nimport {Canvas} from 'utils/canvas'\n\nimport GeometryUtil from 'geometry/support/geometryutil'\nimport {ExtentUtil} from 'geometry/support/extentutil'\nimport {EventType} from 'meek/eventtype'\nimport {Style} from 'style/style'\n\nimport Event from 'core/event'\nimport EventManager from 'core/eventmanager'\n\nimport Geometry from 'geometry/geometry'\nimport Extent from 'geometry/extent'\nimport Point from 'geometry/point'\nimport Line from 'geometry/line'\nimport Polygon from 'geometry/polygon'\nimport MutilPolygon from 'geometry/mutilpolygon'\nimport Parallelogram from 'geometry/parallelogram'\n\nimport {ImageState} from 'lyr/image/imagestate'\nimport {ImageEvent} from 'lyr/image/imageevent'\nimport SingleImage from 'lyr/image/singleimage'\n\nimport PointStyle from 'style/pointstyle'\nimport LineStyle from 'style/linestyle'\nimport FillStyle from 'style/fillstyle'\nimport TextStyle from 'style/textstyle'\n\nimport FeatureLayer from 'lyr/featurelayer'\nimport SingleImageLayer from 'lyr/singleimagelayer'\nimport Draw from 'components/draw'\nimport DrawEvent from 'components/drawevent'\nimport Select from 'components/select'\nimport Modify from 'components/modify'\nimport DragPan from 'components/dragpan'\nimport MouseWheelZoom from 'components/mousewheelzoom'\n\nimport BrowserEvent from 'meek/browserevent'\nimport SelectEvent from 'components/selectevent'\nimport FeatureEvent from 'meek/featureevent'\nimport ModifyEvent from 'components/modifyevent'\n\nimport Control from 'control/control'\nimport Zoom from 'control/zoom'\n\nimport Feature from 'meek/feature'\nimport Map from 'meek/map'\nimport View from 'meek/view'\nimport Overlay from 'meek/overlay'\n\nimport GeoJSON from 'data/json/geojson'\n\nimport intersects from 'geometry/analysis/intersects'\nimport splitPolygonByPolyline from 'geometry/analysis/splitpolygon'\nimport contains from 'geometry/analysis/contains'\nimport polygonWithHole from 'geometry/analysis/polygonwithhole'\n\nconst version = VERSION\n\nexport default {\n  Config,\n  Coordinate,\n  Canvas,\n  Event,\n  SelectEvent,\n  FeatureEvent,\n  ModifyEvent,\n  EventManager,\n  Counter,\n  Helpers,\n  ImageState,\n  ImageEvent,\n  SingleImage,\n  Geometry,\n  Extent,\n  Point,\n  Line,\n  Polygon,\n  MutilPolygon,\n  Parallelogram,\n  Style,\n  PointStyle,\n  LineStyle,\n  FillStyle,\n  TextStyle,\n  FeatureLayer,\n  SingleImageLayer,\n  Draw,\n  DrawEvent,\n  BrowserEvent,\n  EventType,\n  Feature,\n  Map,\n  View,\n  Overlay,\n  GeometryUtil,\n  ExtentUtil,\n  Select,\n  Modify,\n  DragPan,\n  Control,\n  Zoom,\n  Obj,\n  Math,\n  MouseWheelZoom,\n  GeoJSON,\n  version,\n  intersects,\n  splitPolygonByPolyline,\n  contains,\n  polygonWithHole\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","/**\n * Created by zhangyong on 2017/3/20.\n */\n\n\n/**\n * Constants defined width the define tag connot be changed in application code,\n * but can be set at compile time.\n *\n * @type {{}}\n */\nexport const Config = {}\n\n/**\n * Enable debug mode ,Default is 'true'\n *\n * 配置DEBUG\n *\n * @property DEBUG\n * @static\n * @type {Boolean}\n */\nConfig.DEBUG = true\n\n/**\n * Default max zomm factor\n *\n * @property DEFAULT_ZOOM_FACTOR\n * @static\n * @type {Number}\n */\nConfig.DEFAULT_ZOOM_FACTOR = 2\n\n/**\n * Default max zoom level for map view.\n * Defaylt is '10'\n *\n * @property DEFAULT_MAX_ZOOM\n * @static\n * @type {Number}\n */\nConfig.DEFAULT_MAX_ZOOM = 10\n\n/**\n * Default min zoom level for map view.\n * Default is '0'\n *\n * @property DEFAULT_MIN_ZOOM\n * @static\n * @type {Number}\n */\nConfig.DEFAULT_MIN_ZOOM = 0\n\n/**\n * Maxinum mouse wheel delta.\n *\n * @property MOUSE_WHEEL_ZOOM_MAXDELTA\n * @static\n * @type {Number}\n */\nConfig.MOUSE_WHEEL_ZOOM_MAXDELTA = 1\n\n/**\n * Default tile size\n *\n * @property DEFAULT_TILE_SIZE\n * @static\n * @type {Number}\n */\nConfig.DEFAULT_TILE_SIZE = 256\n\n\nexport default{\n  Config\n}\n\n\n// WEBPACK FOOTER //\n// ./src/meek/config.js","\nlet uid = 0\n\nexport function getUid () {\n  return uid++\n}\n\nexport default {\n  getUid\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/counter.js","/**\n * Created by zypc on 2016/11/13.\n */\n\n\n/**\n * 将rbg数组装换成rgba的字符串格式\n * @param color rgb数组\n * @param alpha 透明度\n * @returns {string} 返回rgba格式字符串\n */\nexport function colorToString(color,alpha = 1){\n  let r = color[0]\n  if (r != (r | 0)) {\n    r = (r + 0.5) | 0\n  }\n  \n  let g = color[1]\n  if (g != (g | 0)) {\n    g = (g + 0.5) | 0\n  }\n  \n  let b = color[2]\n  if (b != (b | 0)) {\n    b = (b + 0.5) | 0\n  }\n  \n  return `rgba(${r}, ${g} , ${b} , ${alpha} )`\n}\n\nexport default {\n  colorToString\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/helpers.js","/**\n * Created by zhangyong on 2017/6/5.\n */\n\nexport default class Obj {\n  \n  /**\n   * Get a collection from object\n   * @param object\n   * @returns {Array}\n   */\n  static getValues (object) {\n    const values = []\n    for (let property in object) {\n      values.push(object[property])\n    }\n    return values\n  }\n  \n  /**\n   * Clear all properties in object\n   * @param object\n   */\n  static clear (object) {\n    for (let property in object) {\n      Reflect.deleteProperty(object, property)\n    }\n  }\n  \n  /**\n   * Convert an object to a map instance\n   * @param obj\n   * @returns {Map}\n   */\n  static objectToMap (obj) {\n    let map = new Map()\n    \n    for (let ke of Object.keys(obj)) {\n      map.set(ke, obj[ke])\n    }\n    \n    return map\n  }\n  \n  /**\n   *\n   * Convert a map object to object\n   *\n   * @static\n   * @method mapToObject\n   * @param map {Map} 传入的 Map 的对象\n   * @returns {Object} 装换成后的 Object 的对象\n   */\n  static mapToObject (map) {\n    // 合法性判断\n    if (map === undefined || map === null) {\n      return {}\n    }\n    \n    let object = {}\n    map.forEach( (value, key) => {\n      object[key] = value\n    })\n    \n    return object\n  }\n  \n  \n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/obj.js","/**\n * Created by zhangyong on 2017/6/5.\n */\n\n\n\nexport function clamp (value, min, max) {\n  return Math.min(Math.max(value, min), max)\n}\n\n\nexport function lerp (a, b, x) {\n  return a + x * (b - a)\n}\n\nexport default {\n  clamp,\n  lerp\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/math.js","/**\n * Created by zypc on 2017/6/4.\n */\nexport const Coordinate = {}\n\nCoordinate.add = (coordinate, delta)  => {\n  coordinate[0] += delta[0]\n  coordinate[1] += delta[1]\n  return coordinate\n}\n\n\nCoordinate.rotate = (coordinate, angle) => {\n  const cosAngle = Math.cos(angle)\n  const sinAngle = Math.sin(angle)\n  const x = coordinate[0] * cosAngle - coordinate[1] * sinAngle\n  const y = coordinate[1] * cosAngle + coordinate[0] * sinAngle\n  coordinate[0] = x\n  coordinate[1] = y\n  return coordinate\n}\n\nCoordinate.scale = (coordinate, scale) => {\n  coordinate[0] *= scale\n  coordinate[1] *= scale\n  return coordinate\n}\n\n\nexport default {\n  Coordinate\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/coordinate.js","/**\n * Created by zhangyong on 2017/6/7.\n */\n\n\nexport const Canvas = {}\n\n\n/**\n *\n * @param context\n * @param rotation\n * @param offsetX\n * @param offsetY\n */\nCanvas.rotateAtOffset = function(context, rotation, offsetX, offsetY) {\n  if (rotation !== 0) {\n    context.translate(offsetX, offsetY)\n    context.rotate(rotation)\n    context.translate(-offsetX, -offsetY)\n  }\n}\n\n\n\nexport default {\n  Canvas\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/canvas.js","/**\n * Created by zhangyong on 2017/5/23.\n */\n\nimport Geometry from '../../geometry/geometry'\n\n/**\n * 判断两个点是否相交\n *\n * @method pointIntersectPoint\n * @param pointA\n * @param pointB\n * @param tolerance {Number}\n * @returns {Boolean}\n */\nexport function pointIntersectPoint (pointA, pointB, tolerance) {\n  const toleranceDistance = tolerance ? tolerance : 2\n  \n  const distance = squaredDistance(pointA.x, pointA.y, pointB.x, pointB.y)\n  if (distance <= toleranceDistance) {\n    return true\n  }\n  \n  return false\n}\n\n/**\n * 判断点是否与线相交\n *\n * @method pointIntersectLine\n * @param pointA\n * @param line\n * @param tolerance {Number}\n * @returns {Boolean}\n */\nexport function pointIntersectLine (pointA, line, tolerance) {\n  const path = line.path\n  const squaredSegmentDistanceFn = squaredSegmentDistance\n  const x = pointA.x\n  const y = pointA.y\n  \n  let find = false\n  for (let i = 0, ii = path.length - 1; i < ii; i++) {\n    let nowP = path[i]\n    let nextP = path[i + 1]\n    let distance = squaredSegmentDistanceFn(x, y, nowP.x, nowP.y, nextP.x, nextP.y)\n    distance = Math.sqrt(distance)\n    if (distance <= tolerance) {\n      find = true\n      break\n    }\n  }\n  \n  return find\n}\n\n/**\n * Return the square of the closest distance between the point\n * and the line segment.\n * @param x\n * @param y\n * @param x1\n * @param y1\n * @param x2\n * @param y2\n * @returns {number}\n */\nexport function squaredSegmentDistance (x, y, x1, y1, x2, y2) {\n  const dx = x2 - x1\n  const dy = y2 - y1\n  if (dx !== 0 || dy !== 0) {\n    let t = ((x - x1) * dx + (y - y1) * dy) / (dx * dx + dy * dy)\n    if (t > 1) {\n      x1 = x2\n      y1 = y2\n    } else if (t > 0) {\n      x1 += dx * t\n      y1 += dy * t\n    }\n  }\n  \n  return squaredDistance(x, y, x1, y1)\n}\n\n/**\n *\n * @param coordinate\n * @param segment\n * @returns {number}\n */\nexport function squaredDistanceToSegment (coordinate, segment) {\n  const closestCoordinate = closestOnSegment(coordinate, segment)\n  return squaredDistance(coordinate[0], coordinate[1], closestCoordinate[0], closestCoordinate[1])\n}\n\n/**\n * 判断两个坐标是否相等\n *\n * @method equals\n * @param coordinate1\n * @param coordinate2\n * @returns {Boolean}\n */\nexport function equals (coordinate1, coordinate2) {\n  let equals = true\n  for (let i = coordinate1.length - 1; i >= 0; --i) {\n    if (coordinate1[i] != coordinate2[i]) {\n      equals = false\n      break\n    }\n  }\n  \n  return equals\n}\n\n/**\n * 计算两点之间的距离的平方\n *\n * @method squaredDistance\n * @param x1\n * @param y1\n * @param x2\n * @param y2\n * @returns {Number} squared distance\n */\nexport function squaredDistance (x1, y1, x2, y2) {\n  const dx = x2 - x1\n  const dy = y2 - y1\n  return dx * dx + dy * dy\n}\n\n/**\n * 计算两点之间的距离\n *\n * @method distance\n * @param coord1\n * @param coord2\n * @returns {Number}\n */\nexport function distance (coord1, coord2) {\n  return Math.sqrt(squaredDistance(coord1[0], coord1[1], coord2[0], coord2[1]))\n}\n\n/**\n *\n * @param coordinate {Array}\n * @param segment\n * @returns {Array}\n */\nexport function closestOnSegment (coordinate, segment) {\n  const x0 = coordinate[0]\n  const y0 = coordinate[1]\n  const start = segment[0]\n  const end = segment[1]\n  const x1 = start[0]\n  const y1 = start[1]\n  const x2 = end[0]\n  const y2 = end[1]\n  const dx = x2 - x1\n  const dy = y2 - y1\n  \n  const along = (dx === 0 && dy === 0) ? 0 :\n  ((dx * (x0 - x1)) + (dy * (y0 - y1))) / ((dx * dx + dy * dy) || 0)\n  \n  let x, y\n  if (along <= 0) {\n    x = x1\n    y = y1\n  } else if (along >= 1) {\n    x = x2\n    y = y2\n  } else {\n    x = x1 + along * dx\n    y = y1 + along * dy\n  }\n  \n  return [x, y]\n}\n\n/**\n *\n * @param flatCoordinates\n * @param offset\n * @param ends\n * @param stride\n * @param x\n * @param y\n * @returns {oolean}\n */\nexport function linearRingsContainsXY (flatCoordinates, offset, ends, stride, x, y) {\n  if (ends.length === 0) {\n    return false\n  }\n  \n  if (!linearRingContainsXY(flatCoordinates, offset, ends[0], stride, x, y)) {\n    return false\n  }\n  \n  let i, ii\n  for (i = 1, ii = ends.length; i < ii; ++i) {\n    if (linearRingContainsXY(flatCoordinates, ends[i - 1], ends[i], stride, x, y)) {\n      return false\n    }\n  }\n  \n  return true\n}\n\n/**\n *\n * @param flatCoordinates\n * @param offset\n * @param end\n * @param stride\n * @param x\n * @param y\n * @returns {boolean}\n */\nexport function linearRingContainsXY (flatCoordinates, offset, end, stride, x, y) {\n  // http://geomalgorithms.com/a03-_inclusion.html\n  // Copyright 2000 softSurfer, 2012 Dan Sunday\n  // This code may be freely used and modified for any purpose\n  // providing that this copyright notice is included with it.\n  // SoftSurfer makes no warranty for this code, and cannot be held\n  // liable for any real or imagined damage resulting from its use.\n  // Users of this code must verify correctness for their application.\n  let wn = 0\n  let x1 = flatCoordinates[end - stride]\n  let y1 = flatCoordinates[end - stride + 1]\n  for (; offset < end; offset += stride) {\n    let x2 = flatCoordinates[offset]\n    let y2 = flatCoordinates[offset + 1]\n    \n    if (y1 <= y) {\n      if (y2 > y && ((x2 - x1) * (y - y1)) - ((x - x1) * (y2 - y1)) > 0) {\n        wn++\n      }\n    } else if (y2 <= y && ((x2 - x1) * (y - y1)) - ((x - x1) * (y2 - y1)) < 0) {\n      wn--\n    }\n    \n    x1 = x2\n    y1 = y2\n  }\n  \n  return wn !== 0\n}\n\n/**\n * 计算在 AB 延长线上的距离点 B d 距离的点\n * @param xa A 点的 X\n * @param ya A 点的 Y\n * @param xb B 点的 X\n * @param yb B 点的 Y\n * @param d 距离 B 点 d 距离\n * @returns {Array} 返回延长线上的点\n */\nexport function getPointInExtendedLineByDistanceFromAB (xa, ya, xb, yb, d) {\n  let xab, yab\n  let xbd\n  let xd, yd\n  \n  xab = xb - xa\n  yab = yb - ya\n  \n  xbd = Math.sqrt((d * d) / ((yab / xab) * (yab / xab) + 1))\n  \n  if (xab > 0) {\n    xbd = Math.sqrt((d * d) / ((yab / xab) * (yab / xab) + 1))\n  } else {\n    xbd = -Math.sqrt((d * d) / ((yab / xab) * (yab / xab) + 1))\n  }\n  \n  xd = xb + xbd\n  yd = yb + yab / xab * xbd\n  \n  return [xd, yd]\n}\n\nexport function simplify(geometry) {\n  if (!geometry) {\n    return geometry\n  }\n  \n  let coordinates\n  const geoType = geometry.geometryType\n  if (geoType === Geometry.POLYGON) {\n    coordinates = geometry.getCoordinates()[0]\n  } else if (geoType === Geometry.LINE) {\n    coordinates = geometry.getCoordinates()\n    \n    const sliceCoords = coordinates.slice(1, coordinates.length - 2)\n    const newCoords = [coordinates[0]]\n    \n    for (let i = 0, len = sliceCoords.length ;i < len; i += 2) {\n      newCoords.push(sliceCoords[i])\n    }\n  \n    newCoords.push(coordinates[coordinates.length - 1])\n    geometry.setCoordinates(newCoords)\n  }\n}\n\nexport default {\n  linearRingContainsXY,\n  linearRingsContainsXY,\n  pointIntersectPoint,\n  squaredDistance,\n  closestOnSegment,\n  getPointInExtendedLineByDistanceFromAB,\n  equals,\n  simplify,\n  distance\n}\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/support/geometryutil.js","/**\n * Created by zypc on 2016/11/13.\n */\nimport BaseObject from '../core/baseobject'\nimport {ExtentUtil} from './support/extentutil'\n\n/**\n * 图形基础类，不能直接实例化改类，只能继承和扩展，并实现该类定义的接口\n *\n * @class Geometry\n * @extends BaseObject\n * @module geometry\n * @constructor\n */\nexport default class Geometry extends BaseObject {\n\n  /**\n   * @constructor\n   */\n  constructor () {\n    super()\n    \n    this._extent = null\n  \n    /**\n     * @type {number}\n     */\n    this.stride = 2\n  }\n\n  /**\n   * 获取图形的类型\n   *\n   * @property geometryType\n   * @type {String}\n   */\n  get geometryType () {return Geometry.UNDEFINED}\n\n  /**\n   * 获取图形的最小外接矩形(MBR-Minimum Bounding Rectangle)\n   * 除去点意外，任何图形都有最小外接矩形\n   *\n   * @property extent\n   * @type {Datatang.Extent}\n   */\n  get extent () { return this._extent }\n  \n  /**\n   * 获取图形是否是逆时针\n   *\n   * @property anticlockwise\n   * @type {Boolean}\n   */\n  get anticlockwise () {\n    const geometryType = this.geometryType\n    const coordinates = this.getCoordinates()\n  \n    let fp, sp, f1, f2, f3\n    \n    if (geometryType === Geometry.LINE ) {\n      f1 = [0, 0]\n      f2 = coordinates[0]\n      f3 = coordinates[1]\n    } else if ( geometryType === Geometry.POLYGON ||\n                geometryType === Geometry.EXTENT ) {\n      f1 = coordinates[0]\n      f2 = coordinates[1]\n      f3 = coordinates[2]\n    }\n  \n    fp = [f2[0] - f1[0], f2[1] - f1[1]]\n    sp = [f3[0] - f2[0], f3[1] - f2[1]]\n    \n    return fp[0] * sp[1] - sp[0] * fp[1] < 0\n  }\n  \n  /**\n   * 判断传入的点坐标是否在图形内\n   *\n   * @method pointInExtent\n   * @param coordinate {Array} 包含x, y的点数组\n   * @return {Boolean} ture returned if success, false otherwise.\n   */\n  pointInExtent (coordinate) {\n    return ExtentUtil.containsPoint(this.extent, coordinate)\n  }\n  \n  /**\n   * 判断是否相交\n   *\n   * intersect\n   * @param geomtry {Geometry}\n   * @returns {Boolean}\n   */\n  intersect (geomtry) { // eslint-disable-line no-unused-vars\n    return false\n  }\n  \n  /**\n   * 获取图形的坐标信息\n   * @abstract\n   * @method getCoordinates\n   * @return {Array} 返回坐标数组\n   */\n  getCoordinates () { return [] }\n\n  /**\n   * 计算表单显示的坐标\n   *\n   *  @method getFormShowPosition\n   *  @param {Number} offsetX 表单显示的 x 偏移量, 默认为 0\n   *  @param {Number} offsetY 表单显示的 y 偏移量, 默认为 0\n   *  @return {Array} 返回点坐标的数组表达方式\n   *  @example\n   *\n   *      var point = geometry.getFormShowPosition(10, 10)\n   *      Form.position = point\n   */\n  getFormShowPosition (offsetX = 0, offsetY = 0) { return [] } // eslint-disable-line no-unused-vars\n  \n  /**\n   * 计算线的平面内点\n   *\n   * @method getFlatInteriorPoint\n   * @returns {Array}\n   */\n  getFlatInteriorPoint () { return [] }\n  \n  /**\n   * 判断当前图形是否包含一个点\n   *\n   * @abstract\n   * @method containsXY\n   * @param x {Number} x 坐标信息\n   * @param y {Number} y 坐标信息\n   * @return {Boolean} ture returned if contains, false otherwise\n   */\n  containsXY (x, y) { return true } // eslint-disable-line no-unused-vars\n  \n  /**\n   * 移动改图形，移动图形，需要传递x，y的移动量\n   *\n   * @method move\n   * @abstract\n   * @param x {Number} x 坐标信息\n   * @param y {Number} y 坐标信息\n   */\n  move (x = 0,y = 0, opts) {} // eslint-disable-line no-unused-vars\n  \n  /**\n   * 定义对图形本身的缩放方法\n   *\n   * @method scale\n   * @abstract\n   * @param scale {Number} 缩放比率\n   * @param origin {Array} 缩放参考点\n   */\n  scale(scale = 1,origin) {} // eslint-disable-line no-unused-vars\n  \n  /**\n   * 定义图形本身的旋转方法\n   *\n   * @method rotate\n   * @abstract\n   * @param angle {Number} 旋转的角度\n    * @param anchor {Object}\n   */\n  rotate(angle,anchor) {} // eslint-disable-line no-unused-vars\n  \n  /**\n   * 创建一个简化后的图形副本\n   *\n   * @method simplify\n   * @abstract\n   * @param tolerance {Number} 阈值\n   */\n  simplify(tolerance = 1) {} // eslint-disable-line no-unused-vars\n \n  /**\n   * 将图形转换成json格式\n   *\n   * @method toJSON\n   * @abstrct\n   */\n  toJSON () {}\n  \n  /**\n   * 克隆一个图形副本\n   *\n   * @method clone\n   * @abstract\n   */\n  clone () {}\n}\n\n/**\n * 点类型\n *\n * @property POINT\n * @static\n * @final\n * @type {String}\n */\nGeometry.POINT = 'point'\n\n/**\n * 多点类型\n *\n * @property MULTI_POINT\n * @static\n * @final\n * @type {String}\n */\nGeometry.MULTI_POINT = 'multi_point'\n\n/**\n * 线类型\n *\n * @property LINE\n * @static\n * @final\n * @type {String}\n */\nGeometry.LINE = 'line'\n\n/**\n * 多线类型\n *\n * @property MULTI_LINE\n * @static\n * @final\n * @type {String}\n */\nGeometry.MULTI_LINE = 'multi_line'\n\n/**\n * 多边形类型\n *\n * @property POLYGON\n * @static\n * @final\n * @type {String}\n */\nGeometry.POLYGON = 'polygon'\n\n/**\n * 多个多边形类型\n *\n * @property MULTI_POLYGON\n * @static\n * @final\n * @type {String}\n */\nGeometry.MULTI_POLYGON = 'multi_polygon'\n\n/**\n * 矩形类型\n *\n * @property EXTENT\n * @static\n * @final\n * @type {String}\n */\nGeometry.EXTENT = 'extent'\n\n/**\n * 圆类型\n *\n * @property CIRCLE\n * @static\n * @final\n * @type {String}\n */\nGeometry.CIRCLE = 'circle'\n\n/**\n * 定义平行四边形图形\n * @type {string}\n */\nGeometry.PARALLELOGRAM = 'parallelogram'\n\n/**\n * 未定义\n *\n * @property UNDEFINED\n * @static\n * @final\n * @type {String}\n */\nGeometry.UNDEFINED = 'undefined'\n\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/geometry.js","/**\n * Created by zypc on 2016/11/13.\n */\n// The BaseObject is a base class that only can be inherited, not be instanced.\nimport Event from './event'\nimport {getUid} from '../utils/counter'\nimport {EventType} from '../meek/eventtype'\n\n/**\n * 对象基类，所有子类原则上要继承该类。\n *\n * 该类提供一个 id 和一个 revision,id 作为类的唯一标示\n *\n * @class BaseObject\n * @extends Event\n * @constructor\n * @module core\n */\nexport default class BaseObject extends Event {\n\n  /**\n   * Create a BaseObject\n   *\n   * 构造函数\n   *\n   * @consructor\n   */\n  constructor () {\n    super()\n  \n    /**\n     * ID\n     *\n     * @property id\n     * @type {Number}\n     * @private\n     */\n    this._id = getUid()\n  \n    /**\n     * 版本号\n     *\n     * @property revision\n     * @type {Number}\n     * @private\n     */\n    this._revision = 0\n  }\n  \n  /**\n   * 此方法用于派发map渲染事件\n   *\n   * @example this.changed() | super.changed()\n   *\n   * @method changed\n   */\n  changed () {\n    ++this._revision\n    this.dispatchEvent(EventType.CHANGE)\n  }\n\n  /**\n   *\n   * ID属性，用于获取该对象的ID编号\n   *\n   * @property id\n   * @type {Number}\n   */\n  get id () {\n    return this._id\n  }\n  \n  /**\n   *\n   * 地图渲染的版本号\n   *\n   * @property revision\n   * @type {Number}\n   * @returns {Number} the revision id\n   */\n  get revision () { return this._revision }\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/baseobject.js","/**\n * Created by zypc on 2016/11/13.\n */\n\n // The event processor for all subclasss, which can allow subclass\n // to handle event dispatching and listening.This is the top level class\n/**\n * 顶层事件处理器类,让子类具备事件的监听和派发\n *\n * @class Event\n * @module core\n * @constructor new Event()\n *\n */\nexport default class Event {\n  \n  /**\n   * Event's constructor\n   * @constructor constructor\n   */\n  constructor () {\n    this._pendingRemovals = {}\n\n    this._listeners = {}\n    this._dispatching = {}\n\n    this.nullFunction = function () {}\n  }\n  \n  /**\n   * 根据事件标识获取对应标识的方法列表\n   *\n   * @method getListeners\n   * @param type {String} event type 事件标识\n   * @return {Array} 返回对应事件标示的函数数组\n   */\n  getListeners (type) {\n    return this._listeners[type]\n  }\n  \n  /**\n   * 判断是否含有对应事件标识的监听\n   *\n   * @method hasListener\n   * @param optType {Boolean}\n   * @returns {Boolean} ture if exsit ,false otherwise\n   */\n  hasListener (optType) {\n    return optType ?\n      Reflect.has(this._listeners, optType) :\n      Object.keys(this._listeners).length > 0\n  }\n\n  /**\n   * 移除事件监听\n   *\n   * @method removeEventListener\n   * @param type {String} event type\n   * @param listener {Array} listeners for event type\n   */\n  removeEventListener (type, listener) {\n    const listeners = this._listeners[type]\n    if (listeners) {\n      let index = listeners.indexOf(listener)\n\n      if (Reflect.has(this._pendingRemovals, type)) {\n        listeners[index] = this.nullFunction\n        ++this._pendingRemovals[type]\n      } else {\n        listeners.splice(index, 1)\n\n        if (listeners.length === 0) {\n          Reflect.deleteProperty(this._listeners, type)\n        }\n      }\n    }\n  }\n  \n  /**\n   * 添加事件监听,需要指定事件标示和处理方法\n   *\n   * @example\n   *    map.addEventListener('singleclick', function(event) {})\n   *\n   * @method addEventListener\n   * @param type {String} event type\n   * @param listener {Array} listeners for event type\n   */\n  addEventListener (type, listener) {\n    let listeners = this._listeners[type]\n    if (!listeners) {\n      listeners = this._listeners[type] = []\n    }\n\n    if (listeners.indexOf(listener) === -1) {\n      listeners.push(listener)\n    }\n  }\n  \n  /**\n   * 事件派发\n   *\n   * @example\n   * this.dispatchEvent(EventType.CHANGE)\n   *\n   * @method dispatchEvent\n   * @param event {String} event type string\n   * @returns {Boolean} ture if success ,false otherwise.\n   */\n  dispatchEvent (event) {\n    const evt = typeof event === 'string' ? {type: event} : event\n    const type = evt.type\n    evt.target = this\n    const listeners = this._listeners[type]\n    let propagate\n\n    if (listeners) {\n      if(!Reflect.has(this._dispatching, type)) {\n        this._dispatching[type] = 0\n        this._pendingRemovals[type] = 0\n      }\n\n      ++this._dispatching[type]\n\n      for (let i = 0, ii = listeners.length; i < ii; ++i) {\n        if (listeners[i].call(this, evt) === false || evt.propagationStopped) {\n          propagate = false\n          break\n        }\n      }\n\n      --this._dispatching[type]\n\n      if (this._dispatching[type] === 0) {\n        let pendingRemovals = this._pendingRemovals[type]\n        Reflect.deleteProperty(this._pendingRemovals, type)\n\n        while (pendingRemovals--) {\n          this.removeEventListener(type, this.nullFunction)\n        }\n\n        Reflect.deleteProperty(this._dispatching, type)\n      }\n\n      return propagate\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/event.js","/**\n * Created by zypc on 2016/12/6.\n */\nexport const EventType = {}\n\n/**\n * Triggered when map is needed to render\n *\n * @property CHANGE\n * @static\n * @final\n * @type {String}\n */\nEventType.CHANGE = 'change'\n\n\n/**\n * Triggered when view has been changed\n *\n * 当地图视图发生变化时将会派发改事件\n *\n * @property VIEW_CHANGED\n * @static\n * @final\n * @type {String}\n */\nEventType.VIEW_CHANGED = 'viewchanged'\n\n/**\n * Triggered when a image download error\n *\n * @property ERROR\n * @static\n * @final\n * @type {String}\n */\nEventType.ERROR = 'error'\n\n/**\n * Triggered when a image finish load\n *\n * @property LOAD\n * @static\n * @final\n * @type {String}\n */\nEventType.LOAD = 'load'\n\n/**\n * 当浏览器窗口的尺寸发生变化时派发\n *\n * @property RESIZE\n * @static\n * @final\n * @type {string}\n */\nEventType.RESIZE = 'resize'\n\n\nexport default {\n  EventType\n}\n\n\n\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/meek/eventtype.js","/**\n * Created by zhangyong on 2017/5/24.\n */\n\nexport const ExtentUtil = {}\n\n/**\n * 创建一个空矩形\n *\n * @method createEmpty\n * @returns {[*,*,*,*]}\n */\nExtentUtil.createEmpty = function () {\n  return [Infinity, Infinity, -Infinity, -Infinity]\n}\n\n/**\n *\n * @param flatCoordinates\n * @param offset\n * @param end\n * @param stride\n * @param opt_extent\n */\nExtentUtil.createOrUpdateFromFlatCoordinates = function(flatCoordinates, offset, end, stride, opt_extent) {\n  const extent = ExtentUtil.createOrUpdateEmpty(opt_extent)\n  return extendFlatCoordinates(\n    extent, flatCoordinates, offset, end, stride)\n}\n\nconst extendXY = function(extent, x, y) {\n  extent[0] = Math.min(extent[0], x)\n  extent[1] = Math.min(extent[1], y)\n  extent[2] = Math.max(extent[2], x)\n  extent[3] = Math.max(extent[3], y)\n}\n\n\nconst extendFlatCoordinates = function(extent, flatCoordinates, offset, end, stride) {\n  for (; offset < end; offset += stride) {\n    extendXY(\n      extent, flatCoordinates[offset], flatCoordinates[offset + 1])\n  }\n  \n  return extent\n}\n\n/**\n *\n * @param opt_extent\n * @returns {*}\n */\nExtentUtil.createOrUpdateEmpty = function(opt_extent) {\n  return ExtentUtil.createOrUpdate(\n    Infinity, Infinity, -Infinity, -Infinity, opt_extent)\n}\n\n/**\n * 创建或更新矩形\n *\n * @method createOrUpdate\n * @param minX {Number}\n * @param minY {Number}\n * @param maxX {Number}\n * @param maxY {Number}\n * @param opt_extent {Array}\n * @returns {*}\n */\nExtentUtil.createOrUpdate = function(minX, minY, maxX, maxY, opt_extent) {\n  if (opt_extent) {\n    opt_extent[0] = minX\n    opt_extent[1] = minY\n    opt_extent[2] = maxX\n    opt_extent[3] = maxY\n    return opt_extent\n  } else {\n    return [minX, minY, maxX, maxY]\n  }\n}\n\n/**\n * 获取矩形的中心点\n *\n * @method getCenter\n * @param extent\n * @returns {[*,*]}\n */\nExtentUtil.getCenter = function(extent) {\n  return [(extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2]\n}\n\n/**\n * Create an empty extent.\n * @returns {[*,*,*,*]}\n */\nExtentUtil.createScaleExtent = function (center,value) {\n  return [center.x  - value, center.y  - value, center.x  + value, center.y + value]\n}\n\n/**\n *\n * @param point1\n * @param point2\n * @returns {[*,*,*,*]}\n */\nExtentUtil.boundingExtentFromTwoPoints = function (point1, point2) {\n  let xmin = 0, ymin = 0, xmax = 0, ymax = 0\n  \n  if (point1[0] > point2[0]) {\n    xmin = point2[0]\n    xmax = point1[0]\n  } else {\n    xmin = point1[0]\n    xmax = point2[0]\n  }\n  \n  if (point1[1] > point2[1]) {\n    ymin = point2[1]\n    ymax = point1[1]\n  } else {\n    ymin = point1[1]\n    ymax = point2[1]\n  }\n  \n  return [xmin, ymin, xmax, ymax]\n}\n\n/**\n * 通过坐标数据构建矩形\n *\n * @method boundingExtent\n * @param extent\n * @param coordinate\n */\nExtentUtil.boundingExtent = function (coordinates) {\n  let extent = ExtentUtil.createEmpty()\n  \n  for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n    ExtentUtil.extendCoordinate(extent, coordinates[i])\n  }\n  \n  return [\n    ExtentUtil.getBottomLeft(extent),\n    ExtentUtil.getBottomRight(extent),\n    ExtentUtil.getTopRight(extent),\n    ExtentUtil.getTopLeft(extent),\n    ExtentUtil.getBottomLeft(extent)\n  ]\n}\n\n/**\n * Build an extent that includes all given coordinates.\n * @param extent\n * @param coordinate\n */\nExtentUtil.boundingSimpleExtent = function (coordinates) {\n  let extent = ExtentUtil.createEmpty()\n  \n  for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n    ExtentUtil.extendCoordinate(extent, coordinates[i])\n  }\n  \n  return extent\n}\n\n/**\n * 通过坐标更新矩形\n *\n * @method extendCoordinate\n * @param extent {Geometry}\n * @param coordinate {Array}\n */\nExtentUtil.extendCoordinate = function(extent, coordinate) {\n  if (coordinate[0] < extent[0]) {\n    extent[0] = coordinate[0]\n  }\n  \n  if (coordinate[0] > extent[2]) {\n    extent[2] = coordinate[0]\n  }\n  \n  if (coordinate[1] < extent[1]) {\n    extent[1] = coordinate[1]\n  }\n  \n  if (coordinate[1] > extent[3]) {\n    extent[3] = coordinate[1]\n  }\n}\n\n\n/**\n * 获取矩形右侧线段坐标\n *\n * getBottomRight\n * @param extent {Geometry}\n * @returns {[*,*]}\n */\nExtentUtil.getBottomRight = function (extent) {\n  return [extent[2], extent[1]]\n}\n\n\n/**\n * 获取矩形左侧线段坐标\n *\n * getBottomLef\n * @param extent {Geometry}\n * @returns {[*,*]}\n */\nExtentUtil.getBottomLeft = function (extent) {\n  return [extent[0], extent[1]]\n}\n\n\n/**\n * Get the top right coordinate of an extent\n * extent\n * @returns {[*,*]}\n */\nExtentUtil.getTopRight = function (extent) {\n  return [extent[2], extent[3]]\n}\n\n\n/**\n * Get the top left coordinate of an extent\n *  extent\n * @returns {[*,*]}\n */\nExtentUtil.getTopLeft = function (extent) {\n  return [extent[0], extent[3]]\n}\n\n/**\n * 判断点是否在矩形上\n *\n * @method containsPoint\n * @param extent {Geometry}\n * @param point {Array}\n * @returns {Boolean}\n */\nExtentUtil.containsPoint = function(extent, point){\n  const x = point[0]\n  const y = point[1]\n  \n  if (Array.isArray(extent)) {\n    return extent[0] <= x && x <= extent[2] &&\n           extent[1] <= y && y <= extent[3]\n  } else {\n    return (extent.xmin - 1) <= x && x <= (extent.xmax + 1) &&\n      (extent.ymin - 1)<= y && y <= (extent.ymax + 1)\n  }\n}\n\n/**\n * Return extent increased by the provided value.\n * @param extent\n * @param value\n * @param optExtent\n * @returns {*}\n */\nExtentUtil.buffer = function(extent, value, optExtent) {\n  if (optExtent) {\n    optExtent[0] = extent[0] - value\n    optExtent[1] = extent[1] - value\n    optExtent[2] = extent[2] + value\n    optExtent[3] = extent[3] + value\n    return optExtent\n  } else {\n    return [\n      extent[0] - value,\n      extent[1] - value,\n      extent[2] + value,\n      extent[3] + value\n    ]\n  }\n}\n\n/**\n * Convert xmin, ymin, xmax, ymax of an extent to a ring array\n * @param xmin\n * @param ymin\n * @param xmax\n * @param ymax\n * @returns {[*,*,*,*,*]}\n */\nExtentUtil.minMaxToRing = function (xmin, ymin, xmax, ymax) {\n  const ring = [\n    [xmin, ymin],\n    [xmax, ymin],\n    [xmax, ymax],\n    [xmin, ymax],\n    [xmin, ymin]\n  ]\n  \n  return ring\n}\n\n/**\n * 获取图形的高\n *\n * @method getHeight\n * @param extent {Geometry}\n * @returns {Number}\n */\nExtentUtil.getHeight = function(extent) {\n  return extent[3] - extent[1]\n}\n\n/**\n * 获取图形的宽\n *\n * @method getWidth\n * @param extent {Geometry}\n * @returns {Number}\n */\nExtentUtil.getWidth = function(extent) {\n  return extent[2] - extent[0]\n}\n\n/**\n * 矩形坐标点更新\n *\n * @method updateExtent\n * @param geometry {Geometry}\n * @param newCoordinates {Array}\n * @param dragSegments\n * @returns {Array}\n */\nExtentUtil.updateExtent = function (geometry, newCoordinates, dragSegments) {\n  const dragSegment = dragSegments[0]\n  const index = dragSegment.index\n  const extentCoordinates = geometry.getCoordinates()\n  const segment1 = extentCoordinates[index]\n  const segment2 = extentCoordinates[index + 1]\n  \n  const isVertex = dragSegment.isVertex\n  if (isVertex) {\n    if (index === 0 || index === 4) {\n      extentCoordinates[0] = newCoordinates\n      extentCoordinates[4] = newCoordinates\n      extentCoordinates[1][1] = newCoordinates[1]\n      extentCoordinates[3][0] = newCoordinates[0]\n    } else if (index === 1) {\n      extentCoordinates[1] = newCoordinates\n      \n      extentCoordinates[2][0] = newCoordinates[0]\n      extentCoordinates[0][1] = newCoordinates[1]\n      extentCoordinates[4] = extentCoordinates[0]\n    } else if (index === 2) {\n      extentCoordinates[2] = newCoordinates\n      extentCoordinates[1][0] = newCoordinates[0]\n      extentCoordinates[3][1] = newCoordinates[1]\n    } else if (index === 3) {\n      extentCoordinates[3] = newCoordinates\n      extentCoordinates[2][1] = newCoordinates[1]\n      extentCoordinates[0][0] = newCoordinates[0]\n      extentCoordinates[4] = extentCoordinates[0]\n    }\n  } else {\n    if (segment1[0] === segment2[0]) {\n      extentCoordinates[index][0] = newCoordinates[0]\n      extentCoordinates[index + 1][0] = newCoordinates[0]\n    }\n  \n    if (segment1[1] === segment2[1]) {\n      extentCoordinates[index][1] = newCoordinates[1]\n      extentCoordinates[index + 1][1] = newCoordinates[1]\n    }\n  \n    if (index === 3 ) {\n      extentCoordinates[0] = extentCoordinates[4]\n    }\n    if (index === 0 ) {\n      extentCoordinates[4] = extentCoordinates[0]\n    }\n  }\n  \n  \n  return extentCoordinates\n}\n\n/**\n *\n * @param extent1\n * @param extent2\n * @param opt_extent\n * @returns {(*|*|*|*)[]}\n */\nExtentUtil.getIntersection = function(extent1, extent2, opt_extent) {\n  const intersection = opt_extent ? opt_extent : ExtentUtil.createEmpty()\n  if (ExtentUtil.intersects(extent1, extent2)) {\n    if (extent1[0] > extent2[0]) {\n      intersection[0] = extent1[0]\n    } else {\n      intersection[0] = extent2[0]\n    }\n    \n    if (extent1[1] > extent2[1]) {\n      intersection[1] = extent1[1]\n    } else {\n      intersection[1] = extent2[1]\n    }\n    \n    if (extent1[2] < extent2[2]) {\n      intersection[2] = extent1[2]\n    } else {\n      intersection[2] = extent2[2]\n    }\n    \n    if (extent1[3] < extent2[3]) {\n      intersection[3] = extent1[3]\n    } else {\n      intersection[3] = extent2[3]\n    }\n  }\n  \n  return intersection\n}\n\n/**\n * 判断两个矩形是否相交\n *\n * @method intersects\n * @param extent1 {Geometry}\n * @param extent2 {Geometry}\n * @returns {Boolean}\n */\nExtentUtil.intersects = function(extent1, extent2) {\n  return extent1[0] <= extent2[2] &&\n    extent1[2] >= extent2[0] &&\n    extent1[1] <= extent2[3] &&\n    extent1[3] >= extent2[1]\n}\n\n/**\n * 判断矩形是否包含在另一个矩形中\n *\n * @method containsExtent\n * @param extent1\n * @param extent2\n * @returns {Boolean}\n */\nExtentUtil.containsExtent = function(extent1, extent2) {\n  return extent1[0] <= extent2[0] &&\n         extent2[2] <= extent1[2] &&\n         extent1[1] <= extent2[1] &&\n         extent2[3] <= extent1[3]\n}\n\n/**\n *\n * @param extent\n * @returns {boolean}\n */\nExtentUtil.isEmpty = function(extent) {\n  return extent[2] < extent[0] || extent[3] < extent[1]\n}\n\n/**\n *\n * @param center\n * @param resolution\n * @param rotation\n * @param size\n * @param opt_extent\n * @returns {*}\n */\nExtentUtil.getForViewAndSize = function(center, resolution, rotation, size, opt_extent) {\n  const dx = resolution * size[0] / 2\n  const dy = resolution * size[1] / 2\n  const cosRotation = Math.cos(rotation)\n  const sinRotation = Math.sin(rotation)\n  const xCos = dx * cosRotation\n  const xSin = dx * sinRotation\n  const yCos = dy * cosRotation\n  const ySin = dy * sinRotation\n  const x = center[0]\n  const y = center[1]\n  const x0 = x - xCos + ySin\n  const x1 = x - xCos - ySin\n  const x2 = x + xCos - ySin\n  const x3 = x + xCos + ySin\n  const y0 = y - xSin - yCos\n  const y1 = y - xSin + yCos\n  const y2 = y + xSin + yCos\n  const y3 = y + xSin - yCos\n  \n  return ExtentUtil.createOrUpdate(\n    Math.min(x0, x1, x2, x3), Math.min(y0, y1, y2, y3),\n    Math.max(x0, x1, x2, x3), Math.max(y0, y1, y2, y3),\n    opt_extent)\n}\n\nexport default {\n  ExtentUtil\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/support/extentutil.js","/**\n * Created by zhangyong on 2017/3/17.\n */\n\nimport Geometry from '../geometry/geometry'\nimport FillStyle from './fillstyle'\nimport LineStyle from './linestyle'\nimport PointStyle from './pointstyle'\n\nexport const Style = {}\n\n/**\n * 设置缺省图形style\n *\n * Create a defaut style for feature layer\n * @returns {null|Array|[*]}\n */\nStyle.defaultFunction = function () {\n  if (!Style._default) {\n    const white = [255, 255, 255]\n    const blue = [0, 153, 255]\n    const width = 1.5\n  \n    Style._default = {}\n    \n    // 面样式 polygon style\n    Style._default[Geometry.POLYGON] = [\n      new FillStyle(white, new LineStyle(blue, 1, 1.25), 0.2)\n    ]\n    Style._default[Geometry.MULTI_POLYGON] = Style._default[Geometry.POLYGON]\n    Style._default[Geometry.PARALLELOGRAM] = Style._default[Geometry.POLYGON]\n    \n    // same as polygon style\n    Style._default[Geometry.EXTENT] = Style._default[Geometry.POLYGON]\n  \n    // 线样式 line style\n    Style._default[Geometry.LINE] = [\n      new LineStyle(blue, 1, width)// 内框\n    ]\n  \n    // 点样式 point style\n    Style._default[Geometry.POINT] = [new PointStyle(10,white,1,new LineStyle(blue,1,width))]\n    \n  }\n  \n  return Style._default\n}\n\n/**\n * Create a default style while drawing\n * @returns {{}}\n */\nStyle.createDefaultEditing = function () {\n  const styles = {}\n  const white = [255, 255, 255]\n  const blue = [0, 153, 255]\n  const width = 1.5\n  \n  // 面样式\n  styles[Geometry.POLYGON] = [\n    new FillStyle(white,// 填充\n    new LineStyle(blue,1,1)// 边框\n    ,0.2)\n  ]\n  \n  styles[Geometry.MULTI_POLYGON] = styles[Geometry.POLYGON]\n  styles[Geometry.EXTENT] = styles[Geometry.POLYGON]\n  styles[Geometry.PARALLELOGRAM] = styles[Geometry.POLYGON]\n    \n  // 线样式\n  styles[Geometry.LINE] = [\n    new LineStyle(white,1,width + 1,LineStyle.LineCap.ROUND,LineStyle.LineJion.ROUND),// 外框\n    new LineStyle(blue,1,width,LineStyle.LineCap.ROUND,LineStyle.LineJion.ROUND)// 内框\n  ]\n  styles[Geometry.MULTI_LINE] = styles[Geometry.LINE]\n  \n  // 点样式\n  styles[Geometry.POINT] = [new PointStyle(10, white, 0.1, new LineStyle(blue, 1, 2))]\n  styles[Geometry.MULTI_POINT] = styles[Geometry.POINT]\n  \n  return styles\n}\n\n/**\n *\n * @returns {{}}\n */\nStyle.createDefaultSelecting = function () {\n  const styles = {}\n  const white = [255, 255, 255]\n  const blue = [0, 153, 255]\n  const width = 3\n  const outsideLine = new LineStyle(white,1,width + 2,LineStyle.LineCap.ROUND,LineStyle.LineJion.ROUND)// 外框\n  const insideLine = new LineStyle(blue,1,width,LineStyle.LineCap.ROUND,LineStyle.LineJion.ROUND)\n  // 面样式\n  styles[Geometry.POLYGON] = [\n    new FillStyle(white, outsideLine,0.5),\n\n    new FillStyle(white, insideLine,0)\n  ]\n  styles[Geometry.MULTI_POLYGON] = styles[Geometry.POLYGON]\n  styles[Geometry.EXTENT] = styles[Geometry.POLYGON]\n  \n  // 线样式\n  styles[Geometry.LINE] = [\n    outsideLine,// 外框\n    insideLine// 内框\n  ]\n  styles[Geometry.MULTI_LINE] = styles[Geometry.LINE]\n  \n  // 点样式\n  styles[Geometry.POINT] = [new PointStyle(12,blue,1,new LineStyle(blue,1,1))]\n  styles[Geometry.MULTI_POINT] = styles[Geometry.POINT]\n  \n  return styles\n}\n\n/**\n * Convert the passed obj into a style function.\n *\n * @param obj\n * @returns {*}\n */\nStyle.createFunction = function(obj) {\n  let styleFunction\n  \n  if (typeof obj === 'function') {\n    styleFunction = obj\n  } else {\n    let styles\n    \n    if (Array.isArray(obj)) {\n      styles = obj\n    } else {\n      styles = [obj]\n    }\n    \n    styleFunction = function(feature) {\n      return styles[0][feature.geometry.geometryType]\n    }\n  }\n  \n  return styleFunction\n}\n\n\nexport default {\n  Style\n}\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/style/style.js","/**\n * Created by zypc on 2016/11/15.\n */\n\nimport BaseStyle from './basestyle'\nimport TextStyle from './textstyle'\n\n/**\n *\n * 定义多边形样式，多边形样式包括<b>填充样式</b>和<b>边框样式</b>，\n * 需要分别设置\n *\n * @class FillStyle\n * @extends BaseStyle\n * @module style\n * @constructor\n * @example\n *\n *     var fillStyle = new Datatang.FillStyle([255,255,255],\n *         new Datatang.LineStyle([0,0,255],1,1.25),0.5)\n *\n */\nexport default class FillStyle extends BaseStyle {\n\n  /**\n   * 构建一个面样式\n   * 面样式由填充样式和边框样式组成\n   *\n   * @constructor\n   * @param style 备有接口，以后扩充面的填充样式\n   * @param color 面的填充颜色\n   * @param alpha 免得填充透明度\n   * @param borderStyle LineStyle对象，指定面样式的边框对象属性\n   */\n  constructor (color = [255,255,255], borderStyle = null, alpha = 1, style = FillStyle.SOLID) {\n    super(color, style, alpha)\n\n    this._borderStyle = borderStyle\n    this.textStyle = new TextStyle()\n  }\n  \n  /**\n   * 边框样式对象\n   *\n   * @property borderStyle\n   * @type {Datatang.LineStyle}\n   */\n  get borderStyle () { return this._borderStyle}\n  set borderStyle (value) { return this._borderStyle = value }\n  \n  /**\n   * 克隆面样式\n   *\n   * @method clone\n   * @returns {FillStyle}\n   */\n  clone () {\n    const newStyle = new FillStyle(this.color, this.borderStyle.clone(),\n      this.alpha, this.style)\n    \n    if (this.textStyle) {\n      newStyle.textStyle = this.textStyle\n    }\n    \n    return newStyle\n  }\n  \n}\n\n/**\n * 实体填充\n * @static\n * @final\n * @property SOLID\n * @type {string}\n */\nFillStyle.SOLID = 'solid'\n\n\n// WEBPACK FOOTER //\n// ./src/style/fillstyle.js","/**\n * Created by zhangyong on 2017/6/13.\n */\n\nimport BaseObject from '../core/baseobject'\n\n/**\n * 定义基础样式类，包括了一些基础的属性，如颜色、对象样式、透明度\n *\n * @class BaseStyle\n * @extends BaseObject\n * @module style\n */\nexport default class BaseStyle extends BaseObject {\n\n  /**\n   *\n   * @constructor\n   * @param color {Array}\n   * @param style {Object}\n   * @param alpha {Number}\n   */\n  constructor (color, style, alpha = 1) {\n    \n    super()\n    \n    /**\n     * The color to fill or stroke geometry\n     */\n    this.color = color\n    \n    /**\n     * Which style to style geometry\n     */\n    this.style = style\n    \n    /**\n     *\n     */\n    this.alpha = alpha\n    \n    /**\n     * The text displayed with geometry\n     * @type {null}\n     */\n    this.textStyle = null\n  }\n  \n  /**\n   * 颜色\n   *\n   * @property color\n   * @type {Array}\n   */\n  get color () { return this._color }\n  set color (value) { this._color = value }\n  \n  /**\n   * 样式对象\n   *\n   * @property style\n   * @type {Datatang.Style}\n   */\n  get style () { return this._style }\n  set style (value) { this._style = value }\n  \n  /**\n   * 透明度\n   *\n   * @property alpha\n   * @default 1\n   * @type {Number}\n   */\n  get alpha () { return this._alpha}\n  set alpha (value) { return this._alpha = value }\n  \n  /**\n   * 文本样式对象\n   *\n   * @property textStyle\n   */\n  get textStyle () { return this._textStyle }\n  set textStyle (value) { this._textStyle = value }\n  \n  /**\n   * 克隆一个样式对象\n   *\n   * @method clone\n   * @abstract\n   */\n  clone () {}\n  \n}\n  \n\n\n// WEBPACK FOOTER //\n// ./src/style/basestyle.js","/**\n * Created by zhangyong on 2017/6/12.\n */\n\nimport BaseObject from '../core/baseobject'\n\n/**\n *\n * 定义文本样式\n *\n * @class TextStyle\n * @extends BaseStyle\n * @module style\n * @constructor\n * @example\n *\n *     new Datatang.TextStyle({\n *       textAlign: 'center',\n *       textBaseline: 'middle',\n *       font: 'Arial',\n *       text: '标注示例',\n *       fill: [255, 0, 0],\n *       stroke: new Datatang.LineStyle([255, 255, 255],1,3,\n *          Datatang.LineStyle.LineCap.ROUND,\n *          Datatang.LineStyle.LineJion.ROUND),\n *       offsetX: 0,\n *       offsetY: 0,\n *       rotation: 0\n *     });\n *\n */\nexport default class TextStyle extends BaseObject {\n  \n  /**\n   *\n   * @constructor\n   * @param optOptions\n   */\n  constructor (optOptions) {\n    super()\n  \n    const options = optOptions || {}\n  \n    /**\n     *\n     */\n    this.text = options.text || ''\n    \n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.font = options.font || TextStyle.DEFAULT_FONT\n  \n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.rotation = options.rotation || 0\n  \n    /**\n     * @private\n     * @type {boolean|undefined}\n     */\n    this.rotateWithView = options.rotateWithView\n  \n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.scale = options.scale || TextStyle.DEFAULT_SCALE\n  \n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.textAlign = options.textAlign || TextStyle.DEFAULT_TEXT_ALIGN\n  \n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.textBaseline = options.textBaseline || TextStyle.DEFAULT_BASE_LINE\n  \n    /**\n     * @private\n     * @type {ol.style.Fill}\n     */\n    this.fill = options.fill !== undefined ? options.fill : TextStyle.DEFAULT_FILL_COLOR\n  \n    /**\n     * @private\n     * @type {ol.style.Stroke}\n     */\n    this.stroke = options.stroke !== undefined ? options.stroke : TextStyle.DEFAULT_STROKE\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this.offsetX = options.offsetX !== undefined ? options.offsetX : 0\n  \n    /**\n     * @property offsetY\n     * @type {number}\n     */\n    this.offsetY = options.offsetY !== undefined ? options.offsetY : 0\n    \n  }\n  \n  /**\n   * 要显示的文本\n   *\n   * @property text\n   * @type {Stirng}\n   */\n  get text () { return this._text }\n  set text (value) { this._text = value }\n  \n  /**\n   * 显示的字体\n   *\n   * @property font\n   * @type {Stirng}\n   */\n  get font () { return this._font }\n  set font (value) { this._font = value }\n  \n  /**\n   * 旋转的角度\n   *\n   * @property rotation\n   * @type {Stirng}\n   */\n  get rotation () { return this._rotation }\n  set rotation (value) { this._rotation = value }\n  \n  /**\n   * 旋转视图\n   *\n   * @property rotateWithView\n   * @type {Stirng}\n   */\n  get rotateWithView () { return this._rotateWithView }\n  set rotateWithView (value) { this._rotateWithView = value }\n  \n  /**\n   * 缩放比例\n   *\n   * @property scale\n   * @type {Stirng}\n   */\n  get scale () { return this._scale }\n  set scale (value) { this._scale = value }\n  \n  /**\n   * 字体\n   *\n   * @property textAlign\n   * @type {Stirng}\n   */\n  get textAlign () { return this._textAlign }\n  set textAlign (value) { this._textAlign = value }\n  \n  /**\n   * 字体线\n   *\n   * @property textBaseline\n   * @type {Stirng}\n   */\n  get textBaseline () { return this._textBaseline }\n  set textBaseline (value) { this._textBaseline = value }\n  \n  /**\n   * 字体颜色\n   *\n   * @property fill\n   * @type {Stirng}\n   */\n  get fill () { return this._fill }\n  set fill (value) { this._fill = value }\n  \n  /**\n   * 字体线的样式\n   *\n   * property stroke\n   * @type {Stirng}\n   */\n  get stroke () { return this._stroke }\n  set stroke (value) { this._stroke = value }\n  \n  /**\n   * 字体x轴偏移\n   *\n   * @property offsetX\n   * @type {Stirng}\n   */\n  get offsetX () { return this._offsetX }\n  set offsetX (value) { this._offsetX = value }\n  \n  /**\n   * 字体y轴偏移\n   *\n   * @property offsetY\n   * @type {Stirng}\n   */\n  get offsetY () { return this._offsetY }\n  set offsetY (value) { this._offsetY = value }\n  \n  /**\n   * 克隆字体样式\n   *\n   * @method clone\n   * @returns {TextStyle}\n   */\n  clone () {\n    return new TextStyle({\n      font: this.font,\n      rotation: this.rotation,\n      rotateWithView: this.rotateWithView,\n      scale: this.scale,\n      text: this.text,\n      textAlign: this.textAlign,\n      textBaseline: this.textBaseline,\n      fill: this.fill ? this.fill.clone : undefined,\n      stroke: this.stroke ? this.stroke.clone : undefined,\n      offsetX: this.offsetX,\n      offsetY: this.offsetY\n    })\n  }\n}\n\n/**\n *\n * 默认字体边框样式\n * @type {String} DEFAULT_STROKE\n * @static\n * @final\n *\n */\nTextStyle.DEFAULT_STROKE = {\n  color: [255, 255, 255],\n  width: 2,\n  lineCap: 'round',\n  lineJion: 'round'\n}\n\n/**\n *\n * 默认字体颜色\n * @type {String} DEFAULT_FILL_COLOR\n * @static\n * @final\n *\n */\nTextStyle.DEFAULT_FILL_COLOR = [0, 0, 255]\n\n/**\n * 默认字体样式\n * @type {String} DEFAULT_FONT\n * @static\n * @final\n *\n */\nTextStyle.DEFAULT_FONT = 'bold 12px Arial'\n\n\n/**\n * 默认字体显示位置\n * @type {String} DEFAULT_TEXT_ALIGN\n * @static\n * @final\n *\n */\nTextStyle.DEFAULT_TEXT_ALIGN = 'center'\n\n\n/**\n * 默认字体显示位置\n * @type {String} DEFAULT_BASE_LINE\n * @static\n * @final\n *\n */\nTextStyle.DEFAULT_BASE_LINE = 'middle'\n\n/**\n * 默认字体缩放初始值\n * @type {String} DEFAULT_BASE_LINE\n * @static\n * @final\n *\n */\nTextStyle.DEFAULT_SCALE = 10\n\n\n// WEBPACK FOOTER //\n// ./src/style/textstyle.js","/**\n * Created by zypc on 2016/11/15.\n */\n\nimport BaseStyle from './basestyle'\nimport TextStyle from './textstyle'\n\n/**\n * 定义一个线图形的样式\n *\n * @class LineStyle\n * @extends BaseStyle\n * @module style\n * @constructor\n * @example\n *\n *     var lineStye = new Datatang.LineStyle([0, 0, 255],1,3,\n *        Datatang.LineStyle.LineCap.ROUND,\n *        Datatang.LineStyle.LineJion.ROUND)\n */\nexport default class LineStyle extends BaseStyle {\n  \n  /**\n   * @constructor\n   * @param color\n   * @param alpha\n   * @param width\n   * @param style\n   * @param lineCap\n   * @param lineJion\n   * @param miterLimit\n   */\n  constructor (color = [255,255,255], alpha = 1, width = 1,\n        style = LineStyle.SOLID,lineCap = LineStyle.LineCap.BUTT,\n        lineJion = LineStyle.LineJion.MITER,miterLimit = 10) {\n    super(color, style, alpha)\n\n    this.width = width\n    this.lineCap = lineCap\n    this.lineJion = lineJion\n    this.miterLimit = miterLimit\n    this.textStyle = new TextStyle()\n  }\n  \n  /**\n   * 线宽\n   *\n   * @property width\n   * @type {Number}\n   */\n  get width () { return this._width }\n  set width (value) { this._width = value }\n  \n  /**\n   * 线的末端样式\n   *\n   * @property lineCap\n   * @type {Number}\n   */\n  set lineCap (value) { this._lineCap = value }\n  get lineCap () { return this._lineCap }\n  \n  /**\n   * 交叉线时的样式\n   *\n   * @property lineJion\n   * @type {Number}\n   */\n  set lineJion (value) { this._lineJion = value }\n  get lineJion () { return this._lineJion }\n  \n  /**\n   * 斜角缝限制\n   *\n   * @property miterLimit\n   * @type {Number}\n   */\n  set miterLimit (value) { this._miterLimit = value }\n  get miterLimit () { return this._miterLimit }\n\n  /**\n   * 克隆线样式\n   *\n   * @method clone\n   * @returns {LineStyle}\n   */\n  clone () {\n    const newStyle = new LineStyle(this.color, this.alpha, this.width,\n      this.style, this.lineCap, this.lineJion, this.miterLimit)\n\n    if (this.textStyle) {\n      newStyle.textStyle = this.textStyle\n    }\n\n    return newStyle\n  }\n\n}\n\n/**\n * 定义线的样式\n * @type {string}\n */\nLineStyle.SOLID = 'solid'\n\n/**\n * TODO 由郭靖来处理，参考 PointStyle\n * @type {string}\n */\nLineStyle.DASH = 'dash'\n\nLineStyle.DOT = 'dot'\n\nLineStyle.DASHDOT = 'dashdot'\n\nLineStyle.DASHDOTDOT = 'dashdotdot'\n\nLineStyle.NULL = 'none'\n\nLineStyle.LineCap = {\n  BUTT: 'butt',\n  ROUND: 'round',\n  SQUARE: 'square'\n}\n\n// visit http://www.w3school.com.cn/tags/canvas_linejoin.asp for more infomation\nLineStyle.LineJion = {\n  MITER: 'miter',// 默认，创建尖角\n  BEVEL: 'bevel',\n  ROUND: 'round'\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/style/linestyle.js","/**\n * Created by zypc on 2016/11/15.\n */\n\nimport BaseStyle from './basestyle'\nimport TextStyle from './textstyle'\n\n/**\n * 定义一个点图形的样式\n *\n * @class PointStyle\n * @extends BaseStyle\n * @module style\n * @constructor\n * @example\n *\n *  // 定义一个点，包括外边框的样式\n *\n *  var pointStyle = new Datatang.PointStyle(10,[255, 255, 255],1,new Datatang.LineStyle([0, 0, 255],1,1))\n *\n */\nexport default class PointStyle extends BaseStyle {\n\n  /**\n   * 构建一个点样式对象\n   *\n   * @constructor\n   * @param style 点样式，{circle|square|cross|x|triangle}其中的一种\n   * @param size 点的大小，默认15\n   * @param color\n   * @param alpha\n   * @param xoffset\n   * @param yoffset\n   * @param angle\n   */\n  constructor (size = 15, color = [255,0,0], alpha = 1,borderStyle = null,\n               xoffset = 0, yoffset = 0, angle = 0, style = PointStyle.CIRCLE) {\n    super(color, style, alpha)\n\n    this._size = size\n    this._xoffset = xoffset\n    this._yoffset = yoffset\n    this._angle = angle\n    this._borderStyle = borderStyle\n    this.textStyle = new TextStyle()\n  }\n\n  /**\n   * 克隆点的样式\n   *\n   * @method clone\n   * @returns {PointStyle}\n   */\n  clone () {\n    const newStyle = new PointStyle(this.size, this.color, this.alpha,\n       this.borderStyle.clone(), this.xoffset, this.yoffset, this.angle, this.style)\n\n    if (this.textStyle) {\n      newStyle.textStyle = this.textStyle\n    }\n\n    return newStyle\n  }\n  \n  /**\n   * 大小\n   *\n   * @property size\n   * @type {Number}\n   */\n  get size(){ return this._size }\n  set size(value){ this._size = value}\n  \n  /**\n   * X 轴偏移量\n   *\n   * @property xoffset\n   * @type {Number}\n   */\n  get xoffset(){ return this._xoffset }\n  set xoffset(value){ this._xoffset = value}\n  \n  /**\n   * Y 轴偏移量\n   *\n   * @property yoffset\n   * @type {Number}\n   */\n  get yoffset(){ return this._yoffset }\n  set yoffset(value){ this._yoffset = value}\n  \n  /**\n   * 样式显示的角度\n   *\n   * @property angle\n   * @type {Number}\n   */\n  get angle(){ return this._angle }\n  set angle(value){ this._angle = value}\n  \n  /**\n   * 边框样式\n   *\n   * @property borderStyle\n   * @type {LineStyle}\n   */\n  get borderStyle(){ return this._borderStyle }\n  set borderStyle(value){ this._borderStyle = value}\n  \n}\n\n/**\n * 圆形样式\n *\n * @static\n * @final\n * @property CIRCLE\n * @type {String}\n */\nPointStyle.CIRCLE = 'circle'\n\n/**\n * 方形样式\n *\n * @static\n * @final\n * @property SQUARE\n * @type {String}\n */\nPointStyle.SQUARE = 'square'\n\n/**\n * 十字样式\n *\n * @static\n * @final\n * @property CROSS\n * @type {string}\n */\nPointStyle.CROSS = 'cross'\n\n/**\n * X样式\n *\n * @static\n * @final\n * @property X\n * @type {string}\n */\nPointStyle.X = 'x'\n\n/**\n * 三角形样式\n *\n * @static\n * @final\n * @property TRIANGLE\n * @type {string}\n */\nPointStyle.TRIANGLE = 'triangle'\n\n\n\n// WEBPACK FOOTER //\n// ./src/style/pointstyle.js","/**\n * Created by zypc on 2016/11/17.\n */\n\n\nimport Obj from '../utils/obj'\n\n/**\n * 根据事件标识和监听对象获取该对象上的事件监听函数列表\n *\n * @method getListeners\n * @param target\n * @param type\n * @returns {Undefined}\n */\nexport function getListeners (target, type) {\n  const listenerMap = target.ol_lm\n  return listenerMap ? listenerMap[type] : undefined\n}\n\n/**\n * 根据事件标示和事件对象，移除全部事件监听\n *\n * @param target\n * @param type\n */\nconst removeListeners = function (target, type) {\n  const listeners = getListeners(target, type)\n  if (listeners) {\n    for (let i = 0, ii = listeners.length; i < ii; ++i) {\n      target.removeEventListener(type, listeners[i].boundListener)\n      Obj.clear(listeners[i])\n    }\n    listeners.length = 0\n    let listenerMap = target.ol_lm\n    if (listenerMap) {\n      Reflect.deleteProperty(listenerMap, type)\n      if (Object.keys(listenerMap).length === 0) {\n        Reflect.deleteProperty(target, ol_lm)\n      }\n    }\n  }\n}\n\n/**\n * 移除该事件标识下全部事件监听\n *\n * @method unlistenByKey\n * @param key {String} 事件标示\n */\nexport function unlistenByKey (key) {\n  if (key && key.target) {\n    key.target.removeEventListener(key.type, key.boundListener)\n    const listeners = getListeners(key.target, key.type)\n    if (listeners) {\n      let i = 'deleteIndex' in key ? key.deleteIndex : listeners.indexOf(key)\n      if (i !== -1) {\n        listeners.splice(i, 1)\n      }\n      if (listeners.length === 0) {\n        removeListeners(key.target, key.type)\n      }\n    }\n    \n    Obj.clear(key)\n  }\n}\n\n/**\n * @param listenerObj\n * @returns {boundListener}\n */\nconst bindListener = function (listenerObj) {\n  let boundListener = function (evt) {\n    const listener = listenerObj.listener\n    const bindTo = listenerObj.bindTo || listenerObj.target\n    if (listenerObj.callOnce) {\n      unlistenByKey(listenerObj)\n    }\n    return listener.call(bindTo, evt)\n  }\n\n  listenerObj.boundListener = boundListener\n  return boundListener\n}\n\n/**\n *\n * @param listeners\n * @param listener\n * @param optThis\n * @param optSetDeleteIndex\n * @returns {*}\n */\nconst findListener = function (listeners, listener, optThis, optSetDeleteIndex) {\n  let listenerObj\n  for (let i = 0, ii = listeners.length; i < ii; ++i) {\n    listenerObj = listeners[i]\n    if (listenerObj.listener === listener &&\n      listenerObj.bindTo === optThis) {\n      if (optSetDeleteIndex) {\n        listenerObj.deleteIndex = i\n      }\n      return listenerObj\n    }\n  }\n  return undefined\n}\n\n/**\n *\n * @param target\n * @returns {{}|*}\n */\nconst getListenerMap = function (target) {\n  let listenerMap = target.ol_lm\n  if (!listenerMap) {\n    listenerMap = target.ol_lm = {}\n  }\n  return listenerMap\n}\n\n/**\n * 监听事件\n *\n * @method listen\n * @param target {Object} 监听对象\n * @param type {String} 事件标识\n * @param listener {Array} 事件响应函数列表\n * @param optThis {This} 可选\n * @param optOnce\n * @returns {Array}\n */\nexport function listen (target, type, listener, optThis, optOnce) {\n  const listenerMap = getListenerMap(target)\n  let listeners = listenerMap[type]\n  if (!listeners) {\n    listeners = listenerMap[type] = []\n  }\n  \n  let listenerObj = findListener(listeners, listener, optThis, false)\n\n  if (listenerObj) {\n    if (!optOnce) {\n      listenerObj.callOnce = false // Turn one-off listener into a permanent one.\n    }\n  } else {\n    listenerObj = {\n      bindTo: optThis,\n      callOnce: !!optOnce,\n      listener,\n      target,\n      type\n    }\n    \n    target.addEventListener(type, bindListener(listenerObj))\n    listeners.push(listenerObj)\n  }\n\n  return listenerObj\n}\n\n/**\n * 对事件只是监听一次\n *\n * @method listenOnce\n * @param target\n * @param type\n * @param listener\n * @param opt_this\n * @returns {*}\n */\nexport function listenOnce (target, type, listener, opt_this) {\n  return listen(target, type, listener, opt_this, true)\n}\n\n\n/**\n * 定义关于事件的注册、注销、派发、监听的通用工具模块\n *\n * @module core\n * @class EventManager\n */\nexport default {\n  getListeners,\n  listen,\n  listenOnce,\n  unlistenByKey,\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/eventmanager.js","/**\n * Created by zypc on 2016/11/13.\n */\n\nimport Geometry from './geometry'\nimport {ExtentUtil} from './support/extentutil'\n\n/**\n * 矩形类和数据结构\n *\n * @class Extent\n * @extends Geometry\n * @module geometry\n * @constructor\n * @example\n *\n *  var rect = new Datatang.Extent(10, 10, 500, 500)\n */\nexport default class Extent extends Geometry {\n\n  /**\n   * 构造函数，构建一个extent对象\n   *\n   * @param xmin {Number}\n   * @param ymin {Number}\n   * @param xmax {Number}\n   * @param ymax {Number}\n   *\n   */\n  constructor (xmin = 0, ymin = 0, xmax = 0, ymax = 0) {\n    super()\n\n    this._xmin = xmin\n    this._ymin = ymin\n    this._xmax = xmax\n    this._ymax = ymax\n  \n    this._rings = []\n  \n    /**\n     * 记录内点更新的次数\n     * @type {number}\n     * @private\n     */\n    this._flatInteriorPointRevision = -1\n  \n    /**\n     * 缓存当前内点\n     * @type {null}\n     * @private\n     */\n    this._flatInteriorPoint = null\n  }\n\n  /**\n   * 获取Geometry的类型\n   *\n   * @property geometryType\n   * @returns {String}\n   */\n  get geometryType () { return Geometry.EXTENT }\n\n  /**\n   * 计算x轴的中心坐标\n   *\n   * @property centerX\n   * @type {Number}\n   */\n  get centerX () { return (this.xmax + this.xmin) / 2 }\n\n  /**\n   * 计算Y轴的中心坐标\n   *\n   * @property centerY\n   * @type {Number}\n   */\n  get centerY () { return (this.ymax + this.ymin) / 2 }\n\n  /**\n   * 计算最小外接矩形的宽\n   *\n   * @property width\n   * @returns {Number}\n   */\n  get width () { return Math.abs(this.xmax - this.xmin) }\n\n  /**\n   * 计算最小外接矩形的高\n   *\n   * @property height\n   * @returns {Number}\n   */\n  get height () { return Math.abs(this.ymax - this.ymin) }\n\n  /**\n   * 获取最小外接矩形本对象\n   *\n   * @property extent\n   * @returns {Object} extent\n   */\n  get extent () { return this }\n  \n  /**\n   * X 轴最小值\n   *\n   * @property xmin\n   * @type {Number}\n   */\n  get xmin () { return this._xmin }\n  set xmin (value) {\n    this._xmin = value\n    this.changed()\n  }\n  \n  /**\n   * Y 轴最小值\n   *\n   * @property ymin\n   * @type {Number}\n   */\n  get ymin () { return this._ymin }\n  set ymin (value) {\n    this._ymin = value\n    this.changed()\n  }\n  \n  /**\n   * X 轴最大值\n   *\n   * @property xmax\n   * @type {Number}\n   */\n  get xmax () { return this._xmax }\n  set xmax (value) {\n    this._xmax = value\n    this.changed()\n  }\n  \n  /**\n   * X 轴最大值\n   *\n   * @property ymax\n   * @type {Number}\n   */\n  get ymax () { return this._ymax }\n  set ymax (value) {\n    this._ymax = value\n    this.changed()\n  }\n  \n  \n  /**\n   * 判断点是否在矩形内\n   *\n   * @method containsXY\n   * @param x {Number}\n   * @param y {Number}\n   */\n  containsXY (x, y) {\n    return ExtentUtil.containsPoint(this, [x, y])\n  }\n  \n  /**\n   * getFlatInteriorPoint\n   * @returns {[*,*]}\n   */\n  getFlatInteriorPoint () {\n    if (this._flatInteriorPointRevision !== this.revision) {\n      this._flatInteriorPointRevision = this.revision\n      this._flatInteriorPoint = [this.centerX, this.centerY]\n    }\n    \n    return this._flatInteriorPoint\n  }\n  \n  /**\n   * 移动矩形通过x，y值\n   *\n   * @method move\n   * @param x {Number}\n   * @param y {Number}\n   */\n  move (x = 0, y = 0, opts) {\n    let beyond\n    if (opts) {\n      if (opts.beyond) {\n        beyond = opts.beyond\n      }\n    }\n    \n    let minPoint = [this.xmin,this.ymin]\n    const width = this.width\n    const height = this.height\n\n    const newMinPoint = new Array(2)\n    \n    newMinPoint[0] = minPoint[0] + x\n    newMinPoint[1] = minPoint[1] + y\n    \n    if (beyond) {\n      if (minPoint[0] < beyond.xmin) {\n        minPoint[0] = beyond.xmin\n        newMinPoint[0] = minPoint[0]\n      }\n      \n      if (minPoint[0] + width + x >= beyond.xmax) {\n        newMinPoint[0] = minPoint[0]\n      }\n  \n      if (minPoint[1] < beyond.ymin) {\n        minPoint[1] = beyond.ymin\n        newMinPoint[1] = minPoint[1]\n      }\n  \n      if (minPoint[1] + height + y >= beyond.ymax) {\n        newMinPoint[1] = minPoint[1]\n      }\n    }\n  \n    const newCoordiante = [\n      newMinPoint,\n      [newMinPoint[0] + width, newMinPoint[1]],\n      [newMinPoint[0] + width, newMinPoint[1] + height],\n      [newMinPoint[0], newMinPoint[1] + height],\n      newMinPoint]\n    \n    this.setCoordinates(newCoordiante)\n  }\n  \n  /**\n   * 设置多边形的边，如果设置了边，则需要重新计算\n   * 外接矩形\n   *\n   * @method rings\n   * @returns {Array}\n   */\n  get rings () {\n    if (this._rings.length === 0) {\n      if (this.xmin !== 0 && this.ymin !== 0 && this.xmax !== 0 && this.ymax !== 0) {\n        this._rings = ExtentUtil.minMaxToRing(this.xmin, this.ymin, this.xmax, this.ymax)\n      }\n    }\n    \n    return this._rings\n  }\n\n  set rings (value) {\n    this._rings = value\n    let extentArr = ExtentUtil.boundingSimpleExtent(value)\n    this.xmin = extentArr[0]\n    this.ymin = extentArr[1]\n    this.xmax = extentArr[2]\n    this.ymax = extentArr[3]\n  }\n  \n  /**\n   * 获取图形的坐标数据\n   *\n   * @method getCoordinates\n   * @returns {[*,*]}\n   */\n  getCoordinates () {\n    if (this._rings.length === 0) {\n      if (this.xmin !== 0 && this.ymin !== 0 && this.xmax !== 0 && this.ymax !== 0) {\n        this._rings = ExtentUtil.minMaxToRing(this.xmin, this.ymin, this.xmax, this.ymax)\n      }\n    }\n  \n    return this._rings\n  }\n\n  /**\n   * 根据得到的坐标点，计算出表单显示的位置\n   *\n   * @param {Number} offsetX x的偏移量\n   * @param {Number} offsetY y的偏移量\n   * @returns {[*,*]}\n   */\n  getFormShowPosition (offsetX = 0, offsetY = 0) {\n    return [( this.xmin + this.xmax ) / 2 - offsetX, this.ymin - offsetY]\n  }\n  \n  /**\n   * 设置坐标数据\n   *\n   * @method setCoordinates\n   * @param coordinates\n   */\n  setCoordinates (coordinates) {\n    this.rings = coordinates\n  \n    let extentArr = ExtentUtil.boundingSimpleExtent(coordinates)\n    this.xmin = extentArr[0]\n    this.ymin = extentArr[1]\n    this.xmax = extentArr[2]\n    this.ymax = extentArr[3]\n  \n    this.changed()\n  }\n  \n  /**\n   * 获取点位于图形坐标点的下标\n   *\n   * @method getCoordinateIndex\n   * @param coord {Array}\n   * @returns {Number}\n   */\n  getCoordinateIndex (coord) {\n    return this.getCoordinates().findIndex( points =>\n      points[0] === coord[0] && points[1] === coord[1]\n    )\n  }\n  \n  /**\n   * 克隆矩形框\n   *\n   * @method clone\n   * @returns {Extent}\n   */\n  clone () {\n    return new Extent(this.xmin, this.ymin, this.xmax, this.ymax)\n  }\n  \n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/extent.js","/**\n * Created by zypc on 2016/11/13.\n */\n\nimport Geometry from './geometry'\nimport Extent from './extent'\nimport {ExtentUtil} from './support/extentutil'\nimport {squaredDistance} from './support/geometryutil'\n\n\n/**\n * 定义点类和数据结构\n *\n * @class Point\n * @extends Geometry\n * @module geometry\n * @constructor\n * @example\n *\n *    var point = new Datatang.Point(100, 100)\n */\nexport default class Point extends Geometry {\n\n  /**\n   * 根据x和y构建一个点对象\n   * @param x 默认值为0\n   * @param y 默认值为0\n   * @constructor\n   */\n  constructor (xValue, yValue) {\n    super()\n\n    this.x = xValue\n    this.y = yValue\n  }\n\n  /**\n   * 获取对象的几何类型\n   *\n   * @protected\n   */\n  get geometryType () { return Geometry.POINT }\n\n  /**\n   * 获取点的最小外接矩形\n   *\n   * @note 点是没有最小外接矩形\n   * @returns {null}\n   */\n  get extent () {\n    if (!this._extent) {\n      const extentObj = ExtentUtil.createScaleExtent(this, 8)\n      this._extent = new Extent(extentObj[0], extentObj[1], extentObj[2], extentObj[3])\n    }\n    \n    return this._extent\n  }\n\n  /**\n   * 获取 X 坐标值\n   *\n   * @property x\n   * @type x {number}\n   */\n  get x () { return this._x }\n  set x (value) { this._x = value }\n  \n  /**\n   * 获取 Y 坐标值\n   *\n   * @property y\n   * @type {number}\n   */\n  get y () { return this._y }\n  set y (value) { this._y = value }\n\n  /**\n   * 根据x,y的偏移量得到点\n   *\n   * @method offset\n   * @param nx x轴偏移量\n   * @param ny y轴偏移量\n   * @returns {Datatang.Point} 返回偏移以后的点对象\n   */\n  offset (nx, ny) {\n    return new Point(this.x + nx, this.y + ny)\n  }\n  \n  /**\n   * containsXY\n   * @param x\n   * @param y\n   * @param opt\n   * @returns {boolean}\n   */\n  containsXY (x, y, opt = {}) {\n    const tolerance = opt.tolerance ? opt.tolerance : 2\n    const pointA = this\n\n    const distance = squaredDistance(pointA.x, pointA.y, x, y)\n    if (Math.sqrt(distance/2) <= tolerance) {\n      return true\n    }\n\n    return false\n  }\n\n  /**\n   * 更新x,y坐标值\n   *\n   * @method update\n   * @param nx x新值\n   * @param ny y新值\n   */\n  update (nx, ny) {\n    this.x = nx\n    this.y = ny\n    \n    this._extent = null\n  }\n  \n  /**\n   *\n   *\n   * getFlatInteriorPoint\n   * @returns {[]}\n   */\n  getFlatInteriorPoint () {\n    return this.getCoordinates()\n  }\n  \n  /**\n   * 获取点的坐标\n   *\n   * @method getCoordinates\n   * @returns {Array}\n   */\n  getCoordinates () {\n    return [this.x, this.y]\n  }\n\n  /**\n   * 点的位置就是坐标点的位置减去偏移量的位置\n   *\n   * @method getFormShowPosition\n   * @param {Number} offsetX x的偏移量\n   * @param {Number} offsetY y的偏移量\n   * @return {[]}\n   */\n  getFormShowPosition (offsetX = 0, offsetY = 10) {\n    return [this.x - offsetX, this.y - offsetY]\n  }\n\n  /**\n   * 设置点的坐标\n   *\n   * @method setCoordinates\n   * @param coordinates\n   */\n  setCoordinates (coordinates) {\n    this.update(coordinates[0], coordinates[1])\n    this.changed()\n  }\n  \n  /**\n   * getCoordinateIndex\n   * @returns {number}\n   */\n  getCoordinateIndex () {\n    return 0\n  }\n  \n  /**\n   * 判断两个图形对象是否相等\n   *\n   * 判断标准：该图形的所有顶点值是否一致\n   *\n   * @method equal\n   * @param geometry\n   * @return {Boolean}\n   */\n  equal (geom) {\n    let equals = false\n    if (geom !== null) {\n      equals = ((this.x === geom.x && this.y === geom.x) ||\n      (Number.isNaN(this.x) && Number.isNaN(this.y) && Number.isNaN(geom.x) && Number.isNaN(geom.y)))\n    }\n    return equals\n  }\n  \n  /**\n   * 克隆点\n   *\n   * @method clone\n   * @returns {Point}\n   */\n  clone () {\n    return new Point(this.x, this.y)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/point.js","/**\n * Created by zypc on 2016/11/13.\n */\n\nimport Geometry from './geometry'\nimport Extent from './extent'\n\nimport {squaredSegmentDistance, distance} from './support/geometryutil'\nimport {lineString} from './support/interpolate'\n\n/**\n * 定义线类和数据结构\n *\n * @class Line\n * @extends Geometry\n * @module geometry\n * @constructor\n * @example\n *\n *  var line = new Datatang.Line()\n *\n *  line.setCoordinates([100, 100], [200, 200], [400, 500])\n */\nexport default class Line extends Geometry {\n  \n  /**\n   * Create a line geometry\n   * @constructor\n   * @param path\n   */\n  constructor (path) {\n    super()\n  \n    /**\n     * 记录内点更新的次数\n     * @type {number}\n     * @private\n     */\n    this._flatInteriorPointRevision = -1\n  \n    /**\n     * 缓存当前内点\n     * @type {null}\n     * @private\n     */\n    this._flatInteriorPoint = null\n  \n    /**\n     *\n     * @type {Array}\n     * @private\n     */\n    this._path = []\n    \n    this.addPath(path)\n  }\n\n  get geometryType () { return Geometry.LINE }\n\n  /**\n   * 获取图形的最小外接矩形(MBR-Minimum Bounding Rectangle)\n   *\n   * @returns {Object} 返回对象的最小外接矩形\n   *\n   */\n  get extent () {\n    const me = this\n    if (me._extent === null) {\n      let xmin = Number.POSITIVE_INFINITY\n      let ymin = Number.POSITIVE_INFINITY\n      let xmax = Number.NEGATIVE_INFINITY\n      let ymax = Number.NEGATIVE_INFINITY\n\n      const coors = me.getCoordinates()\n      for (let p of coors) {\n        xmin = Math.min(xmin, p[0])\n        ymin = Math.min(ymin, p[1])\n        xmax = Math.max(xmax, p[0])\n        ymax = Math.max(ymax, p[1])\n      }\n\n      me._extent = new Extent(xmin, ymin, xmax, ymax)\n    }\n\n    return me._extent\n  }\n  \n  /**\n   * 线段读写器\n   *\n   * @property path\n   * @returns\n   */\n  get path () { return this._path }\n  set path (value) {\n    this._path = value\n    this._extent = null\n  }\n  \n  /**\n   * 添加线段\n   *\n   * @method addPath\n   * @deprecated\n   * @param coordinates {Array}\n   */\n  addPath (coordinates) {\n    this.path.push(coordinates)\n    this._extent = null\n    this.changed()\n  }\n  \n  /**\n   * 多段线的长度\n   *\n   * @property length\n   * @type {Number}\n   */\n  get length () {\n    const coordinates = this.getCoordinates()\n    let len = 0\n    for (let i = 0, ii = coordinates.length; i < ii - 1 ; i++) {\n      const fp = coordinates[i]\n      const np = coordinates[i + 1]\n      len += distance(fp, np)\n    }\n    \n    return len\n  }\n  \n  /**\n   * 遍历每一条边\n   *\n   * @method forEachSegment\n   * @param callback {callback}\n   * @param opt\n   */\n  forEachSegment (callback, opt) {\n    this.path.forEach(callback, opt)\n  }\n  \n  /**\n   * @param x\n   * @param y\n   * @param opt\n   * @returns {boolean}\n   */\n  containsXY (x, y, opt = {}) {\n    const tolerance = opt.tolerance ? opt.tolerance : 2\n    const path = this.path\n    const squaredSegmentDistanceFn = squaredSegmentDistance\n  \n    let find = false\n    for (let i = 0, ii = path.length - 1; i < ii; i++) {\n      let nowP = path[i]\n      let nextP = path[i + 1]\n      let distance = squaredSegmentDistanceFn(x, y, nowP[0], nowP[1], nextP[0], nextP[1])\n      distance = Math.sqrt(distance)\n      if (distance <= tolerance) {\n        find = true\n        break\n      }\n    }\n  \n    return find\n  }\n  \n  /**\n   * 计算线的平面内点\n   *\n   * @method getFlatInteriorPoint\n   * @returns {Array}\n   */\n  getFlatInteriorPoint () {\n    if (this._flatInteriorPointRevision !== this.revision) {\n      const interiorPoint = null\n      const fraction = 0.5\n      const flatCoordinates = []\n      const coordinates = this.getCoordinates()\n  \n      coordinates.forEach( point => {\n        flatCoordinates.push(point[0], point[1])\n      })\n  \n      this._flatInteriorPoint = lineString( flatCoordinates, 0, flatCoordinates.length, this.stride,\n        fraction, interiorPoint)\n      \n      this._flatInteriorPointRevision = this.revision\n    }\n    \n    return this._flatInteriorPoint\n  }\n  \n  getCoordinates () { return this.path }\n\n  /**\n   * 得到最后一个点的坐标，显示表单\n   *\n   * @param {Number} offsetX x的偏移量\n   * @param {Number} offsetY y的偏移量\n   * @returns {[*,*]}\n   */\n  getFormShowPosition (offsetX = 0, offsetY = 0) {\n    const coordinates = this.getCoordinates()\n    if (coordinates.length === 0) {\n      return null\n    }\n    \n    const lastPoint = coordinates[coordinates.length - 1]\n    \n    return [lastPoint[0] - offsetX, lastPoint[1] - offsetY]\n  }\n  \n  /**\n   * 设置坐标数据\n   *\n   * @method setCoordinates\n   * @param coords {Array}\n   */\n  setCoordinates (coords) {\n    this.path = coords\n    this._extent = null\n    this.changed()\n  }\n  \n  /**\n   * 根据坐标点，计算改点的下标\n   *\n   * @method getCoordinateIndex\n   * @param coord\n   * @returns {*|number}\n   */\n  getCoordinateIndex (coord) {\n    return this.getCoordinates().findIndex( points =>\n      points[0] === coord[0] && points[1] === coord[1]\n    )\n  }\n  \n  /**\n   * 克隆线段\n   *\n   * @method clone\n   * @returns {Line} new line\n   */\n  clone () {\n    const newCoordinates = this.getCoordinates()\n    this.getCoordinates().forEach( coords => {\n      newCoordinates.push([coords[0], coords[1]])\n    })\n  \n    const newLine = new Line()\n    newLine.setCoordinates(newCoordinates)\n    \n    return newLine\n  }\n  \n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/line.js","/**\n * Created by zhangyong on 2017/6/14.\n */\n\n\nimport {binarySearch, numberSafeCompareFunction} from '../../utils/array'\nimport {linearRingsContainsXY} from '../support/geometryutil'\nimport {lerp} from '../../utils/math'\nimport {ExtentUtil} from './extentutil'\n\n\n/**\n *\n * @param flatCoordinates\n * @param offset\n * @param end\n * @param stride\n * @param fraction\n * @param opt_dest\n * @returns {*}\n */\nexport function lineString (flatCoordinates, offset, end, stride, fraction, opt_dest) {\n  let pointX = NaN\n  let pointY = NaN\n  const n = (end - offset) / stride\n  \n  if (n === 1) {\n    pointX = flatCoordinates[offset]\n    pointY = flatCoordinates[offset + 1]\n  } else if (n == 2) {\n    pointX = (1 - fraction) * flatCoordinates[offset] +\n      fraction * flatCoordinates[offset + stride]\n    pointY = (1 - fraction) * flatCoordinates[offset + 1] +\n      fraction * flatCoordinates[offset + stride + 1]\n  } else if (n !== 0) {\n    let x1 = flatCoordinates[offset]\n    let y1 = flatCoordinates[offset + 1]\n    let length = 0\n    const cumulativeLengths = [0]\n    let i\n    for (i = offset + stride; i < end; i += stride) {\n      const x2 = flatCoordinates[i]\n      const y2 = flatCoordinates[i + 1]\n      length += Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1))\n      cumulativeLengths.push(length)\n      x1 = x2\n      y1 = y2\n    }\n    \n    const target = fraction * length\n    const index = binarySearch(cumulativeLengths, target)\n    \n    if (index < 0) {\n      const t = (target - cumulativeLengths[-index - 2]) /\n        (cumulativeLengths[-index - 1] - cumulativeLengths[-index - 2])\n      const o = offset + (-index - 2) * stride\n      pointX = lerp(\n        flatCoordinates[o], flatCoordinates[o + stride], t)\n      pointY = lerp(\n        flatCoordinates[o + 1], flatCoordinates[o + stride + 1], t)\n    } else {\n      pointX = flatCoordinates[offset + index * stride]\n      pointY = flatCoordinates[offset + index * stride + 1]\n    }\n  }\n  \n  if (opt_dest) {\n    opt_dest[0] = pointX\n    opt_dest[1] = pointY\n    return opt_dest\n  } else {\n    return [pointX, pointY]\n  }\n}\n\n\n/**\n *\n * @param flatCoordinates\n * @param offset\n * @param ends\n * @param stride\n * @param flatCenters\n * @param flatCentersOffset\n * @param opt_dest\n * @returns {*}\n */\nexport function linearRings(flatCoordinates, offset,\n       ends, stride, flatCenters, flatCentersOffset, opt_dest) {\n  let i, ii, x, x1, x2, y1, y2\n  const y = flatCenters[flatCentersOffset + 1]\n  const intersections = []\n  // Calculate intersections with the horizontal line\n  const end = ends[0]\n  x1 = flatCoordinates[end - stride]\n  y1 = flatCoordinates[end - stride + 1]\n  \n  for (i = offset; i < end; i += stride) {\n    x2 = flatCoordinates[i]\n    y2 = flatCoordinates[i + 1]\n    if ((y <= y1 && y2 <= y) || (y1 <= y && y <= y2)) {\n      x = (y - y1) / (y2 - y1) * (x2 - x1) + x1\n      intersections.push(x)\n    }\n    x1 = x2\n    y1 = y2\n  }\n  \n  // Find the longest segment of the horizontal line that has its center point\n  // inside the linear ring.\n  let pointX = NaN\n  let maxSegmentLength = -Infinity\n  intersections.sort(numberSafeCompareFunction)\n  x1 = intersections[0]\n  for (i = 1, ii = intersections.length; i < ii; ++i) {\n    x2 = intersections[i]\n    const segmentLength = Math.abs(x2 - x1)\n    if (segmentLength > maxSegmentLength) {\n      x = (x1 + x2) / 2\n      if (linearRingsContainsXY(\n          flatCoordinates, offset, ends, stride, x, y)) {\n        pointX = x\n        maxSegmentLength = segmentLength\n      }\n    }\n    x1 = x2\n  }\n  \n  if (isNaN(pointX)) {\n    // There is no horizontal line that has its center point inside the linear\n    // ring.  Use the center of the the linear ring's extent.\n    pointX = flatCenters[flatCentersOffset]\n  }\n  \n  if (opt_dest) {\n    opt_dest.push(pointX, y)\n    return opt_dest\n  } else {\n    return [pointX, y]\n  }\n}\n\n\n/**\n *\n * @param flatCoordinates\n * @param offset\n * @param endss\n * @param stride\n * @param flatCenters\n * @returns {Array}\n */\nexport function linearRingss (flatCoordinates, offset, endss, stride, flatCenters) {\n  let interiorPoints = []\n  let i, ii\n  for (i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i]\n    interiorPoints = linearRings(flatCoordinates,\n      offset, ends, stride, flatCenters, 2 * i, interiorPoints)\n    offset = ends[ends.length - 1]\n  }\n  \n  return interiorPoints\n}\n\n/**\n *\n * @param flatCoordinates\n * @param offset\n * @param endss\n * @param stride\n * @returns {Array}\n */\nexport function centerLinearRingss (flatCoordinates, offset, endss, stride) {\n  const flatCenters = []\n  let i, ii\n  let extent = ExtentUtil.createEmpty()\n  for (i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i]\n    extent = ExtentUtil.createOrUpdateFromFlatCoordinates(\n      flatCoordinates, offset, ends[0], stride)\n    flatCenters.push((extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2)\n    offset = ends[ends.length - 1]\n  }\n  return flatCenters\n}\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/support/interpolate.js","/**\n * Created by zhangyong on 2017/6/14.\n */\n\n/**\n *\n * @param arr\n * @param target\n * @param direction\n * @returns {number}\n */\nexport function linearFindNearest (arr, target, direction) {\n  const n = arr.length\n  if (arr[0] <= target) {\n    return 0\n  } else if (target <= arr[n - 1]) {\n    return n - 1\n  } else {\n    let i\n    if (direction > 0) {\n      for (i = 1; i < n; ++i) {\n        if (arr[i] < target) {\n          return i - 1\n        }\n      }\n    } else if (direction < 0) {\n      for (i = 1; i < n; ++i) {\n        if (arr[i] <= target) {\n          return i\n        }\n      }\n    } else {\n      for (i = 1; i < n; ++i) {\n        if (arr[i] == target) {\n          return i\n        } else if (arr[i] < target) {\n          if (arr[i - 1] - target < target - arr[i]) {\n            return i - 1\n          } else {\n            return i\n          }\n        }\n      }\n    }\n    return n - 1\n  }\n}\n\n/**\n *\n * @param arr\n * @param compareFnc\n */\nexport function stableSort (arr, compareFnc) {\n  const length = arr.length\n  let tmp = Array(arr.length)\n  let i\n  \n  for (i = 0; i < length; i++) {\n    tmp[i] = {index: i, value: arr[i]}\n  }\n  \n  tmp.sort(function(a, b) {\n    return compareFnc(a.value, b.value) || a.index - b.index\n  })\n  \n  for (i = 0; i < arr.length; i++) {\n    arr[i] = tmp[i].value\n  }\n}\n\n/**\n *\n * @param haystack\n * @param needle\n * @param opt_comparator\n * @returns {number}\n */\nexport function binarySearch (haystack, needle, opt_comparator) {\n  let mid, cmp\n  const comparator = opt_comparator || numberSafeCompareFunction\n  let low = 0\n  let high = haystack.length\n  let found = false\n  \n  while (low < high) {\n    /* Note that \"(low + high) >>> 1\" may overflow, and results in a typecast\n     * to double (which gives the wrong results). */\n    mid = low + (high - low >> 1)\n    cmp = +comparator(haystack[mid], needle)\n    \n    if (cmp < 0.0) { /* Too low. */\n      low  = mid + 1\n      \n    } else { /* Key found or too high */\n      high = mid\n      found = !cmp\n    }\n  }\n  \n  /* Key not found. */\n  return found ? low : ~low\n}\n\n/**\n * Determine if two arrays get equal to each other\n * @param arr1\n * @param arr2\n * @returns {boolean}\n */\nexport function equals (arr1, arr2) {\n  const len1 = arr1.length\n  if (len1 !== arr2.length) {\n    return false\n  }\n  \n  for (let i = 0; i < len1; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false\n    }\n  }\n  \n  return true\n}\n\n/**\n *\n * @param a\n * @param b\n * @returns {number}\n */\nexport function numberSafeCompareFunction (a, b) {\n  return a > b ? 1 : a < b ? -1 : 0\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/array.js","/**\n * Created by zypc on 2016/11/13.\n */\n\nimport Geometry from './geometry'\nimport Extent from './extent'\n\nimport {linearRings} from './support/interpolate'\nimport {linearRingsAreOriented,orientLinearRings} from './support/orient'\n\n/**\n * 面类和数据结构\n *\n * 多边形是<b>闭合数据结构</b>，所有首尾点必须相同。\n *\n * 多边形顶点存储是一个二维数组，数组中第一条闭合点串表示多边形\n * 的最外层，第二条及其以后表示多边形的内部洞环。\n *\n * @class Polygon\n * @extends Geometry\n * @module geometry\n * @constructor\n * @example\n *\n *  var polygon = new Datatang.Polygon([[100, 100], [120, 130],[50, 50],[100, 100]])\n *\n */\nexport default class Polygon extends Geometry {\n  \n  /**\n   * 创建一个Polygon实例\n   * @constructor\n   * @param rings\n   */\n  constructor (rings = []) {\n    super()\n\n    this._rings = []\n  \n    /**\n     * 记录当前多边形内点更新的次数\n     * @type {number}\n     * @private\n     */\n    this._flatInteriorPointRevision = -1\n  \n    /**\n     * 缓存当前多边形内点\n     * @type {null}\n     * @private\n     */\n    this._flatInteriorPoint = null\n  \n    /**\n     * 更新多边形的坐标\n     */\n    this.setCoordinates(rings)\n  }\n\n  /**\n   * 获取图形的最小外接矩形(MBR-Minimum Bounding Rectangle)\n   * 可用来对图形进行拖动、旋转、缩放\n   *\n   * @method extent\n   * @abstrct function\n   * @returns {Extent}\n   */\n  get extent () {\n    if (this._extent === null) {\n      const coords = this.getCoordinates()\n      \n      // 计算最小外界矩形，只考虑外围环\n      if (coords.length > 0) {\n        let rings = coords[0]\n  \n        let xmin = Number.POSITIVE_INFINITY\n        let ymin = Number.POSITIVE_INFINITY\n        let xmax = Number.NEGATIVE_INFINITY\n        let ymax = Number.NEGATIVE_INFINITY\n  \n        for (let ring of rings) {\n          xmin = Math.min(xmin, ring[0])\n          ymin = Math.min(ymin, ring[1])\n          xmax = Math.max(xmax, ring[0])\n          ymax = Math.max(ymax, ring[1])\n        }\n  \n        this._extent = new Extent(xmin, ymin, xmax, ymax)\n      }\n    }\n\n    return this._extent\n  }\n\n  /**\n   * 获取对象的几何类型\n   *\n   * @method geometryType\n   * @abstrct function\n   * @returns {String}\n   */\n  get geometryType () { return Geometry.POLYGON }\n\n  /**\n   * 设置多边形的边，如果设置了边，则需要重新计算\n   * 外接矩形\n   *\n   * @property rings\n   */\n  get rings () { return this._rings }\n  set rings (value) {\n    this._rings = value\n    this._extent = null\n  }\n  \n  /**\n   * 多边形添加线段\n   *\n   * @method addRing\n   * @param ring {Array}\n   *\n   */\n  addRing (ring) {\n    this.rings.push(ring)\n    this._extent = null\n  }\n  \n  /**\n   * 判断点是否在多边形上\n   *\n   * @method containsXY\n   * @param x {Number}\n   * @param y {Number}\n   * @returns {Boolean}\n   */\n  containsXY (x, y) {\n    const coords = this.getCoordinates()\n    const outRing = coords[0]\n    \n    let contains = false\n    if (this._inOneRing(x, y, outRing)) {\n      contains = true\n    }\n    \n    if (coords.length > 1 && contains) {\n      const coordsTemp = coords.slice(1)\n      \n      const inHole = coordsTemp.some( ring =>\n        this._inOneRing(x, y, ring)\n      )\n      \n      if (inHole) {\n        contains = false\n      }\n    }\n    \n    return contains\n  }\n  \n  /**\n   * 判断 x 和 y 的值是否在环内\n   *\n   * @param x {Number}\n   * @param y {Number}\n   * @param ring {Array}\n   * @returns {Boolean}\n   * @private\n   */\n  _inOneRing (x, y, ring) {\n    const px = x\n    const py = y\n    let flag = false\n  \n    for (let i = 0, l = ring.length, j = l - 1; i < l; j = i, i++) {\n      const sx = ring[i][0]\n      const sy = ring[i][1]\n      const tx = ring[j][0]\n      const ty = ring[j][1]\n    \n      // 点与多边形顶点重合\n      if ((sx === px && sy === py) || (tx === px && ty === py)) {\n        return true\n      }\n    \n      // 判断线段两端点是否在射线两侧\n      if ((sy < py && ty >= py) || (sy >= py && ty < py)) {\n        // 线段上与射线 Y 坐标相同的点的 X 坐标\n        let x = sx + (py - sy) * (tx - sx) / (ty - sy)\n      \n        // 点在多边形的边上\n        if (x === px) {\n          return true\n        }\n      \n        // 射线穿过多边形的边界\n        if (x > px) {\n          flag = !flag\n        }\n      }\n    }\n  \n    // 射线穿过多边形边界的次数为奇数时点在多边形内\n    return flag\n  }\n  \n  /**\n   * 计算多边形的内点\n   *\n   * @method getFlatInteriorPoint\n   * @returns {Array} 返回内点，格式 [x, y]\n   */\n  getFlatInteriorPoint () {\n    // 缓存限制\n    if (this._flatInteriorPointRevision !== this.revision ) {\n      const flatCenter = [this.extent.centerX, this.extent.centerY]\n  \n      const ends = [this.getCoordinates()[0].length * 2]\n      const orientedFlatCoordinates = this.getOrientedFlatCoordinates()\n  \n      this._flatInteriorPoint = linearRings(\n        orientedFlatCoordinates, 0, ends, this.stride, flatCenter, 0)\n      \n      this._flatInteriorPointRevision = this.revision\n    }\n    \n    return  this._flatInteriorPoint\n  }\n  \n  /**\n   * 对多边形的边进行顺序化\n   * getOrientedFlatCoordinates\n   * @returns {*}\n   */\n  getOrientedFlatCoordinates () {\n    let orientedFlatCoordinates\n    \n    const flatCoordinates = []\n    const coordinates = this.getCoordinates()[0]\n  \n    coordinates.forEach( point => {\n      flatCoordinates.push(point[0], point[1])\n    })\n  \n    const ends = [flatCoordinates.length]\n    \n    if (linearRingsAreOriented(flatCoordinates, 0, ends, this.stride)) {\n      orientedFlatCoordinates = flatCoordinates\n    } else {\n      orientedFlatCoordinates = flatCoordinates.slice()\n      orientedFlatCoordinates.length = orientLinearRings(orientedFlatCoordinates,\n        0, ends, this.stride)\n    }\n    \n    // this.orientedRevision_ = this.getRevision()\n      \n    return orientedFlatCoordinates\n  }\n  \n  /**\n   * 判断当前多边形是否有洞\n   *\n   * @method hasHoles\n   * @returns {boolean}\n   */\n  hasHoles () {\n    return this.getCoordinates().length > 1\n  }\n  \n  /**\n   * 获取多边形坐标\n   *\n   * @method getCoordinates\n   * @returns {[*,*]}\n   */\n  getCoordinates () {\n    return this.rings\n  }\n\n  /**\n   * 得到最后一个点的坐标，显示表单\n   *\n   * @param {Number} offsetX x的偏移量\n   * @param {Number} offsetY y的偏移量\n   * @returns {[*,*]}\n   */\n  getFormShowPosition (offsetX = 0, offsetY = 0) {\n    const coordinates = this.getCoordinates()[0]\n    if (coordinates.length === 0) {\n      return\n    }\n    \n    const lastPoint = coordinates[coordinates.length - 2]\n    return [lastPoint[0] - offsetX, lastPoint[1] - offsetY]\n  }\n  \n  /**\n   * 设置多边形的坐标\n   *\n   * @method setCoordinates\n   * @param coords\n   */\n  setCoordinates (coords) {\n    this.rings = coords\n    this._extent = null\n    this.stride = 2\n    this.changed()\n  }\n  \n  /**\n   * getCoordinateIndex\n   * @param coord\n   * @returns {*|number}\n   */\n  getCoordinateIndex (coord) {\n    const coords = this.getCoordinates()\n    for (let i = 0, len = coords.length; i < len; i++) {\n      const rings = coords[i]\n      for (let j = 0,jLen = rings.length; j < jLen; j++) {\n        const point = rings[j]\n        if (point[0] === coord[0] && point[1] === coord[1]) {\n          return {\n            ringIndex: i,\n            index: j\n          }\n        }\n      }\n    }\n    \n    return {\n      ringIndex: -1,\n      index: -1\n    }\n  }\n  \n  /**\n   * 克隆多边形\n   *\n   * @method clone\n   * @returns {Polygon}\n   */\n  clone () {\n    const coords = this.getCoordinates()\n    \n    const newCoordinates = []\n    let outRings = []\n    coords.forEach( ring => {\n      ring.forEach(points => {\n        outRings.push([points[0], points[1]])\n      })\n  \n      newCoordinates.push(outRings)\n      outRings = []\n    })\n    \n    const newPolygon = new Polygon()\n    newPolygon.setCoordinates(newCoordinates)\n    \n    return newPolygon\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/polygon.js","/**\n * Created by zhangyong on 2017/6/14.\n */\n\n/**\n *\n * @param flatCoordinates\n * @param offset\n * @param endss\n * @param stride\n * @param opt_right\n * @returns {*}\n */\nexport function orientLinearRingss (flatCoordinates, offset, endss, stride, opt_right) {\n  let i, ii\n  for (i = 0, ii = endss.length; i < ii; ++i) {\n    offset = orientLinearRings(\n      flatCoordinates, offset, endss[i], stride, opt_right)\n  }\n  \n  return offset\n}\n\n/**\n *\n * @param flatCoordinates\n * @param offset\n * @param ends\n * @param stride\n * @param opt_right\n * @returns {*}\n */\nexport function orientLinearRings (flatCoordinates, offset, ends, stride, opt_right) {\n  const right = opt_right !== undefined ? opt_right : false\n  let i, ii\n  \n  for (i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i]\n    const isClockwise = linearRingIsClockwise(flatCoordinates, offset, end, stride)\n    \n    const reverse = i === 0 ?\n    (right && isClockwise) || (!right && !isClockwise) :\n    (right && !isClockwise) || (!right && isClockwise)\n    \n    if (reverse) {\n      // reverse(flatCoordinates, offset, end, stride)\n      // 反转\n      flatCoordinates = flatCoordinates.reverse()\n    }\n    offset = end\n  }\n  \n  return offset\n}\n\n/**\n *\n * @param flatCoordinates\n * @param offset\n * @param endss\n * @param stride\n * @param opt_right\n * @returns {boolean}\n */\nexport function linearRingssAreOriented (flatCoordinates, offset, endss, stride, opt_right) {\n  let i, ii\n  for (i = 0, ii = endss.length; i < ii; ++i) {\n    if (!linearRingsAreOriented(\n        flatCoordinates, offset, endss[i], stride, opt_right)) {\n      return false\n    }\n  }\n  return true\n}\n\n/**\n * 判断线串的方向\n * @param flatCoordinates\n * @param offset\n * @param ends\n * @param stride\n * @param opt_right\n * @returns {boolean}\n */\nexport function linearRingsAreOriented (flatCoordinates, offset, ends, stride, opt_right) {\n  const right = opt_right !== undefined ? opt_right : false\n  let i, ii\n  \n  for (i = 0, ii = ends.length; i < ii; ++i) {\n    let end = ends[i]\n    // 判断坐标串是否是顺时针\n    let isClockwise = linearRingIsClockwise(flatCoordinates, offset, end, stride)\n    \n    if (i === 0) {\n      if ((right && isClockwise) || (!right && !isClockwise)) {\n        return false\n      }\n    } else {\n      if ((right && !isClockwise) || (!right && isClockwise)) {\n        return false\n      }\n    }\n    \n    offset = end\n  }\n  \n  return true\n}\n\n/**\n * 判断坐标串是否是顺时针方向\n * @param flatCoordinates\n * @param offset\n * @param end\n * @param stride\n * @returns {boolean}\n */\nexport function linearRingIsClockwise(flatCoordinates, offset, end, stride) {\n  // http://tinyurl.com/clockwise-method\n  // https://github.com/OSGeo/gdal/blob/trunk/gdal/ogr/ogrlinearring.cpp\n  let edge = 0\n  let x1 = flatCoordinates[end - stride]\n  let y1 = flatCoordinates[end - stride + 1]\n  \n  for (; offset < end; offset += stride) {\n    let x2 = flatCoordinates[offset]\n    let y2 = flatCoordinates[offset + 1]\n    edge += (x2 - x1) * (y2 + y1)\n    x1 = x2\n    y1 = y2\n  }\n  \n  return edge > 0\n}\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/support/orient.js","/**\n * Created by zhangyong on 2017/8/4.\n */\n\nimport Geometry from './geometry'\nimport Polygon from './polygon'\nimport Extent from './extent'\n\nimport {centerLinearRingss, linearRingss} from './support/interpolate'\nimport {linearRingssAreOriented,orientLinearRingss} from './support/orient'\n\n\n/**\n * 定义复合多边形对象和数据结构\n *\n *\n * @class MutilPolygon\n * @module geometry\n * @constructor\n *\n */\nexport default class MutilPolygon extends Geometry {\n  \n  constructor (coordinates) {\n    super()\n    \n    this._polygons = []\n  \n    this.stride = 2\n  \n    /**\n     * 记录当前多边形内点更新的次数\n     * @type {number}\n     * @private\n     */\n    this._flatInteriorPointRevision = -1\n  \n    /**\n     * 缓存当前多边形内点\n     * @type {null}\n     * @private\n     */\n    this._flatInteriorPoint = null\n  \n    this.setCoordinates(coordinates)\n  }\n  \n  /**\n   *\n   * @returns {String}\n   */\n  get geometryType () { return Geometry.MULTI_POLYGON }\n  \n  /**\n   * 计算复合多边形的最小外界矩形\n   * 注意：这里所求出来的是多个多边形的最小外界矩形，既一个能包裹所有\n   * 多边形的矩形\n   *\n   * @returns {Extent|null}\n   */\n  get extent () {\n    if (this._extent === null) {\n      const allPolygonCoords = this.getCoordinates()\n    \n      // 计算最小外界矩形，只考虑外围环\n      if (allPolygonCoords.length > 0) {\n        let xmin = Number.POSITIVE_INFINITY\n        let ymin = Number.POSITIVE_INFINITY\n        let xmax = Number.NEGATIVE_INFINITY\n        let ymax = Number.NEGATIVE_INFINITY\n        \n        allPolygonCoords.forEach( polyCoods => {\n          let rings = polyCoods[0]\n          for (let ring of rings) {\n            xmin = Math.min(xmin, ring[0])\n            ymin = Math.min(ymin, ring[1])\n            xmax = Math.max(xmax, ring[0])\n            ymax = Math.max(ymax, ring[1])\n          }\n        })\n      \n        this._extent = new Extent(xmin, ymin, xmax, ymax)\n      }\n    }\n  \n    return this._extent\n  }\n  \n  /**\n   * 获得复合多边形的坐标\n   * @returns {Array|*}\n   */\n  getCoordinates () {\n    return this._polygons\n  }\n  \n  /**\n   * 设置复合多边形的坐标\n   * @param coordinates\n   */\n  setCoordinates (coordinates) {\n    this._polygons = coordinates\n    this._extent = null\n    this.changed()\n  }\n  \n  /**\n   * 获得一个多边形对象\n   * @method getPolygon\n   * @param index 多边形的下标\n   * @returns {Datatang.Polygon} 返回一个新的多边形对象\n   */\n  getPolygon (index) {\n    if (index < 0 && this._polygons.length < index ) {\n      return null\n    }\n    \n    const coords = this._polygons[index]\n    let outRing = []\n    let innerRing = []\n    coords.forEach( rings => {\n      rings.forEach( points => {\n        innerRing.push([points[0], points[1]])\n      })\n      \n      outRing.push(innerRing)\n      innerRing = []\n    })\n    \n    const polygon = new Polygon(outRing)\n    return polygon\n  }\n  \n  /**\n   * 判断集合多边形是否包括指定 x 和 y\n   * @param x\n   * @param y\n   * @returns {boolean}\n   */\n  containsXY (x, y) {\n    const polygons = this._polygons\n    for (let i = 0, len = polygons.length; i < len; i ++ ) {\n      const onePolygon = this.getPolygon(i)\n      if (onePolygon.containsXY(x, y)) {\n        return true\n      }\n    }\n    \n    return false\n  }\n  \n  /**\n   * 获取标签显示的内点\n   * 注意：复合多边形，标签显示的位置，只显示在第一个图形上\n   * @returns {*}\n   */\n  getFlatInteriorPoint () {\n    if (this._flatInteriorPointRevision !== this.revision) {\n      this._flatInteriorPointRevision = this.revision\n  \n      const polygons = this._polygons\n      let flatCoordinates = []\n      let endss = []\n  \n      const orderArray = []\n  \n      polygons.forEach( polygon => {\n        const outRings = polygon[0]\n        orderArray.push(outRings)\n      })\n  \n      orderArray.sort( (arr1, arr2) => arr1.length - arr2.length )\n  \n      let lastLen = 0\n      orderArray.forEach( arr => {\n        const currLen = arr.length * 2 + lastLen\n        endss.push([currLen])\n        lastLen = currLen\n    \n        arr.forEach( points => {\n          flatCoordinates.push(points[0], points[1])\n        })\n      })\n  \n      const flatCenters = centerLinearRingss(flatCoordinates, 0, endss, this.stride)\n      this._flatInteriorPoint = linearRingss(\n        this.getOrientedFlatCoordinates(flatCoordinates, endss), 0, endss, this.stride,\n        flatCenters)\n    }\n    \n  \n    return this._flatInteriorPoint\n  }\n  \n  /**\n   * 计算复合多边形顺时针坐标\n   * @param flatCoordinates\n   * @param endss\n   * @returns {*}\n   */\n  getOrientedFlatCoordinates (flatCoordinates, endss) {\n    let orientedFlatCoordinates\n    \n    if (linearRingssAreOriented(flatCoordinates, 0, endss, this.stride)) {\n      orientedFlatCoordinates = flatCoordinates\n    } else {\n      orientedFlatCoordinates = [...flatCoordinates]\n      orientedFlatCoordinates.length = orientLinearRingss(orientedFlatCoordinates,\n        0, endss, this.stride)\n    }\n    \n    return orientedFlatCoordinates\n  }\n  \n  /**\n   * 根据坐标值计算复合多边形的点下标\n   *\n   * @method getCoordinateIndex\n   * @param coord 坐标值，[x, y]结构\n   * @returns {\n   *    {\n   *      polygonIndex: number 位于第几个多边形上 ,\n   *      ringIndex: number 位于多边形第几个环上,\n   *      index: number 位于环上第几个顶点上\n   *     }\n   *   }\n   */\n  getCoordinateIndex (coord) {\n    const polygonCoods = this.getCoordinates()\n    \n    for ( let ii = 0, iiLen = polygonCoods.length ; ii < iiLen; ii ++) {\n      const coords = polygonCoods[ii]\n  \n      for (let i = 0, len = coords.length; i < len; i++) {\n        const rings = coords[i]\n        for (let j = 0,jLen = rings.length; j < jLen; j++) {\n          const point = rings[j]\n          if (point[0] === coord[0] && point[1] === coord[1]) {\n            return {\n              polygonIndex : ii,\n              ringIndex: i,\n              index: j\n            }\n          }\n        }\n      }\n    }\n  \n    return {\n      polygonIndex : -1,\n      ringIndex: -1,\n      index: -1\n    }\n  }\n  \n  /**\n   * 克隆一个 Mutilpolygon\n   * @returns {MutilPolygon}\n   */\n  clone () {\n    const allCoords = []\n    \n    this._polygons.forEach( coords => {\n      let outRing = []\n      let innerRing = []\n      coords.forEach( rings => {\n        rings.forEach( points => {\n          innerRing.push([points[0], points[1]])\n        })\n    \n        outRing.push(innerRing)\n      })\n  \n      allCoords.push(outRing)\n      outRing = []\n    })\n    \n    const newMutilPolygon = new MutilPolygon(allCoords)\n    return newMutilPolygon\n  }\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/mutilpolygon.js","/**\n * Created by zhangyong on 2017/8/23.\n */\n\nimport Geometry from './geometry'\nimport Polygon from './polygon'\nimport {distance} from '../geometry/support/geometryutil'\n\nimport {getPointInExtendedLineByDistanceFromAB} from '../geometry/support/geometryutil'\n\nexport default class Parallelogram extends Polygon {\n  \n  constructor (coordinates) {\n    super(coordinates)\n  }\n  \n  get geometryType () {\n    return Geometry.PARALLELOGRAM\n  }\n  \n  getCoordinateIndex (coord) {\n    return this.getCoordinates()[0].findIndex( points =>\n      points[0] === coord[0] && points[1] === coord[1]\n    )\n  }\n  \n  clone () {\n    return new Parallelogram(this.getCoordinates())\n  }\n  \n  /**\n   *\n   * @param coordinates\n   * @returns {Array}\n   */\n  static getTheLastPoint (coordinates) {\n    const firstPoint = coordinates[0]\n    const secondPoint = coordinates[1]\n    const thirdPoint = coordinates[2]\n    \n    const dx = thirdPoint[0] - secondPoint[0]\n    const dy = thirdPoint[1] - secondPoint[1]\n    \n    return [firstPoint[0] + dx, firstPoint[1] + dy]\n  }\n  \n  \n  /**\n   * 用于计算和更新平行四边形的顶点\n   *\n   * @param p 平行四边形对象\n   * @param vertex 新移动的点\n   * @param oldVertex 上次移动的点\n   * @param dragSegment 数据对象\n   * @returns {*} 返回新的点集合（3维数组）\n   */\n  static updateCoordinatesForModification(p, vertex, oldVertex, dragSegment) {\n    let dis = 0\n    if (oldVertex) {\n      dis = distance (oldVertex, vertex)\n    }\n    \n    const oldRingsCoordinates = p.getCoordinates()\n    if (dis === 0) {\n      return oldRingsCoordinates\n    }\n    \n    const oldCoordinates = oldRingsCoordinates[0]\n    const segement = dragSegment[0]\n    const edgeIndex = segement.index\n  \n    let firstCoord\n    let nowCood\n    let otherCood\n    \n    if (edgeIndex === 0 || edgeIndex === 4) {\n      firstCoord = oldCoordinates[3]\n      nowCood = oldCoordinates[0]\n      otherCood = oldCoordinates[1]\n    } else {\n      firstCoord = oldCoordinates[edgeIndex - 1]\n      nowCood = oldCoordinates[edgeIndex]\n      otherCood = oldCoordinates[edgeIndex + 1]\n    }\n    \n    // 计算延长线上的一点\n    const newCood1 = getPointInExtendedLineByDistanceFromAB(firstCoord[0],\n      firstCoord[1], nowCood[0], nowCood[1], dis)\n    \n    // 计算向量\n    const tempXX = nowCood[0] - firstCoord[0]\n    const tempYY = nowCood[1] - firstCoord[1]\n    const tempX2 = vertex[0] - oldVertex[0]\n    const tempY2 = vertex[1] - oldVertex[1]\n    \n    // 使用向量的点积，来计算两个向量的方向是否一致\n    // 如果 <0 则表示异向\n    const direction = ( tempX2 * tempXX ) + (tempY2 * tempYY)\n    \n    const dx = newCood1[0] - nowCood[0]\n    const dy = newCood1[1] - nowCood[1]\n    let newCood2\n    \n    // 不同方向\n    if (direction < 0) {\n      newCood1[0] = nowCood[0] - dx\n      newCood1[1] = nowCood[1] - dy\n  \n      newCood2 = [otherCood[0] - dx, otherCood[1] - dy]\n    } else {\n      newCood2 = [otherCood[0] + dx, otherCood[1] + dy]\n    }\n    \n    \n    oldCoordinates[edgeIndex] = newCood1\n    oldCoordinates[edgeIndex + 1] = newCood2\n    \n    if (edgeIndex === 0) {\n      oldCoordinates[4] = oldCoordinates[0]\n    } else if (edgeIndex === 4 || edgeIndex === 3) {\n      oldCoordinates[0] = oldCoordinates[4]\n    }\n    \n    return [oldCoordinates]\n  }\n  \n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/parallelogram.js","/**\n * Created by zhangyong on 2017/6/6.\n */\n\n\nexport const ImageState = {}\n\n/**\n * On IDLE\n * @type {number}\n */\nImageState.IDLE = 0\n\n/**\n * On loading\n * @type {number}\n */\nImageState.LOADING = 1\n\n/**\n * Already loaded\n * @type {number}\n */\nImageState.LOADED = 2\n\n/**\n * Error occurred\n * @type {number}\n */\nImageState.ERROR = 3\n\nexport default {\n  ImageState\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lyr/image/imagestate.js","/**\n * Created by zhangyong on 2017/6/6.\n */\n\nimport BaseEvent from '../../core/baseevent'\n\nexport default class ImageEvent extends BaseEvent {\n  constructor (type, image) {\n    super(type)\n    \n    this.image = image\n  }\n  \n}\n\n\nImageEvent.Type = {\n  \n  /**\n   * Triggered when an image starts loading.\n   * @api\n   */\n  IMAGELOADSTART: 'imageloadstart',\n  \n  /**\n   * Triggered when an image finishes loading.\n   * @api\n   */\n  IMAGELOADEND: 'imageloadend',\n  \n  /**\n   * Triggered if image loading results in an error.\n   * @api\n   */\n  IMAGELOADERROR: 'imageloaderror'\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/lyr/image/imageevent.js","/**\n * Created by zhangyong on 2017/5/22.\n */\n//  The BaseEvent is a base class, all event dinfined in library should inherit this.\n//\n// The sub event class can define it's own property ,\n//\n//  which can be passed to other event Listener via event dispatch.\n/**\n * 定义事件模型基类，自定义事件必须继承该类。\n *\n * 事件类及其继承者用于事件传递、数据传送和信息通告。\n *\n * @class BaseEvent\n * @constructor\n * @module core\n *\n */\nexport default class BaseEvent {\n  \n  /**\n   * 构造函数\n   *\n   * @constructor\n   * @param type\n   */\n  constructor (type) {\n  \n    /**\n     * 是否停止事件的冒泡\n     *\n     * @type {Boolean}\n     * @property propagatinoStopped\n     */\n    this.propagatinoStopped = false\n  \n    /**\n     * 事件标示\n     *\n     * @example'mousedown' | 'mousemove' | 'click'\n     *\n     * @type {String}\n     * @property type\n     */\n    this.type = type\n  \n    /**\n     * 事件源\n     *\n     * @type {Object}\n     * @property target\n     */\n    this.target = null\n  }\n  \n}\n\n/**\n *\n * 用于阻止事件的冒泡\n *\n * @param evt {Object} evt DOM event model\n * @static\n * @method stopPropagation\n */\nBaseEvent.stopPropagation = evt => evt.stopPropagation()\n\n/**\n *\n * 用于阻止浏览器的默认行为\n *\n * @static\n * @method preventDefault\n * @param evt {Object} evt DOM event model\n */\nBaseEvent.preventDefault = evt => evt.preventDefault()\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/baseevent.js","/**\n * Created by zhangyong on 2017/6/6.\n */\n\nimport BaseImage from '../../core/baseimage'\nimport {ImageState} from './imagestate'\nimport Obj from '../../utils/obj'\nimport {ExtentUtil} from '../../geometry/support/extentutil'\nimport {EventType} from '../../meek/eventtype'\n\nimport {listenOnce, unlistenByKey} from '../../core/eventmanager'\nimport {getUid} from '../../utils/counter'\n\nexport default class SingleImage extends BaseImage {\n  \n  constructor (extent, resolution, pixelRatio, attributions, src,\n               crossOrigin, imageLoadFunction) {\n    \n    super(extent, resolution, pixelRatio, ImageState.IDLE,\n      attributions)\n  \n    /**\n     * @private\n     * @type {string}\n     */\n    this._src = src\n  \n    /**\n     * @private\n     * @type {HTMLCanvasElement|Image|HTMLVideoElement}\n     */\n    this.domImage = new Image()\n    if (crossOrigin !== null) {\n      this.getDomImage().crossOrigin = crossOrigin\n    }\n  \n    /**\n     * @private\n     * @type {Object.<number, (HTMLCanvasElement|Image|HTMLVideoElement)>}\n     */\n    this._imageByContext = {}\n  \n    /**\n     * @private\n     * @type {Array.<EventsKey>}\n     */\n    this._imageListenerKeys = null\n  \n    /**\n     * @protected\n     * @type {ImageState}\n     */\n    this.state = ImageState.IDLE\n  \n    /**\n     * @private\n     * @type {ImageLoadFunctionType}\n     */\n    this._imageLoadFunction = imageLoadFunction\n  }\n  \n  /**\n   * @inheritDoc\n   * @api\n   */\n  getDomImage (opt_context) {\n    if (opt_context !== undefined) {\n      let image\n      let key = getUid(opt_context)\n      \n      if (key in this._imageByContext) {\n        return this._imageByContext[key]\n      } else if (Obj.isEmpty(this._imageByContext)) {\n        image = this._domImage\n      } else {\n        image = this._domImage.cloneNode(false)\n      }\n      \n      this._imageByContext[key] = image\n      return image\n    } else {\n      return this._domImage\n    }\n  }\n  \n  \n  /**\n   * Tracks loading or read errors.\n   *\n   * @private\n   */\n  _handleImageError () {\n    this.state = ImageState.ERROR\n    this._unlistenImage()\n    this.changed()\n  }\n  \n  \n  /**\n   * Tracks successful image load.\n   *\n   * @private\n   */\n  _handleImageLoad () {\n    if (this.resolution === undefined) {\n      this.resolution = ExtentUtil.getHeight(this.extent) / this.getDomImage().height\n    }\n    \n    this.state = ImageState.LOADED\n    this._unlistenImage()\n    this.changed()\n  }\n  \n  \n  /**\n   * Load the image or retry if loading previously failed.\n   * Loading is taken care of by the tile queue, and calling this method is\n   * only needed for preloading or for reloading in case of an error.\n   * @override\n   * @api\n   */\n  load () {\n    if (this.state === ImageState.IDLE || this.state === ImageState.ERROR) {\n      this.state = ImageState.LOADING\n      this.changed()\n      this._imageListenerKeys = [\n        listenOnce(this.getDomImage(), EventType.ERROR,\n          this._handleImageError, this),\n        listenOnce(this.getDomImage(), EventType.LOAD,\n          this._handleImageLoad, this)\n      ]\n      \n      this._imageLoadFunction(this, this._src)\n    }\n  }\n  \n  \n  /**\n   * @param {HTMLCanvasElement|Image|HTMLVideoElement} image Image.\n   */\n  set domImage (value) {\n    this._domImage = value\n  }\n  \n  /**\n   * Discards event handlers which listen for load completion or errors.\n   *\n   * @private\n   */\n  _unlistenImage () {\n    this._imageListenerKeys.forEach(unlistenByKey)\n    this._imageListenerKeys = null\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/lyr/image/singleimage.js","/**\n * Created by zhangyong on 2017/6/6.\n */\n\nimport BaseObject from '../core/baseobject'\n\n/**\n * The base class to represent a generic layer image,it has some basic properties.\n * such as extent,resolution,state<br/>\n *\n * 基础图片图层类，定义了一些用于加载图片的必要信息\n *\n * @class BaseImage\n * @extends BaseObject\n * @module core\n * @constructor\n */\nexport default class BaseImage extends BaseObject {\n  \n  /**\n   * Create a BaseImage\n   * @param extent the extent of layer\n   * @param resolution the resolution of layer\n   * @param pixelRatio the pixel ratio\n   * @param state the image loading status\n   * @param attributions\n   */\n  constructor (extent, resolution, pixelRatio,\n               state, attributions) {\n  \n    super()\n  \n    /**\n     * @type {Object}\n     * @private\n     */\n    this._attributions = attributions\n  \n    /**\n     * @type {Object}\n     * @private\n     */\n    this._extent = extent\n  \n    /**\n     * @type {Number}\n     * @private\n     */\n    this._pixelRatio = pixelRatio\n  \n    /**\n     * @type {Number}\n     * @private\n     */\n    this._resolution = resolution\n  \n    /**\n     * @type {Number}\n     * @private\n     */\n    this._state = state\n  }\n  \n  /**\n   * return the attributions of layer <br/>\n   * 返回图层的属性\n   * @property attributions\n   * @type Object\n   */\n  get attributions () {\n    return this._attributions\n  }\n  \n  /**\n   * return the extent of layer<br/>\n   * 返回图层的视图范围\n   * @property extent\n   * @type Object\n   */\n  get extent () {\n    return this._extent\n  }\n  \n  /**\n   * return the DOM image<br/>\n   * 返回DOM对象\n   * @param optContext options\n   * @method getDomImage\n   * @abstract\n   */\n  getDomImage (optContext) { return optContext }\n  \n  /**\n   * return the pixel ratio<br/>\n   * 返回像素因数\n   * @property pixelRatio\n   * @type Number\n   */\n  get pixelRatio () {\n    return this._pixelRatio\n  }\n  \n  /**\n   * return the resolution of layer<br/>\n   * 返回图层的分辨率\n   * @property resolution\n   * @type Number\n   */\n  get resolution () {\n    return this._resolution\n  }\n  set resolution (value) {\n    if (this._resolution !== value) {\n      this._resolution = value\n    }\n  }\n  \n  /**\n   * return the state of layer loading <br/>\n   * 获取图片下载状态\n   * @property state\n   * @type Number\n   */\n  get state () { return this._state }\n  set state (value) {\n    if (this.state !== value){\n      this._state = value\n    }\n  }\n  \n  /**\n   * Load not yet loaded URI. <br/>\n   * 抽象方法，下载图片\n   * @abstract\n   * @method load\n   */\n  load () {}\n  \n}\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/baseimage.js","\nimport BaseLayer from './baselayer'\nimport {Style} from '../style/style'\nimport {ExtentUtil} from '../geometry/support/extentutil'\nimport FeatureEvent from '../meek/featureevent'\nimport {EventType} from '../meek/eventtype'\nimport {listen, unlistenByKey} from '../core/eventmanager'\nimport Geometry from '../geometry/geometry'\n\n/**\n * FeatureLayer\n *\n * class FeatureLayer\n * @extends BaseObject\n * @module layer\n * @constructor\n */\nexport default class FeatureLayer extends BaseLayer {\n\n  constructor (options = {}) {\n    super(options)\n  \n    /**\n     *\n     * @type {Array}\n     * @private\n     */\n    this._features = []\n  \n    /**\n     *\n     * @type {null}\n     * @private\n     */\n    this._style = null\n  \n    /**\n     *\n     * @type {null}\n     * @private\n     */\n    this._styleFunction = null\n  \n    /**\n     *\n     * @type {Map}\n     * @private\n     */\n    this._featureChangeKeys = new Map()\n  \n    /**\n     *\n     */\n    this.style = options.style\n    \n    // add features if passed by options\n    if (options.features) {\n      this.addFeatures(options.features)\n    }\n  \n    /**\n     * zIndex\n     *\n     * @property zIndex\n     * @type {Number}\n     */\n    this.zIndex = options.zIndex || 2\n  \n    /**\n     * The rendering buffer will be used for building an extent that\n     * limit geometries rendering\n     * @type {number}\n     * @private\n     */\n    this._renderBuffer = options.renderBufferValue !== undefined ?\n      options.renderBufferValue : 100\n  \n  }\n  \n  /**\n   * 清除所有features\n   *\n   * @method clear\n   */\n  clear () {\n    if (this._features.length !== 0) {\n      this._features = []\n      \n      // remove the event listener from feature\n      const unlistenByKeyFn = unlistenByKey\n      \n      this._featureChangeKeys.forEach((value) => {\n        unlistenByKeyFn(value)\n      })\n      \n      this._featureChangeKeys.clear()\n      \n      this.dispatchEvent(new FeatureEvent(FeatureEvent.EventType.CLEAR))\n      this.dispatchEvent(FeatureEvent.EventType.FEATURE_COLLECTION_CHANGED)\n      this.changed()\n    }\n  }\n\n  /**\n   * 获取features\n   *\n   * @returns {Array}\n   */\n  get features () { return this._features }\n  \n  /**\n   * 通过id查找feature\n   *\n   * @param id\n   * @returns {Boolean}\n   */\n  findFeature (id) {\n    const features = this.features\n    return features.find( f => f.id === id )\n  }\n  \n  /**\n   * 向layer中添加features\n   *\n   * @method addFeatures\n   * @param {Object} features\n   * @returns {Boolean}\n   */\n  addFeatures (features) {\n    if (!Array.isArray(features)) {\n      return false\n    }\n    \n    this._addFeaturesInner(features)\n    this.dispatchEvent(FeatureEvent.EventType.FEATURE_COLLECTION_CHANGED)\n    this.changed()\n  }\n  \n  /**\n   * 判断feature是否存在\n   *\n   * @param feature\n   * @returns {Boolean}\n   */\n  hasFeature (feature) {\n    if (feature === null || feature === undefined) {\n      return false\n    }\n    \n    const featureId = feature.id\n    const features = this.features\n    const findIndex = features.findIndex(f => f.id === featureId )\n    \n    return findIndex > -1\n  }\n  \n  /**\n   * 添加feature到layer的集合中，并派发feature事件\n   *\n   * addFeaturesInner\n   * @param features\n   * @private\n   */\n  _addFeaturesInner (features) {\n    features.forEach(feature => {\n      if (!this.hasFeature(feature)) {\n        this.features.push(feature)\n        \n        this._setupChangeEvents(feature.id, feature)\n        this.dispatchEvent(new FeatureEvent(FeatureEvent.EventType.ADD_FEATURE, feature))\n      }\n    })\n  }\n  \n  /**\n   * 添加feature到layer的集合中\n   *\n   * @method addFeature\n   * @param feature\n   * @returns {Boolean}\n   */\n  addFeature (feature) {\n    if (!feature) {\n      return false\n    }\n    \n    this._addFeaturesInner([feature])\n    this.dispatchEvent(FeatureEvent.EventType.FEATURE_COLLECTION_CHANGED)\n    this.changed()\n  }\n  \n  /**\n   * 获取当前鼠标点的所有feature\n   *\n   * @method forEachFeatureAtPiexl\n   * @param frameState\n   * @param piexl {Array}\n   * @param callback\n   * @param tolerance {Number}\n   * @returns {*}\n   */\n  forEachFeatureAtPiexl (frameState,piexl,callback,tolerance) {\n    // frameState 携带 view 信息\n  \n    // 1、计算当前屏幕内的feature\n    const features = this._getCurrentExtentFeatures()\n    \n    // calculate features that their extent has intersected with a given point\n    const extentFeatures = this._getIntersectedFeatures(piexl,features)\n  \n    const piexlX = piexl[0]\n    const piexlY = piexl[1]\n    const options = {\n      tolerance: tolerance * frameState.viewState.resolution\n    }\n    \n    const result = extentFeatures.filter( (feature) =>\n      feature.geometry.containsXY(piexlX, piexlY, options)\n    )\n    \n    return result\n  }\n  \n  /**\n   *\n   * @param point\n   * @param features\n   * @private\n   */\n  _getIntersectedFeatures (point, features) {\n    return features.filter( (feature) =>\n      feature.geometry.pointInExtent(point)\n    )\n  }\n  \n  /**\n   *\n   * @returns {*}\n   * @private\n   */\n  _getCurrentExtentFeatures () {\n    return this.features\n  }\n  \n  /**\n   * 从集合中移除feature\n   *\n   * @param feature\n   * @returns {Boolean}\n   */\n  removeFeature (feature) {\n    const features = this.features\n    if (features.length === 0) {\n      return false\n    }\n    \n    const featureId = feature.id\n    const index = features.findIndex( f =>\n      f.id === featureId\n    )\n    \n    \n    if (index > -1) {\n      features.splice(index, 1)\n      \n      this._featureChangeKeys.delete(featureId)\n      \n      this.dispatchEvent(new FeatureEvent(FeatureEvent.EventType.REMOVE_FEATURE, feature))\n      this.dispatchEvent(FeatureEvent.EventType.FEATURE_COLLECTION_CHANGED)\n      this.changed()\n    }\n  }\n  \n  /**\n   *\n   * @param featureKey\n   * @param feature\n   * @private\n   */\n  _setupChangeEvents (featureKey, feature) {\n    this._featureChangeKeys.set(featureKey, listen(feature,\n      EventType.CHANGE, this._handleFeatureChange, this))\n  }\n  \n  /**\n   *\n   * @private\n   */\n  _handleFeatureChange () {\n    this.changed()\n  }\n\n  /**\n   * 样式读写器\n   *\n   * @property style\n   * @param value\n   */\n  set style (value) {\n    this._style = value !== undefined ? value : Style.defaultFunction()\n    this._styleFunction = value === null ? undefined :Style.createFunction(this._style)\n  }\n  \n  get style () {\n    if(this._style === null){\n      this._style = Style.defaultFunction()\n    }\n    \n    return this._style\n  }\n  \n  /**\n   * renderBuffer读写器\n   *\n   */\n  get renderBuffer() { return this._renderBuffer }\n  set renderBuffer (renderBufferValue) {\n    if (this._renderBuffer !== renderBufferValue) {\n      this._renderBuffer = renderBufferValue\n    }\n  }\n  \n  /**\n   * 加载当前屏幕的 features\n   *\n   * 默认会把点、线放在队列尾部\n   *\n   * @method loadFeature\n   * @param extent {Geometry}\n   * @returns {feature}\n   */\n  loadFeature (extent) {\n    const features = this.features\n    const intersects = ExtentUtil.intersects\n    const createOrUpdate = ExtentUtil.createOrUpdate\n    const newFeatures = []\n    const pointFeatures = []\n    const lineFeatures = []\n    \n    features.forEach(feature => {\n      // 判断图形是否显示\n      if (feature.display) {\n        const geometry = feature.geometry\n        const geometryExtent = geometry.extent\n        const extentArr = createOrUpdate(geometryExtent.xmin,\n          geometryExtent.ymin, geometryExtent.xmax, geometryExtent.ymax)\n\n        if (intersects(extentArr, extent)) {\n          const geometryType = geometry.geometryType\n          if (geometryType === Geometry.POINT ||\n              geometryType === Geometry.MULTI_POINT ) {\n            pointFeatures.push(feature)\n          } else if (geometryType === Geometry.LINE ||\n            geometryType === Geometry.MULTI_LINE) {\n            lineFeatures.push(feature)\n          } else {\n            newFeatures.push(feature)\n          }\n        }\n      }\n    })\n\n    return [].concat(newFeatures, lineFeatures, pointFeatures)\n  }\n\n  /**\n   * 获取样式\n   *\n   * @method styleFunction\n   * @returns {null|undefined|*}\n   */\n  get styleFunction () { return this._styleFunction }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lyr/featurelayer.js","/**\n * Created by zypc on 2016/11/15.\n */\n\nimport BaseObject from '../core/baseobject'\nimport {listen, unlistenByKey} from '../core/eventmanager'\nimport {EventType} from '../meek/eventtype'\n\n/**\n * Layer基础类\n *\n * @class BaseLayer\n * @extends BaseObject\n * @module layer\n * @constructor\n */\nexport default class BaseLayer extends BaseObject {\n\n  constructor (options) {\n    super()\n\n    const baseOptions = Object.assign({},options)\n    \n    this.name = baseOptions.name || ''\n    this.visible = true\n    this.datasource = []\n    this.opacity = baseOptions.opacity !== undefined ? options.opacity : 1\n    this.dataExtent = null\n    this.maxResolution = 0\n    this.minResolution = 0\n    this.zIndex = baseOptions.zIndex || 0\n\n    this._mapRenderKey = null\n    \n  }\n\n  /**\n   * map读写器, 读取设置当前map\n   *\n   * @type {Function}\n   * @property map\n   * @param mapValue {Object} Datatang.map\n   */\n  get map () { return this._map }\n  set map (value) {\n    if (this._mapRenderKey) {\n      unlistenByKey(this._mapRenderKey)\n      this._mapRenderKey = null\n    }\n\n    if (value) {\n      this._map = value\n      this._mapRenderKey = listen(this, EventType.CHANGE, value.render, value)\n      this.changed()\n    }\n  }\n\n  /**\n   * 设置图层是否显示(将会触发的重绘事件)\n   *\n   * @property visible\n   * @param value\n   */\n  get visible () { return this._visible }\n  set visible (value) {\n    if (this._visible !== value) {\n      this._visible = value\n    }\n  }\n\n  /**\n   * 设置图层的透明度(将会触发map的重绘事件)\n   *\n   * @property opacity\n   * @param value\n   */\n  get opacity () { return this._opacity }\n  set opacity (value) { this._opacity = value }\n\n  /**\n   * 设置图层的最小分辨率\n   *\n   * @property minResolution\n   * @returns {*}\n   */\n  get minResolution () { return this._minResolution }\n  set minResolution (value) { this._minResolution = value }\n\n  /**\n   * 设置图层的最大分辨率\n   *\n   * @property maxResolution\n   * @returns {*}\n   */\n  get maxResolution () { return this._maxResolution }\n  set maxResolution (value) { this._maxResolution = value }\n\n  /**\n   * dataExtent读取器\n   *\n   * @property dataExtent\n   * @returns {*}\n   */\n  get dataExtent () {}\n  set dataExtent (value) {\n    this._dataExtent = value\n  }\n\n  /**\n   * datasouce 读取器\n   *\n   * @property datasouce\n   * @returns {*}\n   */\n  get datasouce () { return this._datasource }\n  set datasource (value) {\n    this._datasource = value\n  }\n\n  /**\n   * zIndex读取器\n   *\n   * @property maxResolution\n   * @returns {*}\n   */\n  get zIndex () { return this._zIndex }\n  set zIndex (value) {\n    if (this._zIndex !== value) {\n      this._zIndex = value\n    }\n  }\n\n  /**\n   * 加载Feature\n   *\n   * @method loadFeature\n   * @returns {Object} features\n   */\n  loadFeature () {\n    return this.features\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lyr/baselayer.js","/**\n * Created by zhangyong on 2017/6/9.\n */\n\nimport BaseEvent from '../core/baseevent'\n\n/**\n * FeatureEvent类\n *\n * @class FeatureEvent\n * @extends baseevent\n * @module meek\n */\nexport default class FeatureEvent extends BaseEvent {\n  \n  constructor (type, feature) {\n    super(type)\n    \n    this.feature = feature\n  }\n  \n}\n\n\n/**\n * Feature event definition\n * @type {{ADD_FEATURE: string, REMOVE_FEATURE: string, CLEAR: string}}\n */\nFeatureEvent.EventType = {\n  \n  /**\n   * Triggered when a feature is added.\n   */\n  ADD_FEATURE: 'addfeature',\n  \n  /**\n   * Triggered when a feature is removed.\n   */\n  REMOVE_FEATURE: 'removefeature',\n  \n  /**\n   * Triggered when all features are removed.\n   */\n  CLEAR: 'clear',\n  \n  /**\n   * Triggered when the feature collection has been changed.\n   */\n  FEATURE_COLLECTION_CHANGED: 'featurecollectionchanged'\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/meek/featureevent.js","/**\n * Created by zypc on 2016/11/15.\n */\n\nimport BaseLayer from './baselayer'\nimport SingleImage from '../lyr/image/singleimage'\n\nimport {listen} from '../core/eventmanager'\nimport {createCanvasContext2D} from '../utils/domutil'\nimport ImageEvent from '../lyr/image/imageevent'\n\nimport {EventType} from '../meek/eventtype'\nimport {ImageState} from '../lyr/image/imagestate'\nimport {ExtentUtil} from '../geometry/support/extentutil'\n\n/**\n * SingleImageLayer\n *\n * @class SingleImageLayer\n * @extends BaseObject\n * @module layer\n * @constructor\n */\nexport default class SingleImageLayer extends BaseLayer {\n  \n  /**\n   * @constructor\n   * @param options\n   */\n  constructor (options = {}) {\n    super(options)\n  \n    const imageExtent = options.imageExtent\n    this.dataExtent = imageExtent\n  \n    const crossOrigin = options.crossOrigin !== undefined ?\n      options.crossOrigin : null\n  \n    const imageLoadFunction =\n      options.imageLoadFunction !== undefined ?\n      options.imageLoadFunction : this.defaultImageLoadFunction\n    \n    this.attributions = options.attributions\n  \n    /**\n     * @private\n     */\n    this._singleImage = new SingleImage(imageExtent, undefined, 1, this.attributions,\n      options.url, crossOrigin, imageLoadFunction)\n    \n    /**\n     * @private\n     * @type {ol.Size}\n     */\n    this._imageSize = options.imageSize ? options.imageSize : null\n  \n    /**\n     * Listen the change event for SingleImage\n     */\n    listen(this.singleImage, EventType.CHANGE, this.handleImageChange, this)\n  \n    /**\n     *\n     * @type {number}\n     */\n    this.zIndex = 0\n  }\n  \n  /**\n   * 设置图片链接\n   *\n   * @method imageSrc\n   * @param url {String}\n   *\n   */\n  set imageSrc (url) {\n    this._singleImage._src = url\n    this._singleImage.domImage = new Image()\n    this._singleImage.state = ImageState.IDLE\n  }\n\n  /**\n   * 获取singleImage\n   *\n   * @property singleImage\n   * @returns {SingleImage}\n   */\n  get singleImage () { return this._singleImage }\n\n  /**\n   * 属性读写器\n   *\n   * @property attributions\n   * @param value\n   */\n  set attributions(value){\n    this._attributes = value\n  }\n  \n  get attributions(){\n    return this._attributes || null\n  }\n  \n  /**\n   *\n   * @param image\n   * @param src\n   */\n  defaultImageLoadFunction (image, src) {\n    image.getDomImage().src = src\n  }\n  \n  /**\n   * 获取图片的Dom\n   * @inheritDoc\n   */\n  getImageInternal (extent) {\n    if (ExtentUtil.intersects(extent, this.singleImage.extent)) {\n      return this.singleImage\n    }\n    \n    return null\n  }\n  \n  /**\n   * Handle the image change event\n   * @param evt\n   */\n  handleImageChange (evt) {\n    if (this.singleImage.state === ImageState.LOADED) {\n      const imageExtent = this.singleImage.extent\n      const image = this.singleImage.getDomImage()\n      let imageWidth, imageHeight\n      if (this._imageSize) {\n        imageWidth = this._imageSize[0]\n        imageHeight = this._imageSize[1]\n      } else {\n        imageWidth = image.width\n        imageHeight = image.height\n      }\n      \n      const resolution = ExtentUtil.getHeight(imageExtent) / imageHeight\n      const targetWidth = Math.ceil(ExtentUtil.getWidth(imageExtent) / resolution)\n      \n      if (targetWidth !== imageWidth) {\n        const context = createCanvasContext2D(targetWidth, imageHeight)\n        const canvas = context.canvas\n        context.drawImage(image, 0, 0, imageWidth, imageHeight,\n          0, 0, canvas.width, canvas.height)\n        // Pre-load image\n        this.singleImage.domImage = canvas\n      }\n    }\n  \n    this._dispatchImageEvent(evt)\n  }\n  \n  /**\n   *\n   * @param event\n   * @private\n   */\n  _dispatchImageEvent (event) {\n    const image = event.target\n    switch (image.state) {\n    case ImageState.LOADING:\n      this.dispatchEvent(\n        new ImageEvent(ImageEvent.Type.IMAGELOADSTART,\n          image))\n      break\n    case ImageState.LOADED:\n      this.dispatchEvent(\n        new ImageEvent(ImageEvent.Type.IMAGELOADEND,\n          image))\n      break\n    case ImageState.ERROR:\n      this.dispatchEvent(\n        new ImageEvent(ImageEvent.Type.IMAGELOADERROR,\n          image))\n      break\n    default:\n      // pass\n    }\n  }\n  \n  \n  \n  \n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lyr/singleimagelayer.js","/**\n * Created by zhangyong on 2017/3/17.\n */\n\n/**\n *\n * @param optWidth\n * @param optHeight\n * @returns {CanvasRenderingContext2D|WebGLRenderingContext}\n */\nexport function createCanvasContext2D (optWidth, optHeight) {\n  let canvas = document.createElement('CANVAS')\n  if (optWidth) {\n    canvas.width = optWidth\n  }\n  \n  if (optHeight) {\n    canvas.height = optHeight\n  }\n  \n  return canvas.getContext('2d')\n}\n\n/**\n *\n * @param element\n * @returns {number}\n */\nexport function outerWidth (element) {\n  let width = element.offsetWidth\n  const style = getComputedStyle(element)\n  width += parseInt(style.marginLeft, 10) + parseInt(style.marginRight, 10)\n  \n  return width\n}\n\n/**\n *\n * @param element\n * @returns {number}\n */\nexport function outerHeight (element) {\n  let height = element.offsetHeight\n  const style = getComputedStyle(element)\n  height += parseInt(style.marginTop, 10) + parseInt(style.marginBottom, 10)\n  \n  return height\n}\n\n\nexport function removeNode (node) {\n  return node && node.parentNode ? node.parentNode.removeChild(node) : null\n}\n\n/**\n *\n * @param node\n */\nexport function removeChildren (node) {\n  while (node.lastChild) {\n    node.removeChild(node.lastChild)\n  }\n}\n\nexport default {\n  createCanvasContext2D,\n  outerWidth,\n  outerHeight,\n  removeChildren,\n  removeNode\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/domutil.js","/**\n * Created by zypc on 2016/11/15.\n */\n\nimport Component from './component'\nimport {Style} from '../style/style'\nimport FeaureLayer from '../lyr/featurelayer'\nimport Feature from '../meek/feature'\nimport Geometry from '../geometry/geometry'\nimport Point from '../geometry/point'\nimport Line from '../geometry/line'\nimport Polygon from '../geometry/polygon'\nimport MultiPolygon from '../geometry/mutilpolygon'\nimport Extent from '../geometry/extent'\nimport {ExtentUtil} from '../geometry/support/extentutil'\nimport {simplify} from '../geometry/support/geometryutil'\nimport {listen, unlistenByKey} from '../core/eventmanager'\nimport BrowserEvent from '../meek/browserevent'\nimport DrawEvent from './drawevent'\nimport Parallelogram from '../geometry/parallelogram'\nimport {functions} from '../utils/functions'\n\n/**\n * 图形绘制工具基础类\n *\n * @class Draw\n * @extends Component\n * @module component\n * @constructor\n * @example\n *\n *      // 实例化绘图工具\n *      var drawTool = new Datatang.Draw({\n *        type: 'point',\n *        drawLayer: new Datatang.FeatureLayer()\n *      })\n *\n */\nexport default class Draw extends Component {\n  \n  /**\n   * 构造函数\n   *\n   * @constructor constructor\n   * @param options\n   */\n  constructor (options = {}) {\n    super()\n  \n    this.applyHandleEventOption({\n      handleDownEvent: this._handleDownEvent,\n      handleMouseEvent: this.handleMouseEvent,\n      handleUpEvent: this._handleUpEvent\n    })\n    \n    /**\n     * mapRenderKey\n     * @type {null}\n     * @private\n     */\n    this._mapRenderKey = null\n    \n    /**\n     * 绘制作用图层;\n     * 需要给绘制工具一个绘制的图层\n     *\n     * @property drawLayer\n     * @type {null}\n     * @private\n     */\n    this._drawLayer = options.drawLayer ? options.drawLayer : null\n  \n    /**\n     * 鼠标按下时的坐标点\n     *\n     * @property downPointPx\n     * @type {null}\n     * @private\n     */\n    this._downPointPx = null\n    \n    /**\n     * 图形绘制结束条件\n     *\n     * @property finishCoordinate\n     * @type {null}\n     * @private\n     */\n    this._finishCoordinate = null\n  \n    /**\n     * 当前的绘图模式(点、线、多边形、矩形)\n     *\n     * @property drawMode\n     * @type {*}\n     */\n    this.drawMode = Draw.getDrawMode(options.type)\n  \n    /**\n     * 绘制多边形、线段时的临时坐标数据\n     *\n     * @property sketchCoords\n     * @type\n     * @private\n     */\n    this._sketchCoords = null\n  \n    /**\n     * 绘制多边的临时线段\n     *\n     * @property sketchLine\n     * @type {null}\n     * @private\n     */\n    this._sketchLine = null\n  \n    /**\n     * 绘制完成时的结束条件\n     *\n     * @property finishCondition\n     * @type {null}\n     * @private\n     *\n     */\n    this._finishCondition = options.finishCondition ?\n        options.finishCondition : functions.TURE\n        \n    /**\n     * 撤销条件\n     *\n     * @property undoCondition\n     * @type {Function}\n     * @private\n     */\n    this._undoCondition = options.undoCondition !== undefined ?\n        options.undoCondition : functions.TURE\n  \n    /**\n     * 设置默认回退的顶点数，默认1\n     * @TODO 需要完善\n     * @type {number}\n     * @private\n     */\n    this._undoStep = options.freehandUndoStep ?\n      options.freehandUndoStep : 2\n      \n    // add keyboard events\n    if (options.undoCondition || options.finishCondition) {\n      listen(document, 'keyup',\n        this._handleKeyboardEvent, this)\n    }\n  \n    /**\n     * 初始化草稿图层，用于临时显示绘制的图形\n     *\n     * @property sketchLayer\n     * @type {Object} featurelayer\n     * @private\n     */\n    this._sketchLayer = new FeaureLayer({name: 'sketch layer for draw component'})\n\n    /**\n     * 获取默认绘制渲染样式\n     *\n     * @property sketchLayer\n     * @private\n     * @type {Function}\n     */\n    this._sketchLayer.style = this.getDefaultStyleFunction()\n    \n    /**\n     * 临时点\n     *\n     * @property sketchPoint\n     * @type {null}\n     * @private\n     */\n    this._sketchPoint = null\n  \n    /**\n     * 绘制时，是否允许鼠标参考点\n     * @type {boolean}\n     * @private\n     */\n    this._enableSketchPoint = options.enableSketchPoint ?\n      options.enableSketchPoint : false\n  \n    /**\n     * 临时Feature\n     *\n     * @property sketchFeature\n     * @type {null}\n     * @private\n     */\n    this._sketchFeature = null\n  \n    /**\n     * 通过geometry的类型去构建一个geometry\n     *\n     * @property eometryFunction\n     * @type {null}\n     * @private\n     */\n    // The function that can build a geometry by the passed geometry type.\n    this._geometryFunction = null\n  \n    /**\n     * 临时的线段坐标数据\n     *\n     * @property sketchLineCoords\n     * @type {null}\n     * @private\n     */\n    this._sketchLineCoords = null\n  \n    /**\n     * freehand drawing\n     * @type {Boolean}\n     * @private\n     */\n    this._freehand = options.freehand ? options.freehand : false\n    \n    /**\n     * 公差像素距离\n     *\n     * @property snapTolerance\n     * @type {Number}\n     * @private\n     */\n    this._snapTolerance = options.snapTolerance ?\n        options.snapTolerance : 2\n  \n    /**\n     * 绘制线段时的最多点限制，默认没有限制\n     *\n     * @property maxLinePoints\n     * @type {Number}\n     * @private\n     */\n    this._maxLinePoints = options.maxLinePoints ?\n        options.maxLinePoints : Infinity\n\n    /**\n     * 绘制多边形时的顶点限制，默认没有限制\n     *\n     * @property maxPolygonPoints\n     * @type {Number}\n     * @private\n     */\n    this._maxPolygonPoints = options.maxPolygonPoints ?\n      options.maxPolygonPoints : Infinity\n  \n    /**\n     * 绘制线段的最少点为2，多边形为3\n     *\n     * @property minPoints\n     * @type {Number}\n     * @private\n     */\n    this._minPoints = options.minPoints ?\n      options.minPoints :\n      (this.drawMode === Draw.DrawMode.POLYGON ? 3 : 2)\n  \n  \n    /**\n     *\n     * @type {condition}\n     * @private\n     */\n    this._condition = options.condition ?\n      options.condition : functions.TURE\n    \n    /**\n     *\n     * @type {boolean}\n     * @private\n     */\n    this._shouldHandle = false\n  \n  \n    /**\n     *\n     * @type {number}\n     * @private\n     */\n    this._squaredClickTolerance = options.clickUpTolerance ?\n      options.clickUpTolerance * options.clickUpTolerance : 36\n        \n      \n  }\n  \n  /**\n   * 处理绘制结束事件\n   *\n   * handleKeyboardEvent\n   * @type {Function}\n   * @param event {event}\n   * @private\n   */\n  _handleKeyboardEvent (event) {\n    // If finish drawing\n    if (this._finishCondition(event)) {\n      // 判断多边形的顶点是否小于4个（正常多边形3个顶点，首尾相接多一个顶点），小于4个不是多边形，return\n      if (this.drawMode === Draw.DrawMode.POLYGON) {\n        if( this._sketchFeature === null) {\n          return\n        }\n        \n        let pcoordinates = this._sketchFeature.geometry.getCoordinates()\n        if (pcoordinates[0].length < 4) {\n          return\n        }\n      }\n\n      // 判断线的顶点是否小于2个，小于2个不是线段，return\n      if (this.drawMode === Draw.DrawMode.LINE) {\n        if( this._sketchFeature === null) {\n          return\n        }\n        \n        let pcoordinates = this._sketchFeature.geometry.getCoordinates()\n        if (pcoordinates.length <= 2) {\n          return\n        }\n      }\n      \n      this._finishDrawing()\n    }\n    \n    // If undo drawing\n    if (this._undoCondition) {\n      if (this._undoCondition(event)) {\n        this._undoDrawing()\n      }\n    }\n  }\n  \n  /**\n   * 获取图形创建、修改的工厂方法\n   *\n   * @property geometryFunction\n   * @type {Function}\n   * @retruns geometryFunction {Function}\n   */\n  get geometryFunction () {\n    if(!this._geometryFunction){\n      this._geometryFunction = this._initGeometryFunction()\n    }\n    \n    return this._geometryFunction\n  }\n  \n  /**\n   * drawMode读写器，\n   * 设置当前绘图的模式，重新赋值将会启动新图形类型的绘制\n   *\n   * @type {Function}\n   * @property drawMode\n   * @type {Datatang.Draw.DrawMode}\n   */\n  get drawMode () { return this._drawMode }\n  set drawMode (value){\n    const isIn = this._existInDrawMode(value)\n    \n    this.active = isIn ? true : false\n    this._drawMode = isIn ? value : Draw.DrawMode.UNDEFINED\n    \n    this._sketchLineCoords = null\n    this._abortDrawing()\n  \n    this._minPoints = this._drawMode === Draw.DrawMode.POLYGON ? 3 : 2\n  }\n\n  /**\n   * 判断传入的绘制类型是否在绘制列表中\n   *\n   * @method existInDrawMode\n   * @param value {String}\n   * @returns {Boolean}\n   * @private\n   */\n  _existInDrawMode (value){\n    if ((typeof value === 'string') && (value.constructor === String)) {\n      const drawMode = Draw.DrawMode\n      const modeValue = value.toUpperCase()\n  \n      if (modeValue === Draw.DrawMode.UNDEFINED.toUpperCase()) {\n        return false\n      }\n      \n      for (let val in drawMode) {\n        if (modeValue === drawMode[val].toUpperCase()) {\n          return true\n        }\n      }\n    }\n    \n    return false\n  }\n\n  /**\n   * 图形生产工厂方法\n   *\n   * @method geometryFactory\n   * @returns {Object} 返回一个geometry对象\n   * @private\n   */\n  _geometryFactory () {\n    let Constructor\n    let mode = this.drawMode\n  \n    if (mode === Draw.DrawMode.POINT) {\n      Constructor = Point\n    } else if (mode === Draw.DrawMode.LINE) {\n      Constructor = Line\n    } else if(mode === Draw.DrawMode.POLYGON) {\n      Constructor = Polygon\n    } else if (mode === Draw.DrawMode.EXTENT) {\n      Constructor = Extent\n    } else if (mode === Draw.DrawMode.PARALLELOGRAM) {\n      Constructor = Parallelogram\n    }\n    \n    return Constructor\n  }\n  \n  /**\n   * 设置缺省 geometryfunction\n   *\n   * @method initGeometryFunction\n   * @returns {Function} Geometry\n   * @private\n   */\n  _initGeometryFunction () {\n    const geometryFunction = (coordinates, opt_geometry) => {\n      let mode = this.drawMode\n      let geometry = opt_geometry\n      \n      if (geometry) {\n        if (mode === Draw.DrawMode.POLYGON ||\n            mode === Draw.DrawMode.PARALLELOGRAM ||\n            mode === Draw.DrawMode.LINE ) {\n          geometry.setCoordinates(coordinates)\n        } else if(mode === Draw.DrawMode.EXTENT) {\n          geometry.setCoordinates(ExtentUtil.boundingExtent(coordinates))\n        }\n      } else {\n        let Constructor = this._geometryFactory()\n        geometry = new Constructor(coordinates[0],coordinates[1])\n      }\n      \n      return geometry\n    }\n    \n    return geometryFunction\n  }\n  \n  /**\n   * 或者 freehand draw 的执行条件\n   *\n   * @param event\n   * @returns {boolean|*}\n   * @private\n   */\n  _freehandEnable () {\n    const drawMode = this.drawMode\n    return (drawMode === Draw.DrawMode.POLYGON ||\n            drawMode === Draw.DrawMode.LINE ) && this._freehand\n  }\n  \n  /**\n   * 处理鼠标事件\n   *\n   * handleMouseEvent\n   * @param event {event}\n   * @returns {*|Boolean}\n   */\n  handleMouseEvent (event) {\n    // 排除右键\n    const buttons = event.originalEvent.buttons\n    if (buttons === 2) {\n      return false\n    }\n    \n    // 越界限制\n    event.coordinate = this.coordinateBeyond(event.coordinate)\n  \n    const freehand = this._freehandEnable()\n    // this._freehand = this._freehandEnable()\n    // let pass = !this._freehand\n    let pass = true\n    const eventType = event.type\n    if (freehand &&\n        eventType === BrowserEvent.MOUSE_DRAG &&\n        this._sketchFeature !== null) {\n      this._addToDrawing(event)\n      // pass = false\n    } else if (eventType === BrowserEvent.MOUSE_MOVE) {\n      pass = this._handleMove(event)\n    } else if (eventType === BrowserEvent.DBLCLICK) {\n      pass = false\n    }\n    \n    return super.handleMouseEvent(event) && pass\n  }\n  \n  /**\n   * 处理移动事件\n   *\n   * handleMove\n   * @param {BrowserEvent} event A move event.\n   * @return {boolean} Pass the event to other compoments.\n   * @private\n   */\n  _handleMove (event) {\n    if (this._downPointPx &&\n      ((!this._freehand && this._shouldHandle) ||\n      (this._freehand && !this._shouldHandle))) {\n      const downPx = this._downPointPx\n      const clickPx = event.pixel\n      const dx = downPx[0] - clickPx[0]\n      const dy = downPx[1] - clickPx[1]\n      const squaredDistance = dx * dx + dy * dy\n      this._shouldHandle = this._freehand ?\n        squaredDistance > this._squaredClickTolerance :\n        squaredDistance <= this._squaredClickTolerance\n    }\n    \n    if (this._finishCoordinate) {\n      this._modifyDrawing(event)\n      // this._autoPan(event)\n    } else {\n      this._updateSketchPoint(event)\n    }\n    \n    return true\n  }\n  \n  /**\n   * 鼠标按下时，获取当前坐标点\n   *\n   * handleDownEvent\n   * @param event {BrowserEvent} event A up event.\n   * @returns {Boolean}\n   * @private\n   */\n  _handleDownEvent (event) {\n    this._shouldHandle = !this._freehand\n    \n    if (this._freehand) {\n      this._downPointPx = event.pixel\n      if (!this._finishCoordinate) {\n        this._startDrawing(event)\n      }\n      \n      return false\n    } else if (this._condition(event)) {\n      this._downPointPx = event.pixel\n      return true\n    } else {\n      return false\n    }\n  }\n  \n  /**\n   * 处理鼠标弹起事件\n   *\n   * handleUpEvent\n   * @param event {BrowserEvent} event\n   * @private\n   */\n  _handleUpEvent (event) {\n    if (this.drawMode === Draw.DrawMode.UNDEFINED) {\n      return\n    }\n    \n    let pass = true\n    const mode = this.drawMode\n    \n    this._handleMove(event)\n    \n    if (this._shouldHandle) {\n      if (!this._finishCoordinate) {\n        this._startDrawing(event)\n    \n        // 点绘制在up的时候结束\n        if (this.drawMode === Draw.DrawMode.POINT) {\n          this._finishDrawing()\n        }\n      } else if (mode === Draw.DrawMode.CIRCLE ) {\n        //\n        //\n      } else if (mode === Draw.DrawMode.EXTENT) {\n        this._finishDrawing()\n      }\n      else if (this._atFinish(event)) {\n        if (this._finishCondition(event)) {\n          this._finishDrawing()\n        }\n      } else {\n        this._addToDrawing(event)\n      }\n    } else if (this._freehand && !this._finishCondition) {\n      this._finishCoordinate = null\n      this._abortDrawing()\n    }\n    \n    return pass\n  }\n  \n  /**\n   * 启动绘制，生成feature\n   *\n   * @method startDrawing\n   * @param event {Event}\n   * @private\n   */\n  _startDrawing (event) {\n    const startPoint = event.coordinate\n    this._finishCoordinate = startPoint\n    \n    const _drawMode = this.drawMode\n    \n    // 构造geometry数据\n    if (_drawMode === Draw.DrawMode.POINT) {\n      this._sketchCoords = startPoint.slice() // 缓存up的点\n    } else if (_drawMode === Draw.DrawMode.POLYGON ) {\n      this._sketchCoords = [[startPoint.slice(), startPoint.slice()]]\n      this._sketchLineCoords = this._sketchCoords[0]// temp line\n    } else if (_drawMode === Draw.DrawMode.PARALLELOGRAM) {// 平行四边形\n      this._sketchCoords = [[startPoint.slice(), startPoint.slice()]]\n      this._sketchLineCoords = this._sketchCoords[0]// temp line\n    } else {\n      this._sketchCoords = [startPoint.slice(),startPoint.slice()] // 缓存up的点，最后一个值，用于move的替换\n      \n      if (_drawMode === Draw.DrawMode.EXTENT) {\n        this._sketchLineCoords = this._sketchCoords\n      }\n    }\n  \n    if (this._sketchLineCoords) {\n      this._sketchLine = new Feature(new Line(this._sketchLineCoords))\n    }\n    \n    // Build a geometry uesed sketchCorrdds\n    const geometry = this.geometryFunction(this._sketchCoords)\n    \n    this._sketchFeature = new Feature()\n    this._sketchFeature.geometry = geometry\n    \n    // Redraw the sketch features\n    this._updateSketchFeatures()\n    \n    // 派发绘制开始事件\n    // Trigger the draw-strat event\n    this.dispatchEvent(new DrawEvent(DrawEvent.EventType.DRAW_START, this._sketchFeature))\n  }\n  \n  /**\n   * Modify the drawing\n   *\n   * @param event {Event}\n   * @private\n   */\n  _modifyDrawing (event) {\n    let coordinate = event.coordinate\n    const geometry = this._sketchFeature.geometry\n    let coordinates = null, last = null\n    const mode = this.drawMode\n    \n    if (mode === Draw.DrawMode.POINT) {\n      last = this._sketchCoords\n  \n      last[0] = coordinate[0]\n      last[1] = coordinate[1]\n    } else if (mode === Draw.DrawMode.POLYGON) {\n      coordinates = this._sketchCoords[0]\n      last = coordinates[coordinates.length - 1]\n      if (this._atFinish(event)) {\n        coordinate = this._finishCoordinate.slice()\n      }\n  \n      // 在鼠标移动的时候，将最后一个点替换成当前的鼠标点\n      last[0] = coordinate[0]\n      last[1] = coordinate[1]\n    } else if (mode === Draw.DrawMode.PARALLELOGRAM) {\n      coordinates = this._sketchCoords[0]\n      last = coordinates[coordinates.length - 1]\n      \n      // 需要清理，第三个点应该为鼠标点\n      if (coordinates.length > 3) {\n        coordinates = coordinates.slice(0, 2)\n        coordinates.push(coordinate)\n      } else {\n        last[0] = coordinate[0]\n        last[1] = coordinate[1]\n      }\n      \n      const lastSecondPoint = coordinates[coordinates.length - 2]\n  \n      // 平行四边形，如果有3个点，则直接生成平行四边形\n      if (lastSecondPoint[0] !== last[0] &&\n          lastSecondPoint[1] !== last[1] && coordinates.length === 3) {\n        const lstPoint = Parallelogram.getTheLastPoint(coordinates)\n        coordinates.push(lstPoint, coordinates[0])\n        this._sketchCoords = [coordinates]\n  \n        // 辅助效果线\n        this._sketchLineCoords = coordinates\n      }\n  \n    } else {\n      coordinates = this._sketchCoords // 获取up的点\n      last = coordinates[coordinates.length - 1]// 替换为当前MOve的点，形成一条path\n  \n      last[0] = coordinate[0]\n      last[1] = coordinate[1]\n    }\n    \n    if (this._freehand) {\n      const tempLastRing = this._sketchCoords[0]\n      if (tempLastRing.length > 2) {\n        const lastPoint = tempLastRing[tempLastRing.length - 1]\n        const lastPoint2 = tempLastRing[tempLastRing.length - 2]\n  \n        if (lastPoint[0] === lastPoint2[0] && lastPoint[1] === lastPoint2[1]) {\n          tempLastRing.pop()\n        }\n      }\n    }\n    \n    // 给 geometry 赋值\n    this.geometryFunction(this._sketchCoords, geometry)\n    \n    // 更新点坐标\n    if (this._sketchPoint) {\n      const sketchPointGeom = this._sketchPoint.geometry\n      sketchPointGeom.update(coordinate[0],coordinate[1])\n    }\n    \n    let sketchLineGeom\n    if (mode === Draw.DrawMode.EXTENT) {\n      if (!this._sketchLine) {\n        this._sketchLine = new Feature(new Line(null))\n      }\n      \n      const rings = geometry.getCoordinates()\n      sketchLineGeom = this._sketchLine.geometry\n      sketchLineGeom.path = rings\n    } else if (this._sketchLineCoords) {\n      sketchLineGeom =  (this._sketchLine.geometry)\n      sketchLineGeom.path = this._sketchLineCoords\n    }\n    \n    this._updateSketchFeatures()\n  }\n  \n  /**\n   * Add a new coordinate to the drawing\n   *\n   * @param event\n   * @private\n   */\n  _addToDrawing (event) {\n    const coordinate = event.coordinate\n    const geometry = this._sketchFeature.geometry\n    let coordinates,done\n    const mode = this.drawMode\n    \n    if (mode === Draw.DrawMode.LINE) {\n      this._finishCoordinate = coordinate.slice()\n      coordinates = this._sketchCoords\n      \n      if (coordinates.length > this._maxLinePoints) {\n        if (this._freehand) {\n          coordinates.pop()\n        } else {\n          done = true\n        }\n      }\n      \n      if (this._freehand) {\n        if (coordinates.length > 1) {\n          const lastPoint = coordinates[coordinates.length - 1]\n          if (lastPoint[0] === coordinate[0] &&\n            lastPoint[1] === coordinate[1]) {\n            coordinates.pop()\n          }\n        }\n      }\n      \n      coordinates.push(coordinate.slice())\n      this.geometryFunction(coordinates, geometry)\n    } else if (mode === Draw.DrawMode.POLYGON) {\n      coordinates = this._sketchCoords[0]\n      \n      if (coordinates.length > this._maxPolygonPoints ) {\n        if (this._freehand) {\n          coordinates.pop()\n        } else {\n          done = true\n        }\n      }\n      \n      coordinates.push(coordinate.slice())\n      \n      if (done) {\n        this._finishCoordinate = coordinates[0]\n      }\n      \n      this.geometryFunction(this._sketchCoords, geometry)\n    } else if (mode === Draw.DrawMode.PARALLELOGRAM) {\n      coordinates = this._sketchCoords[0]\n  \n      // 当前坐标数组添加新点数组\n      coordinates.push(coordinate.slice())\n      done = coordinates.length > this._maxPolygonPoints\n      \n      if (done) {\n        this._finishCoordinate = coordinates[0]\n      }\n      \n      this.geometryFunction(this._sketchCoords, geometry)\n    }\n    \n    this._updateSketchFeatures()\n    \n    if (done) {\n      this._finishDrawing()\n    }\n  }\n  \n  \n  /**\n   * 终止绘制，不会添加临时feature\n   *\n   * @method abortDrawing\n   * @returns {Feature|null|_Feature2.default}\n   * @private\n   */\n  _abortDrawing () {\n    this._finishCoordinate = null\n    const sketchFeature = this._sketchFeature\n    if (sketchFeature) {\n      this._sketchFeature = null\n      this._sketchPoint = null\n      this._sketchLine = null\n      this._sketchLayer.clear()\n    }\n    \n    return sketchFeature\n  }\n  \n  /**\n   * 绘制完成，形成正式feature\n   *\n   * @method finishDrawing\n   * @private\n   */\n  _finishDrawing () {\n    if (this._sketchFeature === null){\n      this.dispatchEvent(new DrawEvent(DrawEvent.EventType.DRAW_END))\n      return\n    }\n\n    const sketchFeature = this._abortDrawing()// 中止绘制，\n    const coordinates = this._sketchCoords\n    const geometry = (sketchFeature.geometry)\n    \n    const drawMode = this.drawMode\n  \n    if (drawMode === Draw.DrawMode.LINE) {\n      // remove the redundant last point\n      coordinates.pop()\n      this.geometryFunction(coordinates, geometry)\n    } else if (drawMode === Draw.DrawMode.POLYGON) {\n      // When we finish drawing a polygon on the last point,\n      // the last coordinate is duplicated as for LineString\n      // we force the replacement by the first point\n      coordinates[0].pop()\n      coordinates[0].push(coordinates[0][0])\n      this.geometryFunction(coordinates, geometry)\n    }\n    \n    // 处理复合图形\n    if (drawMode === Geometry.MULTI_POINT) {\n      // sketchFeature.geometry = new MultiPoint([coordinates]))\n    } else if (drawMode === Geometry.MULTI_LINE) {\n      // sketchFeature.geometry = new MultiLineString([coordinates])\n    } else if (drawMode === Geometry.MULTI_POLYGON) {\n      sketchFeature.geometry = new MultiPolygon([coordinates])\n    }\n  \n    if (this._freehand) {\n      simplify(sketchFeature.geometry)\n    }\n    \n    // 最终放到shource中，形成正式feature\n    if (this._drawLayer) {\n      sketchFeature.style = undefined\n      this._drawLayer.addFeatures([sketchFeature])\n    }\n  \n    // First dispatch event to allow full set up of feature\n    this.dispatchEvent(new DrawEvent(DrawEvent.EventType.DRAW_END, sketchFeature))\n  }\n  \n  /**\n   * Determine if an event is within the snapping tolerance of the start coord.\n   *\n   * @param event\n   * @returns {Boolean}\n   * @private\n   */\n  _atFinish (event) {\n    let at = false\n    if (this._sketchFeature) {\n      \n      if (this._freehand && this._finishCondition) {\n        return false\n      }\n      \n      let potentiallyDone = false\n      let potentiallyFinishCoordinates = [this._finishCoordinate]\n      \n      const drawMode = this.drawMode\n      if (drawMode === Draw.DrawMode.LINE) {\n        potentiallyDone = this._sketchCoords.length > this._minPoints\n      } else if (drawMode === Draw.DrawMode.POLYGON) {\n        potentiallyDone = this._sketchCoords[0].length > this._minPoints\n        potentiallyFinishCoordinates = [this._sketchCoords[0][0],\n          this._sketchCoords[0][this._sketchCoords[0].length - 2]]\n      } else if (drawMode === Draw.DrawMode.PARALLELOGRAM) {\n        at = this._sketchCoords[0].length === 5 ? true : false\n      }\n      \n      if (potentiallyDone) {\n        const map = event.map\n        for (let  i = 0, ii = potentiallyFinishCoordinates.length; i < ii; i++) {\n          const finishCoordinate = potentiallyFinishCoordinates[i]\n          const finishPixel = map.getPixelFromCoordinate(finishCoordinate)\n          const pixel = event.pixel\n          const dx = pixel[0] - finishPixel[0]\n          const dy = pixel[1] - finishPixel[1]\n          const freehand = this._freehand\n          const snapTolerance = freehand ? 1 : this._snapTolerance\n          at = Math.sqrt(dx * dx + dy * dy) <= snapTolerance\n          if (at) {\n            this._finishCoordinate = finishCoordinate\n            break\n          }\n        }\n      }\n    }\n    \n    return at\n  }\n  \n  /**\n   * Create or update the sketch point\n   *\n   * updateSketchPoint\n   * @param event {BrowserEvent} event\n   * @private\n   */\n  _updateSketchPoint (event) {\n    let coordinates = event.coordinate\n\n    if (!this._enableSketchPoint) {\n      return\n    }\n    \n    if (this._sketchPoint === null) {\n      const geom = new Point(coordinates[0], coordinates[1])\n      this._sketchPoint = new Feature(geom)\n      this._updateSketchFeatures()\n    } else {\n      const sketchPointgeom = this._sketchPoint.geometry\n      sketchPointgeom.setCoordinates(coordinates)\n    }\n  }\n  \n  _autoPan (event) {\n    const pixel = event.pixel\n    const size = this.map.size\n    const x = pixel[0]\n    const y = pixel[1]\n    \n    if (x <= 2 || y <= 2) {\n      // console.log('出界')\n      return\n    }\n    \n    if (x >= size[0] - 5 || y >= size[1] - 5) {\n      // console.log('出界')\n      return\n    }\n    \n  }\n  \n  /**\n   * Redraw the sketch featrues.\n   * updateSketchFeatures\n   * @private\n   */\n  _updateSketchFeatures () {\n    const features = []\n\n    if (this._sketchFeature){\n      features.push(this._sketchFeature)\n    }\n    \n    if (this._sketchLine) {\n      features.push(this._sketchLine)\n    }\n    \n    if (this._sketchPoint) {\n      features.push(this._sketchPoint)\n    }\n    \n    // 出发map的render\n    this._sketchLayer.clear()\n    this._sketchLayer.addFeatures(features)\n  }\n  \n  /**\n   * 执行撤销\n   *\n   * @method undoDrawing\n   * @private\n   */\n  _undoDrawing () {\n    const drawMode = this.drawMode\n    let undoStep = 1\n    let polygonDeleteStep = 2\n    if (this._freehand) {\n      undoStep = this._undoStep\n      polygonDeleteStep = 3\n    }\n    \n    if (drawMode === Draw.DrawMode.LINE ) {\n      if (this._sketchFeature) {\n        const coordinates = this._sketchFeature.geometry.getCoordinates()\n        if (coordinates.length + undoStep > 2) {\n          coordinates.splice(coordinates.length - 2, undoStep)\n          this._sketchFeature.changed()\n        }\n      }\n    } else if (drawMode === Draw.DrawMode.POLYGON) {\n      if (this._sketchFeature) {\n        const pcoordinates = this._sketchFeature.geometry.getCoordinates()[0]\n        \n        if (pcoordinates.length + undoStep > polygonDeleteStep ) {\n          pcoordinates.splice(pcoordinates.length - polygonDeleteStep, undoStep)\n          this._sketchFeature.changed()\n        }else {\n          this._abortDrawing()\n          this._finishDrawing()\n        }\n      }\n    }\n    \n  }\n\n  /**\n   * map读写器, 读取设置当前map\n   *\n   * @type {Function}\n   * @property map\n   * @param mapValue {Object} Datatang.map\n   */\n  get map (){ return this._map }\n  set map (mapValue) {\n    if (this._mapRenderKey) {\n      unlistenByKey(this._mapRenderKey)\n      this._mapRenderKey = null\n    }\n\n    if (mapValue) {\n      this._map = mapValue\n      // this._mapRenderKey = listen(this, EventType.CHANGE, mapValue.render, mapValue)\n      \n      mapValue.addLayer(this._sketchLayer)\n    }\n    \n    this._updateState()\n  }\n  \n  /**\n   * 更新绘制状态\n   *\n   * @method updateState\n   * @private\n   */\n  _updateState () {\n    const map = this.map\n    const active = this.active\n    if (!map || !active){\n      this._abortDrawing()\n    }\n  \n    this._sketchLayer.map = map\n  }\n  \n  /**\n   * 获取默认绘制样式\n   *\n   * @method getDefaultStyleFunction\n   * @returns {Function}\n   */\n  getDefaultStyleFunction () {\n    const styles = Style.createDefaultEditing()\n    return function (feature) {\n      return styles[feature.geometry.geometryType]\n    }\n  }\n  \n  /**\n   *\n   * @returns {boolean}\n   */\n  shouldStopEvent () {\n    if (this._freehand) {\n      return true\n    }\n    \n    return false\n  }\n\n  /**\n   * 获取当前的Layer\n   *\n   * @method drawLayer\n   * @return {null}\n   */\n  get drawLayer () { return this._drawLayer }\n  \n  /**\n   * 设置当前自由、绘制模式\n   * @property freehand\n   * @type {Boolean}\n   */\n  get freehand () { return this._freehand }\n  set freehand (value) {\n    this._freehand = value\n  }\n\n  /**\n   * active读写器, 读取设置当前active非自由\n   *\n   * @type {Function}\n   * @property active\n   * @type {Boolean}\n   */\n  get active () { return this._active }\n  set active (value) {\n    this._active = value\n    if (this._active === false) {\n      if (this._sketchLayer) {\n        this._sketchLayer.clear()\n      }\n      \n      this._sketchPoint = null\n    }\n  }\n}\n\n/**\n * 获取当前绘制模式的静态方法\n *\n * @method getDrawMode\n * @param type {String}\n * @returns {Object}\n */\nDraw.getDrawMode = function(type) {\n  let drawMode = Draw.DrawMode.UNDEFINED\n  \n  switch (type){\n  case Geometry.POINT:\n  case Geometry.MULTI_POINT:\n    drawMode = Draw.DrawMode.POINT\n    break\n  case Geometry.LINE:\n  case Geometry.MULTI_LINE:\n    drawMode = Draw.DrawMode.LINE\n    break\n  case Geometry.POLYGON:\n  case Geometry.MULTI_POLYGON:\n    drawMode = Draw.DrawMode.POLYGON\n    break\n  case Geometry.EXTENT:\n    drawMode = Draw.DrawMode.EXTENT\n    break\n  case Geometry.PARALLELOGRAM:\n    drawMode = Draw.DrawMode.PARALLELOGRAM\n    break\n  }\n  \n  return drawMode\n}\n\n\n/**\n * Draw mode.  This collapses multi-part geometry types with their single-part\n * cousins.\n *\n * 绘制模式：点、线、面、矩形(circle暂时不支持)\n * @enum {string}\n */\nDraw.DrawMode = {\n  POINT: 'Point',\n  LINE: 'Line',\n  POLYGON: 'Polygon',\n  CIRCLE: 'Circle',\n  EXTENT: 'Extent',\n  PARALLELOGRAM :'Parallelogram',\n  UNDEFINED: 'undefined'\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/draw.js","/**\n * Created by zypc on 2016/11/15.\n */\n\nimport BaseObject from '../core/baseobject'\nimport BrowserEvent from '../meek/browserevent'\nimport Obj from '../utils/obj'\n\n/**\n *\n * 定义组件基础类\n *\n * @class Component\n * @extends BaseObject\n * @module component\n *\n */\n\n// Abstract base class,represent a base componnet whcih should be inhrited\nexport default class Component extends BaseObject {\n\n  /**\n   * 构造函数\n   *\n   * @constructor\n   */\n  constructor () {\n    super()\n  \n    /**\n     * 当前组件开关，默认为ture，设置为false时，则关闭当前组件的功能\n     *\n     * @property active\n     * @type {Boolean}\n     */\n    this.active = true\n  \n    /**\n     * @property mapRenderKey\n     * @type {null}\n     * @private\n     */\n    this._mapRenderKey = null\n  \n    /**\n     * @property targetPointers\n     * @type {null}\n     */\n    this.targetPointers = null\n  \n    /**\n     * @property trackedPointers\n     * @type {{}}\n     * @private\n     */\n    this._trackedPointers = {}\n  \n    /**\n     * handlingDownUpSequence\n     * @type {boolean}\n     */\n    this.handlingDownUpSequence = false\n\n  }\n  \n  /**\n   * applyHandleEventOption\n   * @param options\n   */\n  applyHandleEventOption (options) {\n\n    /**\n     *\n     */\n    this.handleMouseEvent = options.handleMouseEvent ?\n      options.handleMouseEvent : this.handleMouseEvent\n  \n    /**\n     *\n     * @private\n     */\n    this._handleDownEvent = options.handleDownEvent ?\n      options.handleDownEvent : function () { return false }\n  \n    /**\n     *\n     * @private\n     */\n    this._handleDragEvent = options.handleDragEvent ?\n      options.handleDragEvent : function () {}\n  \n    /**\n     * @private\n     */\n    this._handleMoveEvent = options.handleMoveEvent ?\n      options.handleMoveEvent : function () {}\n  \n    /**\n     * @private\n     */\n    this._handleUpEvent = options.handleUpEvent ?\n      options.handleUpEvent : function () { return false }\n    \n  }\n  \n  /**\n   * 处理鼠标事件\n   *\n   * handleMouseEvent\n   * @param browserEvent {browserEvent}\n   *\n   * @returns {Boolean}\n   */\n  handleMouseEvent (browserEvent) {\n    let stopEvent = false\n    this._updateTrackedPointers(browserEvent)\n\n    if (this.handlingDownUpSequence) {\n\n      if (browserEvent.type === BrowserEvent.MOUSE_DRAG) {\n        this._handleDragEvent(browserEvent)\n\n      } else if (browserEvent.type === BrowserEvent.MOUSE_UP) {\n\n        const handledUp = this._handleUpEvent(browserEvent)\n        this.handlingDownUpSequence = handledUp && this.targetPointers.length > 0\n      }\n    } else {\n      if (browserEvent.type === BrowserEvent.MOUSE_DOWN) {\n\n        const handled = this._handleDownEvent(browserEvent)\n        this.handlingDownUpSequence = handled\n        stopEvent = this.shouldStopEvent(handled)\n\n      } else if (browserEvent.type === BrowserEvent.MOUSE_MOVE) {\n        this._handleMoveEvent(browserEvent)\n      }\n    }\n    \n    return !stopEvent\n  }\n  \n  /**\n   *\n   * 根据浏览器鼠标操作事件的类型返回true或false\n   *\n   * isPointerDraggingEvent\n   * @param browserEvent {browserEvent}\n   *\n   * @returns {Boolean}\n   * @private\n   */\n  _isPointerDraggingEvent (browserEvent) {\n    const type = browserEvent.type\n    return (\n      type === BrowserEvent.MOUSE_DOWN ||\n      type === BrowserEvent.MOUSE_DRAG ||\n      type === BrowserEvent.MOUSE_UP)\n  }\n  \n  /**\n   *\n   * 处理浏览器鼠标操作事件\n   *\n   * updateTrackedPointers\n   *\n   * @param browserEvent {browserEvent}\n   * @private\n   */\n  _updateTrackedPointers (browserEvent) {\n    if (this._isPointerDraggingEvent(browserEvent)) {\n      const event = browserEvent\n\n      if (browserEvent.type == BrowserEvent.MOUSE_UP) {\n        delete this._trackedPointers[event.pointerId]\n      } else if (browserEvent.type == BrowserEvent.MOUSE_DOWN) {\n        this._trackedPointers[event.pointerId] = event\n      } else if (event.pointerId in this._trackedPointers) {\n        this._trackedPointers[event.pointerId] = event\n      }\n      this.targetPointers = Obj.getValues(this._trackedPointers)\n    }\n  }\n  \n  /**\n   *\n   * @param view\n   * @param delta\n   * @param opt_duration\n   */\n  pan (view, delta) {\n    const currentCenter = view.center\n    if (currentCenter) {\n      view.center = [currentCenter[0] + delta[0], currentCenter[1] + delta[1]]\n    }\n  }\n  \n  /**\n   *\n   * 根据Delta值进行视图缩放，Delta等于1时固定放大，等于-1时固定缩小\n   *\n   * @method zoomByDelta\n   *\n   * @param view {Object}\n   * @param delta {Number}\n   * @param opt_anchor {Number}\n   * @param opt_duration {Number}\n   *\n   */\n  zoomByDelta (view, delta, opt_anchor, opt_duration) {\n    const currentResolution = view.resolution\n    const resolution = view.constrainResolution(currentResolution, delta, 0)\n    \n    if (opt_anchor && resolution !== undefined && resolution !== currentResolution) {\n      const currentCenter = view.center\n      let center = view.calculateCenterZoom(resolution, opt_anchor)\n      center = view.constrainCenter(center)\n      \n      opt_anchor = [\n        (resolution * currentCenter[0] - currentResolution * center[0]) /\n        (resolution - currentResolution),\n        (resolution * currentCenter[1] - currentResolution * center[1]) /\n        (resolution - currentResolution)\n      ]\n    }\n    \n    this.zoomWithoutConstraints(view, resolution, opt_anchor, opt_duration)\n  }\n  \n  /**\n   *\n   * 根据resolution进行缩放\n   *\n   * @method zoomWithoutConstraints\n   *\n   * @param view {Object}\n   * @param resolution {Number}\n   * @param opt_anchor {Number}\n   * @param opt_duration {Number}\n   */\n  zoomWithoutConstraints (view, resolution, opt_anchor, opt_duration) {\n    if (resolution) {\n      const currentResolution = view.resolution\n      const currentCenter = view.center\n      \n      if (currentResolution !== undefined && currentCenter &&\n          resolution !== currentResolution && opt_duration) {\n        view.resolution = resolution\n\n      } else {\n        if (opt_anchor) {\n          const center = view.calculateCenterZoom(resolution, opt_anchor)\n          view.center = center\n        }\n        view.resolution = resolution\n      }\n    }\n  }\n  \n  /**\n   * 获取当前标注视图的坐标范围(标注的图片的像素)\n   *\n   * @method getViewDataExtent\n   *\n   * @returns {*|null}\n   */\n  getViewDataExtent () {\n    if (!this._dataExtent) {\n      this._dataExtent = this.map.view.dataExtent\n    }\n    \n    return this._dataExtent\n  }\n  \n  /**\n   *\n   * 坐标自检测，如果有小于0的坐标，修正为0，如果有大于最大值的坐标，修正为最大值\n   *\n   * @method coordinateBeyond\n   * @param coordinate {Array} 坐标点{x,y}\n   * @returns {Array} new Coordinate\n   */\n  coordinateBeyond (coordinate) {\n    // 如果允许坐标可超出图片的边界\n    if (this.map.allowCoordinatesBeyondImage) {\n      return coordinate\n    }\n    \n    if (coordinate === undefined) {\n      return coordinate\n    }\n    \n    let newCoordinate = new Array(2)\n    \n    let x,y\n    \n    try{\n      x = coordinate[0]\n      y = coordinate[1]\n    } catch (e) {\n      // console.log(coordinate)\n    }\n  \n    newCoordinate[0] = x\n    newCoordinate[1] = y\n  \n    if (x <= 0) {\n      newCoordinate[0] = 0\n    }\n    \n    if (y <= 0) {\n      newCoordinate[1] = 0\n    }\n    \n    const extent = this.getViewDataExtent()\n    \n    if (extent) {\n      if (x >= extent[2]) {\n        newCoordinate[0] = extent[2]\n      }\n      \n      if (y >= extent[3]) {\n        newCoordinate[1] = extent[3]\n      }\n    }\n    \n    return newCoordinate\n  }\n  \n  /**\n   * shouldStopEvent\n   * @param handled\n   * @returns {*}\n   *\n   */\n  shouldStopEvent (handled) {\n    return handled\n  }\n\n\n  /**\n   * map读写器, 读取设置当前map\n   *\n   * @type {Function}\n   * @property map\n   * @type {Datatang.map}\n   */\n  get map () { return this._map }\n  set map (value) { this._map = value }\n\n  /**\n   * active读写器, 读取设置active\n   *\n   * @type {Function}\n   * @property active\n   */\n  get active () { return this._active }\n  set active (value) {\n    this._active = value\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/component.js","/**\n * Created by zypc on 2016/12/4.\n */\n\nimport BaseObject from '../core/baseobject'\n\n/**\n * BrowserEvent\n *\n * @class BrowserEvent\n * @extends BaseObject\n * @module meek\n * @constructor\n */\nexport default class BrowserEvent extends BaseObject {\n\n  /**\n   * @constructor\n   * @param map\n   * @param oriEvent\n   * @param eventTyle\n   */\n  constructor (map, oriEvent, eventTyle) {\n    super()\n\n    /**\n     * 标示事件类型\n     */\n    this.type = eventTyle\n\n    /**\n     *\n     */\n    this.map = map\n\n    /**\n     * 记录事件源对象\n     */\n    this.originalEvent = oriEvent\n\n    /**\n     * 将浏览器坐标转换成canvas屏幕坐标\n     * The pixel of the original browser event.\n     * @type {ol.Pixel}\n     * @api stable\n     */\n    this.pixel = map.getEventPixel(oriEvent)\n  \n  \n    /**\n     * 将canvas左边转换成地图坐标\n     */\n    this.coordinate = map.getCoordinateFromPixel(this.pixel)\n\n    /**\n     * @type {number}\n     */\n    this.pointerId = 0\n  }\n\n  /**\n   * 取消事件的默认动作\n   *\n   * @method preventDefault\n   */\n  preventDefault () {\n    this.originalEvent.preventDefault()\n  }\n  \n  /**\n   * 阻止当前事件在DOM树上冒泡\n   *\n   * @method stopPropagation\n   */\n  stopPropagation () {\n    this.originalEvent.stopPropagation()\n  }\n  \n}\n// The single click is different form double click,which\n// consider as two click heppen during 250ms.\n/**\n * 鼠标在一段时间内单击标识\n *\n * @property SINGLE_CLICK\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.SINGLE_CLICK = 'singleclick'\n\n/**\n *\n * 鼠标单击事件标识\n *\n * @property CLICK\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.CLICK = 'click'\n\n/**\n *\n * 鼠标双击事件标识\n *\n * @property DBLCLICK\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.DBLCLICK = 'dblclick'\n\n/**\n * 鼠标拖拽事件标识\n *\n * @property MOUSE_DRAG\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.MOUSE_DRAG = 'mousedrag'\n\n/**\n * 鼠标按下事件标识\n *\n * @property MOUSE_DOWN\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.MOUSE_DOWN = 'mousedown'\n\n/**\n * 鼠标移动事件标识\n *\n * @property MOUSE_MOVE\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.MOUSE_MOVE = 'mousemove'\n\n/**\n * 鼠标抬起事件标识\n *\n * @property MOUSE_UP\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.MOUSE_UP = 'mouseup'\n\n/**\n * 鼠标移入事件标识\n *\n * @property MOUSE_OVER\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.MOUSE_OVER = 'mouseover'\n\n/**\n * 鼠标移开事件标识\n *\n * @property MOUSE_OUT\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.MOUSE_OUT = 'mouseout'\n\n/**\n * 滚轮事件标识\n *\n * @property WHEEL\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.WHEEL = 'wheel'\n\n/**\n * 鼠标滚轮事件标识\n *\n * @property MOUSE_WHEEL\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.MOUSE_WHEEL = 'mousewheel'\n\n/**\n *\n * @type {string}\n */\nBrowserEvent.KEYDOWN = 'keydown'\n\n/**\n *\n * @type {string}\n */\nBrowserEvent.KEYPRESS = 'keypress'\n\n\n\n// WEBPACK FOOTER //\n// ./src/meek/browserevent.js","/**\n * Created by zypc on 2016/11/15.\n */\n\nimport BaseObject from '../core/baseobject'\nimport Obj from '../utils/obj'\nimport {listen, unlistenByKey} from '../core/eventmanager'\nimport {EventType} from '../meek/eventtype'\nimport Geometry from '../geometry/geometry'\nimport LineStyle from '../style/linestyle'\n\n/**\n * The feature class is intent to represent geographic features,with a geometry ,a style and\n * other attrubutes properties.\n * Feature provides a function named style that can be seted a style you want,\n * otherwise will use the style of feature layer.\n *\n * @class Feature\n * @extends BaseObject\n * @module meek\n * @constructor\n */\nexport default class Feature extends BaseObject {\n\n  constructor(geometry, attributes = {}, displayText, style) {\n    super()\n\n    /**\n     *\n     * @type {undefined}\n     * @private\n     */\n    this._styleFunction = undefined\n\n    /**\n     *\n     * @type {null}\n     * @private\n     */\n    this._geometryChangeKey = null\n\n\n    /**\n     *\n     */\n    this.geometry = geometry\n\n    /**\n     * 设置feature属性\n     */\n    this.initArribute(attributes)\n\n\n    /**\n     * 设置feature样式\n     *\n     */\n    this.style = style\n\n    /**\n     * 设置feature文本\n     *\n     */\n    this.displayText = displayText\n\n    /**\n     * 设置feature是否显示\n     *\n     * @type {Boolean}\n     * @private\n     */\n    this.display = true\n\n    /**\n     * 设置feature的标签是否显示\n     * @type {Boolean}\n     * @private\n     */\n    this.textDisplay = true\n\n    /**\n     * 设置feature的样式是否高亮\n     * @type {Boolean}\n     * @private\n     */\n    this.styleHighLight = false\n\n  }\n\n  /**\n   *\n   * @private\n   */\n  _handleGeometryChanged() {\n    this.changed()\n  }\n\n  /**\n   * 设置feature属性\n   *\n   * @method initArribute\n   * @param attributes\n   */\n  initArribute(attributes) {\n    if (!(attributes instanceof Object)) {\n      attributes = {}\n    }\n    \n    this._attributesMap = Obj.objectToMap(attributes)\n  }\n\n  /**\n   * 获取feature属性\n   *\n   * @method get\n   * @param property\n   * @return {*}\n   */\n  get(property) {\n    if (this._attributesMap.has(property)) {\n      return this._attributesMap.get(property)\n    }\n\n    return undefined\n  }\n\n  /**\n   * 设置属性的值\n   *\n   * @method set\n   * @param property\n   * @param value\n   * @return {Map.<K, V>}\n   */\n  set(property, value) {\n    return this._attributesMap.set(property, value)\n  }\n\n  /**\n   * 删除属性\n   *\n   * @method delete\n   * @param property\n   * @return {boolean}\n   */\n  delete(property) {\n    return this._attributesMap.delete(property)\n  }\n\n  /**\n   * 遍历属性\n   *\n   * @method forEachAttribute\n   * @param callback\n   */\n  forEachAttribute(callback) {\n    this._attributesMap.forEach(callback)\n  }\n\n  /**\n   * 判断属性是否存在\n   *\n   * @method has\n   * @param property\n   * @return {Boolean}\n   */\n  has(property) {\n    return this._attributesMap.has(property)\n  }\n\n  /**\n   * Geometry 读写器\n   *\n   * @property geometry\n   * @return {*}\n   */\n  get geometry() {\n    return this._geometry\n  }\n\n  set geometry(value) {\n    if (value) {\n      this._geometry = value\n\n      if (this._geometryChangeKey) {\n        unlistenByKey(this._geometryChangeKey)\n      }\n\n      this._geometryChangeKey = listen(value,\n        EventType.CHANGE, this._handleGeometryChanged, this)\n    }\n  }\n\n  /**\n   * 缺省样式读写器\n   *\n   * @property styleFunction\n   * @return {*}\n   */\n  get styleFunction() {\n    return this._styleFunction\n  }\n\n  set styleFunction(value) {\n    this._styleFunction = value\n  }\n\n  /**\n   * 样式读写器\n   *\n   * @property style\n   * @return {*}\n   */\n  get style() {\n    return this._style\n  }\n\n  set style(value) {\n    this._style = value\n  }\n\n  /**\n   * feature标题读写器\n   *\n   * @property text\n   * @return {*}\n   */\n  get displayText() {\n    return this._displayText\n  }\n\n  set displayText(value) {\n    this._displayText = value\n  }\n\n  /**\n   * 样式高亮读写器\n   *\n   * @property styleHighLight\n   * @returns {*}\n   */\n  get styleHighLight() {\n    return this._styleHighLight\n  }\n\n  set styleHighLight(value) {\n    if (this._styleHighLight === value) {\n      return\n    }\n    \n    this._styleHighLight = value\n  \n    if (this.style === undefined) {\n      return\n    }\n    \n    const white = [255, 255, 255]\n    const newStyles = []\n    \n    for (let i = 0,len = this.style.length; i < len; i++) {\n      const s = this.style[i]\n      newStyles.push(s.clone())\n    }\n\n    if (this._styleHighLight) {\n      this.set('_originStyle', this.style)\n      \n      const geometryType = this.geometry.geometryType\n\n      if (geometryType === Geometry.LINE) {\n        const firstStyle = newStyles[0]\n        firstStyle.width = firstStyle.width + 1\n\n        const cloneStyle = firstStyle.clone()\n        cloneStyle.width = cloneStyle.width + 1\n        cloneStyle.color = white\n  \n        newStyles.unshift(cloneStyle)\n\n      } else if (geometryType === Geometry.POLYGON ||\n          geometryType === Geometry.MULTI_POLYGON ||\n          geometryType === Geometry.PARALLELOGRAM ||\n          geometryType === Geometry.EXTENT ) {\n        const firstStyle = newStyles[0]\n        firstStyle.borderStyle.width = firstStyle.borderStyle.width + 1\n\n        const cloneStyle = firstStyle.clone()\n        cloneStyle.alpha = 0\n        cloneStyle.borderStyle.width = firstStyle.borderStyle.width + 1\n        cloneStyle.borderStyle.color = white\n        cloneStyle.borderStyle.lineCap = LineStyle.LineCap.ROUND\n        cloneStyle.borderStyle.lineJion = LineStyle.LineJion.ROUND\n  \n        newStyles.unshift(cloneStyle)\n\n      } else if (geometryType === Geometry.POINT ) {\n        const firstStyle = newStyles[0]\n        firstStyle.size = firstStyle.size + 3\n        firstStyle.borderStyle.width = firstStyle.borderStyle.width + 1\n      }\n\n      this.style = newStyles\n    } else {\n      if (this.get('_originStyle')) {\n        this.style = this.get('_originStyle')\n        this.delete('_originStyle')\n      }\n    }\n    \n    this.changed()\n  }\n\n\n  /**\n   * 设置图层的透明度\n   *\n   * 将会触发map的重绘事件\n   *\n   * @method display\n   * @param value\n   */\n  get display() {\n    return this._display\n  }\n\n  set display(value) {\n    if (this._display !== value) {\n      this._display = value\n      // 需要触动绘制事件派发\n      this.changed()\n    }\n  }\n\n  /**\n   * 设置标签是否显示\n   *\n   * 将会触发map的重绘事件\n   *\n   * @method textDisplay\n   * @param value\n   */\n  get textDisplay () { return this._textDisplay }\n  set textDisplay (value) {\n    if (this._textDisplay !== value) {\n      this._textDisplay = value\n      // 需要触动绘制事件派发\n      this.changed()\n    }\n  }\n\n  /**\n   * 克隆map属性\n   *\n   * @method cloneAttributesMap\n   * @returns {Map}\n   */\n  cloneAttributesMap () {\n    const newMap = new Map()\n    if (this._attributesMap.size !== 0) {\n      const entries = this._attributesMap.entries()\n      for (let [key, value] of entries) {\n        newMap.set(key, value)\n      }\n    }\n\n    return newMap\n  }\n\n  /**\n   * features 克隆方法\n   *\n   * @method clone\n   * @returns {Feature}\n   */\n  clone () {\n    let renderStyleArr\n    if (this.style) {\n      let style\n      if (Array.isArray(this.style)) {\n        style = this.style[0].clone()\n      } else {\n        style = this.style.clone()\n      }\n\n      renderStyleArr = [style]\n    }\n\n    return new Feature(this.geometry.clone(),\n      this.cloneAttributesMap(), this.displayText ,renderStyleArr )\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/meek/feature.js","/**\n * Created by zhangyong on 2017/5/22.\n */\n\nimport BaseEvent from '../core/baseevent'\n\n/**\n * The DrawEvent will emitted while geometrys on drawing end.\n *\n * 绘制结束时，DrawEvent将会被派发\n *\n *\n * @class drawevent\n * @extends BaseObject\n * @module component\n *\n *\n */\nexport default class DrawEvent extends BaseEvent {\n  \n  /**\n   * @constructor\n   * @param type\n   * @param feature\n   */\n  constructor (type, feature) {\n  \n    super(type)\n  \n    /**\n     * The feature being drawn\n     */\n    this.feature = feature\n  }\n  \n}\n\n/**\n * 定义绘制工具的事件类型\n *\n * @type {{DRAW_START: string, DRAW_END: string}}\n */\nDrawEvent.EventType = {\n  /**\n   * Triggered upon feature draw start\n   */\n  DRAW_START: 'drawstart',\n  \n  \n  /**\n   * Triggered upon feature draw end\n   */\n  DRAW_END: 'drawend'\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/drawevent.js","/**\n * Created by zhangyong on 2017/8/30.\n */\n\n\nexport const functions = {}\n\n/**\n * 默认条件函数执行\n * @returns {boolean}\n * @constructor\n */\nfunctions.TURE = () => true\n\n/**\n * 默认条件函数不执行\n * @returns {boolean}\n * @constructor\n */\nfunctions.FALSE = () => false\n\nexport default {\n  functions\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/functions.js","/**\n * Created by zhangyong on 2017/5/23.\n */\n\nimport Component from './component'\nimport BrowserEvent from '../meek/browserevent'\nimport FeatureLayer from '../lyr/featurelayer'\nimport {listen, unlistenByKey} from '../core/eventmanager'\nimport {EventType} from '../meek/eventtype'\nimport {Style} from '../style/style'\nimport SelectEvent from '../components/selectevent'\n\nlet hasMutilSelectedSymbol = Symbol('hasmutilselected')\n\n/**\n * 图形选择模式\n *\n * @class Select\n * @extends Component\n * @module component\n * @constructor\n * @example\n *\n *      // 实例化选择工具\n *      selectTool = new Datatang.Select({\n *       selectMode: Datatang.BrowserEvent.CLICK,\n *       selectMultiMode: selectMultiMode\n *      });\n *\n *\n */\nexport default class Select extends Component {\n\n  /**\n   * 构造函数\n   *\n   * @constructor constructor\n   * @param options\n   */\n\n  constructor (options = {}) {\n    super()\n\n    /**\n     * 当前鼠标点与图形之间的公差距离，小于该值则可已选中图形\n     *\n     * @property hitTolerance\n     * @type {number}\n     * @private\n     */\n    this._hitTolerance = options.hitTolerance ? options.hitTolerance : 6\n\n    /**\n     * 选择图层是否配置了样式\n     *\n     * @type {boolean}\n     * @private\n       */\n    this._hasSelectedStyle = false\n\n    /**\n     * 多选模式，默认为false\n     *\n     * @property multiSelectMode\n     * @type {boolean}\n     * @private\n     */\n    this._multiSelectMode = false\n    \n    /**\n     * 初始化草稿图层，用于临时高亮显示选中的图形\n     *\n     * @property selectLayer\n     * @type {FeatureLayer}\n     * @private\n     */\n    this._selectLayer = new FeatureLayer()\n\n    if (options.style) {\n      this._selectLayer.style = options.style\n      this._hasSelectedStyle = true\n    } else {\n      this._hasSelectedStyle = false\n    }\n    /**\n     * 选中图形的feature集合\n     *\n     * @property selectFeatures\n     * @type {Array}\n     * @private\n     */\n    this._selectFeatures = []\n\n    /**\n     * 选中的模式，默认为单击选中\n     *\n     * @property selectMode\n     * @type {string}\n     */\n    this.selectMode = options.selectMode ? options.selectMode : BrowserEvent.CLICK\n\n    this._selectMultiMode = options.selectMultiMode ?\n      options.selectMultiMode : function () { return true }\n\n    /**\n     * listen Ctrl key envet\n     */\n    if (options.selectMultiMode) {\n      listen(document, 'keydown', this._handleCtrlKeyDwon, this)\n    }\n    if (options.selectMultiMode) {\n      listen(document, 'keyup', this._handleCtrlKeyUp, this)\n    }\n\n  }\n\n  _condition (event) {\n    return this.selectMode === event.type\n  }\n\n  _keyPress () {}\n\n  /**\n   * handle Ctrl key down event\n   *\n   * 处理Ctrt键按下事件\n   *\n   * handleCtrlKeyDwon\n   * @param event\n   * @private\n   */\n  _handleCtrlKeyDwon (event) {\n    if (this._selectMultiMode(event)) {\n      this._multiSelectMode = true\n    }\n  }\n\n  /**\n   * handle Ctrl key up event\n   *\n   * 处理Ctrl键弹起事件\n   *\n   * @param event\n   * @private\n   */\n  _handleCtrlKeyUp (event) {\n    // Ctrl button down\n    if (this._selectMultiMode(event)) {\n      this._multiSelectMode = false\n    }\n  }\n\n  /**\n   * Handler mouse event\n   *\n   * 处理鼠标事件\n   * handleMouseEvent\n   * @method\n   * @param browserEvent {browserEvent}\n   */\n  handleMouseEvent (browserEvent) {\n    if (!this._condition(browserEvent)) {\n      return true\n    }\n\n    const map = browserEvent.map\n    const pixel = browserEvent.pixel\n    const hitTolerance = this._hitTolerance\n\n    if (!this._multiSelectMode) {\n      this.clear()\n    }\n\n    map.forEachFeatureAtPiexl(pixel, (features) => {\n      if(features.length > 0){\n        // 赋值并填充到selectFeatures中\n        this.selectFeatures = features\n      }\n    }, hitTolerance)\n\n    if (this.selectFeatures.length > 0 ) {\n      this._forEachStyle()\n      this._selectLayer.addFeatures(this.selectFeatures)\n    }\n\n    // 派发要素的选择事件\n    this.dispatchEvent(\n      new SelectEvent(SelectEvent.EventType.SELECT, this.selectFeatures,browserEvent))\n  }\n  \n  /**\n   * 清空选择的集合\n   *\n   * @method clear\n   */\n  clear () {\n    this._selectLayer.clear()\n    \n    this.selectFeatures.forEach(feature => {\n      feature.styleHighLight = false\n      feature.delete(hasMutilSelectedSymbol)\n    })\n\n    this.selectFeatures = []\n  }\n  \n  /**\n   * 当前选中feature的集合的读写器\n   *\n   * @property selectFeatures\n   * @type {Array}\n   */\n  get selectFeatures () { return this._selectFeatures }\n  set selectFeatures (features) {\n    if (features.length === 0 ) {\n      this._selectFeatures = []\n    } else {\n      features.forEach( feature => {\n        // 去掉重复的\n        if (!this._isInSelectFeatures(feature)) {\n          this._selectFeatures.push(feature)\n        }\n      })\n    }\n  }\n  \n  /**\n   * 判断当前选中的集合中是否包含指定的feature\n   *\n   * @param feature\n   * @returns {Boolean}\n   * @private\n   */\n  _isInSelectFeatures (feature) {\n    const features = this.selectFeatures\n    const result = features.find( f => f.id === feature.id)\n    \n    return result === undefined ? false : true\n  }\n\n  /**\n   * Update the drawing state for aborting drawing if active is false\n   *\n   * updateState\n   * @private\n   */\n  _updateState () {\n    const map = this.map\n    const active = this.active\n    if (!map || !active){\n      // this._abortDrawing()\n    }\n    \n    map.addLayer(this._selectLayer)\n  }\n  \n  /**\n   * 高亮显示选中图形\n   *\n   * @method forEachStyle\n   * @private\n   */\n  _forEachStyle () {\n    if (this._hasSelectedStyle) {\n      return\n    }\n\n    const features = this.selectFeatures\n    features.forEach ( feature => {\n      if (!feature.get(hasMutilSelectedSymbol)) {\n        feature.styleHighLight = true\n        feature.set(hasMutilSelectedSymbol, true)\n      }\n    })\n  }\n\n  /**\n   * map读写器, 读取设置当前map\n   *\n   * @type {Function}\n   * @property map\n   * @param map {Object} Datatang.map\n   */\n  get map (){ return this._map }\n  set map (map) {\n    if (this._mapRenderKey) {\n      unlistenByKey(this._mapRenderKey)\n      this._mapRenderKey = null\n    }\n\n    if (map) {\n      this._map = map\n      this._mapRenderKey = listen(this, EventType.CHANGE, map.render, map)\n    }\n\n    this._updateState()\n  }\n\n  /**\n   * 选择方式读写器\n   *\n   * @property selectMode\n   * @type {Object} Datatang.BrowserEvent.CLICK\n   * @return {*}\n   */\n  get selectMode () { return this._selectMode }\n  set selectMode (value) {\n    if (this._selectMode !== value) {\n      this._selectMode = value\n      this.clear()\n    }\n  }\n\n  /**\n   * 获取默认编辑样式\n   *\n   * @method getDefaultStyleFunction\n   * @returns {Function}\n   */\n  getDefaultStyleFunction () {\n    const styles = Style.createDefaultEditing()\n    return feature => styles[feature.geometry.geometryType]\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/select.js","/**\n * Created by zhangyong on 2017/5/25.\n */\n/**\n * 选择结束时，SelectEvent将会被派发\n *\n * @class selectevent\n * @extends BaseObject\n * @module component\n *\n *\n */\n\nimport BaseEvent from '../core/baseevent'\n\nexport default class SelectEvent extends BaseEvent {\n  \n  constructor (type, features, event) {\n    \n    super(type)\n    \n    /**\n     * The feature being selected\n     */\n    this.selectedFeatures = features\n  \n    /**\n     *\n     */\n    this.browserEvent = event\n  }\n  \n}\n\n/**\n * The select event\n * @type {{SELECT: string}}\n */\nSelectEvent.EventType = {\n  /**\n   * Triggered upon features select\n   * @api stable\n   */\n  SELECT: 'select',\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/selectevent.js","/**\n * Created by zhangyong on 2017/5/25.\n */\n\nimport Component from './component'\n\nimport BrowserEvent from '../meek/browserevent'\nimport Geometry from '../geometry/geometry'\nimport Point from '../geometry/point'\nimport Parallelogram from '../geometry/parallelogram'\n\nimport {listen, unlistenByKey} from '../core/eventmanager'\nimport {EventType} from '../meek/eventtype'\n\nimport ModifyEvent from './modifyevent'\n\nimport Feature from '../meek/feature'\nimport FeatureLayer from '../lyr/featurelayer'\nimport {Style} from '../style/style'\nimport {ExtentUtil} from '../geometry/support/extentutil'\n\nimport {closestOnSegment, squaredDistanceToSegment,\n        squaredDistance, distance} from '../geometry/support/geometryutil'\n\nimport {noModifierKeys, singleClick} from '../utils/mousekey'\nimport {functions} from '../utils/functions'\n\n/**\n * 编辑模式，启动后可以编辑图形\n *\n * @class Modify\n * @extends Component\n * @module component\n * @constructor\n * @example\n *\n *      // 实例化编辑工具\n *      var modifyTool = new Datatang.Modify({\n *        features: selectedFeaturs\n *      })\n */\nexport default class Modify extends Component {\n\n  /**\n   * 构造函数\n   *\n   * @constructor constructor\n   * @param options\n   */\n  constructor(options = {}) {\n    super(options)\n    \n    this.applyHandleEventOption({\n      handleDownEvent: this._handleDownEvent,\n      handleDragEvent: this._handleDragEvent,\n      handleUpEvent: this._handleUpEvent\n    })\n  \n    /**\n     * 可以编辑的feature集合\n     *\n     * @property features\n     * @type {Array}\n     * @private\n     */\n    this._features = []\n    \n    /**\n     * 当前鼠标点与图形之间的公差距离，小于该值后立即捕捉标注数据\n     *\n     * @property pixelTolerance\n     * @type {number}\n     * @private\n     */\n    this._pixelTolerance = options.pixelTolerance ?\n        options.pixelTolerance : 10\n  \n    /**\n     * 可以整体移动图形，矩形默认可以整体移动\n     *\n     * @property movableGeometrys\n     * @type {[*]}\n     * @private\n     */\n    this._movableGeometrys = options.movableGeometrys ?\n        options.movableGeometrys : ['extent']\n  \n  \n    /**\n     *\n     * hasMoveableGeometrys\n     * @type {boolean}\n     * @private\n     */\n    this._hasMoveableGeometrys = true\n    \n    const movableGeometrys = this._movableGeometrys\n    if (movableGeometrys === null || movableGeometrys === undefined) {\n      this._hasMoveableGeometrys = false\n    }\n  \n    if (Array.isArray(movableGeometrys)) {\n      if (movableGeometrys.length === 0) {\n        this._hasMoveableGeometrys = false\n      }\n    }\n  \n    /**\n     *\n     * @type {Set}\n     * @private\n     */\n    this.movableGeometrySet\n    \n    if (this._hasMoveableGeometrys) {\n      this.movableGeometrySet = new Set(this._movableGeometrys)\n    }\n  \n    /**\n     * @private\n     */\n    this._deleteCondition = options.deleteCondition ?\n      options.deleteCondition : this._defaultDeleteCondition\n  \n    /**\n     * 允许顶点编辑的条件方法，默认可编辑\n     * @private\n     */\n    this._vertexEditableCondition = options.vertexEditableCondition ?\n      options.vertexEditableCondition : functions.TURE\n  \n    /**\n     * 允许边编辑的条件方法，默认可编辑\n     * @private\n     */\n    this._edgeEditableCondition = options.edgeEditableCondition ?\n      options.edgeEditableCondition : functions.TURE\n    \n    /**\n     * Determine if should snap to vertexs of gemetry\n     *\n     * snappedToVertex\n     * @type {boolean}\n     * @private\n     */\n    this._snappedToVertex = false\n  \n    /**\n     * @snapSegments\n     * @type {null}\n     * @private\n     */\n    this._snapSegments = null\n  \n    /**\n     * @vertexFeature\n     * @type {null}\n     * @private\n     */\n    this._vertexFeature = null\n  \n    /**\n     * The editable features\n     *\n     * 设置需要编辑图形的集合，\n     * 如果图形不允许编辑，请从该集合移除\n     *\n     * @property features\n     * @type {[]}\n     */\n    this.features = options.features || []\n  \n    /**\n     *\n     * @type {[*]}\n     * @private\n     */\n    this._lastPixel = [0, 0]\n  \n  \n    /**\n     * 初始化草稿图层，用于临时高亮显示编辑的图形\n     *\n     * @property overLayer\n     * @type {FeatureLayer}\n     * @private\n     */\n    this._overLayer = new FeatureLayer({\n      style: options.style ? options.style : this.getDefaultStyleFunction(),\n      zIndex: 1000\n    })\n  \n    this.active = true\n  \n    \n    this._dragSegments = []\n  \n    /**\n     * 图形是否修改过，默认为false\n     *\n     * modified\n     * @type {boolean}\n     * @private\n     */\n    this._modified = false\n  \n    /**\n     * changingFeature\n     * @type {boolean}\n     * @private\n     */\n    this._changingFeature = true\n  \n    /**\n     * Tracks if the next `singleclick` event should be ignored to prevent\n     * accidental deletion right after vertex creation.\n     *\n     * ignoreNextSingleClick\n     * @type {boolean}\n     * @private\n     */\n    this._ignoreNextSingleClick = false\n  \n    /**\n     * shouldAddToVertexs\n     * @type {boolean}\n     * @private\n     */\n    this._shouldAddToVertexs = false\n  \n    /**\n     * insertVertices\n     * @type {Array}\n     * @private\n     */\n    this._insertVertices = []\n  \n    /**\n     * Keep the mouse-down point\n     *\n     * downPoint\n     * @type {null}\n     * @private\n     */\n    this._downPoint = null\n  \n    /**\n     * Keep the current moved geometry\n     *\n     * currentMovedGeometry\n     * @type {null}\n     * @private\n     */\n    this._currentMovedGeometry = null\n  \n    /**\n     * 记录上一次被编辑的点\n     * 一般指的是在边上的捕捉点或者顶点本身\n     * 只是用于平行四边形的编辑使用\n     * @type {null}\n     * @private\n     */\n    this._oldEditedVertex = null\n  }\n  \n  /**\n   * feature的读写器，读取设置当前的feature\n   *\n   * @property features\n   * @returns {Object} feature\n   */\n  get features () { return this._features }\n  set features (value = []) {\n    this._features = value\n    this._snapSegments = null\n  \n    if (this._vertexFeature) {\n      this._overLayer.removeFeature(this._vertexFeature)\n      this._vertexFeature = null\n    }\n    \n    this._hasMoveableGeometrys =\n      value.length === 0 ? false : true\n    \n    this._dragSegments = []\n    this._snappedToVertex = false\n  }\n  \n  /**\n   * Handle the mouse events emitted from map.\n   *\n   * 处理鼠标事件\n   *\n   * handleMouseEvent\n   * @param browserEvent\n   * @returns {boolean}\n   */\n  handleMouseEvent (browserEvent) {\n    if (!(browserEvent instanceof BrowserEvent)) {\n      return true\n    }\n  \n    browserEvent.coordinate = this.coordinateBeyond(browserEvent.coordinate)\n    \n    this.lastPointerEvent_ = browserEvent\n  \n    let handled\n    if ( browserEvent.type == BrowserEvent.MOUSE_MOVE &&\n      !this.handlingDownUpSequence) {\n      this._handlePointerMove(browserEvent)\n    }\n    if (this._vertexFeature && this._deleteCondition(browserEvent)) {\n      if (browserEvent.type !== BrowserEvent.SINGLE_CLICK ||\n        !this._ignoreNextSingleClick) {\n        handled = this.removePoint()\n      } else {\n        handled = true\n      }\n    }\n  \n    if (browserEvent.type == BrowserEvent.SINGLE_CLICK) {\n      this._ignoreNextSingleClick = false\n    }\n  \n    return super.handleMouseEvent(browserEvent) && !handled\n  }\n  \n  /**\n   * Removes the vertex currently being pointed.\n   *\n   *\n   * removePoint\n   * @return {boolean} True when a vertex was removed.\n   * @api\n   */\n  removePoint () {\n    if (this._lastPointerEvent && this._lastPointerEvent.type != BrowserEvent.MOUSE_DRAG) {\n      let evt = this.lastPointerEvent_\n      this.willModifyFeatures_(evt)\n      this._removeVertex()\n      \n      this.dispatchEvent(new ModifyEvent(\n        ModifyEvent.EventType.MODIFY_END, this.features, evt))\n      this._modified = false\n      return true\n    }\n    \n    return false\n  }\n  \n  /**\n   * compareIndexes\n   * @param a\n   * @param b\n   * @returns {number}\n   * @private\n   */\n  _compareIndexes (a, b) {\n    return a.index - b.index\n  }\n  \n  /**\n   * willModifyFeatures\n   * @param event\n   * @private\n   */\n  _willModifyFeatures (event) {\n    if (!this._modified) {\n      this._modified = true\n      this.dispatchEvent(new ModifyEvent(ModifyEvent.EventType.MODIFY_START,\n        this.features, event))\n    }\n  }\n  \n  /**\n   * Handle poiner mouse down event\n   *\n   * handleDownEvent\n   * @param evt {Event}\n   * @private\n   */\n  _handleDownEvent (evt) {\n    this._downPoint = evt.coordinate\n    this._dragSegments.length = 0\n    this._modified = false\n    const coordinate = evt.coordinate\n    const vertexFeature = this._vertexFeature\n    \n    if (vertexFeature) {\n      const insertVertices = [this._snapSegments]\n      if (insertVertices.length) {\n        this._willModifyFeatures(evt)\n      }\n  \n      this._shouldAddToVertexs = true\n      this._insertVertices = insertVertices\n  \n      return !!this._vertexFeature\n    }\n    // Move the selected geometry\n    else {\n      if (!this._hasMoveableGeometrys) {\n        return\n      }\n      \n      const filters = this.features.filter(feature => {\n        const geometry = feature.geometry\n        return this.movableGeometrySet.has(geometry.geometryType) &&\n               geometry.containsXY(coordinate[0], coordinate[1])\n      })\n      \n      // We get the first filter geometry to move\n      // Otherwise, you should reselect\n      if (filters.length > 0) {\n        this._currentMovedGeometry = filters[0]\n        return true\n      }\n      \n      return false\n    }\n  }\n  \n  /**\n   * Handle pointer move event\n   *\n   * 处理点移动事件\n   *\n   * handlePointerMove\n   * @param evt {Event}\n   * @private\n   */\n  _handlePointerMove (evt) {\n    this._lastPixel = evt.pixel\n    this._handlePointerAtPixel(evt.pixel, evt.map)\n  }\n  \n  /**\n   * @param pixel {Array}\n   * @param map {map}\n   * @private\n   */\n  _handlePointerAtPixel (pixel, map) {\n    const pixelCoordinate = map.getCoordinateFromPixel(pixel)\n    \n    const sortByDistance = (s1, s2) => {\n      const d1 = this._pointDistanceToSegment(pixelCoordinate, s1)\n      const d2 = this._pointDistanceToSegment(pixelCoordinate, s2)\n      return d1 - d2\n    }\n  \n    this._snapSegments = null\n    \n    if (this.features.length === 0) {\n      return\n    }\n    \n    // 与当前屏幕内图形做碰撞检测\n    const nodes = this._getInExtent(this.features, pixelCoordinate, this._pixelTolerance)\n    if (nodes.length > 0) {\n      nodes.sort(sortByDistance)\n      const node = nodes[0]\n      const geometry = node.geometry\n      const geometryType = geometry.geometryType\n      const closestSegment = node.segment\n      let vertex = this._closestOnSegment(pixelCoordinate, node)// 计算鼠标点在线段上的投影点\n      const vertexPixel = map.getPixelFromCoordinate(vertex)\n      \n      // 判断当前是否选中了边\n      let dist = distance(pixel, vertexPixel)\n      if (dist <= this._pixelTolerance) {\n        /**\n         *  已经选中了边\n         */\n        this._snapSegments = node\n        \n        let vertexEditable = false\n  \n        if (geometryType === Geometry.CIRCLE &&\n          node.index === Modify.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX) {\n          this._snappedToVertex = true\n        } else {\n  \n          /**\n           * 再计算是否选中了线段的两个顶点\n           */\n          \n          // 判断是否允许顶点可编辑\n          if (this._vertexEditableCondition(node)) {\n            const pixel1 = map.getPixelFromCoordinate(closestSegment[0])\n            const pixel2 = map.getPixelFromCoordinate(closestSegment[1])\n            const squaredDist1 = squaredDistance(vertexPixel[0], vertexPixel[1], pixel1[0], pixel1[1])\n            const squaredDist2 = squaredDistance(vertexPixel[0], vertexPixel[1], pixel2[0], pixel2[1])\n            dist = Math.sqrt(Math.min(squaredDist1, squaredDist2))\n  \n            // 判断当前是否选中了顶点\n            this._snappedToVertex = dist <= this._pixelTolerance\n            if (this._snappedToVertex) {\n              vertex = squaredDist1 > squaredDist2 ?\n                closestSegment[1] : closestSegment[0]\n    \n              const coordinateIndex = geometry.getCoordinateIndex(vertex)\n              if (geometryType === Geometry.POLYGON || geometryType === Geometry.PARALLELOGRAM) {\n                this._snapSegments.index = coordinateIndex.index\n                this._snapSegments.ringIndex = coordinateIndex.ringIndex\n              } else if (geometryType === Geometry.MULTI_POLYGON) {\n                this._snapSegments.index = coordinateIndex.index\n                this._snapSegments.ringIndex = coordinateIndex.ringIndex\n                this._snapSegments.polygonIndex = coordinateIndex.polygonIndex\n              } else {\n                this._snapSegments.index = coordinateIndex\n              }\n    \n              this._snapSegments.isVertex = true\n              vertexEditable = true\n            }\n          }\n\n          if (geometryType === Geometry.PARALLELOGRAM) {\n            this._snapSegments.index = node.index\n            this._snapSegments.ringIndex = node.ringIndex\n          }\n        }\n  \n        // 边可编辑，或者顶点可编辑\n        if (this._edgeEditableCondition(node) || vertexEditable) {\n          // draw the snapping point\n          this._createOrUpdateVertexFeature(vertex)\n        } else {\n          this._snapSegments = null\n        }\n        \n        return\n      }\n    }\n    \n    if (this._vertexFeature) {\n      this._overLayer.removeFeature(this._vertexFeature)\n      this._vertexFeature = null\n    }\n  }\n  \n  /**\n   * Handle mouse drag event.\n   *\n   * handleDragEvent\n   * @param evt {Event}\n   * @private\n   */\n  _handleDragEvent (evt) {\n    this._ignoreNextSingleClick = false\n    const vertex = evt.coordinate\n  \n    if (this._shouldAddToVertexs) {\n      const vertexFeature = this._vertexFeature\n      const vertex = vertexFeature.geometry.getCoordinates()\n    \n      const insertVertices = this._insertVertices\n      for (let j = insertVertices.length - 1; j >= 0; --j) {\n        this._insertVertex(insertVertices[j], vertex)\n      }\n    \n      this._shouldAddToVertexs = false\n    }\n    \n    const dragSegments = this._dragSegments\n    const len = dragSegments.length\n  \n    // move the edge of selected geometry\n    if (len !== 0) {\n      this._willModifyFeatures(evt)\n      \n      for (let i = 0; i < len; ++i) {\n        const dragSegment = dragSegments[i]\n        const segmentData = dragSegment[0]\n        const depth = segmentData.depth\n        const geometry = segmentData.geometry\n        let coordinates = null\n        const segment = segmentData.segment\n        const index = dragSegment.index\n        \n        switch (geometry.geometryType) {\n        case Geometry.POINT:\n          coordinates = vertex\n          segment[0] = segment[1] = vertex\n          break\n        case Geometry.MULTI_POINT:\n          coordinates = geometry.getCoordinates()\n          coordinates[segmentData.index] = vertex\n          segment[0] = segment[1] = vertex\n          break\n        case Geometry.LINE:\n          coordinates = geometry.getCoordinates()\n          coordinates[segmentData.index] = vertex\n          // segment[index] = vertex\n          break\n        case Geometry.MULTI_LINE:\n          coordinates = geometry.getCoordinates()\n          coordinates[depth[0]][segmentData.index + index] = vertex\n          segment[index] = vertex\n          break\n        case Geometry.POLYGON:\n          coordinates = geometry.getCoordinates()\n          coordinates[segmentData.ringIndex][segmentData.index] = vertex\n          if (segmentData.index === 0) {\n            coordinates[segmentData.ringIndex][coordinates[segmentData.ringIndex].length - 1] = vertex\n          }\n          break\n        case Geometry.PARALLELOGRAM:\n          // 重新计算平行四边的各个顶点\n          coordinates = Parallelogram.updateCoordinatesForModification(geometry,\n            vertex, this._oldEditedVertex, dragSegment)\n          this._oldEditedVertex = vertex\n          break\n        case Geometry.EXTENT:\n          coordinates = ExtentUtil.updateExtent(geometry, vertex, dragSegment)\n          break\n        case Geometry.MULTI_POLYGON:\n          coordinates = geometry.getCoordinates()\n          coordinates[segmentData.polygonIndex][segmentData.ringIndex][segmentData.index] = vertex\n          if (segmentData.index === 0) {\n            coordinates[segmentData.polygonIndex][segmentData.ringIndex][coordinates[segmentData.polygonIndex][segmentData.ringIndex].length - 1] = vertex\n          }\n          break\n        case Geometry.CIRCLE:\n          segment[0] = segment[1] = vertex\n          if (segmentData.index === Modify.MODIFY_SEGMENT_CIRCLE_CENTER_INDEX) {\n            this._changingFeature = true\n            geometry.setCenter(vertex)\n            this._changingFeature = false\n          } else { // We're dragging the circle's circumference:\n            this._changingFeature = true\n            geometry.setRadius(distance(geometry.getCenter(), vertex))\n            this._changingFeature = false\n          }\n          break\n        default:\n          // pass\n        }\n        \n        if (coordinates) {\n          this._setGeometryCoordinates(geometry, coordinates)\n        }\n      }\n      \n      this._createOrUpdateVertexFeature(vertex)\n    }\n    // move the whole selected geometry\n    else if (this._currentMovedGeometry) {\n      const downPoint = this._downPoint\n      const dx = vertex[0] - downPoint[0]\n      const dy = vertex[1] - downPoint[1]\n      \n      this._currentMovedGeometry.geometry.move(dx, dy, {\n        beyond: {\n          xmin: 0,\n          ymin: 0,\n          xmax: this.map.view.dataExtent[2],\n          ymax: this.map.view.dataExtent[3]\n        }\n      })\n      \n      this.changed()\n      this._downPoint = vertex\n    }\n  }\n  \n  /**\n   * handleUpEvent\n   * @param evt {Event}\n   * @returns {boolean}\n   * @private\n   */\n  _handleUpEvent (evt) {\n    this._dragSegments.length = 0\n    this._shouldAddToVertexs = false\n    this._insertVertices = []\n  \n    if (this._vertexFeature) {\n      this._overLayer.removeFeature(this._vertexFeature)\n      this._vertexFeature = null\n    }\n  \n    this._oldEditedVertex = null\n    \n    this._downPoint = null\n    this._currentMovedGeometry = null\n    \n    if (this._modified) {\n      this.dispatchEvent(new ModifyEvent(ModifyEvent.EventType.MODIFY_END, this.features, evt))\n      this._modified = false\n    }\n    \n    return false\n  }\n  \n  /**\n   *\n   * segmentData\n   * @param vertex\n   * @private\n   */\n  _insertVertex (segmentData, vertex) {\n    const segment = segmentData.segment\n    const feature = segmentData.feature\n    const geometry = segmentData.geometry\n    const depth = segmentData.depth\n    const isVertex = segmentData.isVertex\n    let index =  segmentData.index\n    let coordinates\n    \n    switch (geometry.geometryType) {\n    case Geometry.MULTI_LINE:\n      coordinates = geometry.getCoordinates()\n      coordinates[depth[0]].splice(index + 1, 0, vertex)\n      break\n    case Geometry.POLYGON:\n      coordinates = geometry.getCoordinates()\n      if (!isVertex) {\n        coordinates[segmentData.ringIndex].splice(index + 1, 0, vertex)\n        index = index + 1\n      } else {\n        // dragIndex = index\n      }\n      break\n    case Geometry.MULTI_POLYGON:\n      coordinates = geometry.getCoordinates()\n      if (!isVertex) {\n        coordinates[segmentData.polygonIndex][segmentData.ringIndex].splice(index + 1, 0, vertex)\n        index = index + 1\n      } else {\n        // dragIndex = index\n      }\n      break\n    case Geometry.LINE:\n      coordinates = geometry.getCoordinates()\n      if (!isVertex) {\n        coordinates.splice(index + 1, 0, vertex)\n        index = index + 1\n      } else {\n        // dragIndex = index\n      }\n      break\n    case Geometry.POINT:\n      coordinates = geometry.getCoordinates()\n      coordinates = vertex\n      break\n    case Geometry.EXTENT:\n      coordinates = geometry.getCoordinates()\n      break\n    case Geometry.PARALLELOGRAM:\n      break\n    default:\n      return\n    }\n    \n    this._setGeometryCoordinates(geometry, coordinates)\n    \n    const newSegmentData = {\n      segment: [segment[0], vertex],\n      feature,\n      geometry,\n      depth,\n      index,\n      ringIndex: segmentData.ringIndex,\n      polygonIndex: segmentData.polygonIndex,\n      isVertex\n    }\n    \n    this._dragSegments.push([newSegmentData, 1])\n    this._ignoreNextSingleClick = true\n  }\n  \n  /**\n   * Calcalute geometrys within the current extent\n   * TODO 将来需要优化计算视图范围内的图形\n   *\n   * getInExtent\n   * @param geometry {Array}\n   * @param pixelCoordinate {Array}\n   * @param tolarance {Number}\n   * @returns {Array}\n   * @private\n   */\n  _getInExtent (features, pixelCoordinate, tolarance) {\n    let result = []\n    const _ExtentUtil = ExtentUtil\n  \n    // loop the passed features\n    features.forEach( feature => {\n      const geometry = feature.geometry\n      \n      // build an extent from the passed geometry with tolarance\n      const gometryExtent = geometry.extent\n      const bufferExtent = _ExtentUtil.buffer([gometryExtent.xmin, gometryExtent.ymin,\n        gometryExtent.xmax, gometryExtent.ymax], tolarance)\n  \n      // Exclude the moved point\n      if (_ExtentUtil.containsPoint(bufferExtent, pixelCoordinate)) {\n        \n        // Calculte if the moved point has insected a geometry\n        const geometryType = geometry.geometryType\n        \n        if (geometryType === Geometry.POINT) {\n          const points = geometry.getCoordinates()\n          const dist = distance(points, pixelCoordinate)\n          if (dist <= tolarance) {\n            result.push({\n              geometry: geometry,\n              segment: [points, points],\n              index: 0\n            })\n          }\n        } else if (geometryType === Geometry.POLYGON ||\n                  geometryType === Geometry.PARALLELOGRAM ) { // @todo 这一块需要重构\n          let coords = geometry.getCoordinates()\n          coords.forEach( (coordinates, ringIndex) => {\n            for (let j = 0, jj = coordinates.length - 1; j < jj; j++) {\n              let points = coordinates[j]\n              let nextPoints = coordinates[j + 1]\n    \n              let pathExtent = _ExtentUtil.boundingExtentFromTwoPoints(points, nextPoints)\n              let pathBufferExtent = _ExtentUtil.buffer(pathExtent, tolarance)\n    \n              if (ExtentUtil.containsPoint(pathBufferExtent, pixelCoordinate)) {\n                const segment = [points, nextPoints]\n                result.push({\n                  geometry,\n                  segment,\n                  index: j,\n                  ringIndex\n                })\n              }\n            }\n          })\n        } else if (geometryType === Geometry.MULTI_POLYGON ){\n          let allCoords = geometry.getCoordinates()\n          allCoords.forEach( (coords, polygonIndex) => {\n            coords.forEach( (coordinates, ringIndex) => {\n              for (let j = 0, jj = coordinates.length - 1; j < jj; j++) {\n                let points = coordinates[j]\n                let nextPoints = coordinates[j + 1]\n      \n                let pathExtent = _ExtentUtil.boundingExtentFromTwoPoints(points, nextPoints)\n                let pathBufferExtent = _ExtentUtil.buffer(pathExtent, tolarance)\n      \n                if (ExtentUtil.containsPoint(pathBufferExtent, pixelCoordinate)) {\n                  const segment = [points, nextPoints]\n                  result.push({\n                    geometry,\n                    segment,\n                    polygonIndex,\n                    index: j,\n                    ringIndex\n                  })\n                }\n              }\n            })\n          })\n        } else if ( geometryType === Geometry.EXTENT ||\n                    geometryType === Geometry.LINE) {\n          let coordinates = geometry.getCoordinates()\n          \n          for (let j = 0, jj = coordinates.length - 1; j < jj; j++) {\n            let points = coordinates[j]\n            let nextPoints = coordinates[j + 1]\n      \n            let pathExtent = _ExtentUtil.boundingExtentFromTwoPoints(points, nextPoints)\n            let pathBufferExtent = _ExtentUtil.buffer(pathExtent, tolarance)\n      \n            if (ExtentUtil.containsPoint(pathBufferExtent, pixelCoordinate)) {\n              const segment = [points, nextPoints]\n              result.push({\n                geometry,\n                segment,\n                index: j\n              })\n            }\n          }\n        }\n      }\n    })\n    \n    return result\n  }\n  \n  /**\n   * 设置Ceometry的坐标数据\n   *\n   * @method setGeometryCoordinates\n   * @param geometry {Object}\n   * @param coordinates {Array}\n   * @private\n   */\n  _setGeometryCoordinates (geometry, coordinates) {\n    if (coordinates) {\n      this._changingFeature = true\n      geometry.setCoordinates(coordinates)\n      this._changingFeature = false\n    }\n  }\n  \n  /**\n   * @method pointDistanceToSegment\n   *\n   * coordinates {Array}\n   * @param segmentData\n   * @returns {number}\n   * @private\n   */\n  _pointDistanceToSegment (coordinates, segmentData) {\n    const geometry = segmentData.geometry\n    \n    if (geometry.geometryType === Geometry.CIRCLE) {\n      const circleGeometry = geometry\n      \n      if (segmentData.index === Modify.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX) {\n        const distanceToCenterSquared =\n          squaredDistance(circleGeometry.getCenter(), coordinates)\n        const distanceToCircumference =\n          Math.sqrt(distanceToCenterSquared) - circleGeometry.getRadius()\n        return distanceToCircumference * distanceToCircumference\n      }\n    }\n    \n    \n    return squaredDistanceToSegment(coordinates, segmentData.segment)\n  }\n  \n  /**\n   * closestOnSegment\n   * @param coordinate\n   * @param segmentData\n   * @returns {*}\n   * @private\n   */\n  _closestOnSegment (coordinate, segmentData) {\n    return closestOnSegment(coordinate, segmentData.segment)\n  }\n  \n  /**\n   * Create or update the vertex feature while snapping a point\n   * on the edge of geometry\n   *\n   * createOrUpdateVertexFeature\n   * @param point {Array}\n   * @private\n   */\n  _createOrUpdateVertexFeature (point) {\n    let vertexFeature = this._vertexFeature\n    if (!vertexFeature) {\n      vertexFeature = new Feature(new Point(point[0], point[1]))\n      this._vertexFeature = vertexFeature\n      this._overLayer.addFeature(vertexFeature)\n    } else {\n      const geom = vertexFeature.geometry\n      geom.update(point[0], point[1])\n      this._overLayer.changed()\n    }\n  }\n  \n  /**\n   * 获取默认的图形编辑样式\n   *\n   * @method getDefaultStyleFunction\n   * @returns {Function}\n   */\n  getDefaultStyleFunction () {\n    const style = Style.createDefaultEditing()\n    return function () {\n      return style[Geometry.POINT]\n    }\n  }\n  \n  /**\n   *\n   * mapBrowserEvent\n   * @returns {*}\n   * @private\n   */\n  _defaultDeleteCondition (mapBrowserEvent) {\n    return noModifierKeys(mapBrowserEvent) &&\n           singleClick(mapBrowserEvent)\n  }\n  \n  /**\n   * active读写器，读取设置当前的active状态\n   *\n   * @property active\n   * @type {Function}\n   * @returns {*}\n   */\n  get active () { return this._active }\n  set active (isActive) {\n    if (this._vertexFeature && !isActive) {\n      this._overLayer.removeFeature(this._vertexFeature)\n      this._vertexFeature = null\n    }\n    \n    this._active = isActive\n  }\n\n  /**\n   * map读写器, 读取设置当前map\n   *\n   * @type {Function}\n   * @property map\n   * @param map {Object} Datatang.map\n   */\n  get map () {return this._map}\n  set map (map) {\n    if (this._mapRenderKey) {\n      unlistenByKey(this._mapRenderKey)\n      this._mapRenderKey = null\n    }\n  \n    if (map) {\n      this._map = map\n      this._mapRenderKey = listen(this, EventType.CHANGE, map.render, map)\n      \n      map.addLayer(this._overLayer)\n    }\n  }\n}\n\n/**\n *\n * @type {number}\n */\nModify.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX = 1\n\n/**\n *\n * @type {number}\n */\nModify.MODIFY_SEGMENT_CIRCLE_CENTER_INDEX = 0\n\n\n// WEBPACK FOOTER //\n// ./src/components/modify.js","/**\n * Created by zhangyong on 2017/6/9.\n */\n\n/**\n * 修改结束时，ModifyEvent将会被派发\n *\n * @class modifyevent\n * @extends BaseObject\n * @module component\n *\n */\nimport BaseEvent from '../core/baseevent'\n\nexport default class ModifyEvent extends BaseEvent {\n  \n  constructor (type, features, event) {\n    super(type)\n  \n    /**\n     * features being modified.\n     */\n    this.features = features\n  \n    /**\n     * BrowserEvent\n     */\n    this.browserEvent = event\n  }\n  \n}\n\n\nModifyEvent.EventType = {\n  \n  /**\n   * Triggered on features modification start.\n   */\n  MODIFY_START: 'modifystart',\n  \n  /**\n   * Triggered on features modification end\n   */\n  MODIFY_END: 'modifyend'\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/modifyevent.js","/**\n * Created by zhangyong on 2017/5/23.\n */\n\nimport BrowserEvent from '../meek/browserevent'\n\n\nexport function singleClick (browserEvent) {\n  return browserEvent.type === BrowserEvent.SINGLE_CLICK\n}\n\nexport function mouseWheel (browserEvent) {\n  return browserEvent.type === BrowserEvent.MOUSE_WHEEL ||\n         browserEvent.type === BrowserEvent.WHEEL\n}\n\nexport function noModifierKeys (browserEvent) {\n  const originalEvent = browserEvent.originalEvent\n  return ( !originalEvent.altKey &&\n  !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n  !originalEvent.shiftKey)\n}\n\n\nexport function targetNotEditable (mapBrowserEvent) {\n  const target = mapBrowserEvent.originalEvent.target\n  const tagName = target.tagName\n  return (\n  tagName !== 'INPUT' &&\n  tagName !== 'SELECT' &&\n  tagName !== 'TEXTAREA')\n}\n\nexport default {\n  singleClick,\n  mouseWheel,\n  noModifierKeys,\n  targetNotEditable\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/mousekey.js","/**\n * Created by zhangyong on 2017/6/2.\n */\n\nimport Component from './component'\nimport {noModifierKeys} from '../utils/mousekey'\nimport {Coordinate} from '../utils/coordinate'\n\n/**\n * 拖动事件基础类\n *\n * @class DragPan\n * @extends Component\n * @module component\n * @constructor\n */\nexport default class DragPan extends Component {\n\n  /**\n   * 构造函数\n   *\n   * @constructor\n   * @param options\n   */\n  constructor (options = {}) {\n    super()\n\n    this.applyHandleEventOption({\n      handleDownEvent: this._handleDownEvent,\n      handleDragEvent: this._handleDragEvent\n    })\n    \n    /**\n     * @property tragetPointers\n     * @type {Array}\n     */\n    this.targetPointers = []\n  \n    /**\n     * @property lastCentroid\n     * @type {null}\n     */\n    this.lastCentroid = null\n  \n    /**\n     * kinetic\n     * @private\n     * @type {ol.Kinetic|undefined}\n     */\n    this._kinetic = options.kinetic\n  \n    /**\n     * @property lastCentroid\n     * @type {ol.Pixel}\n     */\n    this.lastCentroid = null\n  \n    /**\n     * @property lastPointersCount\n     * @private\n     * @type {number}\n     */\n    this._lastPointersCount = null\n  \n    /**\n     * @property conidtion\n     * @private\n     * @type {ol.EventsConditionType}\n     */\n    this._condition = options.condition ?\n      options.condition : noModifierKeys\n  \n    /**\n     * @property noKinetic\n     * @private\n     * @type {boolean}\n     */\n    this._noKinetic = false\n    \n  }\n  \n  /**\n   * 处理browserEvent\n   *\n   * @param browserEvent {BrowserPointerEvent} mapBrowserEvent Event.\n   * @return {boolean} Start drag sequence?\n   * @this {DragPan}\n   * @private\n   */\n  _handleDownEvent (browserEvent) {\n    if (this.targetPointers.length > 0 && this._condition(browserEvent)) {\n      this.lastCentroid = null\n      \n      if (this._kinetic) {\n        this._kinetic.begin()\n      }\n      \n      // No kinetic as soon as more than one pointer on the screen is\n      // detected. This is to prevent nasty pans after pinch.\n      this._noKinetic = this.targetPointers.length > 1\n      return true\n    } else {\n      return false\n    }\n  }\n  \n  /**\n   * handleDragEvent\n   * @param browserEvent {browserEvent}\n   * @private\n   */\n  _handleDragEvent (browserEvent) {\n    const targetPointers = this.targetPointers\n    const centroid = this.centroid(targetPointers)\n\n    if (targetPointers.length === this._lastPointersCount) {\n      if (this._kinetic) {\n        this._kinetic.update(centroid[0], centroid[1])\n      }\n      \n      if (this.lastCentroid) {\n        const deltaX = this.lastCentroid[0] - centroid[0]\n        const deltaY = this.lastCentroid[1] - centroid[1]\n        const map = browserEvent.map\n        const view = map.view\n        const viewState = view.getViewState()\n        const center = [deltaX, deltaY]\n        Coordinate.scale(center, viewState.resolution)\n        Coordinate.rotate(center, viewState.rotation)\n        Coordinate.add(center, viewState.center)\n        // center = view.constrainCenter(center)\n        view.center = center\n      }\n    } else if (this._kinetic) {\n      this._kinetic.begin()\n    }\n\n    this.lastCentroid = centroid\n    this._lastPointersCount = targetPointers.length\n  }\n  \n  /**\n   * 计算视图的中心点\n   *\n   * @method centroid\n   * @param pointerEvents {pointerEvents}\n   * @returns {[*,*]}\n   */\n  centroid (pointerEvents) {\n    const length = pointerEvents.length\n    let clientX = 0\n    let clientY = 0\n    \n    for (let i = 0; i < length; i++) {\n      clientX += pointerEvents[i].originalEvent.clientX\n      clientY += pointerEvents[i].originalEvent.clientY\n    }\n    \n    return [clientX / length, clientY / length]\n  }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/dragpan.js","/**\n * Created by zypc on 2017/6/4.\n */\n\nimport Component from './component'\nimport BrowserEvent from '../meek/browserevent'\n\n\nimport {Config} from '../meek/config'\n\nimport {mouseWheel} from '../utils/mousekey'\nimport {clamp} from '../utils/math'\n\n/**\n * 鼠标滚轮缩放基类\n *\n *\n * @class MouseWheelZoom\n * @extends Component\n * @module component\n * @constructor\n */\nexport default class MouseWheelZoom extends Component {\n\n  /**\n   * 构造函数\n   *\n   * @constructor\n   * @param options\n   */\n  constructor (options = {}){\n    \n    super()\n  \n    /**\n     * 私有属性Delta，默认为0\n     *\n     * @property delta\n     * @type {Number}\n     * @private\n     */\n    this._delta = 0\n  \n    /**\n     * 私有属性useAnchor\n     *\n     * @property useAnchor\n     * @type {Boolean}\n     * @private\n     */\n    this._useAnchor = options.useAnchor !== undefined ?\n      options.useAnchor : true\n  \n    /**\n     * 私有属性duration\n     *\n     * @property duration\n     * @type {Boolean}\n     * @private\n     */\n    this._duration = options.duration !== undefined ?\n      options.duration : 250\n  \n    /**\n     * 私有属性lastAnchor\n     *\n     * @property lastAnchor\n     * @type {null}\n     * @private\n     */\n    this._lastAnchor = null\n  \n    /**\n     *\n     * @type {undefined}\n     * @private\n     */\n    this._startTime = undefined\n  \n    /**\n     *\n     * @type {number}\n     * @private\n     */\n    this._timeout = options.timeout !== undefined ? options.timeout : 80\n  \n    /**\n     *\n     * @type {undefined}\n     * @private\n     */\n    this._timeoutId = undefined\n  \n    /**\n     *\n     * @type {undefined}\n     * @private\n     */\n    this._mode = undefined\n  }\n  \n  \n  /**\n   *\n   * @param mapBrowserEvent\n   * @returns {boolean}\n   */\n  handleMouseEvent (mapBrowserEvent){\n    if (!mouseWheel(mapBrowserEvent)) {\n      return true\n    }\n  \n    mapBrowserEvent.preventDefault()\n  \n    const map = mapBrowserEvent.map\n    const wheelEvent = mapBrowserEvent.originalEvent\n  \n    if (this._useAnchor) {\n      this._lastAnchor = mapBrowserEvent.coordinate\n    }\n  \n    // Delta normalisation inspired by\n    // https://github.com/mapbox/mapbox-gl-js/blob/001c7b9/js/ui/handler/scroll_zoom.js\n    let delta\n    if (mapBrowserEvent.type == BrowserEvent.WHEEL) {\n      delta = wheelEvent.deltaY\n    } else if (mapBrowserEvent.type == BrowserEvent.MOUSE_WHEEL) {\n      delta = -wheelEvent.wheelDeltaY\n    }\n  \n    if (delta === 0) {\n      return false\n    }\n  \n    const now = Date.now()\n  \n    if (this._startTime === undefined) {\n      this._startTime = now\n    }\n  \n    this._delta += delta\n  \n    const timeLeft = Math.max(this._timeout - (now - this._startTime), 0)\n  \n    clearTimeout(this._timeoutId)\n    this._timeoutId = setTimeout(() => this._handleWheelZoom(map), timeLeft)\n  \n    return false\n  }\n  \n  /**\n   * Zoom to the map\n   *\n   * handleWheelZoom\n   * @param map\n   * @private\n   */\n  _handleWheelZoom (map) {\n    const view = map.view\n    // if (view.getAnimating()) {\n    //   view.cancelAnimations()\n    // }\n    \n    const maxDelta = Config.MOUSE_WHEEL_ZOOM_MAXDELTA\n    const delta = clamp(this._delta, -maxDelta, maxDelta)\n    \n    this.zoomByDelta(view, -delta, this._lastAnchor, this._duration)\n    \n    this._mode = undefined\n    this._delta = 0\n    this._lastAnchor = null\n    this._startTime = undefined\n    this._timeoutId = undefined\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/mousewheelzoom.js","/**\n * Created by zhangyong on 2017/8/2.\n */\n\nimport BaseObject from '../core/baseobject'\n\nimport {removeNode} from '../utils/domutil'\nimport {unlistenByKey} from '../core/eventmanager'\n\nexport default class Control extends BaseObject {\n  constructor (options = {}) {\n    super()\n    \n    this._element = options.element ? options.element : null\n    \n    this._target = null\n    \n    this._map = null\n    \n    this._listenerKeys = []\n    \n    \n    if (options.target) {\n      this.target = options.target\n    }\n  }\n  \n  get map() { return this._map }\n  set map(value) {\n    if (this.map) {\n      removeNode(this._element)\n    }\n    \n    this._listenerKeys.forEach(listener => unlistenByKey(listener) )\n    \n    this._listenerKeys.length = 0\n    this._map = value\n    \n    if (this._map) {\n      const target = this._target ? this._target : value.overlayContainerStopEvent\n      target.appendChild(this._element)\n      \n      value.render()\n    }\n  }\n  \n  set target(value) {\n    this._target = typeof value === 'string' ?\n      document.getElementById(value) :\n      value\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/control/control.js","/**\n * Created by zhangyong on 2017/8/2.\n */\n\nimport Control from './control'\nimport BrowserEvent from '../meek/browserevent'\n\nimport {listen} from '../core/eventmanager'\n\nexport default class Zoom extends Control {\n  \n  constructor (options = {}) {\n  \n    const className = options.className !== undefined ? options.className : 'dt-zoom'\n  \n    const delta = options.delta !== undefined ? options.delta : 1\n  \n    const zoomInLabel = options.zoomInLabel !== undefined ? options.zoomInLabel : '+'\n    const zoomOutLabel = options.zoomOutLabel !== undefined ? options.zoomOutLabel : '\\u2212'\n  \n    const zoomInTipLabel = options.zoomInTipLabel !== undefined ?\n      options.zoomInTipLabel : '放大'\n    \n    const zoomOutTipLabel = options.zoomOutTipLabel !== undefined ?\n      options.zoomOutTipLabel : '缩小'\n  \n    const inElement = document.createElement('button')\n    inElement.className = `${className}-in`\n    inElement.setAttribute('type', 'button')\n    inElement.title = zoomInTipLabel\n    inElement.appendChild(\n      typeof zoomInLabel === 'string' ? document.createTextNode(zoomInLabel) : zoomInLabel\n    )\n  \n    const outElement = document.createElement('button')\n    outElement.className = `${className}-out`\n    outElement.setAttribute('type', 'button')\n    outElement.title = zoomOutTipLabel\n    outElement.appendChild(\n      typeof zoomOutLabel === 'string' ? document.createTextNode(zoomOutLabel) : zoomOutLabel\n    )\n  \n    const cssClasses = `${className} dt-unselectable dt-control`\n    const element = document.createElement('div')\n    element.className = cssClasses\n    element.appendChild(inElement)\n    element.appendChild(outElement)\n  \n    super({\n      element: element,\n      target: options.target\n    })\n  \n    this._delta = delta\n    \n    listen(inElement, BrowserEvent.CLICK, this._handleClick, this)\n    listen(outElement, BrowserEvent.CLICK, this._handleClickIn, this)\n  }\n  \n  _handleClickIn (event) {\n    event.preventDefault()\n    this._zoomByDelta(-this._delta)\n  }\n  \n  /**\n   * @param {number} delta Zoom delta.\n   * @param {Event} event The event to handle\n   * @private\n   */\n  _handleClick ( event) {\n    event.preventDefault()\n    this._zoomByDelta(this._delta)\n  }\n  \n  \n  /**\n   * @param {number} delta Zoom delta.\n   * @private\n   */\n  _zoomByDelta (delta) {\n    const map = this.map\n    const view = map.view\n    if (!view) {\n      return\n    }\n    \n    const currentResolution = view.resolution\n    if (currentResolution) {\n      const newResolution = view.constrainResolution(currentResolution, delta)\n      view.resolution = newResolution\n    }\n  }\n  \n} \n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/control/zoom.js","/**\n * Created by zypc on 2016/11/15.\n */\n\nimport BaseObject from '../core/baseobject'\nimport CanvasRenderer from '../renderer/canvas/canvasrenderer'\nimport BrowserEventHandler from './browsereventhandler'\nimport BrowserEvent from './browserevent'\nimport View from './view'\nimport FeatureLayer from '../lyr/featurelayer'\nimport {listen} from '../core/eventmanager'\nimport {Transform} from '../data/matrix/transform'\nimport {EventType} from '../meek/eventtype'\nimport {ExtentUtil} from '../geometry/support/extentutil'\nimport {componentsDefaults} from '../components/componentdefaults'\nimport {controlDefaults} from '../control/controldefaults'\n\n\n/**\n * Map类\n *\n * @class Map\n * @extends BaseObject\n * @module meek\n * @constructor\n */\nexport default class Map extends BaseObject {\n\n  /**\n   * @constructor\n   *\n   * @param options\n   */\n  constructor (options) {\n    super()\n\n    this._frameState = null\n    \n    /**\n     * 添加到map中的layers集合\n     * @private\n     */\n    this._layers = []\n  \n    /**\n     * 初始化矩阵转换器\n     * @type {*}\n     * @private\n     */\n    this._toPixelTransform = Transform.create()\n    this._toCoordinateTransform = Transform.create()\n\n    /**\n     *\n     * @private\n     */\n    this._animationDelayKey = undefined\n\n    /**\n     * The collection of components\n     * @private\n     */\n    this._components = []\n  \n    /**\n     * The collection of controls\n     * @type {Array}\n     * @private\n     */\n    this._controls = []\n  \n    // Create the viewport for map container\n    this._createViewport()\n  \n    this._overlayContainer = document.createElement('DIV')\n    this._overlayContainer.className = 'dt-overlaycontainer'\n    this.viewport.appendChild(this._overlayContainer)\n  \n    this._overlayContainerStopEvent = document.createElement('DIV')\n    this._overlayContainerStopEvent.className = 'dt-overlaycontainer-stopevent'\n  \n    // prevent event propagation from overlay\n    const overlayEvents = [\n      BrowserEvent.CLICK,\n      BrowserEvent.DBLCLICK,\n      BrowserEvent.MOUSE_DOWN,\n      BrowserEvent.MOUSE_UP,\n      BrowserEvent.MOUSE_WHEEL,\n      BrowserEvent.WHEEL\n    ]\n    overlayEvents.forEach(overlayEvent => {\n      listen(this._overlayContainerStopEvent, overlayEvent,\n        (evt) => {evt.stopPropagation() })\n    })\n    \n    this.viewport.appendChild(this._overlayContainerStopEvent)\n  \n    // Get the options inner\n    const optionsInner = Map.parseOptionsInner(options)\n    \n    // 是否允许图片坐标超出图片范围\n    this.allowCoordinatesBeyondImage = options.allowCoordinatesBeyondImage || false\n  \n    // Create the renderer\n    this._renderer = new optionsInner.rendererClass(this.viewport, this)\n    \n    // Create the browser events handler\n    this._createBrowserEventHandler()\n  \n    this._animationDelay = () => {\n      this._animationDelayKey = undefined\n      this._renderFrame(Date.now())\n    }\n    \n    // Set up the properties for map\n    this.layers = optionsInner.values['layers']\n    this.target = optionsInner.values['target']\n    this.view = optionsInner.values['view']\n    \n    // add default components to map\n    optionsInner.components.forEach(component =>\n      this.addComponents(component))\n    \n    // add default controls to map\n    optionsInner.controls.forEach(control => this.addControl(control))\n  \n    this._overlayIdIndex = {}\n    this._overlays = optionsInner.overlays\n    this._overlays.forEach(overlay => this._addOverlayInternal(overlay))\n    \n    //\n    listen(this.view, EventType.CHANGE, this._handleViewChange, this)\n    \n    // add mouse wheel events listener\n    listen(this.viewport, BrowserEvent.MOUSE_WHEEL, this._handleMouseWheelEvent, this)\n    listen(this.viewport, BrowserEvent.WHEEL, this._handleMouseWheelEvent, this)\n  }\n\n  /**\n   * 设置map的父容器,\n   * 所有的图层对象、组件对象的父容器\n   *\n   * @method createViewport\n   * @private\n   */\n  _createViewport () {\n    const viewport = document.createElement('DIV')\n    viewport.className = 'dt-viewport'\n    viewport.style.position = 'relative'\n    viewport.style.overflow = 'hidden'\n    viewport.style.width = '100%'\n    viewport.style.height = '100%'\n\n    this._viewport = viewport\n  }\n  \n  /**\n   * 获取overlay的容器\n   *\n   * @property overlayContainer\n   * @returns {Element|*}\n   */\n  get overlayContainer () { return this._overlayContainer }\n  \n  /**\n   * 获取overlay容器的结束事件\n   *\n   * @property overlayContainerStopEvent\n   * @returns {Element|*}\n   */\n  get overlayContainerStopEvent () { return this._overlayContainerStopEvent }\n  \n  /**\n   * 获取viewport\n   *\n   * @property viewport\n   * @returns {Element|*}\n   */\n  get viewport () { return this._viewport }\n\n  /**\n   * 地图渲染器对象;默认渲染方式为canvas方式\n   *\n   * @method createRenderer\n   * @private\n   */\n  _createRenderer () {\n    this._renderer = new CanvasRenderer(this.viewport, this)\n  }\n\n  /**\n   * 创建浏览器事件的监听器\n   *\n   * 浏览器事件包括{mousedown|mousemove|mouseup|mouseover|mouseup}\n   *\n   * @method createBrowserEventHandler\n   * @private\n   */\n  _createBrowserEventHandler () {\n    this._browserEventHandler = new BrowserEventHandler(this, this.viewport)\n\n    /**\n     * 监听浏览器上的鼠标事件 mousemove,mouseup,mousedown\n     * 并处理浏览器事件\n     */\n    for (let key in BrowserEvent) {\n      listen(this._browserEventHandler, BrowserEvent[key],\n        this._handleBrowserEvent, this)\n    }\n  }\n  \n  /**\n   * Handle the mouse wheel event\n   * @param wheelEvent\n   * @private\n   */\n  _handleMouseWheelEvent (wheelEvent) {\n    const type = wheelEvent.type\n    const browserEvent = new BrowserEvent(this, wheelEvent, type)\n    this._handleBrowserEvent(browserEvent)\n  }\n  \n  /**\n   *\n   * @param keyboardEvent\n   * @private\n   */\n  _handleKeyboardEvent (keyboardEvent) {\n    const type = keyboardEvent.type\n    const browserEvent = new BrowserEvent(this, keyboardEvent, type)\n    this._handleBrowserEvent(browserEvent)\n  }\n  \n  /**\n   * Handle browser events\n   * @param browserEvent\n   * @private\n   */\n  _handleBrowserEvent (browserEvent) {\n    const cpts = this.components\n    let i\n\n    if (this.dispatchEvent(browserEvent) !== false) {\n      for (i = cpts.length - 1; i >= 0; i--) {\n        let cpt = cpts[i]\n\n        if (!cpt.active) {\n          continue\n        }\n\n        let cont = cpt.handleMouseEvent(browserEvent)\n        if (!cont) {\n          break\n        }\n      }\n    }\n  }\n  \n  /**\n   * 渲染map\n   *\n   * @method renderFrame\n   * @private\n   */\n  _renderFrame () {\n    const size = this.size\n    const view = this.view\n    let frameState = null\n\n    const extent = ExtentUtil.createEmpty()\n    const viewState = view.getViewState()\n    frameState = {\n      size,\n      viewState,\n      pixelRatio: 1,\n      extent,\n      toPixelTransform: this._toPixelTransform,\n      toCoordinateTransform: this._toCoordinateTransform,\n    }\n    \n    if (frameState) {\n      frameState.extent = ExtentUtil.getForViewAndSize(viewState.center,\n        viewState.resolution, viewState.rotation, frameState.size, extent)\n    }\n    \n    this._frameState = frameState\n    this._renderer.renderFrame(frameState)\n  }\n  \n  /**\n   * 执行渲染\n   *\n   * @method render\n   */\n  render () {\n    if (this._animationDelayKey === undefined) {\n      this._animationDelayKey = window.requestAnimationFrame(this._animationDelay)\n    }\n  }\n  \n  /**\n   * Render map while the view has been changed\n   * @private\n   */\n  _handleViewChange () {\n    this.render()\n    this.dispatchEvent(EventType.VIEW_CHANGED)\n  }\n  \n  /**\n   * 是否渲染\n   *\n   * @method isRendered\n   * @returns {Boolean}\n   */\n  isRendered () {\n    return !!this._frameState\n  }\n\n  /**\n   * Size读写器,当前地图的大小\n   *\n   * @property size\n   * @returns {Number}\n   */\n  get size () { return this._size }\n  set size (value) {\n    this._size = value\n  }\n\n  /**\n   * 获取组件\n   *\n   * @method components\n   * @returns {Array}\n   */\n  get components () { return this._components }\n  \n  /**\n   * map中控件集合\n   * @property controls\n   * @type {[]}\n   */\n  get controls () { return this._controls }\n\n  /**\n   * 当前存储在Map中的图层集合\n   *\n   * @property layers\n   * @type {Array}\n   */\n  get layers () { return this._layers }\n  set layers (value) {\n    if (Array.isArray(value)) {\n      value.forEach( layer => {\n        this.addLayer(layer)\n      })\n    }\n  }\n\n  /**\n   * target 读写器\n   *\n   * @property target\n   * @type\n   */\n  get target () { return this._target }\n  set target (value) {\n    this._target = value\n    const targetElement = document.getElementById(this._target)\n    targetElement.appendChild(this.viewport)\n  \n    // 监听键盘点击和抬起事件\n    listen(document, BrowserEvent.KEYDOWN,\n      this._handleKeyboardEvent, this),\n    listen(document, BrowserEvent.KEYPRESS,\n        this._handleKeyboardEvent, this)\n  \n    // 监听浏览器窗口变化，并做自适应\n    const handleRize = this.updateSize.bind(this)\n    window.addEventListener(EventType.RESIZE, handleRize, false)\n    \n    this.updateSize()\n    this.render()\n  }\n\n  /**\n   * 用于添加一个Component的方法接口\n   *\n   * @method addComponents\n   * @param cpt {Component} Componnet的一个子类\n   */\n  addComponents (cpt) {\n    this.components.push(cpt)\n    cpt.map = this\n  }\n  \n  /**\n   * 添加一个控件到地图中\n   * @method addControl\n   * @param control\n   */\n  addControl (control) {\n    this.controls.push(control)\n    control.map = this\n  }\n\n  /**\n   * 添加layer\n   *\n   * @method addLayer\n   * @param layer\n   */\n  addLayer (layer) {\n    this.layers.push(layer)\n    layer.map = this\n  }\n  \n  /**\n   * 获取当前地图中的矢量图层\n   *\n   * @method getFeaturesLayer\n   * @return {Array}\n   */\n  getFeaturesLayer () {\n    return this.layers.filter( layer => layer instanceof FeatureLayer )\n  }\n  \n  /**\n   *\n   * @param overlay\n   * @private\n   */\n  _addOverlayInternal (overlay) {\n    const id = overlay.overlayId\n    if (id !== undefined) {\n      this._overlayIdIndex[id.toString()] = overlay\n    }\n    \n    overlay.map = this\n  }\n  \n  /**\n   *\n   * getTargetElement\n   * @returns {Object}\n   */\n  getTargetElement () {\n    const target = this.target\n    if(target !== undefined) {\n      return typeof target === 'string' ?\n        document.getElementById(target) :\n        target\n    }else{\n      return null\n    }\n  }\n  \n  /**\n   * 遍历鼠标点位置的所有feature\n   *\n   * @method forEachFeatureAtPiexl\n   * @param piexl {Array}\n   * @param callback\n   * @param tolerance\n   * @returns {eature}\n   */\n  forEachFeatureAtPiexl (piexl,callback,tolerance) {\n    if (!this._frameState) {\n      return\n    }\n    \n    const coordinate = this.getCoordinateFromPixel(piexl)\n    const hitTolerance = tolerance\n    \n    const layers = this.getFeaturesLayer()\n    let result = null\n    for (let i = 0, ii = layers.length; i < ii; i++){\n      let layer = layers[i]\n      if (layer.visible) {\n        result = layer.forEachFeatureAtPiexl(this._frameState,coordinate,callback,hitTolerance)\n        if (result) {\n          return callback(result, layer)\n        }\n      }\n    }\n    \n    return result\n  }\n  \n  /**\n   * 更新map viewport的大小\n   *\n   * @method updateSize\n   */\n  updateSize () {\n    const targetElement = this.getTargetElement()\n    if (!targetElement) {\n      this.size = undefined\n    } else {\n      const computedStyle = getComputedStyle(targetElement)\n      this.size = [\n        targetElement.offsetWidth -\n        Number.parseFloat(computedStyle['borderLeftWidth']) -\n        Number.parseFloat(computedStyle['paddingLeft']) -\n        Number.parseFloat(computedStyle['paddingRight']) -\n        Number.parseFloat(computedStyle['borderRightWidth']),\n        targetElement.offsetHeight -\n        Number.parseFloat(computedStyle['borderTopWidth']) -\n        Number.parseFloat(computedStyle['paddingTop']) -\n        Number.parseFloat(computedStyle['paddingBottom']) -\n        Number.parseFloat(computedStyle['borderBottomWidth'])\n      ]\n    }\n  }\n\n  /**\n   * 获取当前视图鼠标的坐标\n   *\n   * @method getEventPixel\n   * @param {Event} event Event.\n   * @return {Array}\n   * @api stable\n   */\n  getEventPixel (event) {\n    // 获取viewport元素在浏览器视图窗口总的位置(left,top,bottom,right)\n    const viewportPosition = this.viewport.getBoundingClientRect()\n    // const eventPosition = event.changedTouches ? event.changedTouches[0] : event\n    const eventPosition = event\n    return [\n      eventPosition.clientX - viewportPosition.left,\n      eventPosition.clientY - viewportPosition.top\n    ]\n  }\n  \n  /**\n   * 把坐标数据转换到标准坐标系中\n   *\n   * @method getCoordinateFromPixel\n   * @param pixelPoint {Array}\n   * @returns {Array}\n   */\n  getCoordinateFromPixel (pixelPoint) {\n    // console.log('转换到标准坐标')\n    const frameState = this._frameState\n    if (!frameState) {\n      return null\n    } else {\n      return Transform.apply( frameState.toCoordinateTransform, pixelPoint.slice())\n    }\n  }\n  \n  /**\n   * Get the pixel for a coordinate.  This takes a coordinate in the map view\n   * projection and returns the corresponding pixel.\n   *\n   * getPixelFromCoordinate\n   * @param coordinate\n   * @returns {Array}\n   */\n  getPixelFromCoordinate (coordinate) {\n    const frameState = this._frameState\n    if (!frameState) {\n      return null\n    } else {\n      return Transform.apply(frameState.toPixelTransform, coordinate.slice(0, 2))\n    }\n  }\n  \n  /**\n   * Parse the options passed inner\n   * parseOptionsInner\n   * @param options\n   * @static\n   * @returns {{rendererClass: CanvasRenderer, components: *, values: Map}}\n   */\n  static parseOptionsInner (options = {}) {\n    \n    const rendererClass = CanvasRenderer\n    \n    const values = {}\n    \n    values['view'] = options.view !== undefined ? options.view : new View()\n    values['target'] = options.target\n    values['layers'] = options.layers !== undefined ? options.layers : []\n    \n    let components\n    if (options.components) {\n      components = options.components\n    } else {\n      components = componentsDefaults()\n    }\n  \n    let controls\n    if (options.controls) {\n      controls = options.controls\n    } else {\n      controls = controlDefaults()\n    }\n    \n    let overlays\n    if (options.overlays !== undefined) {\n      if (Array.isArray(options.overlays)) {\n        overlays = [...options.overlays]\n      }\n    } else {\n      overlays = []\n    }\n    \n    return {\n      rendererClass,\n      components,\n      controls,\n      values,\n      overlays\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/meek/map.js","\nimport SingleImageLayer from '../../lyr/singleimagelayer'\nimport FeatureLayer from '../../lyr/featurelayer'\nimport Renderer from '../renderer'\nimport FeatureLayerRenderer from '../canvas/featurelayerrenderer'\nimport ImageLayerRenderer from '../canvas/imagelayerrenderer'\nimport {createCanvasContext2D} from '../../utils/domutil'\nimport {Transform} from '../../data/matrix/transform'\nimport {RenderEventType} from '../rendereventtype'\nimport {stableSort} from '../../utils/array'\n\nimport RenderEvent from '../renderevent'\n\n\n/**\n * 图形渲染调度器\n *\n */\nexport default class CanvasRenderer extends Renderer {\n\n  constructor (container, map) {\n    super(container, map)\n\n    this._context = null\n    this._canvas = null\n  \n    this._rendererVisible = true\n    this._layerRenderers = []\n    this._transform = Transform.create()\n    \n    this._addToContainer(container)\n  }\n  \n  /**\n   * Add the canvas dom to the container\n   * @param container\n   * @private\n   */\n  _addToContainer (container) {\n    /**\n     * 创建CANVAS元素，并将其添加到container中\n     * 该canvas层作为图形绘制层\n     */\n    let _context = this.context\n    this._canvas = _context.canvas\n    this._canvas.style.width = '100%'\n    this._canvas.style.height = '100%'\n    this._canvas.className = 'dt-unselectable'\n    container.insertBefore(this._canvas, container.childNodes[0] || null)\n  }\n  \n  /**\n   * Render frame\n   * @param frameState\n   */\n  renderFrame (frameState) {\n    if (this.map === null) {\n      return\n    }\n    \n    if (!frameState) {\n      if (this._rendererVisible) {\n        this._canvas.style.display = 'none'\n        this._rendererVisible = false\n    \n        return\n      }\n    }\n    \n    const context = this.context\n    \n    const canvasWidth = frameState.size[0]\n    const canvasHeight = frameState.size[1]\n    \n    if (this._canvas.width !== canvasWidth || this._canvas.height !== canvasHeight) {\n      this._canvas.width = canvasWidth\n      this._canvas.height = canvasHeight\n    } else {\n      context.clearRect(0,0,canvasWidth,canvasHeight)\n    }\n\n    const layers = this.map.layers\n  \n    // layers rendered in order\n    stableSort(layers, this.sortByZIndex)\n    \n    // 更新转化运算矩阵\n    this.updateTransform(frameState)\n  \n    this._dispatchComposeEvent(RenderEventType.PRERENDER, frameState)\n    \n    layers.forEach( layer => {\n      if (layer.visible) {\n        let layerRender = this.getLayerRenderer(layer)\n  \n        if (layerRender.prepareFrame(frameState)) {\n          layerRender.composeFrame(frameState,context)\n        }\n      }\n    })\n  \n    this._dispatchComposeEvent(RenderEventType.POSTRENDER, frameState)\n  }\n  \n  /**\n   * Get the layer renderer by the params layer object\n   * @param layer\n   * @returns {*}\n   */\n  getLayerRenderer (layer) {\n    const layerKey = layer.id.toString()\n    // 应用层缓存\n    if (layerKey in this._layerRenderers) {\n      return this._layerRenderers[layerKey]\n    } else {\n      const layerRenderer = this.createLayerRenderer(layer)\n      this._layerRenderers[layerKey] = layerRenderer\n      return layerRenderer\n    }\n  }\n  \n  /**\n   * Create the layer renderer\n   * @param layer\n   * @returns {*}\n   */\n  createLayerRenderer(layer){\n    if (layer instanceof SingleImageLayer) {\n      return new ImageLayerRenderer(layer,this.context)\n    } else if (layer instanceof FeatureLayer) {\n      return new FeatureLayerRenderer(layer,this.context)\n    } else {\n      return null\n    }\n  }\n  \n  /**\n   * Update the transform\n   * @param frameState\n   */\n  updateTransform (frameState){\n    const viewState = frameState.viewState\n    const coordinateToPixelTransform = frameState.toPixelTransform\n    const pixelToCoordinateTransform = frameState.toCoordinateTransform\n    const size = frameState.size\n    const resolution = viewState.resolution\n    const center = viewState.center\n    const rotation = viewState.rotation\n  \n    Transform.compose(coordinateToPixelTransform,\n          size[0] / 2, size[1] / 2,\n          1 / resolution,  1 / resolution,\n          - rotation,\n          - center[0], - center[1])\n  \n    Transform.invert(Transform.setFromArray(pixelToCoordinateTransform, coordinateToPixelTransform))\n  }\n  \n  /**\n   *\n   * @param state1\n   * @param state2\n   * @returns {number}\n   */\n  sortByZIndex (state1, state2) {\n    return state1.zIndex - state2.zIndex\n  }\n  \n  get canvas(){ return this._canvas }\n  \n  get context(){\n    if(!this._context){\n      this._context = createCanvasContext2D()\n    }\n    \n    return this._context\n  }\n  \n  \n  /**\n   * \n   * @private\n   */\n  _dispatchComposeEvent (type, frameState) {\n    const map = this.map\n    const context = this.context\n    if (map.hasListener(type)) {\n    \n      // const transform = this.getTransform(frameState)\n    \n      const composeEvent = new RenderEvent(type,\n        frameState, context, null)\n      \n      map.dispatchEvent(composeEvent)\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/canvas/canvasrenderer.js","/**\n * Created by zypc on 2016/11/15.\n */\n\n\nimport BaseObject from '../core/baseobject'\n\n/**\n * 地图渲染器基类，\n * @class Renderer\n * @extends BaseObject\n * @module renderer\n */\nexport default class Renderer extends BaseObject {\n\n  constructor (contianer, map) {\n    super()\n\n    this._map = map\n  }\n  \n  /**\n   * @property map\n   * @type {Datatang.Map}\n   */\n  get map () { return this._map }\n  \n  /**\n   *\n   * @method renderFrame\n   * @abstract\n   * @param frameState {Object}\n   */\n  renderFrame (frameState) {} // eslint-disable-line no-unused-vars\n\n  /**\n   * @method clear\n   * @abstract\n   */\n  clear () {}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/renderer.js","/**\n * Created by zhangyong on 2017/3/20.\n */\n\nimport LayerRenderer from '../../renderer/canvas/layerrenderer'\nimport PointRender from '../render/pointrender'\nimport LineRender from '../render/linerender'\nimport PolygonRender from '../render/polygonrender'\nimport TextRender from '../render/textrender'\n\nimport {Transform} from '../../data/matrix/transform'\nimport {ExtentUtil} from '../../geometry/support/extentutil'\n\nexport default class FeatureLayerRenderer extends LayerRenderer {\n  \n  \n  constructor (layer,context) {\n    super(layer, context)\n  \n    /**\n     *\n     * @type {Map}\n     * @private\n     */\n    this._geometryRenderGroup = new Map()\n  \n    /**\n     *\n     * @type {TextRender}\n     * @private\n     */\n    this._textRender = new TextRender(this.context)\n  \n    /**\n     *\n     * @type {null}\n     * @private\n     */\n    this._maxExtent = null\n  \n    /**\n     *\n     * @type {Array}\n     * @private\n     */\n    this._renderFeatures = []\n  \n    /**\n     *\n     * @type {NaN}\n     * @private\n     */\n    this._renderResolution = Number.NaN\n  \n    /**\n     *\n     * @type {[*]}\n     * @private\n     */\n    this._renderExtent = [Infinity, Infinity, -Infinity, -Infinity]\n  \n    /**\n     *\n     * @type {NaN}\n     * @private\n     */\n    this._renderRevision = NaN\n  \n    /**\n     *\n     * @type {boolean}\n     * @private\n     */\n    this._cacheableThisTime = true\n  \n  }\n  \n  /**\n   *  Get a renderer by geometry type\n   * @param geometry\n   * @returns {*}\n   * @private\n   */\n  _getGeometryRender (geometry) {\n    const type = geometry.geometryType\n    \n    if ( !this._geometryRenderGroup.has(type) ) {\n      this._geometryRenderGroup.set(type, new FeatureLayerRenderer.GeometryRender[type](this.context))\n    }\n    \n    return this._geometryRenderGroup.get(type)\n  }\n \n  \n  _renderFeaturesInOrder (features) {\n    if (features === null || features === undefined) {\n      return features\n    }\n    \n    if (features.length === 0) {\n      return features\n    }\n    \n  }\n  \n  /**\n   * 1、对渲染对象需要做切割 （当前范围内）\n   */\n  prepareFrame (frameState) {\n    const layer = this.layer\n    const frameExtent = frameState.extent\n    const viewState = frameState.viewState\n    const resolution = viewState.resolution\n    const layerRevision = layer.revision\n    const featureLayerRenderBuffer = layer.renderBuffer\n    \n    const renderExtent = ExtentUtil.buffer(frameExtent,\n      featureLayerRenderBuffer * resolution)\n    \n    if (this._renderResolution === resolution &&\n        this._renderRevision === layerRevision &&\n        ExtentUtil.containsExtent(this._renderExtent, renderExtent)) {\n      this._cacheableThisTime = true\n      \n      // return true\n    }\n  \n    // 加载当前屏的图形\n    const features = this.layer.loadFeature(renderExtent)\n    \n    this._cacheableThisTime = false\n    this._renderFeatures = features\n    this._maxExtent = renderExtent\n    this._renderResolution = resolution\n    this._renderExtent = renderExtent\n    this._renderRevision = layerRevision\n    \n    if (features.length === 0) {\n      return false\n    }\n    \n    return true\n  }\n  \n  /**\n   *\n   */\n  composeFrame (frameStateOpt, context) {\n    const frameState = frameStateOpt\n    const viewState = frameState.viewState\n    const layer = this.layer\n    const features = this._renderFeatures\n    const resolution = viewState.resolution\n  \n    const transform = this.getTransform(frameState, 0)\n  \n    this.preCompose(context, frameState, transform)\n    \n    // Clip the current extent so that the parts of geometries\n    // will not be rendered\n    this._clipExtent(transform, context)\n    \n    features.forEach(feature => {\n      let renderStyle\n      \n      if (feature.style) {\n        renderStyle = feature.style\n      } else {\n        let styleFunction = layer.styleFunction\n        if (styleFunction) {\n          renderStyle = styleFunction(feature, resolution)\n  \n          // 应用图层样式\n          feature.style = this._cloneRenderStyle(renderStyle)\n        }\n      }\n      \n      let geomertyRender = this._getGeometryRender(feature.geometry)\n      this._resetRender(geomertyRender)\n      geomertyRender.render(feature, renderStyle, transform)\n  \n      /**\n       * Render text\n       */\n      if (feature.textDisplay) {\n        this._textRender.render(feature, renderStyle, transform)\n      }\n    })\n  \n    context.restore()\n    \n    this.postCompose(context, frameState, transform)\n    \n    return true\n  }\n  \n  /**\n   *\n   * @param renderStyle\n   * @returns {*}\n   * @private\n   */\n  _cloneRenderStyle (renderStyle) {\n    if (renderStyle) {\n      const newStyle = []\n      renderStyle.forEach( rs => {\n        newStyle.push(rs.clone())\n      })\n      \n      return newStyle\n    }\n    \n    return null\n  }\n  \n  /**\n   * Clip the context\n   * @param transform\n   * @private\n   */\n  _clipExtent (transform, context) {\n    const flatClipCoords = this.getClipCoords(transform)\n    \n    context.save()\n    context.beginPath()\n    context.moveTo(flatClipCoords[0], flatClipCoords[1])\n    context.lineTo(flatClipCoords[2], flatClipCoords[3])\n    context.lineTo(flatClipCoords[4], flatClipCoords[5])\n    context.lineTo(flatClipCoords[6], flatClipCoords[7])\n    context.clip()\n  }\n  \n  /**\n   * Get clip coordinates\n   * @param transform\n   * @returns {[*,*,*,*,*,*,*,*]}\n   */\n  getClipCoords (transform) {\n    const maxExtent = this._maxExtent\n    const minX = maxExtent[0]\n    const minY = maxExtent[1]\n    const maxX = maxExtent[2]\n    const maxY = maxExtent[3]\n    const flatClipCoords = [minX, minY, minX, maxY, maxX, maxY, maxX, minY]\n    Transform.transform2D(flatClipCoords, 0, 8, 2, transform, flatClipCoords)\n    return flatClipCoords\n  }\n  \n  /**\n   *\n   * @param geomertyRender\n   * @private\n   */\n  _resetRender (geomertyRender) {\n    if (!this._cacheableThisTime) {\n      geomertyRender.resetRenderOption()\n    }\n  }\n  \n  preCompose () {\n    \n  }\n  \n  postCompose () {\n    \n  }\n  \n}\n\nFeatureLayerRenderer.GeometryRender = {}\n\nFeatureLayerRenderer.GeometryRender['point'] = PointRender\nFeatureLayerRenderer.GeometryRender['line'] = LineRender\nFeatureLayerRenderer.GeometryRender['polygon'] = PolygonRender\nFeatureLayerRenderer.GeometryRender['multi_polygon'] = PolygonRender\nFeatureLayerRenderer.GeometryRender['extent'] = PolygonRender\nFeatureLayerRenderer.GeometryRender['parallelogram'] = PolygonRender\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/canvas/featurelayerrenderer.js","/**\n * Created by zhangyong on 2017/3/20.\n */\n\nimport BaseObject from '../../core/baseobject'\nimport {Transform} from '../../data/matrix/transform'\nimport {ExtentUtil} from '../../geometry/support/extentutil'\nimport {ImageState} from '../../lyr/image/imagestate'\nimport {EventType} from '../../meek/eventtype'\nimport {Canvas} from '../../utils/canvas'\n\nimport {listen} from '../../core/eventmanager'\n\nexport default class LayerRenderer extends BaseObject {\n  \n  constructor (layer,context) {\n    super()\n    \n    this._context = context\n    this._layer = layer\n  \n    this.renderedResolution = undefined\n    \n    this._transform = ExtentUtil.createEmpty()\n  }\n  \n  /**\n   *\n   * @param frameState\n   * @param offsetX\n   * @returns {*|!Transform}\n   */\n  getTransform (frameState, offsetX) {\n    const viewState = frameState.viewState\n    const pixelRatio = 1\n    const dx1 = pixelRatio * frameState.size[0] / 2\n    const dy1 = pixelRatio * frameState.size[1] / 2\n    const sx = pixelRatio / viewState.resolution\n    const sy = sx\n    const angle = -viewState.rotation\n    const dx2 = -viewState.center[0] + offsetX\n    const dy2 = -viewState.center[1]\n    return Transform.compose(this._transform, dx1, dy1, sx, sy, angle, dx2, dy2)\n  }\n  \n  /**\n   * Load the image\n   * @param image\n   * @returns {boolean}\n   */\n  loadImage (image) {\n    let imageState = image.state\n    if (imageState !== ImageState.LOADED &&\n        imageState !== ImageState.ERROR) {\n      listen(image, EventType.CHANGE, this._handleImageChange, this)\n    }\n    \n    if (imageState === ImageState.IDLE) {\n      image.load()\n      imageState = image.state\n    }\n    \n    return imageState === ImageState.LOADED\n  }\n  \n  /**\n   *\n   * @param event\n   * @private\n   */\n  _handleImageChange (event) {\n    const image = event.target\n    if (image.state === ImageState.LOADED) {\n      this.renderIfReadyAndVisible()\n    }\n  }\n  \n  /**\n   *\n   */\n  renderIfReadyAndVisible () {\n    const layer = this.layer\n    // if (layer.visible && layer.getSourceState() == State.READY) {\n    if (layer.visible) {\n      layer.changed()\n      // this.changed()\n    }\n  }\n  \n  /**\n   *\n   * @param context\n   * @param frameState\n   * @param extent\n   */\n  clip (context, frameState, extent) {\n    const pixelRatio = frameState.pixelRatio\n    const width = frameState.size[0] * pixelRatio\n    const height = frameState.size[1] * pixelRatio\n    const rotation = frameState.viewState.rotation\n    const topLeft = ExtentUtil.getTopLeft((extent))\n    const topRight = ExtentUtil.getTopRight((extent))\n    const bottomRight = ExtentUtil.getBottomRight((extent))\n    const bottomLeft = ExtentUtil.getBottomLeft((extent))\n    \n    Transform.apply(frameState.toPixelTransform, topLeft)\n    Transform.apply(frameState.toPixelTransform, topRight)\n    Transform.apply(frameState.toPixelTransform, bottomRight)\n    Transform.apply(frameState.toPixelTransform, bottomLeft)\n    \n    context.save()\n    Canvas.rotateAtOffset(context, -rotation, width / 2, height / 2)\n    context.beginPath()\n    context.moveTo(topLeft[0] * pixelRatio, topLeft[1] * pixelRatio)\n    context.lineTo(topRight[0] * pixelRatio, topRight[1] * pixelRatio)\n    context.lineTo(bottomRight[0] * pixelRatio, bottomRight[1] * pixelRatio)\n    context.lineTo(bottomLeft[0] * pixelRatio, bottomLeft[1] * pixelRatio)\n    context.clip()\n    Canvas.rotateAtOffset(context, rotation, width / 2, height / 2)\n  }\n  \n  \n  /**\n   *\n   * @returns {*}\n   */\n  get layer () { return this._layer }\n  get context () {return this._context}\n  \n  /**\n   *\n   * @param frameStateOpt\n   */\n  prepareFrame (frameStateOpt) {}// eslint-disable-line no-unused-vars\n  \n  /**\n   *\n   * @param frameStateOpt\n   * @param context\n   */\n  composeFrame (frameStateOpt, context) {}// eslint-disable-line no-unused-vars\n  \n  /**\n   *\n   * @param context\n   * @param frameState\n   * @param optTransform\n   */\n  postCompose (context, frameState, optTransform){} // eslint-disable-line no-unused-vars\n  \n  /**\n   *\n   * @param context\n   * @param frameState\n   * @param optTransform\n   */\n  preCompose (context, frameState, optTransform){} // eslint-disable-line no-unused-vars\n}\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/canvas/layerrenderer.js","/**\n * Created by zhangyong on 2017/3/17.\n */\n\n/**\n * Collection of affine 2d transformation functions. The functions work on an\n * array of 6 elements. The element order is compatible with the [SVGMatrix\n * interface](https://developer.mozilla.org/en-US/docs/Web/API/SVGMatrix) and is\n * a subset (elements a to f) of a 3x3 martrix:\n * ```\n * [ a c e ]\n * [ b d f ]\n * [ 0 0 1 ]\n * ```\n */\n\nexport const Transform = {\n  \n  /**\n   * @private\n   * @type {ol.Transform}\n   */\n  tmp_: new Array(6),\n  \n  /**\n   * 恒等矩阵\n   *\n   * Create an identity（恒等） transform.\n   * @return {!Transform} Identity transform.\n   */\n  create: function () {\n    return [1, 0, 0, 1, 0, 0]\n  },\n  \n  /**\n   * Resets the given transform to an identity（恒等） transform.\n   *\n   * @param {!Transform} transform Transform.\n   * @return {!Transform} Transform.\n   */\n  reset: function (transform) {\n    return transform.set(transform, 1, 0, 0, 1, 0, 0)\n  },\n  \n  /**\n   *\n   * @param flatCoordinates\n   * @param offset\n   * @param end\n   * @param stride\n   * @param transform\n   * @param opt_dest\n   * @returns {Array}\n   */\n  transform2D: function (flatCoordinates, offset, end, stride, transform, opt_dest) {\n    const dest = opt_dest ? opt_dest : []\n    let i = 0\n    let j\n    \n    for (j = offset; j < end; j += stride) {\n      const x = flatCoordinates[j]\n      const y = flatCoordinates[j + 1]\n      dest[i++] = transform[0] * x + transform[2] * y + transform[4]\n      dest[i++] = transform[1] * x + transform[3] * y + transform[5]\n    }\n    \n    if (opt_dest && dest.length != i) {\n      dest.length = i\n    }\n    \n    return dest\n  },\n  \n  /**\n   * 矩阵相乘\n   *\n   * Multiply（相乘） the underlying matrices of two transforms and return the result in\n   * the first transform.\n   *\n   * @param {!Transform} transform1 Transform parameters of matrix 1.\n   * @param {!Transform} transform2 Transform parameters of matrix 2.\n   * @return {!Transform} transform1 multiplied with transform2.\n   */\n  multiply: function (transform1, transform2) {\n    const a1 = transform1[0]\n    const b1 = transform1[1]\n    const c1 = transform1[2]\n    const d1 = transform1[3]\n    const e1 = transform1[4]\n    const f1 = transform1[5]\n    const a2 = transform2[0]\n    const b2 = transform2[1]\n    const c2 = transform2[2]\n    const d2 = transform2[3]\n    const e2 = transform2[4]\n    const f2 = transform2[5]\n    \n    transform1[0] = a1 * a2 + c1 * b2\n    transform1[1] = b1 * a2 + d1 * b2\n    transform1[2] = a1 * c2 + c1 * d2\n    transform1[3] = b1 * c2 + d1 * d2\n    transform1[4] = a1 * e2 + c1 * f2 + e1\n    transform1[5] = b1 * e2 + d1 * f2 + f1\n    \n    return transform1\n  },\n  \n  /**\n   * Set the transform components a-f on a given transform.\n   *\n   * @param {!Transform} transform Transform.\n   * @param {number} a The a component of the transform.\n   * @param {number} b The b component of the transform.\n   * @param {number} c The c component of the transform.\n   * @param {number} d The d component of the transform.\n   * @param {number} e The e component of the transform.\n   * @param {number} f The f component of the transform.\n   * @return {!Transform} Matrix with transform applied.\n   */\n  set: function (transform, a, b, c, d, e, f) {\n    transform[0] = a\n    transform[1] = b\n    transform[2] = c\n    transform[3] = d\n    transform[4] = e\n    transform[5] = f\n    return transform\n  },\n  \n  /**\n   * Set transform on one matrix from another matrix.\n   *\n   * @param {!Transform} transform1 Matrix to set transform to.\n   * @param {!Transform} transform2 Matrix to set transform from.\n   * @return {!Transform} transform1 with transform from transform2 applied.\n   */\n  setFromArray: function (transform1, transform2) {\n    transform1[0] = transform2[0]\n    transform1[1] = transform2[1]\n    transform1[2] = transform2[2]\n    transform1[3] = transform2[3]\n    transform1[4] = transform2[4]\n    transform1[5] = transform2[5]\n    return transform1\n  },\n  \n  /**\n   * 矩阵运算\n   * 将坐标值矩阵运算\n   *\n   * Transforms the given coordinate with the given transform returning the\n   * resulting, transformed coordinate. The coordinate will be modified in-place.\n   *\n   * @param {Transform} transform The transformation.\n   * @param {Coordinate|Pixel} coordinate The coordinate to transform.\n   * @return {Coordinate|Pixel} return coordinate so that operations can be\n   *     chained together.\n   */\n  apply: function (transform, coordinate) {\n    const x = coordinate[0]\n    const y = coordinate[1]\n    coordinate[0] = transform[0] * x + transform[2] * y + transform[4]\n    coordinate[1] = transform[1] * x + transform[3] * y + transform[5]\n    return coordinate\n  },\n  \n  /**\n   * Applies rotation to the given transform.\n   *\n   * 矩阵旋转\n   *\n   * @param {!Transform} transform Transform.\n   * @param {number} angle Angle in radians.\n   * @return {!Transform} The rotated transform.\n   */\n  rotate: function (transform, angle) {\n    const cos = Math.cos(angle)\n    const sin = Math.sin(angle)\n    return transform.multiply(transform, transform.set(transform.tmp_, cos, sin, -sin, cos, 0, 0))\n  },\n  \n  /**\n   *  Applies scale to a given transform.\n   *\n   * 矩阵缩放\n   *\n   * @param {!Transform} transform Transform.\n   * @param {number} x Scale factor x.\n   * @param {number} y Scale factor y.\n   * @return {!Transform} The scaled transform.\n   */\n  scale: function (transform, x, y) {\n    return transform.multiply(transform,\n      transform.set(transform.tmp_, x, 0, 0, y, 0, 0))\n  },\n  \n  /**\n   * Applies translation to the given transform.\n   *\n   * 矩阵转换\n   *\n   * @param {!Transform} transform Transform.\n   * @param {number} dx Translation x.\n   * @param {number} dy Translation y.\n   * @return {!Transform} The translated transform.\n   */\n  translate: function (transform, dx, dy) {\n    return transform.multiply(transform,\n      transform.set(transform.tmp_, 1, 0, 0, 1, dx, dy))\n  },\n  \n  /**\n   * Creates a composite transform given an initial translation, scale, rotation, and\n   * final translation (in that order only, not commutative).\n   *\n   * 复杂矩形运算\n   *\n   * @param {!Transform} transform The transform (will be modified in place).\n   * @param {number} dx1 Initial translation x.\n   * @param {number} dy1 Initial translation y.\n   * @param {number} sx Scale factor x.\n   * @param {number} sy Scale factor y.\n   * @param {number} angle Rotation (in counter-clockwise radians).\n   * @param {number} dx2 Final translation x.\n   * @param {number} dy2 Final translation y.\n   * @return {!Transform} The composite transform.\n   */\n  compose: function (transform, dx1, dy1, sx, sy, angle, dx2, dy2) {\n    const sin = Math.sin(angle)\n    const cos = Math.cos(angle)\n    transform[0] = sx * cos\n    transform[1] = sy * sin\n    transform[2] = -sx * sin\n    transform[3] = sy * cos\n    transform[4] = dx2 * sx * cos - dy2 * sx * sin + dx1\n    transform[5] = dx2 * sy * sin + dy2 * sy * cos + dy1\n    return transform\n  },\n  \n  /**\n   * Invert the given transform.\n   *\n   * @param {!Transform} transform Transform.\n   * @return {!Transform} Inverse of the transform.\n   */\n  invert: function (transform) {\n    const det = Transform.determinant(transform)\n    \n    const a = transform[0]\n    const b = transform[1]\n    const c = transform[2]\n    const d = transform[3]\n    const e = transform[4]\n    const f = transform[5]\n    \n    transform[0] = d / det\n    transform[1] = -b / det\n    transform[2] = -c / det\n    transform[3] = a / det\n    transform[4] = (c * f - d * e) / det\n    transform[5] = -(a * f - b * e) / det\n    \n    return transform\n  },\n  \n  /**\n   * Returns the determinant of the given matrix.\n   *\n   * 行列式\n   *\n   * @param {!Transform} mat Matrix.\n   * @return {number} Determinant.\n   */\n  determinant: function (mat) {\n    return mat[0] * mat[3] - mat[1] * mat[2]\n  }\n}\n\nexport default {\n  Transform\n}\n\n\n// WEBPACK FOOTER //\n// ./src/data/matrix/transform.js","/**\n * Created by zhangyong on 2017/3/20.\n */\nimport GeometryRender from '../render/geomertyrender'\n\nimport {colorToString} from '../../utils/helpers'\nimport {Transform} from '../../data/matrix/transform'\n\nexport default class PointRender extends GeometryRender {\n  \n  constructor (context) {\n    super(context)\n  \n    this._pixelCoordinates = []\n  }\n  \n  /**\n   * Render a point\n   * @param feature\n   * @param transform\n   */\n  render (feature, renderStyle, transform) {\n    if(!feature){\n      return\n    }\n    \n    const ctx = this.context\n    const styleArray = renderStyle\n    const geomerty = feature.geometry\n  \n    const coordinates = [geomerty.x, geomerty.y]\n\n    // TODO  Should be cached\n    const pixelCoordinates = Transform.transform2D(\n      coordinates, 0, coordinates.length, 2,\n      transform, this._pixelCoordinates)\n    \n    const x = pixelCoordinates[0]\n    const y = pixelCoordinates[1]\n    \n    const len = styleArray.length\n    for(let i = 0; i < len ; i ++){\n      let styleObj = styleArray[i]\n      \n      let renderOptions = {\n        centerX: (x + 0.5) | 0,\n        centerY: (y + 0.5) | 0,\n        radius: styleObj.size / 2 || styleObj.borderStyle.width / 2,\n        fillStyle: colorToString(styleObj.color,styleObj.alpha),\n        borderStyle: styleObj.borderStyle\n      }\n      \n      this.drawCircle(ctx,renderOptions)\n    }\n    \n  }\n  \n  drawCircle (ctx,renderOptions) {\n    // console.log('类型为圆，开始绘制圆')\n    ctx.save()\n    ctx.beginPath()\n    ctx.arc(renderOptions.centerX, renderOptions.centerY,\n            renderOptions.radius, 0, 2 * Math.PI, true)\n  \n    if (renderOptions.fillStyle) {\n      ctx.fillStyle = renderOptions.fillStyle\n      ctx.fill()\n    }\n    \n    const borderStyle = renderOptions.borderStyle\n    if (borderStyle) {\n      ctx.strokeStyle = colorToString(borderStyle.color,borderStyle.alpha)\n      ctx.lineWidth = borderStyle.width\n\n      if (borderStyle.lineDash) {\n        ctx.setLineDash(borderStyle.lineDash)\n      }\n\n      ctx.stroke()\n    }\n    \n    ctx.closePath()\n    ctx.restore()\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/render/pointrender.js","/**\n * Created by zhangyong on 2017/3/20.\n */\n\nimport BaseObject from '../../core/baseobject'\nimport {equals} from '../../utils/array'\nimport {Transform} from '../../data/matrix/transform'\n\nexport default class GeomertyRender extends BaseObject {\n  constructor (context) {\n    super()\n  \n    /**\n     *\n     */\n    this._context = context\n  \n    /**\n     *\n     * @type {Array}\n     * @private\n     */\n    this._pixelCoordinates = null\n  \n    /**\n     *\n     * @type {*}\n     */\n    this.renderedTransform = Transform.create()\n  }\n  \n  /**\n   *\n   */\n  resetRenderOption () {\n    this._pixelCoordinates = null\n    this.renderedTransform = Transform.create()\n  }\n  \n  /**\n   *\n   * @param transform1\n   * @param transform2\n   */\n  equalsTransform (transform1, transform2) {\n    return equals(transform1, transform2)\n  }\n  \n  /**\n   * context getter\n   * @returns {*}\n   */\n  get context () { return this._context }\n  \n  /**\n   * abstract function\n   * @param feature\n   * @param renderStyle\n   * @param transform\n   */\n  render (feature, renderStyle, transform) {} // eslint-disable-line no-unused-vars\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/render/geomertyrender.js","/**\n * Created by zhangyong on 2017/3/20.\n */\nimport GeometryRender from '../render/geomertyrender'\nimport LineStyle from '../../style/linestyle'\n\nimport {colorToString} from '../../utils/helpers'\nimport {Transform} from '../../data/matrix/transform'\n\nexport default class LineRender extends GeometryRender {\n  \n  constructor (context) {\n    super(context)\n  }\n  \n  /**\n   *\n   * @param feature\n   * @param renderStyle\n   * @param transform\n   */\n  render (feature, renderStyle, transform) {\n    if (!feature) {\n      return\n    }\n  \n    const ctx = this.context\n    const styleArray = renderStyle\n    const geometry = feature.geometry\n  \n    const transform2D =  Transform.transform2D\n    let coordinates = []\n    // TODO find a way to cache the rendered data\n    if (this._pixelCoordinates &&\n        this.equalsTransform(transform, this.renderedTransform)) {\n      coordinates = this._pixelCoordinates\n      // console.log('get the rendered data from chche for line')\n    } else {\n      const geometryCoordinates = geometry.getCoordinates()\n  \n      geometryCoordinates.forEach(function(points){\n        let coordinate = transform2D(\n          points, 0, points.length, 2,\n          transform)\n    \n        coordinate[0] = (coordinate[0] + 0.5 ) | 0\n        coordinate[1] = (coordinate[1] + 0.5 ) | 0\n    \n        coordinates.push(coordinate)\n      })\n  \n      this._pixelCoordinates = coordinates\n      Transform.setFromArray(this.renderedTransform, transform)\n      // console.log('caclulate the rendered data for line')\n    }\n    \n    const len = styleArray.length\n    for(let i = 0; i < len ; i ++){\n      let styleObj = styleArray[i]\n    \n      let renderOptions = {\n        coordinates: coordinates,\n        width: styleObj.width,\n        strokeStyle: colorToString(styleObj.color,styleObj.alpha),\n        lineCap: styleObj.lineCap,\n        lineJion: styleObj.lineJion,\n        miterLimit: styleObj.miterLimit,\n        hasDash: styleObj.style === LineStyle.DASH ? true : false\n      }\n      \n      this.drawLine(ctx, renderOptions)\n    }\n  }\n  \n  drawLine (ctx, renderOpt) {\n    ctx.save()\n    ctx.strokeStyle = renderOpt.strokeStyle\n    ctx.lineWidth = renderOpt.width\n  \n    ctx.lineCap = renderOpt.lineCap\n    ctx.lineJoin = renderOpt.lineJion\n    ctx.miterLimit = renderOpt.miterLimit\n  \n    ctx.beginPath()\n    const coordinates = renderOpt.coordinates\n    for (let i = 0,ii = coordinates.length ; i < ii - 1 ; i++) {\n      ctx.moveTo(coordinates[i][0],coordinates[i][1])\n      ctx.lineTo(coordinates[i + 1][0],coordinates[i + 1][1])\n    }\n  \n    if (renderOpt.hasDash) {\n      ctx.setLineDash([5, 5])\n    }\n  \n    ctx.stroke()\n    \n    ctx.closePath()\n    ctx.restore()\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/render/linerender.js","/**\n * Created by zhangyong on 2017/3/20.\n */\nimport Geometry from '../../geometry/geometry'\nimport GeometryRender from '../render/geomertyrender'\nimport LineStyle from '../../style/linestyle'\nimport {Transform} from '../../data/matrix/transform'\nimport {colorToString} from '../../utils/helpers'\n\nexport default class PolygonRender extends GeometryRender {\n  \n  constructor (context) {\n    super(context)\n  }\n  \n  /**\n   * Render a polygon\n   * @param feature\n   * @param transform\n   * @returns {boolean}\n   */\n  render (feature, renderStyle, transform) {\n    if (!feature) {\n      return\n    }\n  \n    const ctx = this.context\n    const styleArray = renderStyle\n    const geometry = feature.geometry\n  \n    const  transform2D =  Transform.transform2D\n    let geometryCoordinages = geometry.getCoordinates()\n    if (geometry.geometryType === Geometry.EXTENT) {\n      geometryCoordinages = [geometryCoordinages]\n    }\n    \n    if (!geometryCoordinages) {\n      return false\n    }\n    \n    if (geometryCoordinages.length === 0) {\n      return false\n    }\n  \n    // TODO find a way to cache the rendered data\n    let coordinates = []\n    let renderCoords = []\n    \n    if (this._pixelCoordinates &&\n      this.equalsTransform(transform, this.renderedTransform)) {\n      renderCoords = this._pixelCoordinates\n    } else {\n      if (geometry.geometryType === Geometry.MULTI_POLYGON) {\n        let polygonCoords = []\n        // 遍历各个多边形\n        geometryCoordinages.forEach( polygon => {\n          polygon.forEach( rings => {\n            rings.forEach( points => {\n              let coordinate = transform2D(\n                points, 0, points.length, 2,\n                transform)\n  \n              coordinate[0] = (coordinate[0] + 0.5 ) | 0\n              coordinate[1] = (coordinate[1] + 0.5 ) | 0\n  \n              coordinates.push(coordinate)\n            })\n  \n            polygonCoords.push(coordinates)\n            coordinates = []\n          })\n          \n          renderCoords.push(polygonCoords)\n          polygonCoords = []\n        })\n        \n        this.renderMutilPolygon (ctx, styleArray, renderCoords)\n      } else {\n        // 遍历多边形各个环\n        geometryCoordinages.forEach( rings => {\n          rings.forEach(points => {\n            let coordinate = transform2D(\n              points, 0, points.length, 2,\n              transform)\n      \n            coordinate[0] = (coordinate[0] + 0.5 ) | 0\n            coordinate[1] = (coordinate[1] + 0.5 ) | 0\n      \n            coordinates.push(coordinate)\n          })\n    \n          renderCoords.push(coordinates)\n          coordinates = []\n        })\n      }\n      \n      this.renderPolygon(ctx, styleArray, renderCoords)\n    }\n  \n    this._pixelCoordinates = renderCoords\n    Transform.setFromArray(this.renderedTransform, transform)\n  \n    return true\n  }\n  \n  /**\n   *\n   * @param ctx\n   * @param styleArray\n   * @param renderCoords\n   */\n  renderMutilPolygon (ctx, styleArray, renderCoords) {\n    renderCoords.forEach( polygon => {\n      this.renderPolygon(ctx, styleArray, polygon)\n    })\n  }\n  \n  /**\n   *\n   * @param ctx\n   * @param styleArray\n   * @param renderCoords\n   */\n  renderPolygon (ctx, styleArray, renderCoords) {\n    const len = styleArray.length\n    for(let i = 0; i < len ; i ++){\n      let styleObj = styleArray[i]\n    \n      let renderOptions = {\n        coordinates: renderCoords,\n        fillStyle: colorToString(styleObj.color,styleObj.alpha),\n        borderStyle: styleObj.borderStyle\n      }\n    \n      this.drawStylePolygon(ctx, renderOptions)\n    }\n  }\n  \n  /**\n   * 绘制多边形，需要注意多边形各个环的绘制\n   * @param ctx\n   * @param renderOpt\n   */\n  drawStylePolygon (ctx, renderOpt) {\n    ctx.save()\n    \n    if (renderOpt.fillStyle) {\n      ctx.fillStyle = renderOpt.fillStyle\n    }\n  \n    const borderStyle = renderOpt.borderStyle\n    if (borderStyle) {\n      ctx.strokeStyle = colorToString(borderStyle.color,borderStyle.alpha)\n      ctx.lineWidth = borderStyle.width\n    \n      if (borderStyle.style === LineStyle.DASH) {\n        ctx.setLineDash([5, 5])\n      }\n    }\n    \n    const coords = renderOpt.coordinates\n    coords.forEach( (coordinates, index) => {\n      if (index === 0) {\n        ctx.beginPath()\n      }\n      \n      ctx.moveTo(coordinates[0][0],coordinates[0][1])\n      for(let k = 1, kk = coordinates.length ; k < kk ; k ++){\n        let cd = coordinates[k]\n        ctx.lineTo(cd[0],cd[1])\n      }\n  \n      ctx.closePath()\n    })\n  \n    ctx.fill()\n    ctx.stroke()\n    ctx.restore()\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/render/polygonrender.js","/**\n * Created by zhangyong on 2017/3/24.\n */\n\nimport GeometryRender from './geomertyrender'\nimport {Transform} from '../../data/matrix/transform'\nimport {colorToString} from '../../utils/helpers'\n// import TextStyle from '../../style/textstyle'\n// import LineStyle from '../../style/linestyle'\n\nexport default class TextRender extends GeometryRender {\n  \n  constructor (context) {\n    super(context)\n  \n    this._pixelCoordinates = []\n  }\n  \n  /**\n   *\n   * @param feature\n   * @param transform\n   */\n  render (feature, renderStyle, transform) {\n    let textStyle = renderStyle[0].textStyle\n    if (!feature.displayText || !textStyle) {\n      return\n    }\n    \n    const displayText = String(feature.displayText)\n    textStyle.text = displayText\n\n    const ctx = this.context\n    ctx.save()\n    \n    const geometry = feature.geometry\n    const coordinates = geometry.getFlatInteriorPoint()\n    \n    this._pixelCoordinates = []\n    const pixelCoordinates = Transform.transform2D(\n      coordinates, 0, coordinates.length, 2,\n      transform, this._pixelCoordinates)\n    \n    for (let i = 0, len = pixelCoordinates.length ;i < len ; i += 2) {\n      const xValue = pixelCoordinates[i]\n      const yValue = pixelCoordinates[i + 1]\n      \n      // set the context text style\n      this._setTextStyle(ctx, textStyle)\n  \n      const offsetX = textStyle.offsetX - 10\n      const offsetY = textStyle.offsetY - 10\n      const stroke = textStyle.stroke ? true : false\n      const fill = textStyle.fill ? true : false\n      const text = textStyle.text\n  \n      let x = xValue + offsetX\n      let y = yValue + offsetY\n  \n      let lines = text.split('\\n')\n      const numLines = lines.length\n      let fontSize, lineY\n      if (numLines > 1) {\n        fontSize = Math.round(ctx.measureText('M').width * 1.5)\n        lineY = y - (((numLines - 1) / 2) * fontSize)\n      } else {\n        fontSize = 0\n        lineY = y\n      }\n  \n      for (let lineIndex = 0; lineIndex < numLines; lineIndex++) {\n        const lineText = lines[lineIndex]\n        if (stroke) {\n          ctx.strokeText(lineText, x, lineY)\n        }\n        if (fill) {\n          ctx.fillText(lineText, x, lineY)\n        }\n    \n        lineY = lineY + fontSize\n      }\n    }\n  \n    ctx.restore()\n  }\n  \n  /**\n   *\n   * @param ctx\n   * @param textStyle\n   * @private\n   */\n  _setTextStyle (ctx, textStyle) {\n    const borderStyle = textStyle.stroke\n  \n    ctx.font = textStyle.font\n    ctx.strokeStyle = colorToString(borderStyle.color, 1)\n    ctx.fillStyle = colorToString(textStyle.fill, 1)\n    ctx.textBaseline = textStyle.textBaseline\n    ctx.textAlign = textStyle.textAlign\n    ctx.lineWidth = borderStyle.width\n    ctx.lineCap = borderStyle.lineCap\n    ctx.lineJoin = borderStyle.lineJion\n  }\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/render/textrender.js","/**\n * Created by zhangyong on 2017/3/20.\n */\n\nimport LayerRenderer from '../../renderer/canvas/layerrenderer'\n\nimport {Transform} from '../../data/matrix/transform'\nimport {ExtentUtil} from '../../geometry/support/extentutil'\n\nexport default class ImageLayerRenderer extends LayerRenderer {\n  constructor (layer) {\n    super(layer)\n    \n    this._image = null\n    \n    this._imageTransform = Transform.create()\n  \n    this.coordinateToCanvasPixelTransform = Transform.create()\n  }\n  \n  /**\n   * @inheritDoc\n   */\n  get image () {\n    return !this._image ? null : this._image.getDomImage()\n  }\n  \n  \n  /**\n   * @inheritDoc\n   */\n  get imageTransform () { return this._imageTransform }\n  \n  \n  /**\n   *\n   * @param frameState\n   * @param layerState\n   * @returns {boolean}\n   */\n  prepareFrame (frameState) {\n    const pixelRatio = frameState.pixelRatio\n    const size = frameState.size\n    const viewState = frameState.viewState\n    const viewCenter = viewState.center\n    const viewResolution = viewState.resolution\n    \n    let image\n    const imageLayer = this.layer\n    let renderedExtent = frameState.extent\n    \n    if (!ExtentUtil.isEmpty(renderedExtent)) {\n      const projection = viewState.projection\n\n      image = imageLayer.getImageInternal(renderedExtent,\n        viewResolution, pixelRatio, projection)\n      \n      // Load the image\n      if (image) {\n        const loaded = this.loadImage(image)\n        if (loaded) {\n          this._image = image\n        }\n      }\n    }\n    \n    if (this._image) {\n      image = this._image\n      const imageExtent = image.extent\n      const imageResolution = image.resolution\n      const imagePixelRatio = image.pixelRatio\n      const scale = pixelRatio * imageResolution /\n        (viewResolution * imagePixelRatio)\n      \n      const transform = Transform.compose(this.imageTransform,\n        pixelRatio * size[0] / 2, pixelRatio * size[1] / 2,\n        scale, -scale,\n        0,\n        imagePixelRatio * (imageExtent[0] - viewCenter[0]) / imageResolution,\n        imagePixelRatio * (viewCenter[1] - imageExtent[3]) / imageResolution)\n      \n      Transform.compose(this.coordinateToCanvasPixelTransform,\n        pixelRatio * size[0] / 2 - transform[4], pixelRatio * size[1] / 2 - transform[5],\n        pixelRatio / viewResolution, -pixelRatio / viewResolution,\n        0,\n        -viewCenter[0], -viewCenter[1])\n    }\n    \n    return !!this.image\n  }\n  \n  /**\n   *\n   * @param frameState\n   * @param layerState\n   * @param context\n   */\n  composeFrame (frameState, context) {\n    this.preCompose(context, frameState)\n    const image = this.image\n    if (image) {\n      // clipped rendering if layer extent is set\n      const extent = undefined\n      const clipped = extent !== undefined &&\n        !ExtentUtil.containsExtent(extent, frameState.extent) &&\n         ExtentUtil.intersects(extent, frameState.extent)\n      \n      if (clipped) {\n        this.clip(context, frameState, extent)\n      }\n  \n      const imageLayer = this.layer\n      const imageTransform = this.imageTransform\n      const alpha = context.globalAlpha\n      context.globalAlpha = imageLayer.opacity\n      \n      const dx = imageTransform[4]\n      const dy = imageTransform[5]\n      const dw = image.width * imageTransform[0]\n      const dh = image.height * imageTransform[3]\n      context.imageSmoothingEnabled = false\n      context.drawImage(image, 0, 0, +image.width, +image.height,\n        Math.round(dx), Math.round(dy), Math.round(dw), Math.round(dh))\n      \n      context.globalAlpha = alpha\n      \n      if (clipped) {\n        context.restore()\n      }\n    }\n    \n    this.postCompose(context, frameState)\n  }\n  \n  \n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/canvas/imagelayerrenderer.js","/**\n * Created by zhangyong on 2017/5/15.\n */\n\n\nexport const RenderEventType = {}\n\n/**\n *\n * @type {string}\n */\nRenderEventType.PRERENDER =  'prerender'\n\n/**\n *\n * @type {string}\n */\nRenderEventType.POSTRENDER = 'postrender'\n\n/**\n *\n * @type {string}\n */\nRenderEventType.RENDER = 'render'\n\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/rendereventtype.js","/**\n * Created by zhangyong on 2017/6/27.\n */\n\nimport BaseEvent from '../core/baseevent'\n\n/**\n * @class RenderEvent\n * @extends BaseEvent\n * @module renderer\n * @constructor\n */\nexport default class RenderEvent extends BaseEvent {\n  \n  constructor (type, frameState, context, trasform) {\n    \n    super(type)\n  \n  \n    /**\n     * @property frameState\n     * @type {Object}\n     */\n    this.frameState = frameState\n  \n  \n    /**\n     * @property trasform\n     * @type {Object}\n     */\n    this.trasform = trasform\n  \n    /**\n     *@property context\n     *@type {HTML5.}\n     */\n    this.context = context\n  }\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/renderevent.js","/**\n * Created by zypc on 2016/11/21.\n */\n\nimport BaseObject from '../core/baseobject'\nimport {listen, unlistenByKey} from '../core/eventmanager'\nimport BrowserEvent from './browserevent'\n\nexport default class BrowserEventHandler extends BaseObject {\n\n  constructor (map, element) {\n    super()\n\n    this.map = map\n\n    /**\n     *\n     * @private\n     */\n    this._element = element\n  \n    /**\n     *\n     * @type {boolean}\n     * @private\n     */\n    this._dragging = false\n  \n    /**\n     * The most recent \"down\" type event (or null if none have occurred).\n     * @private\n     */\n    this._down = null\n  \n    /**\n     *\n     * @type {Array}\n     * @private\n     */\n    this._dragListenerKeys = []\n  \n    /**\n     *\n     * @type {number}\n     * @private\n     */\n    this._clickTimeoutId = 0\n    \n\n    // 事件和对应的处理方法\n    // 映射关系\n    this._mapping = {\n      'mousedown': this._mousedown,\n      'mousemove': this._mousemove,\n      'mouseup': this._mouseup,\n      'mouseover': this._mouseover,\n      'mouseout': this._mouseout\n    }\n\n    this._registerSource()\n  }\n\n  /**\n   *\n   * @private\n   */\n  _registerSource () {\n    // console.log('注册鼠标事件')\n    const events = this.getEvents()\n    events.forEach(eventName =>\n        listen(this._element, eventName, this._mapping[eventName], this))\n  }\n\n  /**\n   * 得到事件\n   *\n   * @method getEvents\n   * @return {Array}\n   */\n  getEvents () {\n    return Object.keys(this._mapping)\n  }\n\n  /**\n   *\n   * @param e\n   * @private\n   */\n  _mousedown (e) {\n    let event = new BrowserEvent(this.map, e, BrowserEvent.MOUSE_DOWN)\n    this.dispatchEvent(event)\n  \n    this._dragging = false\n    this._down = e\n    \n    if (this._dragListenerKeys.length === 0) {\n      const documentDom = document\n  \n      this._dragListenerKeys.push(\n        listen(documentDom, BrowserEvent.MOUSE_MOVE, this._mousemove, this),\n        listen(documentDom, BrowserEvent.MOUSE_UP, this._mouseup, this)\n      )\n    }\n  }\n\n  /**\n   *\n   * @param e\n   * @private\n   */\n  _mousemove (e) {\n  \n    let event = new BrowserEvent(this.map, e, BrowserEvent.MOUSE_MOVE)\n  \n    if (event.coordinate === null) {\n      return\n    }\n    \n    this.dispatchEvent(event)\n    \n    if (this._isMoving(e)) {\n      this._dragging = true\n  \n      const newEvent = new BrowserEvent(this.map, e, BrowserEvent.MOUSE_DRAG, this._dragging)\n      this.dispatchEvent(newEvent)\n    }\n  }\n\n  /**\n   *\n   * @param e\n   * @private\n   */\n  _mouseup (e) {\n    let event = new BrowserEvent(this.map, e, BrowserEvent.MOUSE_UP)\n    this.dispatchEvent(event)\n  \n    if (!this._dragging && this._down) {\n      this._emulateClick(this._down)\n    }\n  \n    this._dragListenerKeys.forEach(unlistenByKey)\n    this._dragListenerKeys.length = 0\n    this._dragging = false\n    this._down = null\n  }\n\n  /**\n   *\n   * @param e\n   * @private\n   */\n  _mouseover (e) {\n    let event = new BrowserEvent(this.map, e,BrowserEvent.MOUSE_OVER)\n    this.dispatchEvent(event)\n  }\n\n  /**\n   *\n   * @param e\n   * @private\n   */\n  _mouseout (e) {\n    let event = new BrowserEvent(this.map, e, BrowserEvent.MOUSE_OUT)\n    this.dispatchEvent(event)\n  }\n\n  /**\n   *\n   * @param event\n   * @private\n   */\n  _emulateClick (event) {\n    let newEvent = new BrowserEvent(this.map,event,BrowserEvent.CLICK)\n    this.dispatchEvent(newEvent)\n  \n    // double click\n    if (this._clickTimeoutId !== 0) {\n      clearTimeout(this._clickTimeoutId)\n      this._clickTimeoutId = 0\n      newEvent = new BrowserEvent(this.map,event,BrowserEvent.DBLCLICK)\n      this.dispatchEvent(newEvent)\n    } else {\n      // single click\n      this._clickTimeoutId = setTimeout(function() {\n        this._clickTimeoutId = 0\n        let newEvent = new BrowserEvent(this.map,event,BrowserEvent.SINGLE_CLICK)\n        this.dispatchEvent(newEvent)\n      }.bind(this), 250)\n    }\n  }\n\n  /**\n   *\n   * @param event\n   * @return {boolean}\n   * @private\n   */\n  _isMoving (event) {\n    if (this._down === null) {\n      return false\n    }\n    \n    return event.clientX !== this._down.clientX ||\n           event.clientY !== this._down.clientY\n  }\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/meek/browsereventhandler.js","/**\n * Created by zhangyong on 2017/3/23.\n */\n\nimport BaseObject from '../core/baseobject'\nimport {ExtentUtil} from '../geometry/support/extentutil'\nimport {Config} from '../meek/config'\n\nimport {linearFindNearest} from '../utils/array'\nimport {clamp} from '../utils/math'\n\n/**\n * View 视图类\n *\n * @class View\n * @extends BaseObject\n * @module meek\n * @constructor\n */\nexport default class View extends BaseObject {\n\n  /**\n   * @constructor\n   * @param options\n   */\n  constructor (options) {\n    super()\n    \n    const _innerOptions = Object.assign({}, options)\n    \n    this._applyOptions(_innerOptions)\n  }\n  \n  /**\n   * Parse options and apply to view\n   * @param options\n   * @private\n   */\n  _applyOptions (options) {\n    \n    const resolutionConstraint = this._createResolutionConstraint(options)\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._maxResolution = resolutionConstraint.maxResolution\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._minResolution = resolutionConstraint.minResolution\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._zoomFactor = resolutionConstraint.zoomFactor\n  \n    /**\n     * @private\n     * @type {Array.<number>|undefined}\n     */\n    this._resolutions = options.resolutions\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._minZoom = resolutionConstraint.minZoom\n  \n    const centerConstraint = this._createCenterConstraint(options)\n    const constraint = resolutionConstraint.constraint\n    const rotationConstraint = this._createRotationConstraint(options)\n  \n    /**\n     * center、resolution、ratation\n     * @private\n     */\n    this._constraints = {\n      center: centerConstraint,\n      resolution: constraint,\n      rotation: rotationConstraint\n    }\n  \n    this.center = options.center !== undefined ?\n         options.center : this._calculateCenter()\n\n    this.resolution = options.resolution !== undefined ?\n        options.resolution : this.constrainResolution(this._maxResolution, options.zoom - this._minZoom)\n\n    // 记录原始 view 参数\n    this._originalCenter = this.center\n    this._originalResolution = this.resolution\n    \n    this.rotation = 0\n    \n    this.dataExtent = resolutionConstraint.extent\n    \n    this._options = options\n  }\n  \n  \n  _createRotationConstraint () {\n    return 0\n  }\n  \n  /**\n   * 创建视图中心限制条件\n   *\n   * @method createCenterConstraint\n   * @param options\n   * @returns {Function}\n   * @private\n   */\n  _createCenterConstraint () {\n    return function (center) {\n      return center\n    }\n  }\n  \n  /**\n   * 创建分辨率限制条件\n   *\n   * @method createResolutionConstraint\n   * @param options\n   * @returns {{constraint: *, maxResolution: *, minResolution: *, minZoom: *, zoomFactor: number}}\n   * @private\n   */\n  _createResolutionConstraint (options) {\n    let resolutionConstraint\n    let maxResolution\n    let minResolution\n    let extent\n  \n    const defaultMaxZoom = Config.DEFAULT_MAX_ZOOM\n    const defaultZoomFactor = Config.DEFAULT_ZOOM_FACTOR\n    const defaultMinZoom = Config.DEFAULT_MIN_ZOOM\n    const defaultTileSize = Config.DEFAULT_TILE_SIZE\n  \n    let minZoom = options.minZoom !== undefined ?\n      options.minZoom : defaultMinZoom\n  \n    let maxZoom = options.maxZoom !== undefined ?\n      options.maxZoom : defaultMaxZoom\n  \n    const zoomFactor = options.zoomFactor !== undefined ?\n      options.zoomFactor : defaultZoomFactor\n  \n    const projection = options.projection\n    extent = projection.extent\n    \n    if (options.resolutions !== undefined) {\n      const resolutions = options.resolutions\n      maxResolution = resolutions[0]\n      minResolution = resolutions[resolutions.length - 1]\n      resolutionConstraint = this.createSnapToResolutions(resolutions)\n    } else {\n      // calculate the default min and max resolution\n      const size = Math.max(ExtentUtil.getWidth(extent), ExtentUtil.getHeight(extent))\n      const defaultMaxResolution = size / defaultTileSize / Math.pow(\n          defaultZoomFactor, defaultMinZoom)\n    \n      const defaultMinResolution = defaultMaxResolution / Math.pow(\n          defaultZoomFactor, defaultMaxZoom - defaultMinZoom)\n    \n      // user provided maxResolution takes precedence\n      maxResolution = options.maxResolution\n      if (maxResolution !== undefined) {\n        minZoom = 0\n      } else {\n        maxResolution = defaultMaxResolution / Math.pow(zoomFactor, minZoom)\n      }\n    \n      // user provided minResolution takes precedence\n      minResolution = options.minResolution\n      if (minResolution === undefined) {\n        if (options.maxZoom !== undefined) {\n          if (options.maxResolution !== undefined) {\n            minResolution = maxResolution / Math.pow(zoomFactor, maxZoom)\n          } else {\n            minResolution = defaultMaxResolution / Math.pow(zoomFactor, maxZoom)\n          }\n        } else {\n          minResolution = defaultMinResolution\n        }\n      }\n    \n      // given discrete zoom levels, minResolution may be different than provided\n      maxZoom = minZoom + Math.floor(\n          Math.log(maxResolution / minResolution) / Math.log(zoomFactor))\n      minResolution = maxResolution / Math.pow(zoomFactor, maxZoom - minZoom)\n    \n      resolutionConstraint = this.createSnapToPower(\n        zoomFactor, maxResolution, maxZoom - minZoom)\n    }\n    \n    return {\n      constraint: resolutionConstraint,\n      maxResolution,\n      minResolution,\n      minZoom,\n      zoomFactor,\n      extent\n    }\n  }\n  \n  /**\n   *\n   * @param power\n   * @param maxResolution\n   * @param opt_maxLevel\n   * @returns {Function}\n   */\n  createSnapToPower (power, maxResolution, opt_maxLevel) {\n    return function(resolution, delta, direction) {\n      if (resolution !== undefined) {\n        const offset = -direction / 2 + 0.5\n        const oldLevel = Math.floor(\n          Math.log(maxResolution / resolution) / Math.log(power) + offset)\n        let newLevel = Math.max(oldLevel + delta, 0)\n        if (opt_maxLevel !== undefined) {\n          newLevel = Math.min(newLevel, opt_maxLevel)\n        }\n  \n        const reso = maxResolution / Math.pow(power, newLevel)\n        return reso\n      } else {\n        return undefined\n      }\n    }\n  }\n  \n  /**\n   *\n   * @param resolutions\n   * @returns {Function}\n   */\n  createSnapToResolutions (resolutions) {\n    return function(resolution, delta, direction) {\n      if (resolution !== undefined) {\n        let z = linearFindNearest(resolutions, resolution, direction)\n        z = clamp(z + delta, 0, resolutions.length - 1)\n        const index = Math.floor(z)\n        if (z != index && index < resolutions.length - 1) {\n          let power = resolutions[index] / resolutions[index + 1]\n          return resolutions[index] / Math.pow(power, z - index)\n        } else {\n          return resolutions[index]\n        }\n      } else {\n        return undefined\n      }\n    }\n  }\n  \n  _calculateCenter () {\n    return [500, 500]\n  }\n  \n  \n  /**\n   * 获取视图状态\n   *\n   * @method getViewState\n   * @returns {{center: (ArrayBuffer|*|Array.<T>|Blob|string), resolution: *, rotation: *}}\n   */\n  getViewState () {\n    const center = this.center\n    const resolution = this.resolution\n    const rotation = this.rotation\n    \n    return {\n      center: center.slice(),\n      resolution,\n      rotation\n    }\n  }\n  \n  /**\n   * 分辨率限制\n   *\n   * @method constrainResolution\n   * @param resolution\n   * @param opt_delta\n   * @param opt_direction\n   * @returns {*}\n   */\n  constrainResolution (resolution, opt_delta, opt_direction) {\n    const delta = opt_delta || 0\n    const direction = opt_direction || 0\n    return this._constraints.resolution(resolution, delta, direction)\n  }\n  \n  /**\n   * 计算缩放中心点\n   *\n   * @method calculateCenterZoom\n   * @param resolution {Number}\n   * @param anchor {Number}\n   * @returns {Array}\n   */\n  calculateCenterZoom (resolution, anchor) {\n    let center\n    const currentCenter = this.center\n    const currentResolution = this.resolution\n    if (currentCenter !== undefined && currentResolution !== undefined) {\n      const x = anchor[0] -\n        resolution * (anchor[0] - currentCenter[0]) / currentResolution\n      const y = anchor[1] -\n        resolution * (anchor[1] - currentCenter[1]) / currentResolution\n      center = [x, y]\n    }\n    \n    return center\n  }\n  \n  /**\n   * 是否限制视图中心\n   *\n   * @method constrainCenter\n   * @param center\n   * @returns {Boolean}\n   */\n  constrainCenter (center) {\n    this._constraints.center = center\n    this._center = center\n    return true\n  }\n\n  /**\n   * 视图中心点读写器\n   *\n   * @property center\n   * @return {*}\n   */\n  get center () { return this._center }\n  set center ( value ) {\n    this.constrainCenter(value)\n    this.changed()\n  }\n\n  /**\n   * 分辨率读写器\n   *\n   * @property resolution\n   * @return {*}\n   */\n  get resolution () { return this._resolution }\n  set resolution (value){\n    this._resolution = value\n  \n    this.changed()\n  }\n\n  /**\n   * 旋转率读写器\n   *\n   * @property rotation\n   * @return {*}\n   */\n  get rotation () { return this._rotation }\n  set rotation (value){\n    this._rotation = value\n  }\n\n  /**\n   * dataExtent读写器\n   *\n   * @property dataExtent\n   * @return {*}\n   */\n  get dataExtent () { return this._dataExtent }\n  set dataExtent (value) {\n    this._dataExtent = value\n  }\n\n  /**\n   * 获取最小分辨率\n   *\n   * @property minResolution\n   * @return {Number}\n   */\n  get minResolution () { return this._minResolution }\n\n  /**\n   * 获取最大分辨率\n   *\n   * @property maxResolution\n   * @returns {Number}\n   */\n  get maxResolution () { return this._maxResolution }\n  \n  \n  /**\n   * 获取初始设置的地图中心点\n   *\n   * @property originalCenter\n   * @type {Array}\n   */\n  get originalCenter () { return this._originalCenter }\n  \n  /**\n   * 获取初始设置的地图级别\n   *\n   * @property originalResolution\n   * @type {Number}\n   */\n  get originalResolution () { return this._originalResolution }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/meek/view.js","/**\n * Created by zhangyong on 2017/6/15.\n */\n\n\nimport Kinetic from './kinetic'\nimport DragPan from './dragpan'\nimport MouseWheelZoom from './mousewheelzoom'\nimport KeyboardHome from './keyboardhome'\nimport KeyboardZoom from './keyboardzoom'\nimport KeyboardPan from './keyboardpan'\n\n/**\n *\n * @param options\n * @returns {Set}\n */\nexport function componentsDefaults (options = {}) {\n  const components = new Set()\n  \n  const kinetic = new Kinetic(-0.005, 0.05, 100)\n  \n  const dragPan = options.dragPan !== undefined ? options.dragPan : true\n  if (dragPan) {\n    components.add(new DragPan({\n      kinetic: kinetic\n    }))\n  }\n  \n  const mouseWheelZoom = options.mouseWheelZoom !== undefined ?\n    options.mouseWheelZoom : true\n  if (mouseWheelZoom) {\n    components.add(new MouseWheelZoom({\n      constrainResolution: options.constrainResolution,\n      duration: options.zoomDuration\n    }))\n  }\n  \n  const keyboard = options.keyboard !== undefined ? options.keyborad : true\n  if (keyboard) {\n    components.add(new KeyboardHome(options))\n    components.add(new KeyboardPan(options))\n    components.add(new KeyboardZoom({\n      delta: options.zoomDelta\n    }))\n  }\n  \n  return components\n}\n\n\nexport default {\n  componentsDefaults\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/componentdefaults.js","\nimport BaseObject from '../core/baseobject'\n\nexport default class Kinetic extends BaseObject{\n  \n  constructor(decay, minVelocity, delay){\n  \n    super()\n    \n    /**\n     * @private\n     * @type {number}\n     */\n    this._decay = decay\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._minVelocity = minVelocity\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._delay = delay\n  \n    /**\n     * @private\n     * @type {Array.<number>}\n     */\n    this._points = []\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._angle = 0\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._initialVelocity = 0\n  }\n  \n  \n  /**\n   */\n  begin () {\n    this._points.length = 0\n    this._angle = 0\n    this._initialVelocity = 0\n  }\n  \n  \n  /**\n   * @param {number} x X.\n   * @param {number} y Y.\n   */\n  update (x, y) {\n    this._points.push(x, y, Date.now())\n  }\n  \n  \n  /**\n   * @return {boolean} Whether we should do kinetic animation.\n   */\n  end () {\n    if (this._points.length < 6) {\n      // at least 2 points are required (i.e. there must be at least 6 elements\n      // in the array)\n      return false\n    }\n    const delay = Date.now() - this._delay\n    const lastIndex = this._points.length - 3\n    if (this._points[lastIndex + 2] < delay) {\n      // the last tracked point is too old, which means that the user stopped\n      // panning before releasing the map\n      return false\n    }\n    \n    // get the first point which still falls into the delay time\n    let firstIndex = lastIndex - 3\n    while (firstIndex > 0 && this._points[firstIndex + 2] > delay) {\n      firstIndex -= 3\n    }\n    \n    const duration = this._points[lastIndex + 2] - this._points[firstIndex + 2]\n    const dx = this._points[lastIndex] - this._points[firstIndex]\n    const dy = this._points[lastIndex + 1] - this._points[firstIndex + 1]\n    this._angle = Math.atan2(dy, dx)\n    this._initialVelocity = Math.sqrt(dx * dx + dy * dy) / duration\n    return this._initialVelocity > this._minVelocity\n  }\n  \n  \n  /**\n   * @return {number} Total distance travelled (pixels).\n   */\n  getDistance () {\n    return (this._minVelocity - this._initialVelocity) / this._decay\n  }\n  \n  \n  /**\n   * @return {number} Angle of the kinetic panning animation (radians).\n   */\n  angle () {\n    return this._angle\n  }\n \n}\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/kinetic.js","/**\n * Created by zhangyong on 2017/8/3.\n */\n\nimport Component from './component'\nimport {targetNotEditable, noModifierKeys} from '../utils/mousekey'\n\n/**\n *\n */\nexport default class KeyboardHome extends Component {\n  \n  constructor (options = {}) {\n    super()\n  \n    this._defaultCondition = function(mapBrowserEvent) {\n      const keyCode = mapBrowserEvent.originalEvent.keyCode\n      return noModifierKeys(mapBrowserEvent) && targetNotEditable(mapBrowserEvent) && (\n          (keyCode === 36))\n    }\n    \n    /**\n     * @private\n     * @type {ol.EventsConditionType}\n     */\n    this._condition = options.condition ? options.condition : this._defaultCondition\n  }\n  \n  /**\n   *\n   * @param mapBrowserEvent\n   */\n  handleMouseEvent (mapBrowserEvent) {\n    let stopEvent = false\n    if (this._condition(mapBrowserEvent)) {\n      this._goToHome()\n    }\n  \n    return !stopEvent\n  }\n  \n  /**\n   * 将视图还原到最初\n   * @private\n   */\n  _goToHome () {\n    const view = this.map.view\n    if (view) {\n      const orignalCenter = view.originalCenter\n      const originalResolution = view.originalResolution\n      \n      view.center = orignalCenter\n      view.resolution = originalResolution\n    }\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/keyboardhome.js","/**\n * Created by zhangyong on 2017/8/2.\n */\n\nimport Component from './component'\nimport BrowserEvent from '../meek/browserevent'\nimport {targetNotEditable} from '../utils/mousekey'\n\nexport default class KeyboardZoom extends Component {\n  constructor (options = {}) {\n    super()\n  \n    /**\n     * @private\n     */\n    this._condition = options.condition ? options.condition : targetNotEditable\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._delta = options.delta ? options.delta : 1\n    \n  }\n  \n  /**\n   *\n   * @param mapBrowserEvent\n   * @returns {boolean}\n   */\n  handleMouseEvent (mapBrowserEvent) {\n    let stopEvent = false\n    if (mapBrowserEvent.type == BrowserEvent.KEYDOWN ||\n        mapBrowserEvent.type == BrowserEvent.KEYPRESS) {\n      const keyEvent = mapBrowserEvent.originalEvent\n      const charCode = keyEvent.charCode\n      if (this._condition(mapBrowserEvent) &&\n        (charCode == '+'.charCodeAt(0) || charCode == '-'.charCodeAt(0))) {\n        const map = mapBrowserEvent.map\n        const delta = (charCode == '+'.charCodeAt(0)) ? this._delta : -this._delta\n        const view = map.view\n        super.zoomByDelta(view, delta, undefined, null)\n        mapBrowserEvent.preventDefault()\n        stopEvent = true\n      }\n    }\n    \n    return !stopEvent\n  }\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/keyboardzoom.js","/**\n * Created by zhangyong on 2017/8/2.\n */\n\nimport Component from './component'\nimport BrowserEvent from '../meek/browserevent'\n\nimport {noModifierKeys, targetNotEditable} from '../utils/mousekey'\n\nexport default class KeyboardPan extends Component {\n  constructor (options = {}) {\n  \n    super()\n    \n    this._defaultCondition = function(mapBrowserEvent) {\n      const keyCode = mapBrowserEvent.originalEvent.keyCode\n      return noModifierKeys(mapBrowserEvent) && targetNotEditable(mapBrowserEvent) && (\n        (keyCode === 40 || keyCode === 37 || keyCode === 39 || keyCode === 38))\n    }\n  \n    /**\n     * @private\n     */\n    this._condition = options.condition !== undefined ?\n      options.condition : this._defaultCondition\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._duration = options.duration !== undefined ? options.duration : 100\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._pixelDelta = options.pixelDelta !== undefined ?\n      options.pixelDelta : 128\n  }\n  \n  /**\n   * \n   * @param event\n   * @returns {boolean}\n   */\n  handleMouseEvent (mapBrowserEvent) {\n    let stopEvent = false\n    if (mapBrowserEvent.type === BrowserEvent.KEYDOWN) {\n      const keyEvent = mapBrowserEvent.originalEvent\n      const keyCode = keyEvent.keyCode\n      if (this._condition(mapBrowserEvent) ) {\n        const map = mapBrowserEvent.map\n        const view = map.view\n        const mapUnitsDelta = view.resolution * this._pixelDelta\n        let deltaX = 0, deltaY = 0\n        \n        if (keyCode === 40) {\n          deltaY = mapUnitsDelta\n        } else if (keyCode === 37) {\n          deltaX = -mapUnitsDelta\n        } else if (keyCode === 39) {\n          deltaX = mapUnitsDelta\n        } else {\n          deltaY = -mapUnitsDelta\n        }\n        \n        const delta = [deltaX, deltaY]\n        super.pan(view, delta, null)\n        mapBrowserEvent.preventDefault()\n        stopEvent = true\n      }\n    }\n    return !stopEvent\n  }\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/keyboardpan.js","/**\n * Created by zhangyong on 2017/8/2.\n */\n\nimport Zoom from './zoom'\nimport Home from './home'\nimport zoomPercentage from './zoompercentage'\n\nexport function controlDefaults (options = {}) {\n  \n  const controls = []\n  \n  const zoomControl = options.zoom !== undefined ? options.zoom : true\n  if (zoomControl) {\n    controls.push(new Zoom(options.zoomOptions))\n  }\n  \n  const homeControl = options.home !== undefined ? options.home : true\n  if (homeControl) {\n    controls.push(new Home(options.homeOptions))\n  }\n  \n  const zoomPercentageControl = options.zoomPercentage !== undefined ? options.zoomPercentage : true\n  if (zoomPercentageControl) {\n    controls.push(new zoomPercentage(options.zoomPercentageOptions))\n  }\n  \n  return controls\n}\n\nexport default {\n  controlDefaults\n}\n\n\n// WEBPACK FOOTER //\n// ./src/control/controldefaults.js","/**\n * Created by zhangyong on 2017/8/3.\n */\n\nimport Control from './control'\nimport BrowserEvent from '../meek/browserevent'\n\nimport {listen} from '../core/eventmanager'\n\n/**\n *\n */\nexport default class Home extends Control {\n  constructor (options = {}) {\n    const className = options.className ? options.className : 'dt-zoom-extent'\n    const homeLabel = options.homeLabel ? options.homeLabel : 'H'\n    const homeLabelTip = options.homeLabelTip ? options.homeLabelTip : '全图'\n  \n    const homeElement = document.createElement('button')\n    homeElement.setAttribute('type', 'button')\n    homeElement.title = homeLabelTip\n    homeElement.appendChild(\n      typeof homeLabel === 'string' ? document.createTextNode(homeLabel) : homeLabel\n    )\n  \n    const cssClasses = `${className} dt-unselectable dt-control`\n    const element = document.createElement('div')\n    element.className = cssClasses\n    element.appendChild(homeElement)\n  \n    super({\n      element,\n      target: options.target\n    })\n  \n    listen(homeElement, BrowserEvent.CLICK, this._handleClick, this)\n  }\n  \n  /**\n   * 处理按钮点击事件\n   * @param event\n   * @private\n   */\n  _handleClick ( event) {\n    event.preventDefault()\n    this._goToHome()\n  }\n  \n  /**\n   * 将视图还原到最初\n   * @private\n   */\n  _goToHome () {\n    const view = this.map.view\n    if (view) {\n      const orignalCenter = view.originalCenter\n      const originalResolution = view.originalResolution\n      \n      view.center = orignalCenter\n      view.resolution = originalResolution\n    }\n  }\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/control/home.js","/**\n * Created by zhangyong on 2017/8/3.\n */\n\n\nimport Control from './control'\nimport {removeNode} from '../utils/domutil'\nimport {unlistenByKey, listen} from '../core/eventmanager'\nimport {EventType} from '../meek/eventtype'\n\nexport default class ZoomPercentage extends Control {\n  constructor (options = {}) {\n    super()\n    \n    this._map = undefined\n    \n    const className = options.className ? options.className : 'dt-scale-line'\n    \n    this._innerElement = document.createElement('DIV')\n    this._innerElement.className = `${className}-inner`\n    \n    this._element = document.createElement('DIV')\n    this._element.className = `${className} dt-unselectable`\n    this._element.appendChild(this._innerElement)\n  }\n  \n  get map() { return this._map }\n  set map(value) {\n    if (this.map) {\n      removeNode(this._element)\n    }\n    \n    this._listenerKeys.forEach(listener => unlistenByKey(listener) )\n    \n    this._listenerKeys.length = 0\n    this._map = value\n    \n    if (this._map) {\n      const target = this._target ? this._target : value.overlayContainerStopEvent\n      target.appendChild(this._element)\n      \n      this._listenerKeys.push(listen(value, EventType.VIEW_CHANGED, this.render, this))\n      \n      this.render()\n    }\n  }\n  \n  render () {\n    const view = this.map.view\n    const resolution =  (1 / view.resolution).toFixed(2)\n    const html = `&#8195;缩放比${resolution * 100}% &#8195;`\n    this._innerElement.innerHTML = html\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/control/zoompercentage.js","/**\n * Created by zhangyong on 2017/6/26.\n */\n\nimport BaseObject from '../core/baseobject'\nimport {listen} from '../core/eventmanager'\nimport {RenderEventType} from '../renderer/rendereventtype'\nimport {ExtentUtil} from '../geometry/support/extentutil'\nimport {outerWidth, outerHeight, removeChildren} from '../utils/domutil'\n\n/**\n * Overlay类提供一个可以漂浮在map上的容器，\n * 凡是需要有和地图交互的表单，必须使用该容器承载\n *\n * @class Overlay\n * @extends BaseObject\n * @module meek\n * @constructor\n */\nexport default class Overlay extends BaseObject {\n\n  /**\n   * @constructor\n   * @param options\n   */\n  constructor (options = {}) {\n    super()\n  \n    /**\n     *\n     * @type {undefined}\n     * @private\n     */\n    this._element = undefined\n  \n    /**\n     *\n     * @type {undefined}\n     * @private\n     */\n    this._map = undefined\n  \n    /**\n     *\n     * @type {undefined}\n     * @private\n     */\n    this._offset = undefined\n  \n    /**\n     *\n     * @type {undefined}\n     * @private\n     */\n    this._position = undefined\n  \n    /**\n     *\n     * @type {undefined}\n     * @private\n     */\n    this._positioning = undefined\n    \n    \n    /**\n     * @private\n     * @type {number|string|undefined}\n     */\n    this._overlay = options.id\n  \n    /**\n     * @private\n     * @type {boolean}\n     */\n    this._insertFirst = options.insertFirst !== undefined ?\n      options.insertFirst : true\n  \n    /**\n     * @private\n     * @type {boolean}\n     */\n    this._stopEvent = options.stopEvent !== undefined ?\n      options.stopEvent : true\n  \n    /**\n     * @private\n     * @type {Element}\n     */\n    this._element = document.createElement('DIV')\n    this._element.className = 'dt-overlay-container dt-selectable'\n    this._element.style.position = 'absolute'\n  \n    /**\n     * @protected\n     * @type {boolean}\n     */\n    this.autoPan = options.autoPan !== undefined ? options.autoPan : false\n  \n    /**\n     * @private\n     */\n    this._autoPanAnimation = options.autoPanAnimation || {}\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._autoPanMargin = options.autoPanMargin !== undefined ?\n      options.autoPanMargin : 20\n  \n    /**\n     * @private\n     * @type {{bottom_: string,\n   *         left_: string,\n   *         right_: string,\n   *         top_: string,\n   *         visible: boolean}}\n     */\n    this._rendered = {\n      _bottom: '',\n      _left: '',\n      _right: '',\n      _top: '',\n      _visible: true\n    }\n  \n    /**\n     * @private\n     * @type {EventsKey}\n     */\n    this._mapPostrenderListenerKey = null\n  \n    if (options.element !== undefined) {\n      this.popupEelement = options.element\n    }\n  \n    this.offset = options.offset !== undefined ?\n      options.offset : [0, 0]\n  \n    this.positioning = options.positioning !== undefined ? options.positioning :\n      OverlayPositioning.TOP_LEFT\n  \n    if (options.position !== undefined) {\n      this.position = options.position\n    }\n  }\n  \n  /**\n   * 执行渲染\n   *\n   * @method render\n   */\n  render () {\n    this.updatePixelPosition()\n  }\n  \n  /**\n   * 更新鼠标点的位置信息\n   *\n   * @method updatePixelPosition\n   */\n  updatePixelPosition () {\n    const map = this.map\n    if (map) {\n      const position = this.position\n      if (!map || !map.isRendered() || !position) {\n        this.setVisible(false)\n        return\n      }\n  \n      const pixel = map.getPixelFromCoordinate(position)\n      const mapSize = map.size\n      this.updateRenderedPosition(pixel, mapSize)\n    }\n  }\n  \n  /**\n   * 更新渲染视图位置\n   *\n   * @param pixel {Array}\n   * @param mapSize {Number}\n   */\n  updateRenderedPosition (pixel, mapSize) {\n    const style = this._element.style\n    const offset = this.offset\n    const positioning = this.positioning\n    \n    this.setVisible(true)\n    \n    let offsetX = offset[0]\n    let offsetY = offset[1]\n    if (positioning == OverlayPositioning.BOTTOM_RIGHT ||\n      positioning == OverlayPositioning.CENTER_RIGHT ||\n      positioning == OverlayPositioning.TOP_RIGHT) {\n      if (this._rendered.left_ !== '') {\n        this._rendered.left_ = style.left = ''\n      }\n      \n      const right = `${Math.round(mapSize[0] - pixel[0] - offsetX)}px`\n      if (this._rendered.right_ != right) {\n        this._rendered.right_ = style.right = right\n      }\n    } else {\n      if (this._rendered.right_ !== '') {\n        this._rendered.right_ = style.right = ''\n      }\n      \n      if (positioning == OverlayPositioning.BOTTOM_CENTER ||\n        positioning == OverlayPositioning.CENTER_CENTER ||\n        positioning == OverlayPositioning.TOP_CENTER) {\n        offsetX -= this._element.offsetWidth / 2\n      }\n      \n      const left = `${Math.round(pixel[0] + offsetX)}px`\n      if (this._rendered.left_ != left) {\n        this._rendered.left_ = style.left = left\n      }\n    }\n    if (positioning == OverlayPositioning.BOTTOM_LEFT ||\n      positioning == OverlayPositioning.BOTTOM_CENTER ||\n      positioning == OverlayPositioning.BOTTOM_RIGHT) {\n      if (this._rendered.top_ !== '') {\n        this._rendered.top_ = style.top = ''\n      }\n      \n      const bottom = `${Math.round(mapSize[1] - pixel[1] - offsetY)}px`\n      if (this._rendered.bottom_ != bottom) {\n        this._rendered.bottom_ = style.bottom = bottom\n      }\n    } else {\n      if (this._rendered.bottom_ !== '') {\n        this._rendered.bottom_ = style.bottom = ''\n      }\n      \n      if (positioning == OverlayPositioning.CENTER_LEFT ||\n        positioning == OverlayPositioning.CENTER_CENTER ||\n        positioning == OverlayPositioning.CENTER_RIGHT) {\n        offsetY -= this._element.offsetHeight / 2\n      }\n      \n      const top = `${Math.round(pixel[1] + offsetY)}px`\n      if (this._rendered.top_ != top) {\n        this._rendered.top_ = style.top = top\n      }\n    }\n  }\n  \n  /**\n   * 设置浮云框是否可见\n   *\n   * @method setVisible\n   * @param visible\n   */\n  setVisible (visible) {\n    if (this._rendered.visible !== visible) {\n      this._element.style.display = visible ? '' : 'none'\n      this._rendered.visible = visible\n    }\n  }\n  \n  /**\n   * 表单自动适应视图范围\n   * 如果当前表单出现的位置不全在地图中，则会平移至地图\n   * 可视范围内\n   *\n   * @private\n   */\n  _panIntoView () {\n    const map = this.map\n    \n    if (!map || !map.getTargetElement()) {\n      return\n    }\n    \n    const mapRect = this._getRect(map.getTargetElement(), map.size)\n    const element = this.popupEelement\n\n    if(element.clientHeight === 0 && element.clientWidth === 0){\n      return\n    }\n    const overlayRect = this._getRect(element,\n      [outerWidth(element), outerHeight(element)])\n    \n    const margin = this._autoPanMargin\n    if (!ExtentUtil.containsExtent(mapRect, overlayRect)) {\n      // the overlay is not completely inside the viewport, so pan the map\n      const offsetLeft = overlayRect[0] - mapRect[0]\n      const offsetRight = mapRect[2] - overlayRect[2]\n      const offsetTop = overlayRect[1] - mapRect[1]\n      const offsetBottom = mapRect[3] - overlayRect[3]\n      \n      const delta = [0, 0]\n      if (offsetLeft < 0) {\n        // move map to the left\n        delta[0] = offsetLeft - margin\n      } else if (offsetRight < 0) {\n        // move map to the right\n        delta[0] = Math.abs(offsetRight) + margin\n      }\n      \n      if (offsetTop < 0) {\n        // move map up\n        delta[1] = offsetTop - margin\n      } else if (offsetBottom < 0) {\n        // move map down\n        delta[1] = Math.abs(offsetBottom) + margin\n      }\n      \n      if (delta[0] !== 0 || delta[1] !== 0) {\n        const center = map.view.center\n        const centerPx = map.getPixelFromCoordinate(center)\n        const newCenterPx = [\n          centerPx[0] + delta[0],\n          centerPx[1] + delta[1]\n        ]\n        \n        map.view.center = map.getCoordinateFromPixel(newCenterPx)\n      }\n    }\n  }\n\n  /**\n   *\n   * @param element\n   * @param size\n   * @return {*[]}\n   * @private\n   */\n  _getRect (element, size) {\n    const box = element.getBoundingClientRect()\n    const offsetX = box.left + window.pageXOffset\n    const offsetY = box.top + window.pageYOffset\n    return [\n      offsetX,\n      offsetY,\n      offsetX + size[0],\n      offsetY + size[1]\n    ]\n  }\n\n  /**\n   * 获取当前浮云框对象的 ID\n   *\n   * @property overlayId\n   * @type {number|string|undefined}\n   */\n  get overlayId () { return this._overlayId }\n\n  /**\n   * 获取表单元素\n   *\n   * @property popupEelement\n   * @type {DOM}\n   */\n  get popupEelement () { return this._popupEelement }\n  set popupEelement (value) {\n    this._popupEelement = value\n  \n    this._setElement()\n  }\n\n  /**\n   *\n   * @private\n   */\n  _setElement () {\n    removeChildren(this._element)\n    const pelement = this.popupEelement\n    if (pelement) {\n      this._element.appendChild(pelement)\n    }\n  }\n\n\n  /**\n   * map读写器, 读取设置当前map\n   *\n   * @property map\n   * @type {Datatang.map}\n   */\n  get map () { return this._map }\n  set map (value) {\n    this._map = value\n    if (this._map) {\n      const map = this._map\n      this._mapPostrenderListenerKey = listen(map,\n        RenderEventType.POSTRENDER, this.render, this)\n      this.updatePixelPosition()\n      const container = this._stopEvent ?\n        map.overlayContainerStopEvent : map.overlayContainer\n      if (this._insertFirst) {\n        container.insertBefore(this._element, container.childNodes[0] || null)\n      } else {\n        container.appendChild(this._element)\n      }\n    }\n  }\n\n  /**\n   * 偏移量读写器\n   *\n   * @property offset\n   * @return {*|undefined}\n   */\n  get offset () { return this._offset }\n  set offset (value) {\n    this._offset = value\n    this.updatePixelPosition()\n  }\n\n  /**\n   * 鼠标点位置读写器\n   *\n   * @property position\n   * @return {undefined|*}\n   */\n  get position () { return this._position }\n  set position (value) {\n    this._position = value\n    \n    this.updatePixelPosition()\n    \n    if (this._position && this.autoPan) {\n      this._panIntoView()\n    }\n  }\n\n  /**\n   *\n   *\n   * positioning\n   * @return {undefined|*}\n   */\n  get positioning () { return this._positioning }\n  set positioning (value) {\n    this._positioning = value\n    this.updatePixelPosition()\n  }\n}\n\n\nconst OverlayPositioning = {\n  BOTTOM_LEFT: 'bottom-left',\n  BOTTOM_CENTER: 'bottom-center',\n  BOTTOM_RIGHT: 'bottom-right',\n  CENTER_LEFT: 'center-left',\n  CENTER_CENTER: 'center-center',\n  CENTER_RIGHT: 'center-right',\n  TOP_LEFT: 'top-left',\n  TOP_CENTER: 'top-center',\n  TOP_RIGHT: 'top-right'\n}\n\n\n// WEBPACK FOOTER //\n// ./src/meek/overlay.js","/**\n * Created by zhangyong on 2017/7/12.\n */\n\nimport Geometry from '../../geometry/geometry'\nimport Point from '../../geometry/point'\nimport Polygon from '../../geometry/polygon'\nimport MutilPolygon from '../../geometry/mutilpolygon'\nimport Line from '../../geometry/line'\nimport Extent from '../../geometry/extent'\nimport Parallelogram from '../../geometry/parallelogram'\nimport Feature from '../../meek/feature'\nimport Obj from '../../utils/obj'\n\n/**\n *\n */\nexport default class GeoJSON {\n  \n  /**\n   * 解析 GeoJSON 并返回 Feature 的集合\n   *\n   * @static\n   * @method read\n   * @param json geojson格式的数据\n   * @returns {Array} 返回 features 的集合\n   */\n  static read (json) {\n    const features = []\n\n    if(!json) {\n      return\n    }\n    const featuresObj = json.features\n    featuresObj.forEach( featureObj => {\n      if (featureObj.type === 'Feature') {\n        if (featureObj.geometry) {\n          let constructor = undefined\n          const geometryObj = featureObj.geometry\n          const geometryType = geometryObj.type\n          if (geometryType === 'Point') {\n            constructor = Point\n          } else if (geometryType === 'LineString') {\n            constructor = Line\n          } else if (geometryType === 'Polygon') {\n            constructor = Polygon\n          } else if (geometryType === 'ExtentPolygon') {\n            constructor = Extent\n          } else if (geometryType === 'MutilPolygon') {\n            constructor = MutilPolygon\n          } else if (geometryType === 'ParallelogramPolygon') {\n            constructor = Parallelogram\n          }\n          \n          if (constructor === undefined) {\n            throw new Error('包含未定义的 Geometry 类型')\n          } else {\n            const coordinates = geometryObj.coordinates\n            const geometry = new constructor()\n            geometry.setCoordinates(coordinates)\n  \n            let propertiesObj\n            if (featureObj.properties) {\n              propertiesObj = featureObj.properties\n            }\n  \n            let title = featureObj.title\n            const feature = new Feature(geometry, propertiesObj, title)\n            features.push(feature)\n          }\n        }\n      }\n    })\n    \n    return features\n  }\n  \n  /**\n   *\n   * 将 Feature 集合写入到 GeoJSON 的格式对象中\n   *\n   * @static\n   * @method write\n   * @param features Feature 集合\n   * @returns {Object} 返回 GeoJSON 格式的数据\n   */\n  static write (features) {\n    const featuresArr = []\n    \n    features.forEach( feature => {\n      featuresArr.push({\n        type: 'Feature',\n        geometry: {\n          type: GeoJSON.getGeoJSONGeometryType(feature.geometry),\n          coordinates: feature.geometry.getCoordinates()\n        },\n        properties: Obj.mapToObject(feature._attributesMap),\n\n        title: feature.displayText\n      })\n    })\n    \n    return {\n      type: 'FeatureCollection',\n      features: featuresArr\n    }\n  }\n  \n  /**\n   * 获取Geometry的类型\n   *\n   * @static\n   * @method getGeoJSONGeometryType\n   * @param geometry\n   * @returns {*}\n   */\n  static getGeoJSONGeometryType (geometry) {\n    const type = geometry.geometryType\n    let jsonType\n    switch (type) {\n    case Geometry.POINT :\n      jsonType = 'Point'\n      break\n    case Geometry.LINE :\n      jsonType = 'LineString'\n      break\n    case Geometry.POLYGON :\n      jsonType = 'Polygon'\n      break\n    case Geometry.MULTI_POLYGON :\n      jsonType = 'MutilPolygon'\n      break\n    case Geometry.EXTENT :\n      jsonType = 'ExtentPolygon'\n      break\n    case Geometry.PARALLELOGRAM :\n      jsonType = 'ParallelogramPolygon'\n    }\n    \n    return jsonType\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/data/json/geojson.js","/**\n * Created by zhangyong on 2017/7/13.\n */\n\nimport Geometry from '../../geometry/geometry'\nimport {ExtentUtil} from '../support/extentutil'\n\n/**\n * 判断任意图形是否相交\n * @TODO 还需要解决带洞多边形带来的问题\n *\n * @method intersects\n * @param geometry1\n * @param geometry2\n * @returns {Boolean}\n */\nexport default function intersects (geometry1, geometry2) {\n  if ( (geometry1 === null || geometry1 === undefined ) ||\n       (geometry2 === null || geometry2 === undefined )) {\n    return false\n  }\n  \n  const extent1 = geometry1.extent\n  const extent2 = geometry2.extent\n  const ext1Arr = [extent1.xmin, extent1.ymin, extent1.xmax, extent1.ymax]\n  const ext2Arr = [extent2.xmin, extent2.ymin, extent2.xmax, extent2.ymax]\n  \n  // 如果两个图形的外界矩形不相交，则跳出判断\n  if (!ExtentUtil.intersects(ext1Arr, ext2Arr)) {\n    return false\n  }\n  \n  const geometryType = geometry1.geometryType\n  \n  let result = false\n  switch (geometryType) {\n  case Geometry.POINT :\n    result = pointIntersectsGeometry(geometry1, geometry2)\n    break\n  case Geometry.LINE :\n    result = lineIntersectsGeometry(geometry1, geometry2)\n    break\n  case Geometry.POLYGON:\n  case Geometry.EXTENT:\n    result = polygonIntersectsGeometry(geometry1, geometry2)\n  }\n  \n  return result\n}\n\n/**\n * 点和图形相交判断\n * @param point\n * @param geometry\n * @returns {*}\n */\nconst pointIntersectsGeometry = function(point, geometry) {\n  const geometryType = geometry.geometryType\n  \n  switch (geometryType) {\n  case Geometry.POINT:\n  case Geometry.LINE:\n  case Geometry.POLYGON:\n  case Geometry.EXTENT:\n    return geometry.containsXY(point.x, point.y)\n  }\n  \n  return false\n}\n\n/**\n * 线和图形相交判断\n * @param line\n * @param geometry\n * @returns {Boolean|boolean|*}\n */\nconst lineIntersectsGeometry = function (line, geometry) {\n  const geometryType = geometry.geometryType\n  switch (geometryType) {\n  case Geometry.POINT:\n    return line.containsXY(geometry.x, geometry.y)\n  case Geometry.LINE:\n    return lineIntersectsLine(line, geometry)\n  case Geometry.POLYGON:\n  case Geometry.EXTENT:\n    return lineIntersectsPolygon(line, geometry)\n  }\n}\n\n/**\n * 线与线相交判断\n * @param line1\n * @param line2\n */\nconst lineIntersectsLine = function(line1, line2) {\n  const lineLinearRings1 = line1.getCoordinates()\n  const lineLinearRings2 = line2.getCoordinates()\n  \n  return intersectsByLinearRings(lineLinearRings1, lineLinearRings2)\n}\n\n/**\n * 多边形和图形相交判断\n * @param poly\n * @param geometry\n * @returns {Boolean|boolean|*}\n */\nconst polygonIntersectsGeometry = function (poly, geometry) {\n  const geometryType = geometry.geometryType\n  switch (geometryType) {\n  case Geometry.POINT:\n    return poly.containsXY(geometry.x, geometry.y)\n  case Geometry.LINE:\n    return lineIntersectsPolygon(geometry, poly)\n  case Geometry.POLYGON:\n  case Geometry.EXTENT:\n    return polygonIntersectsPolygon(poly, geometry)\n  }\n}\n\n/**\n * 线和多边形相交判断\n * @param line\n * @param polygon\n */\nconst lineIntersectsPolygon = function (line, polygon) {\n  const lineLinearRings = line.getCoordinates()\n  let polygon2LinearRings = polygon.getCoordinates()\n  \n  if (polygon.geometryType === Geometry.POLYGON ||\n      polygon.geometry === Geometry.MULTI_POLYGON) {\n    polygon2LinearRings = polygon2LinearRings[0] // 只获得外环\n  }\n  \n  let intersect = intersectsByLinearRings(lineLinearRings, polygon2LinearRings)\n  \n  if (!intersect) {\n    // check if this poly contains points of the ring/linestring\n    for (let i = 0, len = lineLinearRings.length; i < len; ++i) {\n      const point = lineLinearRings[i]\n      intersect = polygon.containsXY(point[0], point[1])\n      if (intersect) {\n        break\n      }\n    }\n  }\n  \n  return intersect\n}\n\n/**\n * 多边形和多边形相交判断\n * @param poly\n * @param polygon\n */\nconst polygonIntersectsPolygon = function (poly, polygon) {\n  let lineLinearRings = poly.getCoordinates()\n  let polygon2LinearRings = polygon.getCoordinates()// 只获得外环\n  \n  if (poly.geometryType === Geometry.POLYGON) {\n    lineLinearRings = lineLinearRings[0]\n  }\n  \n  if (polygon.geometryType === Geometry.POLYGON) {\n    polygon2LinearRings = polygon2LinearRings[0]\n  }\n  \n  let intersect = intersectsByLinearRings(lineLinearRings, polygon2LinearRings)\n  \n  // 两个多边形要做相互内含关系的判断\n  \n  // 正向检查\n  if (!intersect) {\n    for (let i = 0, len = lineLinearRings.length; i < len; ++i) {\n      const point = lineLinearRings[i]\n      intersect = polygon.containsXY(point[0], point[1])\n      if (intersect) {\n        break\n      }\n    }\n  }\n  \n  // 反向检查\n  if (!intersect) {\n    for (let i = 0, len = polygon2LinearRings.length; i < len; ++i) {\n      const point = polygon2LinearRings[i]\n      intersect = poly.containsXY(point[0], point[1])\n      if (intersect) {\n        break\n      }\n    }\n  }\n  \n  return intersect\n}\n\nconst intersectsByLinearRings = function (LinearRing1, LinearRings2) {\n  let intersect = false\n  const segs1 = getSortedSegments(LinearRing1)\n  const segs2 = getSortedSegments(LinearRings2)\n  \n  let seg1, seg1x1, seg1x2, seg1y1, seg1y2,\n    seg2, seg2y1, seg2y2\n  \n  // sweep right\n  for(let i = 0, len = segs1.length; i < len; ++i) {\n    seg1 = segs1[i]\n    seg1x1 = seg1.x1\n    seg1x2 = seg1.x2\n    seg1y1 = seg1.y1\n    seg1y2 = seg1.y2\n    \n    for(let j = 0, jlen = segs2.length; j < jlen; ++j) {\n      seg2 = segs2[j]\n      if(seg2.x1 > seg1x2) {\n        // seg1 still left of seg2\n        break\n      }\n      \n      if(seg2.x2 < seg1x1) {\n        // seg2 still left of seg1\n        continue\n      }\n      \n      seg2y1 = seg2.y1\n      seg2y2 = seg2.y2\n      if (Math.min(seg2y1, seg2y2) > Math.max(seg1y1, seg1y2)) {\n        // seg2 above seg1\n        continue\n      }\n      \n      if (Math.max(seg2y1, seg2y2) < Math.min(seg1y1, seg1y2)) {\n        // seg2 below seg1\n        continue\n      }\n      \n      if (segmentsIntersect(seg1, seg2)) {\n        intersect = true\n        break\n      }\n    }\n  }\n  \n  return intersect\n}\n\nconst getSortedSegments = function (points) {\n  const numSeg = points.length - 1\n  let segments = new Array(numSeg), point1, point2\n  \n  for (let i = 0; i < numSeg; ++i) {\n    point1 = points[i]\n    point2 = points[i + 1]\n    \n    if (point1[0] < point2[0]) {\n      segments[i] = {\n        x1: point1[0],\n        y1: point1[1],\n        x2: point2[0],\n        y2: point2[1]\n      }\n    } else {\n      segments[i] = {\n        x1: point2[0],\n        y1: point2[1],\n        x2: point1[0],\n        y2: point1[1]\n      }\n    }\n  }\n  \n  // more efficient to define this somewhere static\n  function byX1(seg1, seg2) {\n    return seg1.x1 - seg2.x1\n  }\n  \n  return segments.sort(byX1)\n}\n\nconst segmentsIntersect = function (seg1, seg2, options) {\n  const point = options && options.point\n  const tolerance = options && options.tolerance\n  let intersection = false\n  const x11_21 = seg1.x1 - seg2.x1\n  const y11_21 = seg1.y1 - seg2.y1\n  const x12_11 = seg1.x2 - seg1.x1\n  const y12_11 = seg1.y2 - seg1.y1\n  const y22_21 = seg2.y2 - seg2.y1\n  const x22_21 = seg2.x2 - seg2.x1\n  const d = (y22_21 * x12_11) - (x22_21 * y12_11)\n  const n1 = (x22_21 * y11_21) - (y22_21 * x11_21)\n  const n2 = (x12_11 * y11_21) - (y12_11 * x11_21)\n  \n  if (d == 0) {\n    // parallel\n    if (n1 == 0 && n2 == 0) {\n      // coincident\n      intersection = true\n    }\n  } else {\n    const along1 = n1 / d\n    const along2 = n2 / d\n    if (along1 >= 0 && along1 <= 1 && along2 >=0 && along2 <= 1) {\n      // intersect\n      if (!point) {\n        intersection = true\n      } else {\n        // calculate the intersection point\n        const x = seg1.x1 + (along1 * x12_11)\n        const y = seg1.y1 + (along1 * y12_11)\n        intersection = { 'x':x, 'y':y }\n      }\n    }\n  }\n  \n  if (tolerance) {\n    let dist\n    if (intersection) {\n      if (point) {\n        const segs = [seg1, seg2]\n        let seg, x, y\n        // check segment endpoints for proximity to intersection\n        // set intersection to first endpoint within the tolerance\n        for (let i = 0; i < 2; ++i) {\n          seg = segs[i]\n          for (let j = 1; j < 3; ++j) {\n            x = seg['x' + j]\n            y = seg['y' + j]\n            \n            dist = Math.sqrt(\n              Math.pow(x - intersection.x, 2) +\n              Math.pow(y - intersection.y, 2)\n            )\n            \n            if (dist < tolerance) {\n              intersection.x = x\n              intersection.y = y\n              break\n            }\n          }\n        }\n        \n      }\n    } else {\n      // no calculated intersection, but segments could be within\n      // the tolerance of one another\n      const segs = [seg1, seg2]\n      let source, target, p, result\n      // check segment endpoints for proximity to intersection\n      // set intersection to first endpoint within the tolerance\n      for (let i = 0; i < 2; ++i) {\n        source = segs[i]\n        target = segs[(i + 1) % 2]\n        for (let j = 1; j < 3; ++j) {\n          p = {x: source['x' + j], y: source['y' + j]}\n          result = distanceToSegment(p, target)\n          if (result.distance < tolerance) {\n            if (point) {\n              intersection = { 'x':p.x, 'y':p.y }\n            } else {\n              intersection = true\n            }\n            \n            break\n          }\n        }\n      }\n    }\n  }\n  return intersection\n}\n\n\nconst distanceToSegment = function (point, segment) {\n  let result = distanceSquaredToSegment(point, segment)\n  result.distance = Math.sqrt(result.distance)\n  return result\n}\n\nconst distanceSquaredToSegment = function (point, segment) {\n  const x0 = point.x\n  const y0 = point.y\n  const x1 = segment.x1\n  const y1 = segment.y1\n  const x2 = segment.x2\n  const y2 = segment.y2\n  const dx = x2 - x1\n  const dy = y2 - y1\n  const along = ((dx * (x0 - x1)) + (dy * (y0 - y1))) / (Math.pow(dx, 2) + Math.pow(dy, 2))\n  let x, y\n  \n  if(along <= 0.0) {\n    x = x1\n    y = y1\n  } else if(along >= 1.0) {\n    x = x2\n    y = y2\n  } else {\n    x = x1 + along * dx\n    y = y1 + along * dy\n  }\n  \n  return {\n    distance: Math.pow(x - x0, 2) + Math.pow(y - y0, 2),\n    x,\n    y,\n    along\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/analysis/intersects.js","/**\n * Created by zhangyong on 2017/7/17.\n */\n\nimport contains from './contains'\nimport {ExtentUtil} from '../../geometry/support/extentutil'\nimport Polygon from '../../geometry/polygon'\n\n\nlet isDividedPointSymbol = Symbol('isDividedPoint')\nlet alreadyUsedSymbol = Symbol('alreadyUsed')\nlet dividePointSymbol = Symbol('dividePoint')\n\n/**\n * 使用直线来切割多边形,\n * 暂时只支持不带洞的多边形的分割\n *\n * @method splitPolygonByLine\n * @param polygon {Geometry} 被切割多边形\n * @param line {Geometry} 切割直线\n * @returns {Array}\n */\nexport default function splitPolygonByPolyline(targetPolygon, splitLine) {\n  \n  // 不再原对象上处理\n  const polygon = targetPolygon.clone()\n  const line = splitLine.clone()\n  \n  const polygonCoordinates = polygon.getCoordinates()[0]\n  const lineCoordinates = line.getCoordinates()\n  \n  // 找到直线和面的相交点\n  let dividedPointList = findIntersectionPoints(polygonCoordinates, lineCoordinates)\n  \n  // 0交点或者交点为奇数，则认为非法输入\n  if (dividedPointList.length === 0 || dividedPointList.length % 2 === 1) {\n    return []\n  }\n  \n  // 参入到原来分割线中\n  const afterInsertLineCoords = insertDiveidePointsToSplitLineCoords(dividedPointList, lineCoordinates)\n  \n  const allPartsScliedFromLineCoords = sliceDividedPointFromLine(dividedPointList, afterInsertLineCoords)\n  \n  // 按照顺序插入分割点到分割多边形顶多序列中\n  const vertexListAfterDivide = insertDividePointsToCoordinates(dividedPointList, polygonCoordinates)\n  \n  // 重塑多边形\n  const results = renewal(vertexListAfterDivide, allPartsScliedFromLineCoords)\n  \n  const featureCollection = []\n  results.forEach( r=> {\n    const coords = []\n    r.forEach(arrs => {\n      coords.push([arrs[0], arrs[1]])\n    })\n    const polygon = new Polygon()\n    polygon.setCoordinates([coords])\n    featureCollection.push(polygon)\n  })\n  \n  // 处理带洞多边形\n  handleHolesForPolygon(polygon, featureCollection, line)\n  \n  return featureCollection\n}\n\n\nconst renewal = function(vertexListAfterDivide, allPartsScliedFromLineCoords) {\n  \n  let i = 0\n  let len = vertexListAfterDivide.length\n  \n  const isInArray = (point, singlePolygonCoords) =>\n    singlePolygonCoords.find( item =>\n      item[0] === point[0] && item[1] === point[1]\n    )\n  \n  \n  // 找到分割点在同一分割边上的其他点\n  const findPartners = function(point) {\n    for (let j = 0, jLen = allPartsScliedFromLineCoords.length; j < jLen; j++) {\n      const parts = allPartsScliedFromLineCoords[j]\n      const fp = parts[0]\n      const ep = parts[parts.length - 1]\n      \n      // 如果是首点\n      if (fp[0] === point[0] && fp[1] === point[1]) {\n        return parts\n      }\n      \n      if (ep[0] === point[0] && ep[1] === point[1]) {\n        const newParts = [].concat(parts)\n        return newParts.reverse()\n      }\n    }\n  }\n  \n  // 寻找点在多边形序列的下一点\n  const findNextPoint = function(point) {\n    for (let m = 0, mlen = vertexListAfterDivide.length; m < mlen; m++) {\n      const item = vertexListAfterDivide[m]\n      if (item[0] === point[0] && item[1] === point[1]) {\n        if (m === vertexListAfterDivide.length - 1) {\n          return item\n        } else {\n          return vertexListAfterDivide[m + 1]\n        }\n      }\n    }\n  }\n  \n  let singlePolygonCoords = []\n  let allPolygonCoords = []\n  \n  // 递归分割\n  const goThrough = function(ePoint, singlePolygonCoords ) {\n    if (singlePolygonCoords.length > 1) {\n      const firstPoint = singlePolygonCoords[0]\n      if (firstPoint[0] === ePoint[0] && firstPoint[1] === ePoint[1]) {\n        singlePolygonCoords.push(ePoint)\n        return true\n      }\n    }\n    \n    // 找到分割点，就需要添加它的伙伴（不管顺逆方向）\n    if (ePoint.length >= 3 && ePoint[2] === isDividedPointSymbol) {\n      const parts = findPartners(ePoint)\n      parts.forEach(p => {\n        singlePolygonCoords.push(p)\n      })\n  \n      // 判断此时是否已经完成绘制\n      const ffpoint = singlePolygonCoords[0]\n      const eepoint = singlePolygonCoords[singlePolygonCoords.length - 1]\n      if (ffpoint[0] === eepoint[0] && ffpoint[1] === eepoint[1]) {\n        return true\n      }\n    \n      const endPoint = parts[parts.length - 1]\n      const nextPoint = findNextPoint(endPoint)\n      goThrough(nextPoint, singlePolygonCoords)\n    } else if(ePoint.length === 2) {\n      singlePolygonCoords.push(ePoint)\n      \n      const nextPoint = findNextPoint(ePoint)\n      goThrough(nextPoint, singlePolygonCoords)\n    }\n  }\n  \n  // 更新多边形顶点的状态\n  const updataStatus = function(singlePolygonCoords, vertexListAfterDivide) {\n    vertexListAfterDivide.forEach(vertex => {\n      if (isInArray(vertex, singlePolygonCoords)) {\n        // 如果是原多边形顶点，则设置为alreadyUsedSymbol\n        if (vertex.length === 2) {\n          vertex.push(alreadyUsedSymbol)\n        }\n        // 如果是分割点，则只能使用2次\n        else if (vertex.length === 3 && vertex[2] === isDividedPointSymbol) {\n          vertex.push('1')\n        }\n        //\n        else if(vertex.length === 4 ) {\n          if (vertex[3] === '1') {\n            vertex[3] = '2'\n          }\n        }\n      }\n    })\n  }\n  \n  // 检测这两个点是否是切割边\n  const isInOneSegment = function(onePoint, otherPoint) {\n    const allPartsScliedFromLineCoordsTemp = allPartsScliedFromLineCoords\n    let findCount = 0\n    \n    for (let i = 0, len = allPartsScliedFromLineCoordsTemp.length; i < len; i++) {\n      const group = allPartsScliedFromLineCoordsTemp[i]\n      findCount = 0\n      \n      for (let j = 0, jjlen = group.length; j < jjlen; j++) {\n        const item = group[j]\n        if (item[0] === onePoint[0] && item[1] === onePoint[1]) {\n          findCount ++\n        }\n        \n        if (item[0] === otherPoint[0] && item[1] === otherPoint[1]) {\n          findCount ++\n        }\n        \n        if (findCount === 2) {\n          return true\n        }\n      }\n    }\n  \n    return false\n  }\n\n  for (; i < len - 1; i++) {\n    const fPoint = vertexListAfterDivide[i]\n    // 如果是普通点\n    if (fPoint.length === 2) {\n      if (!isInArray(fPoint, singlePolygonCoords)) {\n        singlePolygonCoords.push(fPoint)\n      }\n  \n      const ePoint = vertexListAfterDivide[i + 1]\n      goThrough(ePoint, singlePolygonCoords)\n  \n      updataStatus(singlePolygonCoords, vertexListAfterDivide)\n      \n      allPolygonCoords.push(singlePolygonCoords)\n      singlePolygonCoords = []\n    }\n    // 如果是分割点\n    else if (fPoint.length === 3 && fPoint[2] === isDividedPointSymbol) {\n      if (!isInArray(fPoint, singlePolygonCoords)) {\n        singlePolygonCoords.push(fPoint)\n      }\n  \n      const ePoint = vertexListAfterDivide[i + 1]\n      goThrough(ePoint, singlePolygonCoords)\n  \n      updataStatus(singlePolygonCoords, vertexListAfterDivide)\n  \n      allPolygonCoords.push(singlePolygonCoords)\n      singlePolygonCoords = []\n    } else if (fPoint.length === 4 && fPoint[3] === '1') {\n      let ePoint = vertexListAfterDivide[i + 1]\n      \n      // 分割点，必须是构成同一边，不能是异边\n      if(ePoint.length >= 3 && ePoint[2] === isDividedPointSymbol && isInOneSegment(fPoint, ePoint)) {\n        ePoint = fPoint\n      }\n      // 异边，则重新启动分割流程\n      else {\n        if (!isInArray(fPoint, singlePolygonCoords)) {\n          singlePolygonCoords.push(fPoint)\n        }\n      }\n  \n      goThrough(ePoint, singlePolygonCoords)\n      updataStatus(singlePolygonCoords, vertexListAfterDivide)\n  \n      const fp = singlePolygonCoords[0]\n      const tp = singlePolygonCoords[singlePolygonCoords.length - 1]\n      if (fp[0] !== tp[0] || fp[1] !== tp[1]) {\n        singlePolygonCoords.push(fp)\n      }\n      \n      allPolygonCoords.push(singlePolygonCoords)\n      singlePolygonCoords = []\n    }\n  }\n  \n  return allPolygonCoords\n}\n\nconst sliceDividedPointFromLine = function(dividedPointList, afterInsertLineCoords) {\n  let allParts = []\n  let singleParts = []\n  let isDividePointStart = false\n  \n  for (let i = 0, len = afterInsertLineCoords.length; i < len; i++) {\n    const item = afterInsertLineCoords[i]\n    \n    if (isDividePointStart === false && item.length === 3) {\n      singleParts.push([item[0], item[1]])\n      isDividePointStart = true\n      \n      continue\n    }\n    \n    if (isDividePointStart) {\n      if (item.length === 2) {\n        singleParts.push(item)\n        \n        continue\n      }\n    }\n    \n    if (isDividePointStart && item.length === 3) {\n      singleParts.push([item[0], item[1]])\n      isDividePointStart = false\n      \n      allParts.push(singleParts)\n      singleParts = []\n    }\n  }\n  \n  return allParts\n}\n\nconst insertDiveidePointsToSplitLineCoords = function(dividedPointList, lineCoordinates) {\n  \n  const getDividePoints = function (fP, eP) {\n    return dividedPointList.filter(dp => {\n      const dfPoint = dp.intersectFrom.fromPoint\n      const dePoint = dp.intersectFrom.endPoint\n      \n      return dfPoint[0] === fP[0] &&\n             dfPoint[1] === fP[1] &&\n             dePoint[0] === eP[0] &&\n             dePoint[1] === eP[1]\n    })\n  }\n  \n  const isInArray = function(point) {\n    return afterArr.find( item =>\n      item[0] === point[0] && item[1] === point[1]\n    )\n  }\n  \n  let len = lineCoordinates.length\n  let i = 0\n  const afterArr = []\n  for (;i < len - 1; i ++) {\n    const fPoint = lineCoordinates[i]\n    const ePoint = lineCoordinates[i + 1]\n  \n    if (!isInArray(fPoint)) {\n      afterArr.push(fPoint)\n    }\n    \n    const dividePoints = getDividePoints(fPoint, ePoint)\n    if (dividePoints.length !== 0) {\n      // 插入分割点\n      if (dividePoints.length === 1) {\n        afterArr.push([dividePoints[0].point.x, dividePoints[0].point.y, dividePointSymbol])\n      } else {\n        // 多个分割点需要排序\n        \n        const firstPointXY = {\n          x: fPoint[0],\n          y: fPoint[1]\n        }\n        \n        dividePoints.sort((item1, item2) =>\n          distance(item1.point, firstPointXY) - distance(item2.point, firstPointXY)\n        )\n  \n        dividePoints.forEach(item => {\n          afterArr.push([item.point.x, item.point.y, dividePointSymbol])\n        })\n      }\n    }\n  \n    if (!isInArray(ePoint)) {\n      afterArr.push(ePoint)\n    }\n  }\n  \n  return afterArr\n}\n\n\nconst distance = function(p1, p2) {\n  return Math.sqrt((p1.x - p2.x) * (p1.x - p2.x) + (p1.y - p2.y) * (p1.y - p2.y))\n}\n\nconst insertDividePointsToCoordinates = function(dividedPointList, polygonCoordinates) {\n  const afterInserted = []\n  \n  const isInDividedPointList = function(firstPoint, endPoint) {\n    return dividedPointList.filter(item => {\n      const orialPoint = item.originPoint\n      const ofPoint = orialPoint.fromPoint\n      const oePoint = orialPoint.toPoint\n      \n      return firstPoint[0] === ofPoint[0] &&\n        firstPoint[1] === ofPoint[1] &&\n        endPoint[0] === oePoint[0] &&\n        endPoint[1] === oePoint[1]\n    })\n  }\n  \n  const len = polygonCoordinates.length\n  let i = 0\n  \n  for (; i < len - 1; i++) {\n    const fPoint = polygonCoordinates[i]\n    const ePoint = polygonCoordinates[i + 1]\n    \n    afterInserted.push(fPoint)\n    const itemDividedPoint = isInDividedPointList(fPoint, ePoint)\n    \n    if (itemDividedPoint.length > 0) {\n      if (itemDividedPoint.length > 1) {\n        const firstPointXY = {\n          x: fPoint[0],\n          y: fPoint[1]\n        }\n    \n        itemDividedPoint.sort((item1, item2) =>\n          distance(item1.point, firstPointXY) - distance(item2.point, firstPointXY)\n        )\n      }\n  \n      itemDividedPoint.forEach(item => {\n        const point = item.point\n        afterInserted.push([point.x, point.y, isDividedPointSymbol])\n      })\n    }\n  }\n  \n  afterInserted.push(afterInserted[0])\n  return afterInserted\n}\n\nconst findOneIntersectionPoints = function(polygonCoordinates, lineCoordinates) {\n  const _ExtentUtil = ExtentUtil\n  const lineCoordinatesExtent = _ExtentUtil.boundingExtentFromTwoPoints(lineCoordinates[0], lineCoordinates[1])\n  const lineCoordinatesExtentBuffer = _ExtentUtil.buffer(lineCoordinatesExtent, 4)\n  \n  const seg2 = {\n    x1: lineCoordinates[0][0],\n    y1: lineCoordinates[0][1],\n    x2: lineCoordinates[1][0],\n    y2: lineCoordinates[1][1]\n  }\n  \n  const ntersectionPoints = []\n  \n  for (let j = 0, jj = polygonCoordinates.length - 1; j < jj; j ++) {\n    let points = polygonCoordinates[j]\n    let nextPoints = polygonCoordinates[j + 1]\n    \n    let pathExtent = _ExtentUtil.boundingExtentFromTwoPoints(points, nextPoints)\n    // 如果两边的extent相交，则判断他们是否相交\n    if (_ExtentUtil.intersects(pathExtent, lineCoordinatesExtentBuffer)) {\n      \n      const seg1 = {\n        x1: points[0],\n        y1: points[1],\n        x2: nextPoints[0],\n        y2: nextPoints[1]\n      }\n      \n      const intersectPoint = segmentsIntersect(seg1, seg2, {point: true})\n      if (intersectPoint instanceof Object) {\n        ntersectionPoints.push({\n          point: intersectPoint,\n          originPoint:{\n            fromPoint: points,\n            toPoint: nextPoints\n          },\n          index: j\n        })\n      }\n    }\n  }\n  \n  return ntersectionPoints\n}\n\nconst findIntersectionPoints = function (polygonCoordinates, lineCoordinates) {\n  const _findOneIntersectionPoints = findOneIntersectionPoints\n  let ntersectionPoints = []\n  \n  for (let i = 0, len = lineCoordinates.length - 1; i < len ; i++) {\n    const firstPoint = lineCoordinates[i]\n    const endPoint = lineCoordinates[i + 1]\n    \n    const intersectionPoints = _findOneIntersectionPoints(polygonCoordinates, [firstPoint, endPoint])\n    intersectionPoints.forEach( ntp => {\n      ntp.intersectIndex = i\n      ntp.intersectFrom = {\n        fromPoint: firstPoint,\n        endPoint: endPoint\n      }\n    })\n    \n    ntersectionPoints = ntersectionPoints.concat(intersectionPoints)\n  }\n  \n  return ntersectionPoints\n}\n\n\nconst segmentsIntersect = function (seg1, seg2, options) {\n  const point = options && options.point\n  const tolerance = options && options.tolerance\n  let intersection = false\n  const x11_21 = seg1.x1 - seg2.x1\n  const y11_21 = seg1.y1 - seg2.y1\n  const x12_11 = seg1.x2 - seg1.x1\n  const y12_11 = seg1.y2 - seg1.y1\n  const y22_21 = seg2.y2 - seg2.y1\n  const x22_21 = seg2.x2 - seg2.x1\n  const d = (y22_21 * x12_11) - (x22_21 * y12_11)\n  const n1 = (x22_21 * y11_21) - (y22_21 * x11_21)\n  const n2 = (x12_11 * y11_21) - (y12_11 * x11_21)\n  \n  if (d == 0) {\n    // parallel\n    if (n1 == 0 && n2 == 0) {\n      // coincident\n      intersection = true\n    }\n  } else {\n    const along1 = n1 / d\n    const along2 = n2 / d\n    if (along1 >= 0 && along1 <= 1 && along2 >=0 && along2 <= 1) {\n      // intersect\n      if (!point) {\n        intersection = true\n      } else {\n        // calculate the intersection point\n        const x = seg1.x1 + (along1 * x12_11)\n        const y = seg1.y1 + (along1 * y12_11)\n        intersection = { 'x':x, 'y':y }\n      }\n    }\n  }\n  \n  if (tolerance) {\n    let dist\n    if (intersection) {\n      if (point) {\n        const segs = [seg1, seg2]\n        let seg, x, y\n        // check segment endpoints for proximity to intersection\n        // set intersection to first endpoint within the tolerance\n        for (let i = 0; i < 2; ++i) {\n          seg = segs[i]\n          for (let j = 1; j < 3; ++j) {\n            x = seg['x' + j]\n            y = seg['y' + j]\n            \n            dist = Math.sqrt(\n              Math.pow(x - intersection.x, 2) +\n              Math.pow(y - intersection.y, 2)\n            )\n            \n            if (dist < tolerance) {\n              intersection.x = x\n              intersection.y = y\n              break\n            }\n          }\n        }\n      }\n    } else {\n      // no calculated intersection, but segments could be within\n      // the tolerance of one another\n      const segs = [seg1, seg2]\n      let source, target, p, result\n      // check segment endpoints for proximity to intersection\n      // set intersection to first endpoint within the tolerance\n      for (let i = 0; i < 2; ++i) {\n        source = segs[i]\n        target = segs[(i + 1) % 2]\n        for (let j = 1; j < 3; ++j) {\n          p = {x: source['x' + j], y: source['y' + j]}\n          result = distanceToSegment(p, target)\n          if (result.distance < tolerance) {\n            if (point) {\n              intersection = { 'x':p.x, 'y':p.y }\n            } else {\n              intersection = true\n            }\n            \n            break\n          }\n        }\n      }\n    }\n  }\n  return intersection\n}\n\nconst distanceToSegment = function (point, segment) {\n  let result = distanceSquaredToSegment(point, segment)\n  result.distance = Math.sqrt(result.distance)\n  return result\n}\n\nconst distanceSquaredToSegment = function (point, segment) {\n  const x0 = point.x\n  const y0 = point.y\n  const x1 = segment.x1\n  const y1 = segment.y1\n  const x2 = segment.x2\n  const y2 = segment.y2\n  const dx = x2 - x1\n  const dy = y2 - y1\n  const along = ((dx * (x0 - x1)) + (dy * (y0 - y1))) / (Math.pow(dx, 2) + Math.pow(dy, 2))\n  let x, y\n  \n  if(along <= 0.0) {\n    x = x1\n    y = y1\n  } else if(along >= 1.0) {\n    x = x2\n    y = y2\n  } else {\n    x = x1 + along * dx\n    y = y1 + along * dy\n  }\n  \n  return {\n    distance: Math.pow(x - x0, 2) + Math.pow(y - y0, 2),\n    x: x, y: y,\n    along: along\n  }\n}\n\n/**\n * 处理带洞多边形\n * @param polygon\n * @param geometryCollection\n * @param splitLine\n */\nconst handleHolesForPolygon = function(polygon, geometryCollection, splitLine) {\n  if (!polygon.hasHoles()) {\n    return\n  }\n  \n  const addHoleToPolygon = function(polyCoods, geometryCollection) {\n    const poly = new Polygon([polyCoods])\n    const needPoly = geometryCollection.find( polygon => {\n      return contains(polygon, poly)\n    })\n    \n    if (needPoly) {\n      needPoly.getCoordinates().push(polyCoods)\n    }\n  }\n  \n  // 判断洞是否与切割线相交\n  const coords = polygon.getCoordinates()\n  const lineCoords = splitLine\n  \n  for (let i = 1, len = coords.length ;i < len ; i++) {\n    const dividedPoints = findIntersectionPoints(coords[i], lineCoords)\n    \n    // 如果分割线和洞不相交，需要判断洞的归属\n    if (dividedPoints.length === 0) {\n      // console.log('Find one need to appended to collection.')\n      addHoleToPolygon (coords[i], geometryCollection)\n    }\n  }\n  \n  \n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/analysis/splitpolygon.js","/**\n * Created by zhangyong on 2017/8/4.\n */\n\nimport Geometry from '../../geometry/geometry'\nimport Polygon from '../../geometry/polygon'\n\n/**\n *\n * 判断多边形是否包含另外一个图形\n *\n * @method contains\n * @param polygon\n * @param geometry\n * @returns {*}\n */\nexport default function contains (polygon, geometry) {\n  const polyGeometryType = polygon.geometryType\n  let isContained = false\n  \n  if (polyGeometryType === Geometry.POLYGON ||\n      polyGeometryType === Geometry.MULTI_POLYGON ||\n      polyGeometryType === Geometry.EXTENT ) {\n    const targetGeometryType = geometry.geometryType\n    \n    if (targetGeometryType === Geometry.POINT ) {\n      return polygon.containsXY(geometry.x, geometry.y)\n    } else if (targetGeometryType === Geometry.LINE ) {\n      return polyContainsLine(polygon, geometry)\n    } else if (targetGeometryType === Geometry.POLYGON ) {\n      return polyContainsPoly(polygon, geometry)\n    } else if (targetGeometryType === Geometry.PARALLELOGRAM) {\n      return polyContainsPoly(polygon, new Polygon(geometry.getCoordinates()))\n    }\n  }\n  \n  return isContained\n}\n\n\nconst polyContainsLine = function (poly, line) {\n  const lineCoords = line.getCoordinates()\n  return polygonContainsLinestring(poly, lineCoords)\n}\n\n\nconst polyContainsPoly = function (poly, poly2) {\n  const poly2Type = poly2.geometryType\n  if (poly2Type === Geometry.POLYGON ) {\n    const outRing = poly2.getCoordinates()[0]\n    return polygonContainsLinestring(poly, outRing)\n  } else if (poly2Type === Geometry.MULTI_POLYGON ) {\n    return true\n  }\n  \n  return false\n}\n\n\nconst polygonContainsLinestring = function (poly, coords) {\n  const hasOne = coords.some( coord =>\n    !poly.containsXY(coord[0], coord[1])\n  )\n  \n  return !hasOne\n}\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/analysis/contains.js","/**\n * Created by zhangyong on 2017/8/4.\n */\n\nimport Geometry from '../../geometry/geometry'\nimport {linearRingIsClockwise} from '../support/orient'\nimport contains from './contains'\n\n/**\n *\n * @param polygon\n * @param holePolygon\n * @returns {*}\n */\nexport default function polygonWithHoles (polygon1, polygon2) {\n  \n  const polygon = polygon1.clone()\n  const holePolygon = polygon2.clone()\n  \n  let resultPolygon = polygon\n  const holeCoordinates = holePolygon.getCoordinates()\n  const polygonCoordinates = polygon.getCoordinates()\n  \n  const type = polygon.geometryType\n  // if (type === Geometry.POLYGON || type === Geometry.MULTI_POLYGON ) {\n  if (type === Geometry.POLYGON ) {\n    // 必须要被包含在多边形内\n    if (contains(polygon, holePolygon)) {\n      const holeOutRings = holeCoordinates[0]\n      const polygonOutRings = polygonCoordinates[0]\n      \n      let tempHoleOutRings = []\n      let tempPolygonOutRings = []\n  \n      holeOutRings.forEach( ring => {\n        tempHoleOutRings.push(ring[0], ring[1])\n      })\n  \n      polygonOutRings.forEach( ring => {\n        tempPolygonOutRings.push(ring[0], ring[1])\n      })\n      \n      const holeOriented = linearRingIsClockwise(tempHoleOutRings, 0, tempHoleOutRings.length, 2)\n      const polygonOutRingOriented = linearRingIsClockwise(tempPolygonOutRings, 0, tempPolygonOutRings.length, 2)\n      \n      // 带洞多边形\n      if (polygonCoordinates.length > 1) {\n        // 如果有带洞多边形，需要处理的更多\n        // 这里只是简单的存储进去\n  \n        // 不同向\n        if (holeOriented !== polygonOutRingOriented) {\n          polygonCoordinates.push(holeOutRings.slice())\n        } else {\n          polygonCoordinates.push(holeOutRings.slice().reverse())\n        }\n        \n      } else {\n        // 不同向\n        if (holeOriented !== polygonOutRingOriented) {\n          polygonCoordinates.push(holeOutRings.slice())\n        } else {\n          polygonCoordinates.push(holeOutRings.slice().reverse())\n        }\n      }\n    }\n  }\n  \n  return resultPolygon\n}\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/analysis/polygonwithhole.js"],"sourceRoot":""}