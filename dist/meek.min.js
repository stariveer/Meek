!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Datatang=t():e.Datatang=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="<%=baseUrl%>/",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(34),i=n(36),a=r(i),s=n(19),u=r(s),l=n(15),f=r(l),c=n(28),h=n(55),d=n(54),p=n(11),y=r(p),_=n(2),v=n(6),g=n(17),m=n(43),b=r(m),E=n(4),w=r(E),x=n(1),O=r(x),T=n(9),P=r(T),C=n(22),M=r(C),I=n(30),L=r(I),S=n(10),R=r(S),N=n(31),k=r(N),D=n(21),j=r(D),F=n(23),A=n(45),U=n(46),G=r(U),Y=n(53),K=r(Y),V=n(16),B=r(V),H=n(52),z=r(H),X=n(26),W=r(X),q=n(13),Z=r(q),J=n(47),Q=r(J),$=n(58),ee=r($),te=n(38),ne=r(te),re=n(64),oe=r(re),ie=n(63),ae=r(ie),se=n(37),ue=r(se),le=n(40),fe=r(le),ce=n(5),he=r(ce),de=n(41),pe=r(de),ye=n(48),_e=r(ye),ve=n(39),ge=r(ve),me=n(20),be=r(me),Ee=n(42),we=r(Ee),xe=n(24),Oe=r(xe),Te=n(74),Pe=r(Te),Ce=n(49),Me=r(Ce),Ie=n(75),Le=r(Ie),Se=n(69),Re=r(Se),Ne=n(70),ke=r(Ne),De=n(72),je=r(De),Fe=n(29),Ae=r(Fe),Ue=n(71),Ge=r(Ue),Ye="2.3.0";t.default={Config:o.Config,Coordinate:h.Coordinate,Canvas:d.Canvas,Event:b.default,SelectEvent:pe.default,FeatureEvent:_e.default,ModifyEvent:ge.default,EventManager:w.default,Counter:a.default,Helpers:u.default,ImageState:F.ImageState,ImageEvent:A.ImageEvent,SingleImage:G.default,Geometry:O.default,Extent:P.default,Point:M.default,Line:L.default,Polygon:R.default,MutilPolygon:k.default,Parallelogram:j.default,Style:g.Style,PointStyle:K.default,LineStyle:B.default,FillStyle:z.default,TextStyle:W.default,FeatureLayer:Z.default,SingleImageLayer:Q.default,Draw:ee.default,DrawEvent:ne.default,BrowserEvent:he.default,EventType:v.EventType,Feature:Oe.default,Map:Pe.default,View:Me.default,Overlay:Le.default,GeometryUtil:y.default,ExtentUtil:_.ExtentUtil,Select:oe.default,Modify:ae.default,DragPan:ue.default,Control:be.default,Zoom:we.default,Obj:f.default,Math:c.Math,MouseWheelZoom:fe.default,GeoJSON:Re.default,version:Ye,intersects:ke.default,splitPolygonByPolyline:je.default,contains:Ae.default,polygonWithHole:Ge.default},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(3),l=r(u),f=n(2),c=function(e){function t(){o(this,t);var n=i(this,e.call(this));return n._extent=null,n.stride=2,n}return a(t,e),t.prototype.pointInExtent=function(e){return f.ExtentUtil.containsPoint(this.extent,e)},t.prototype.intersect=function(e){return!1},t.prototype.getCoordinates=function(){return[]},t.prototype.getFormShowPosition=function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return[]},t.prototype.getFlatInteriorPoint=function(){return[]},t.prototype.containsXY=function(e,t){return!0},t.prototype.move=function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments[2]},t.prototype.scale=function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,arguments[1]},t.prototype.rotate=function(e,t){},t.prototype.simplify=function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:1},t.prototype.toJSON=function(){},t.prototype.clone=function(){},s(t,[{key:"geometryType",get:function(){return t.UNDEFINED}},{key:"extent",get:function(){return this._extent}},{key:"anticlockwise",get:function(){var e=this.geometryType,n=this.getCoordinates(),r=void 0,o=void 0,i=void 0,a=void 0,s=void 0;return e===t.LINE?(i=[0,0],a=n[0],s=n[1]):e!==t.POLYGON&&e!==t.EXTENT||(i=n[0],a=n[1],s=n[2]),r=[a[0]-i[0],a[1]-i[1]],o=[s[0]-a[0],s[1]-a[1]],r[0]*o[1]-o[0]*r[1]<0}}]),t}(l.default);t.default=c,c.POINT="point",c.MULTI_POINT="multi_point",c.LINE="line",c.MULTI_LINE="multi_line",c.POLYGON="polygon",c.MULTI_POLYGON="multi_polygon",c.EXTENT="extent",c.CIRCLE="circle",c.PARALLELOGRAM="parallelogram",c.UNDEFINED="undefined",e.exports=t.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.ExtentUtil={};n.createEmpty=function(){return[1/0,1/0,-(1/0),-(1/0)]},n.createOrUpdateFromFlatCoordinates=function(e,t,r,i,a){var s=n.createOrUpdateEmpty(a);return o(s,e,t,r,i)};var r=function(e,t,n){e[0]=Math.min(e[0],t),e[1]=Math.min(e[1],n),e[2]=Math.max(e[2],t),e[3]=Math.max(e[3],n)},o=function(e,t,n,o,i){for(;n<o;n+=i)r(e,t[n],t[n+1]);return e};n.createOrUpdateEmpty=function(e){return n.createOrUpdate(1/0,1/0,-(1/0),-(1/0),e)},n.createOrUpdate=function(e,t,n,r,o){return o?(o[0]=e,o[1]=t,o[2]=n,o[3]=r,o):[e,t,n,r]},n.getCenter=function(e){return[(e[0]+e[2])/2,(e[1]+e[3])/2]},n.createScaleExtent=function(e,t){return[e.x-t,e.y-t,e.x+t,e.y+t]},n.boundingExtentFromTwoPoints=function(e,t){var n=0,r=0,o=0,i=0;return e[0]>t[0]?(n=t[0],o=e[0]):(n=e[0],o=t[0]),e[1]>t[1]?(r=t[1],i=e[1]):(r=e[1],i=t[1]),[n,r,o,i]},n.boundingExtent=function(e){for(var t=n.createEmpty(),r=0,o=e.length;r<o;++r)n.extendCoordinate(t,e[r]);return[n.getBottomLeft(t),n.getBottomRight(t),n.getTopRight(t),n.getTopLeft(t),n.getBottomLeft(t)]},n.boundingSimpleExtent=function(e){for(var t=n.createEmpty(),r=0,o=e.length;r<o;++r)n.extendCoordinate(t,e[r]);return t},n.extendCoordinate=function(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])},n.getBottomRight=function(e){return[e[2],e[1]]},n.getBottomLeft=function(e){return[e[0],e[1]]},n.getTopRight=function(e){return[e[2],e[3]]},n.getTopLeft=function(e){return[e[0],e[3]]},n.containsPoint=function(e,t){var n=t[0],r=t[1];return Array.isArray(e)?e[0]<=n&&n<=e[2]&&e[1]<=r&&r<=e[3]:e.xmin-1<=n&&n<=e.xmax+1&&e.ymin-1<=r&&r<=e.ymax+1},n.buffer=function(e,t,n){return n?(n[0]=e[0]-t,n[1]=e[1]-t,n[2]=e[2]+t,n[3]=e[3]+t,n):[e[0]-t,e[1]-t,e[2]+t,e[3]+t]},n.minMaxToRing=function(e,t,n,r){var o=[[e,t],[n,t],[n,r],[e,r],[e,t]];return o},n.getHeight=function(e){return e[3]-e[1]},n.getWidth=function(e){return e[2]-e[0]},n.updateExtent=function(e,t,n){var r=n[0],o=r.index,i=e.getCoordinates(),a=i[o],s=i[o+1],u=r.isVertex;return u?0===o||4===o?(i[0]=t,i[4]=t,i[1][1]=t[1],i[3][0]=t[0]):1===o?(i[1]=t,i[2][0]=t[0],i[0][1]=t[1],i[4]=i[0]):2===o?(i[2]=t,i[1][0]=t[0],i[3][1]=t[1]):3===o&&(i[3]=t,i[2][1]=t[1],i[0][0]=t[0],i[4]=i[0]):(a[0]===s[0]&&(i[o][0]=t[0],i[o+1][0]=t[0]),a[1]===s[1]&&(i[o][1]=t[1],i[o+1][1]=t[1]),3===o&&(i[0]=i[4]),0===o&&(i[4]=i[0])),i},n.getIntersection=function(e,t,r){var o=r?r:n.createEmpty();return n.intersects(e,t)&&(e[0]>t[0]?o[0]=e[0]:o[0]=t[0],e[1]>t[1]?o[1]=e[1]:o[1]=t[1],e[2]<t[2]?o[2]=e[2]:o[2]=t[2],e[3]<t[3]?o[3]=e[3]:o[3]=t[3]),o},n.intersects=function(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]},n.containsExtent=function(e,t){return e[0]<=t[0]&&t[2]<=e[2]&&e[1]<=t[1]&&t[3]<=e[3]},n.isEmpty=function(e){return e[2]<e[0]||e[3]<e[1]},n.getForViewAndSize=function(e,t,r,o,i){var a=t*o[0]/2,s=t*o[1]/2,u=Math.cos(r),l=Math.sin(r),f=a*u,c=a*l,h=s*u,d=s*l,p=e[0],y=e[1],_=p-f+d,v=p-f-d,g=p+f-d,m=p+f+d,b=y-c-h,E=y-c+h,w=y+c+h,x=y+c-h;return n.createOrUpdate(Math.min(_,v,g,m),Math.min(b,E,w,x),Math.max(_,v,g,m),Math.max(b,E,w,x),i)},t.default={ExtentUtil:n}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(43),l=r(u),f=n(36),c=n(6),h=function(e){function t(){o(this,t);var n=i(this,e.call(this));return n._id=(0,f.getUid)(),n._revision=0,n}return a(t,e),t.prototype.changed=function(){++this._revision,this.dispatchEvent(c.EventType.CHANGE)},s(t,[{key:"id",get:function(){return this._id}},{key:"revision",get:function(){return this._revision}}]),t}(l.default);t.default=h,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=e.ol_lm;return n?n[t]:void 0}function i(e){if(e&&e.target){e.target.removeEventListener(e.type,e.boundListener);var t=o(e.target,e.type);if(t){var n="deleteIndex"in e?e.deleteIndex:t.indexOf(e);n!==-1&&t.splice(n,1),0===t.length&&f(e.target,e.type)}l.default.clear(e)}}function a(e,t,n,r,o){var i=d(e),a=i[t];a||(a=i[t]=[]);var s=h(a,n,r,!1);return s?o||(s.callOnce=!1):(s={bindTo:r,callOnce:!!o,listener:n,target:e,type:t},e.addEventListener(t,c(s)),a.push(s)),s}function s(e,t,n,r){return a(e,t,n,r,!0)}Object.defineProperty(t,"__esModule",{value:!0}),t.getListeners=o,t.unlistenByKey=i,t.listen=a,t.listenOnce=s;var u=n(15),l=r(u),f=function(e,t){var n=o(e,t);if(n){for(var r=0,i=n.length;r<i;++r)e.removeEventListener(t,n[r].boundListener),l.default.clear(n[r]);n.length=0;var a=e.ol_lm;a&&(Reflect.deleteProperty(a,t),0===Object.keys(a).length&&Reflect.deleteProperty(e,ol_lm))}},c=function(e){var t=function(t){var n=e.listener,r=e.bindTo||e.target;return e.callOnce&&i(e),n.call(r,t)};return e.boundListener=t,t},h=function(e,t,n,r){for(var o=void 0,i=0,a=e.length;i<a;++i)if(o=e[i],o.listener===t&&o.bindTo===n)return r&&(o.deleteIndex=i),o},d=function(e){var t=e.ol_lm;return t||(t=e.ol_lm={}),t};t.default={getListeners:o,listen:a,listenOnce:s,unlistenByKey:i}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(3),u=r(s),l=function(e){function t(n,r,a){o(this,t);var s=i(this,e.call(this));return s.type=a,s.map=n,s.originalEvent=r,s.pixel=n.getEventPixel(r),s.coordinate=n.getCoordinateFromPixel(s.pixel),s.pointerId=0,s}return a(t,e),t.prototype.preventDefault=function(){this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){this.originalEvent.stopPropagation()},t}(u.default);t.default=l,l.SINGLE_CLICK="singleclick",l.CLICK="click",l.DBLCLICK="dblclick",l.MOUSE_DRAG="mousedrag",l.MOUSE_DOWN="mousedown",l.MOUSE_MOVE="mousemove",l.MOUSE_UP="mouseup",l.MOUSE_OVER="mouseover",l.MOUSE_OUT="mouseout",l.WHEEL="wheel",l.MOUSE_WHEEL="mousewheel",l.KEYDOWN="keydown",l.KEYPRESS="keypress",e.exports=t.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.EventType={};n.CHANGE="change",n.VIEW_CHANGED="viewchanged",n.ERROR="error",n.LOAD="load",n.RESIZE="resize",t.default={EventType:n}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.Transform={tmp_:new Array(6),create:function(){return[1,0,0,1,0,0]},reset:function(e){return e.set(e,1,0,0,1,0,0)},transform2D:function(e,t,n,r,o,i){var a=i?i:[],s=0,u=void 0;for(u=t;u<n;u+=r){var l=e[u],f=e[u+1];a[s++]=o[0]*l+o[2]*f+o[4],a[s++]=o[1]*l+o[3]*f+o[5]}return i&&a.length!=s&&(a.length=s),a},multiply:function(e,t){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5],u=t[0],l=t[1],f=t[2],c=t[3],h=t[4],d=t[5];return e[0]=n*u+o*l,e[1]=r*u+i*l,e[2]=n*f+o*c,e[3]=r*f+i*c,e[4]=n*h+o*d+a,e[5]=r*h+i*d+s,e},set:function(e,t,n,r,o,i,a){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e[4]=i,e[5]=a,e},setFromArray:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},apply:function(e,t){var n=t[0],r=t[1];return t[0]=e[0]*n+e[2]*r+e[4],t[1]=e[1]*n+e[3]*r+e[5],t},rotate:function(e,t){var n=Math.cos(t),r=Math.sin(t);return e.multiply(e,e.set(e.tmp_,n,r,-r,n,0,0))},scale:function(e,t,n){return e.multiply(e,e.set(e.tmp_,t,0,0,n,0,0))},translate:function(e,t,n){return e.multiply(e,e.set(e.tmp_,1,0,0,1,t,n))},compose:function(e,t,n,r,o,i,a,s){var u=Math.sin(i),l=Math.cos(i);return e[0]=r*l,e[1]=o*u,e[2]=-r*u,e[3]=o*l,e[4]=a*r*l-s*r*u+t,e[5]=a*o*u+s*o*l+n,e},invert:function(e){var t=n.determinant(e),r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5];return e[0]=a/t,e[1]=-o/t,e[2]=-i/t,e[3]=r/t,e[4]=(i*u-a*s)/t,e[5]=-(r*u-o*s)/t,e},determinant:function(e){return e[0]*e[3]-e[1]*e[2]}};t.default={Transform:n}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(3),l=r(u),f=n(5),c=r(f),h=n(15),d=r(h),p=function(e){function t(){o(this,t);var n=i(this,e.call(this));return n.active=!0,n._mapRenderKey=null,n.targetPointers=null,n._trackedPointers={},n.handlingDownUpSequence=!1,n}return a(t,e),t.prototype.applyHandleEventOption=function(e){this.handleMouseEvent=e.handleMouseEvent?e.handleMouseEvent:this.handleMouseEvent,this._handleDownEvent=e.handleDownEvent?e.handleDownEvent:function(){return!1},this._handleDragEvent=e.handleDragEvent?e.handleDragEvent:function(){},this._handleMoveEvent=e.handleMoveEvent?e.handleMoveEvent:function(){},this._handleUpEvent=e.handleUpEvent?e.handleUpEvent:function(){return!1}},t.prototype.handleMouseEvent=function(e){var t=!1;if(this._updateTrackedPointers(e),this.handlingDownUpSequence){if(e.type===c.default.MOUSE_DRAG)this._handleDragEvent(e);else if(e.type===c.default.MOUSE_UP){var n=this._handleUpEvent(e);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(e.type===c.default.MOUSE_DOWN){var r=this._handleDownEvent(e);this.handlingDownUpSequence=r,t=this.shouldStopEvent(r)}else e.type===c.default.MOUSE_MOVE&&this._handleMoveEvent(e);return!t},t.prototype._isPointerDraggingEvent=function(e){var t=e.type;return t===c.default.MOUSE_DOWN||t===c.default.MOUSE_DRAG||t===c.default.MOUSE_UP},t.prototype._updateTrackedPointers=function(e){if(this._isPointerDraggingEvent(e)){var t=e;e.type==c.default.MOUSE_UP?delete this._trackedPointers[t.pointerId]:e.type==c.default.MOUSE_DOWN?this._trackedPointers[t.pointerId]=t:t.pointerId in this._trackedPointers&&(this._trackedPointers[t.pointerId]=t),this.targetPointers=d.default.getValues(this._trackedPointers)}},t.prototype.pan=function(e,t){var n=e.center;n&&(e.center=[n[0]+t[0],n[1]+t[1]])},t.prototype.zoomByDelta=function(e,t,n,r){var o=e.resolution,i=e.constrainResolution(o,t,0);if(n&&void 0!==i&&i!==o){var a=e.center,s=e.calculateCenterZoom(i,n);s=e.constrainCenter(s),n=[(i*a[0]-o*s[0])/(i-o),(i*a[1]-o*s[1])/(i-o)]}this.zoomWithoutConstraints(e,i,n,r)},t.prototype.zoomWithoutConstraints=function(e,t,n,r){if(t){var o=e.resolution,i=e.center;if(void 0!==o&&i&&t!==o&&r)e.resolution=t;else{if(n){var a=e.calculateCenterZoom(t,n);e.center=a}e.resolution=t}}},t.prototype.getViewDataExtent=function(){return this._dataExtent||(this._dataExtent=this.map.view.dataExtent),this._dataExtent},t.prototype.coordinateBeyond=function(e){if(this.map.allowCoordinatesBeyondImage)return e;if(void 0===e)return e;var t=new Array(2),n=void 0,r=void 0;try{n=e[0],r=e[1]}catch(e){}t[0]=n,t[1]=r,n<=0&&(t[0]=0),r<=0&&(t[1]=0);var o=this.getViewDataExtent();return o&&(n>=o[2]&&(t[0]=o[2]),r>=o[3]&&(t[1]=o[3])),t},t.prototype.shouldStopEvent=function(e){return e},s(t,[{key:"map",get:function(){return this._map},set:function(e){this._map=e}},{key:"active",get:function(){return this._active},set:function(e){this._active=e}}]),t}(l.default);t.default=p,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),f=n(2),c=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;o(this,t);var u=i(this,e.call(this));return u._xmin=n,u._ymin=r,u._xmax=a,u._ymax=s,u._rings=[],u._flatInteriorPointRevision=-1,u._flatInteriorPoint=null,u}return a(t,e),t.prototype.containsXY=function(e,t){return f.ExtentUtil.containsPoint(this,[e,t])},t.prototype.getFlatInteriorPoint=function(){return this._flatInteriorPointRevision!==this.revision&&(this._flatInteriorPointRevision=this.revision,this._flatInteriorPoint=[this.centerX,this.centerY]),this._flatInteriorPoint},t.prototype.move=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments[2],r=void 0;n&&n.beyond&&(r=n.beyond);var o=[this.xmin,this.ymin],i=this.width,a=this.height,s=new Array(2);s[0]=o[0]+e,s[1]=o[1]+t,r&&(o[0]<r.xmin&&(o[0]=r.xmin,s[0]=o[0]),o[0]+i+e>=r.xmax&&(s[0]=o[0]),o[1]<r.ymin&&(o[1]=r.ymin,s[1]=o[1]),o[1]+a+t>=r.ymax&&(s[1]=o[1]));var u=[s,[s[0]+i,s[1]],[s[0]+i,s[1]+a],[s[0],s[1]+a],s];this.setCoordinates(u)},t.prototype.getCoordinates=function(){return 0===this._rings.length&&0!==this.xmin&&0!==this.ymin&&0!==this.xmax&&0!==this.ymax&&(this._rings=f.ExtentUtil.minMaxToRing(this.xmin,this.ymin,this.xmax,this.ymax)),this._rings},t.prototype.getFormShowPosition=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return[(this.xmin+this.xmax)/2-e,this.ymin-t]},t.prototype.setCoordinates=function(e){this.rings=e;var t=f.ExtentUtil.boundingSimpleExtent(e);this.xmin=t[0],this.ymin=t[1],this.xmax=t[2],this.ymax=t[3],this.changed()},t.prototype.getCoordinateIndex=function(e){return this.getCoordinates().findIndex(function(t){return t[0]===e[0]&&t[1]===e[1]})},t.prototype.clone=function(){return new t(this.xmin,this.ymin,this.xmax,this.ymax)},s(t,[{key:"geometryType",get:function(){return l.default.EXTENT}},{key:"centerX",get:function(){return(this.xmax+this.xmin)/2}},{key:"centerY",get:function(){return(this.ymax+this.ymin)/2}},{key:"width",get:function(){return Math.abs(this.xmax-this.xmin)}},{key:"height",get:function(){return Math.abs(this.ymax-this.ymin)}},{key:"extent",get:function(){return this}},{key:"xmin",get:function(){return this._xmin},set:function(e){this._xmin=e,this.changed()}},{key:"ymin",get:function(){return this._ymin},set:function(e){this._ymin=e,this.changed()}},{key:"xmax",get:function(){return this._xmax},set:function(e){this._xmax=e,this.changed()}},{key:"ymax",get:function(){return this._ymax},set:function(e){this._ymax=e,this.changed()}},{key:"rings",get:function(){return 0===this._rings.length&&0!==this.xmin&&0!==this.ymin&&0!==this.xmax&&0!==this.ymax&&(this._rings=f.ExtentUtil.minMaxToRing(this.xmin,this.ymin,this.xmax,this.ymax)),this._rings},set:function(e){this._rings=e;var t=f.ExtentUtil.boundingSimpleExtent(e);this.xmin=t[0],this.ymin=t[1],this.xmax=t[2],this.ymax=t[3]}}]),t}(l.default);t.default=c,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),f=n(9),c=r(f),h=n(32),d=n(33),p=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];o(this,t);var r=i(this,e.call(this));return r._rings=[],r._flatInteriorPointRevision=-1,r._flatInteriorPoint=null,r.setCoordinates(n),r}return a(t,e),t.prototype.addRing=function(e){this.rings.push(e),this._extent=null},t.prototype.containsXY=function(e,t){var n=this,r=this.getCoordinates(),o=r[0],i=!1;if(this._inOneRing(e,t,o)&&(i=!0),r.length>1&&i){var a=r.slice(1),s=a.some(function(r){return n._inOneRing(e,t,r)});s&&(i=!1)}return i},t.prototype._inOneRing=function(e,t,n){for(var r=e,o=t,i=!1,a=0,s=n.length,u=s-1;a<s;u=a,a++){var l=n[a][0],f=n[a][1],c=n[u][0],h=n[u][1];if(l===r&&f===o||c===r&&h===o)return!0;if(f<o&&h>=o||f>=o&&h<o){var d=l+(o-f)*(c-l)/(h-f);if(d===r)return!0;d>r&&(i=!i)}}return i},t.prototype.getFlatInteriorPoint=function(){if(this._flatInteriorPointRevision!==this.revision){var e=[this.extent.centerX,this.extent.centerY],t=[2*this.getCoordinates()[0].length],n=this.getOrientedFlatCoordinates();this._flatInteriorPoint=(0,h.linearRings)(n,0,t,this.stride,e,0),this._flatInteriorPointRevision=this.revision}return this._flatInteriorPoint},t.prototype.getOrientedFlatCoordinates=function(){var e=void 0,t=[],n=this.getCoordinates()[0];n.forEach(function(e){t.push(e[0],e[1])});var r=[t.length];return(0,d.linearRingsAreOriented)(t,0,r,this.stride)?e=t:(e=t.slice(),e.length=(0,d.orientLinearRings)(e,0,r,this.stride)),e},t.prototype.hasHoles=function(){return this.getCoordinates().length>1},t.prototype.getCoordinates=function(){return this.rings},t.prototype.getFormShowPosition=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.getCoordinates()[0];if(0!==n.length){var r=n[n.length-2];return[r[0]-e,r[1]-t]}},t.prototype.setCoordinates=function(e){this.rings=e,this._extent=null,this.stride=2,this.changed()},t.prototype.getCoordinateIndex=function(e){for(var t=this.getCoordinates(),n=0,r=t.length;n<r;n++)for(var o=t[n],i=0,a=o.length;i<a;i++){var s=o[i];if(s[0]===e[0]&&s[1]===e[1])return{ringIndex:n,index:i}}return{ringIndex:-1,index:-1}},t.prototype.clone=function(){var e=this.getCoordinates(),n=[],r=[];e.forEach(function(e){e.forEach(function(e){r.push([e[0],e[1]])}),n.push(r),r=[]});var o=new t;return o.setCoordinates(n),o},s(t,[{key:"extent",get:function(){if(null===this._extent){var e=this.getCoordinates();if(e.length>0){var t=e[0],n=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY,a=!0,s=!1,u=void 0;try{for(var l,f=t[Symbol.iterator]();!(a=(l=f.next()).done);a=!0){var h=l.value;n=Math.min(n,h[0]),r=Math.min(r,h[1]),o=Math.max(o,h[0]),i=Math.max(i,h[1])}}catch(e){s=!0,u=e}finally{try{!a&&f.return&&f.return()}finally{if(s)throw u}}this._extent=new c.default(n,r,o,i)}}return this._extent}},{key:"geometryType",get:function(){return l.default.POLYGON}},{key:"rings",get:function(){return this._rings},set:function(e){this._rings=e,this._extent=null}}]),t}(l.default);t.default=p,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){var r=n?n:2,o=l(e.x,e.y,t.x,t.y);return o<=r}function i(e,t,n){for(var r=t.path,o=a,i=e.x,s=e.y,u=!1,l=0,f=r.length-1;l<f;l++){var c=r[l],h=r[l+1],d=o(i,s,c.x,c.y,h.x,h.y);if(d=Math.sqrt(d),d<=n){u=!0;break}}return u}function a(e,t,n,r,o,i){var a=o-n,s=i-r;if(0!==a||0!==s){var u=((e-n)*a+(t-r)*s)/(a*a+s*s);u>1?(n=o,r=i):u>0&&(n+=a*u,r+=s*u)}return l(e,t,n,r)}function s(e,t){var n=c(e,t);return l(e[0],e[1],n[0],n[1])}function u(e,t){for(var n=!0,r=e.length-1;r>=0;--r)if(e[r]!=t[r]){n=!1;break}return n}function l(e,t,n,r){var o=n-e,i=r-t;return o*o+i*i}function f(e,t){return Math.sqrt(l(e[0],e[1],t[0],t[1]))}function c(e,t){var n=e[0],r=e[1],o=t[0],i=t[1],a=o[0],s=o[1],u=i[0],l=i[1],f=u-a,c=l-s,h=0===f&&0===c?0:(f*(n-a)+c*(r-s))/(f*f+c*c||0),d=void 0,p=void 0;return h<=0?(d=a,p=s):h>=1?(d=u,p=l):(d=a+h*f,p=s+h*c),[d,p]}function h(e,t,n,r,o,i){if(0===n.length)return!1;if(!d(e,t,n[0],r,o,i))return!1;var a=void 0,s=void 0;for(a=1,s=n.length;a<s;++a)if(d(e,n[a-1],n[a],r,o,i))return!1;return!0}function d(e,t,n,r,o,i){for(var a=0,s=e[n-r],u=e[n-r+1];t<n;t+=r){var l=e[t],f=e[t+1];u<=i?f>i&&(l-s)*(i-u)-(o-s)*(f-u)>0&&a++:f<=i&&(l-s)*(i-u)-(o-s)*(f-u)<0&&a--,s=l,u=f}return 0!==a}function p(e,t,n,r,o){var i=void 0,a=void 0,s=void 0,u=void 0,l=void 0;return i=n-e,a=r-t,s=Math.sqrt(o*o/(a/i*(a/i)+1)),s=i>0?Math.sqrt(o*o/(a/i*(a/i)+1)):-Math.sqrt(o*o/(a/i*(a/i)+1)),u=n+s,l=r+a/i*s,[u,l]}function y(e){if(!e)return e;var t=void 0,n=e.geometryType;if(n===v.default.POLYGON)t=e.getCoordinates()[0];else if(n===v.default.LINE){t=e.getCoordinates();for(var r=t.slice(1,t.length-2),o=[t[0]],i=0,a=r.length;i<a;i+=2)o.push(r[i]);o.push(t[t.length-1]),e.setCoordinates(o)}}Object.defineProperty(t,"__esModule",{value:!0}),t.pointIntersectPoint=o,t.pointIntersectLine=i,t.squaredSegmentDistance=a,t.squaredDistanceToSegment=s,t.equals=u,t.squaredDistance=l,t.distance=f,t.closestOnSegment=c,t.linearRingsContainsXY=h,t.linearRingContainsXY=d,t.getPointInExtendedLineByDistanceFromAB=p,t.simplify=y;var _=n(1),v=r(_);t.default={linearRingContainsXY:d,linearRingsContainsXY:h,pointIntersectPoint:o,squaredDistance:l,closestOnSegment:c,getPointInExtendedLineByDistanceFromAB:p,equals:u,simplify:y,distance:f}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t){n(this,e),this.propagatinoStopped=!1,this.type=t,this.target=null};t.default=r,r.stopPropagation=function(e){return e.stopPropagation()},r.preventDefault=function(e){return e.preventDefault()},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(44),l=r(u),f=n(17),c=n(2),h=n(48),d=r(h),p=n(6),y=n(4),_=n(1),v=r(_),g=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,e.call(this,n));return r._features=[],r._style=null,r._styleFunction=null,r._featureChangeKeys=new Map,r.style=n.style,n.features&&r.addFeatures(n.features),r.zIndex=n.zIndex||2,r._renderBuffer=void 0!==n.renderBufferValue?n.renderBufferValue:100,r}return a(t,e),t.prototype.clear=function(){if(0!==this._features.length){this._features=[];var e=y.unlistenByKey;this._featureChangeKeys.forEach(function(t){e(t)}),this._featureChangeKeys.clear(),this.dispatchEvent(new d.default(d.default.EventType.CLEAR)),this.dispatchEvent(d.default.EventType.FEATURE_COLLECTION_CHANGED),this.changed()}},t.prototype.findFeature=function(e){var t=this.features;return t.find(function(t){return t.id===e})},t.prototype.addFeatures=function(e){return!!Array.isArray(e)&&(this._addFeaturesInner(e),this.dispatchEvent(d.default.EventType.FEATURE_COLLECTION_CHANGED),void this.changed())},t.prototype.hasFeature=function(e){if(null===e||void 0===e)return!1;var t=e.id,n=this.features,r=n.findIndex(function(e){return e.id===t});return r>-1},t.prototype._addFeaturesInner=function(e){var t=this;e.forEach(function(e){t.hasFeature(e)||(t.features.push(e),t._setupChangeEvents(e.id,e),t.dispatchEvent(new d.default(d.default.EventType.ADD_FEATURE,e)))})},t.prototype.addFeature=function(e){return!!e&&(this._addFeaturesInner([e]),this.dispatchEvent(d.default.EventType.FEATURE_COLLECTION_CHANGED),void this.changed())},t.prototype.forEachFeatureAtPiexl=function(e,t,n,r){var o=this._getCurrentExtentFeatures(),i=this._getIntersectedFeatures(t,o),a=t[0],s=t[1],u={tolerance:r*e.viewState.resolution},l=i.filter(function(e){return e.geometry.containsXY(a,s,u)});return l},t.prototype._getIntersectedFeatures=function(e,t){return t.filter(function(t){return t.geometry.pointInExtent(e)})},t.prototype._getCurrentExtentFeatures=function(){return this.features},t.prototype.removeFeature=function(e){var t=this.features;if(0===t.length)return!1;var n=e.id,r=t.findIndex(function(e){
return e.id===n});r>-1&&(t.splice(r,1),this._featureChangeKeys.delete(n),this.dispatchEvent(new d.default(d.default.EventType.REMOVE_FEATURE,e)),this.dispatchEvent(d.default.EventType.FEATURE_COLLECTION_CHANGED),this.changed())},t.prototype._setupChangeEvents=function(e,t){this._featureChangeKeys.set(e,(0,y.listen)(t,p.EventType.CHANGE,this._handleFeatureChange,this))},t.prototype._handleFeatureChange=function(){this.changed()},t.prototype.loadFeature=function(e){var t=this.features,n=c.ExtentUtil.intersects,r=c.ExtentUtil.createOrUpdate,o=[],i=[],a=[];return t.forEach(function(t){if(t.display){var s=t.geometry,u=s.extent,l=r(u.xmin,u.ymin,u.xmax,u.ymax);if(n(l,e)){var f=s.geometryType;f===v.default.POINT||f===v.default.MULTI_POINT?i.push(t):f===v.default.LINE||f===v.default.MULTI_LINE?a.push(t):o.push(t)}}}),[].concat(o,a,i)},s(t,[{key:"features",get:function(){return this._features}},{key:"style",set:function(e){this._style=void 0!==e?e:f.Style.defaultFunction(),this._styleFunction=null===e?void 0:f.Style.createFunction(this._style)},get:function(){return null===this._style&&(this._style=f.Style.defaultFunction()),this._style}},{key:"renderBuffer",get:function(){return this._renderBuffer},set:function(e){this._renderBuffer!==e&&(this._renderBuffer=e)}},{key:"styleFunction",get:function(){return this._styleFunction}}]),t}(l.default);t.default=g,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return e.type===l.default.SINGLE_CLICK}function i(e){return e.type===l.default.MOUSE_WHEEL||e.type===l.default.WHEEL}function a(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey}function s(e){var t=e.originalEvent.target,n=t.tagName;return"INPUT"!==n&&"SELECT"!==n&&"TEXTAREA"!==n}Object.defineProperty(t,"__esModule",{value:!0}),t.singleClick=o,t.mouseWheel=i,t.noModifierKeys=a,t.targetNotEditable=s;var u=n(5),l=r(u);t.default={singleClick:o,mouseWheel:i,noModifierKeys:a,targetNotEditable:s}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){n(this,e)}return e.getValues=function(e){var t=[];for(var n in e)t.push(e[n]);return t},e.clear=function(e){for(var t in e)Reflect.deleteProperty(e,t)},e.objectToMap=function(e){var t=new Map,n=!0,r=!1,o=void 0;try{for(var i,a=Object.keys(e)[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;t.set(s,e[s])}}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return t},e.mapToObject=function(e){if(void 0===e||null===e)return{};var t={};return e.forEach(function(e,n){t[n]=e}),t},e}();t.default=r,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(35),l=r(u),f=n(26),c=r(f),h=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[255,255,255],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.SOLID,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:t.LineCap.BUTT,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:t.LineJion.MITER,f=arguments.length>6&&void 0!==arguments[6]?arguments[6]:10;o(this,t);var h=i(this,e.call(this,n,s,r));return h.width=a,h.lineCap=u,h.lineJion=l,h.miterLimit=f,h.textStyle=new c.default,h}return a(t,e),t.prototype.clone=function(){var e=new t(this.color,this.alpha,this.width,this.style,this.lineCap,this.lineJion,this.miterLimit);return this.textStyle&&(e.textStyle=this.textStyle),e},s(t,[{key:"width",get:function(){return this._width},set:function(e){this._width=e}},{key:"lineCap",set:function(e){this._lineCap=e},get:function(){return this._lineCap}},{key:"lineJion",set:function(e){this._lineJion=e},get:function(){return this._lineJion}},{key:"miterLimit",set:function(e){this._miterLimit=e},get:function(){return this._miterLimit}}]),t}(l.default);t.default=h,h.SOLID="solid",h.DASH="dash",h.DOT="dot",h.DASHDOT="dashdot",h.DASHDOTDOT="dashdotdot",h.NULL="none",h.LineCap={BUTT:"butt",ROUND:"round",SQUARE:"square"},h.LineJion={MITER:"miter",BEVEL:"bevel",ROUND:"round"},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Style=void 0;var o=n(1),i=r(o),a=n(52),s=r(a),u=n(16),l=r(u),f=n(53),c=r(f),h=t.Style={};h.defaultFunction=function(){if(!h._default){var e=[255,255,255],t=[0,153,255],n=1.5;h._default={},h._default[i.default.POLYGON]=[new s.default(e,new l.default(t,1,1.25),.2)],h._default[i.default.MULTI_POLYGON]=h._default[i.default.POLYGON],h._default[i.default.PARALLELOGRAM]=h._default[i.default.POLYGON],h._default[i.default.EXTENT]=h._default[i.default.POLYGON],h._default[i.default.LINE]=[new l.default(t,1,n)],h._default[i.default.POINT]=[new c.default(10,e,1,new l.default(t,1,n))]}return h._default},h.createDefaultEditing=function(){var e={},t=[255,255,255],n=[0,153,255],r=1.5;return e[i.default.POLYGON]=[new s.default(t,new l.default(n,1,1),.2)],e[i.default.MULTI_POLYGON]=e[i.default.POLYGON],e[i.default.EXTENT]=e[i.default.POLYGON],e[i.default.PARALLELOGRAM]=e[i.default.POLYGON],e[i.default.LINE]=[new l.default(t,1,r+1,l.default.LineCap.ROUND,l.default.LineJion.ROUND),new l.default(n,1,r,l.default.LineCap.ROUND,l.default.LineJion.ROUND)],e[i.default.MULTI_LINE]=e[i.default.LINE],e[i.default.POINT]=[new c.default(10,t,.1,new l.default(n,1,2))],e[i.default.MULTI_POINT]=e[i.default.POINT],e},h.createDefaultSelecting=function(){var e={},t=[255,255,255],n=[0,153,255],r=3,o=new l.default(t,1,r+2,l.default.LineCap.ROUND,l.default.LineJion.ROUND),a=new l.default(n,1,r,l.default.LineCap.ROUND,l.default.LineJion.ROUND);return e[i.default.POLYGON]=[new s.default(t,o,.5),new s.default(t,a,0)],e[i.default.MULTI_POLYGON]=e[i.default.POLYGON],e[i.default.EXTENT]=e[i.default.POLYGON],e[i.default.LINE]=[o,a],e[i.default.MULTI_LINE]=e[i.default.LINE],e[i.default.POINT]=[new c.default(12,n,1,new l.default(n,1,1))],e[i.default.MULTI_POINT]=e[i.default.POINT],e},h.createFunction=function(e){var t=void 0;if("function"==typeof e)t=e;else{var n=void 0;n=Array.isArray(e)?e:[e],t=function(e){return n[0][e.geometry.geometryType]}}return t},t.default={Style:h}},function(e,t){"use strict";function n(e,t){var n=document.createElement("CANVAS");return e&&(n.width=e),t&&(n.height=t),n.getContext("2d")}function r(e){var t=e.offsetWidth,n=getComputedStyle(e);return t+=parseInt(n.marginLeft,10)+parseInt(n.marginRight,10)}function o(e){var t=e.offsetHeight,n=getComputedStyle(e);return t+=parseInt(n.marginTop,10)+parseInt(n.marginBottom,10)}function i(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}function a(e){for(;e.lastChild;)e.removeChild(e.lastChild)}Object.defineProperty(t,"__esModule",{value:!0}),t.createCanvasContext2D=n,t.outerWidth=r,t.outerHeight=o,t.removeNode=i,t.removeChildren=a,t.default={createCanvasContext2D:n,outerWidth:r,outerHeight:o,removeChildren:a,removeNode:i}},function(e,t){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e[0];n!=(0|n)&&(n=n+.5|0);var r=e[1];r!=(0|r)&&(r=r+.5|0);var o=e[2];return o!=(0|o)&&(o=o+.5|0),"rgba("+n+", "+r+" , "+o+" , "+t+" )"}Object.defineProperty(t,"__esModule",{value:!0}),t.colorToString=n,t.default={colorToString:n}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(3),l=r(u),f=n(18),c=n(4),h=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,e.call(this));return r._element=n.element?n.element:null,r._target=null,r._map=null,r._listenerKeys=[],n.target&&(r.target=n.target),r}return a(t,e),s(t,[{key:"map",get:function(){return this._map},set:function(e){if(this.map&&(0,f.removeNode)(this._element),this._listenerKeys.forEach(function(e){return(0,c.unlistenByKey)(e)}),this._listenerKeys.length=0,this._map=e,this._map){var t=this._target?this._target:e.overlayContainerStopEvent;t.appendChild(this._element),e.render()}}},{key:"target",set:function(e){this._target="string"==typeof e?document.getElementById(e):e}}]),t}(l.default);t.default=h,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),f=n(10),c=r(f),h=n(11),d=function(e){function t(n){return o(this,t),i(this,e.call(this,n))}return a(t,e),t.prototype.getCoordinateIndex=function(e){return this.getCoordinates()[0].findIndex(function(t){return t[0]===e[0]&&t[1]===e[1]})},t.prototype.clone=function(){return new t(this.getCoordinates())},t.getTheLastPoint=function(e){var t=e[0],n=e[1],r=e[2],o=r[0]-n[0],i=r[1]-n[1];return[t[0]+o,t[1]+i]},t.updateCoordinatesForModification=function(e,t,n,r){var o=0;n&&(o=(0,h.distance)(n,t));var i=e.getCoordinates();if(0===o)return i;var a=i[0],s=r[0],u=s.index,l=void 0,f=void 0,c=void 0;0===u||4===u?(l=a[3],f=a[0],c=a[1]):(l=a[u-1],f=a[u],c=a[u+1]);var d=(0,h.getPointInExtendedLineByDistanceFromAB)(l[0],l[1],f[0],f[1],o),p=f[0]-l[0],y=f[1]-l[1],_=t[0]-n[0],v=t[1]-n[1],g=_*p+v*y,m=d[0]-f[0],b=d[1]-f[1],E=void 0;return g<0?(d[0]=f[0]-m,d[1]=f[1]-b,E=[c[0]-m,c[1]-b]):E=[c[0]+m,c[1]+b],a[u]=d,a[u+1]=E,0===u?a[4]=a[0]:4!==u&&3!==u||(a[0]=a[4]),[a]},s(t,[{key:"geometryType",get:function(){return l.default.PARALLELOGRAM}}]),t}(c.default);t.default=d,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),f=n(9),c=r(f),h=n(2),d=n(11),p=function(e){function t(n,r){o(this,t);var a=i(this,e.call(this));return a.x=n,a.y=r,a}return a(t,e),t.prototype.offset=function(e,n){return new t(this.x+e,this.y+n)},t.prototype.containsXY=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.tolerance?n.tolerance:2,o=this,i=(0,d.squaredDistance)(o.x,o.y,e,t);return Math.sqrt(i/2)<=r},t.prototype.update=function(e,t){this.x=e,this.y=t,this._extent=null},t.prototype.getFlatInteriorPoint=function(){return this.getCoordinates()},t.prototype.getCoordinates=function(){return[this.x,this.y]},t.prototype.getFormShowPosition=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return[this.x-e,this.y-t]},t.prototype.setCoordinates=function(e){this.update(e[0],e[1]),this.changed()},t.prototype.getCoordinateIndex=function(){return 0},t.prototype.equal=function(e){var t=!1;return null!==e&&(t=this.x===e.x&&this.y===e.x||Number.isNaN(this.x)&&Number.isNaN(this.y)&&Number.isNaN(e.x)&&Number.isNaN(e.y)),t},t.prototype.clone=function(){return new t(this.x,this.y)},s(t,[{key:"geometryType",get:function(){return l.default.POINT}},{key:"extent",get:function(){if(!this._extent){var e=h.ExtentUtil.createScaleExtent(this,8);this._extent=new c.default(e[0],e[1],e[2],e[3])}return this._extent}},{key:"x",get:function(){return this._x},set:function(e){this._x=e}},{key:"y",get:function(){return this._y},set:function(e){this._y=e}}]),t}(l.default);t.default=p,e.exports=t.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.ImageState={};n.IDLE=0,n.LOADING=1,n.LOADED=2,n.ERROR=3,t.default={ImageState:n}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(3),f=r(l),c=n(15),h=r(c),d=n(4),p=n(6),y=n(1),_=r(y),v=n(16),g=r(v),m=function(e){function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments[2],s=arguments[3];o(this,t);var u=i(this,e.call(this));return u._styleFunction=void 0,u._geometryChangeKey=null,u.geometry=n,u.initArribute(r),u.style=s,u.displayText=a,u.display=!0,u.textDisplay=!0,u.styleHighLight=!1,u}return a(t,e),t.prototype._handleGeometryChanged=function(){this.changed()},t.prototype.initArribute=function(e){e instanceof Object||(e={}),this._attributesMap=h.default.objectToMap(e)},t.prototype.get=function(e){if(this._attributesMap.has(e))return this._attributesMap.get(e)},t.prototype.set=function(e,t){return this._attributesMap.set(e,t)},t.prototype.delete=function(e){return this._attributesMap.delete(e)},t.prototype.forEachAttribute=function(e){this._attributesMap.forEach(e)},t.prototype.has=function(e){return this._attributesMap.has(e)},t.prototype.cloneAttributesMap=function(){var e=new Map;if(0!==this._attributesMap.size){var t=this._attributesMap.entries(),n=!0,r=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var u=s(i.value,2),l=u[0],f=u[1];e.set(l,f)}}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}}return e},t.prototype.clone=function(){var e=void 0;if(this.style){var n=void 0;n=Array.isArray(this.style)?this.style[0].clone():this.style.clone(),e=[n]}return new t(this.geometry.clone(),this.cloneAttributesMap(),this.displayText,e)},u(t,[{key:"geometry",get:function(){return this._geometry},set:function(e){e&&(this._geometry=e,this._geometryChangeKey&&(0,d.unlistenByKey)(this._geometryChangeKey),this._geometryChangeKey=(0,d.listen)(e,p.EventType.CHANGE,this._handleGeometryChanged,this))}},{key:"styleFunction",get:function(){return this._styleFunction},set:function(e){this._styleFunction=e}},{key:"style",get:function(){return this._style},set:function(e){this._style=e}},{key:"displayText",get:function(){return this._displayText},set:function(e){this._displayText=e}},{key:"styleHighLight",get:function(){return this._styleHighLight},set:function(e){if(this._styleHighLight!==e&&(this._styleHighLight=e,void 0!==this.style)){for(var t=[255,255,255],n=[],r=0,o=this.style.length;r<o;r++){var i=this.style[r];n.push(i.clone())}if(this._styleHighLight){this.set("_originStyle",this.style);var a=this.geometry.geometryType;if(a===_.default.LINE){var s=n[0];s.width=s.width+1;var u=s.clone();u.width=u.width+1,u.color=t,n.unshift(u)}else if(a===_.default.POLYGON||a===_.default.MULTI_POLYGON||a===_.default.PARALLELOGRAM||a===_.default.EXTENT){var l=n[0];l.borderStyle.width=l.borderStyle.width+1;var f=l.clone();f.alpha=0,f.borderStyle.width=l.borderStyle.width+1,f.borderStyle.color=t,f.borderStyle.lineCap=g.default.LineCap.ROUND,f.borderStyle.lineJion=g.default.LineJion.ROUND,n.unshift(f)}else if(a===_.default.POINT){var c=n[0];c.size=c.size+3,c.borderStyle.width=c.borderStyle.width+1}this.style=n}else this.get("_originStyle")&&(this.style=this.get("_originStyle"),this.delete("_originStyle"));this.changed()}}},{key:"display",get:function(){return this._display},set:function(e){this._display!==e&&(this._display=e,this.changed())}},{key:"textDisplay",get:function(){return this._textDisplay},set:function(e){this._textDisplay!==e&&(this._textDisplay=e,this.changed())}}]),t}(f.default);t.default=m,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(3),l=r(u),f=n(27),c=n(7),h=function(e){function t(n){o(this,t);var r=i(this,e.call(this));return r._context=n,r._pixelCoordinates=null,r.renderedTransform=c.Transform.create(),r}return a(t,e),t.prototype.resetRenderOption=function(){this._pixelCoordinates=null,this.renderedTransform=c.Transform.create()},t.prototype.equalsTransform=function(e,t){return(0,f.equals)(e,t)},t.prototype.render=function(e,t,n){},s(t,[{key:"context",get:function(){return this._context}}]),t}(l.default);t.default=h,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(3),l=r(u),f=function(e){function t(n){o(this,t);var r=i(this,e.call(this)),a=n||{};return r.text=a.text||"",r.font=a.font||t.DEFAULT_FONT,r.rotation=a.rotation||0,r.rotateWithView=a.rotateWithView,r.scale=a.scale||t.DEFAULT_SCALE,r.textAlign=a.textAlign||t.DEFAULT_TEXT_ALIGN,r.textBaseline=a.textBaseline||t.DEFAULT_BASE_LINE,r.fill=void 0!==a.fill?a.fill:t.DEFAULT_FILL_COLOR,r.stroke=void 0!==a.stroke?a.stroke:t.DEFAULT_STROKE,r.offsetX=void 0!==a.offsetX?a.offsetX:0,r.offsetY=void 0!==a.offsetY?a.offsetY:0,r}return a(t,e),t.prototype.clone=function(){return new t({font:this.font,rotation:this.rotation,rotateWithView:this.rotateWithView,scale:this.scale,text:this.text,textAlign:this.textAlign,textBaseline:this.textBaseline,fill:this.fill?this.fill.clone:void 0,stroke:this.stroke?this.stroke.clone:void 0,offsetX:this.offsetX,offsetY:this.offsetY})},s(t,[{key:"text",get:function(){return this._text},set:function(e){this._text=e}},{key:"font",get:function(){return this._font},set:function(e){this._font=e}},{key:"rotation",get:function(){return this._rotation},set:function(e){this._rotation=e}},{key:"rotateWithView",get:function(){return this._rotateWithView},set:function(e){this._rotateWithView=e}},{key:"scale",get:function(){return this._scale},set:function(e){this._scale=e}},{key:"textAlign",get:function(){return this._textAlign},set:function(e){this._textAlign=e}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(e){this._textBaseline=e}},{key:"fill",get:function(){return this._fill},set:function(e){this._fill=e}},{key:"stroke",get:function(){return this._stroke},set:function(e){this._stroke=e}},{key:"offsetX",get:function(){return this._offsetX},set:function(e){this._offsetX=e}},{key:"offsetY",get:function(){return this._offsetY},set:function(e){this._offsetY=e}}]),t}(l.default);t.default=f,f.DEFAULT_STROKE={color:[255,255,255],width:2,lineCap:"round",lineJion:"round"},f.DEFAULT_FILL_COLOR=[0,0,255],f.DEFAULT_FONT="bold 12px Arial",f.DEFAULT_TEXT_ALIGN="center",f.DEFAULT_BASE_LINE="middle",f.DEFAULT_SCALE=10,e.exports=t.default},function(e,t){"use strict";function n(e,t,n){var r=e.length;if(e[0]<=t)return 0;if(t<=e[r-1])return r-1;var o=void 0;if(n>0){for(o=1;o<r;++o)if(e[o]<t)return o-1}else if(n<0){for(o=1;o<r;++o)if(e[o]<=t)return o}else for(o=1;o<r;++o){if(e[o]==t)return o;if(e[o]<t)return e[o-1]-t<t-e[o]?o-1:o}return r-1}function r(e,t){var n=e.length,r=Array(e.length),o=void 0;for(o=0;o<n;o++)r[o]={index:o,value:e[o]};for(r.sort(function(e,n){return t(e.value,n.value)||e.index-n.index}),o=0;o<e.length;o++)e[o]=r[o].value}function o(e,t,n){for(var r=void 0,o=void 0,i=n||a,s=0,u=e.length,l=!1;s<u;)r=s+(u-s>>1),o=+i(e[r],t),o<0?s=r+1:(u=r,l=!o);return l?s:~s}function i(e,t){var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function a(e,t){return e>t?1:e<t?-1:0}Object.defineProperty(t,"__esModule",{value:!0}),t.linearFindNearest=n,t.stableSort=r,t.binarySearch=o,t.equals=i,t.numberSafeCompareFunction=a},function(e,t){"use strict";function n(e,t,n){return Math.min(Math.max(e,t),n)}function r(e,t,n){return e+n*(t-e)}Object.defineProperty(t,"__esModule",{value:!0}),t.clamp=n,t.lerp=r,t.default={clamp:n,lerp:r}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=e.geometryType,r=!1;if(n===a.default.POLYGON||n===a.default.MULTI_POLYGON||n===a.default.EXTENT){var o=t.geometryType;if(o===a.default.POINT)return e.containsXY(t.x,t.y);if(o===a.default.LINE)return l(e,t);if(o===a.default.POLYGON)return f(e,t);if(o===a.default.PARALLELOGRAM)return f(e,new u.default(t.getCoordinates()))}return r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=n(1),a=r(i),s=n(10),u=r(s),l=function(e,t){var n=t.getCoordinates();return c(e,n)},f=function(e,t){var n=t.geometryType;if(n===a.default.POLYGON){var r=t.getCoordinates()[0];return c(e,r)}return n===a.default.MULTI_POLYGON},c=function(e,t){var n=t.some(function(t){return!e.containsXY(t[0],t[1])});return!n};e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),f=n(9),c=r(f),h=n(11),d=n(32),p=function(e){function t(n){o(this,t);var r=i(this,e.call(this));return r._flatInteriorPointRevision=-1,r._flatInteriorPoint=null,r._path=[],r.addPath(n),r}return a(t,e),t.prototype.addPath=function(e){this.path.push(e),this._extent=null,this.changed()},t.prototype.forEachSegment=function(e,t){this.path.forEach(e,t)},t.prototype.containsXY=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.tolerance?n.tolerance:2,o=this.path,i=h.squaredSegmentDistance,a=!1,s=0,u=o.length-1;s<u;s++){var l=o[s],f=o[s+1],c=i(e,t,l[0],l[1],f[0],f[1]);if(c=Math.sqrt(c),c<=r){a=!0;break}}return a},t.prototype.getFlatInteriorPoint=function(){if(this._flatInteriorPointRevision!==this.revision){var e=null,t=.5,n=[],r=this.getCoordinates();r.forEach(function(e){n.push(e[0],e[1])}),this._flatInteriorPoint=(0,d.lineString)(n,0,n.length,this.stride,t,e),this._flatInteriorPointRevision=this.revision}return this._flatInteriorPoint},t.prototype.getCoordinates=function(){return this.path},t.prototype.getFormShowPosition=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.getCoordinates();if(0===n.length)return null;var r=n[n.length-1];return[r[0]-e,r[1]-t]},t.prototype.setCoordinates=function(e){this.path=e,this._extent=null,this.changed()},t.prototype.getCoordinateIndex=function(e){return this.getCoordinates().findIndex(function(t){return t[0]===e[0]&&t[1]===e[1]})},t.prototype.clone=function(){var e=this.getCoordinates();this.getCoordinates().forEach(function(t){e.push([t[0],t[1]])});var n=new t;return n.setCoordinates(e),n},s(t,[{key:"geometryType",get:function(){return l.default.LINE}},{key:"extent",get:function(){var e=this;if(null===e._extent){var t=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY,i=e.getCoordinates(),a=!0,s=!1,u=void 0;try{for(var l,f=i[Symbol.iterator]();!(a=(l=f.next()).done);a=!0){var h=l.value;t=Math.min(t,h[0]),n=Math.min(n,h[1]),r=Math.max(r,h[0]),o=Math.max(o,h[1])}}catch(e){s=!0,u=e}finally{try{!a&&f.return&&f.return()}finally{if(s)throw u}}e._extent=new c.default(t,n,r,o)}return e._extent}},{key:"path",get:function(){return this._path},set:function(e){this._path=e,this._extent=null}},{key:"length",get:function(){for(var e=this.getCoordinates(),t=0,n=0,r=e.length;n<r-1;n++){var o=e[n],i=e[n+1];t+=(0,h.distance)(o,i)}return t}}]),t}(l.default);t.default=p,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),f=r(l),c=n(10),h=r(c),d=n(9),p=r(d),y=n(32),_=n(33),v=function(e){function t(n){i(this,t);var r=a(this,e.call(this));return r._polygons=[],r.stride=2,r._flatInteriorPointRevision=-1,r._flatInteriorPoint=null,r.setCoordinates(n),r}return s(t,e),t.prototype.getCoordinates=function(){return this._polygons},t.prototype.setCoordinates=function(e){this._polygons=e,this._extent=null,this.changed()},t.prototype.getPolygon=function(e){if(e<0&&this._polygons.length<e)return null;var t=this._polygons[e],n=[],r=[];t.forEach(function(e){e.forEach(function(e){r.push([e[0],e[1]])}),n.push(r),r=[]});var o=new h.default(n);return o},t.prototype.containsXY=function(e,t){for(var n=this._polygons,r=0,o=n.length;r<o;r++){var i=this.getPolygon(r);if(i.containsXY(e,t))return!0}return!1},t.prototype.getFlatInteriorPoint=function(){if(this._flatInteriorPointRevision!==this.revision){this._flatInteriorPointRevision=this.revision;var e=this._polygons,t=[],n=[],r=[];e.forEach(function(e){var t=e[0];r.push(t)}),r.sort(function(e,t){return e.length-t.length});var o=0;r.forEach(function(e){var r=2*e.length+o;n.push([r]),o=r,e.forEach(function(e){t.push(e[0],e[1])})});var i=(0,y.centerLinearRingss)(t,0,n,this.stride);this._flatInteriorPoint=(0,y.linearRingss)(this.getOrientedFlatCoordinates(t,n),0,n,this.stride,i)}return this._flatInteriorPoint},t.prototype.getOrientedFlatCoordinates=function(e,t){
var n=void 0;return(0,_.linearRingssAreOriented)(e,0,t,this.stride)?n=e:(n=[].concat(o(e)),n.length=(0,_.orientLinearRingss)(n,0,t,this.stride)),n},t.prototype.getCoordinateIndex=function(e){for(var t=this.getCoordinates(),n=0,r=t.length;n<r;n++)for(var o=t[n],i=0,a=o.length;i<a;i++)for(var s=o[i],u=0,l=s.length;u<l;u++){var f=s[u];if(f[0]===e[0]&&f[1]===e[1])return{polygonIndex:n,ringIndex:i,index:u}}return{polygonIndex:-1,ringIndex:-1,index:-1}},t.prototype.clone=function(){var e=[];this._polygons.forEach(function(t){var n=[],r=[];t.forEach(function(e){e.forEach(function(e){r.push([e[0],e[1]])}),n.push(r)}),e.push(n),n=[]});var n=new t(e);return n},u(t,[{key:"geometryType",get:function(){return f.default.MULTI_POLYGON}},{key:"extent",get:function(){if(null===this._extent){var e=this.getCoordinates();if(e.length>0){var t=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY;e.forEach(function(e){var i=e[0],a=!0,s=!1,u=void 0;try{for(var l,f=i[Symbol.iterator]();!(a=(l=f.next()).done);a=!0){var c=l.value;t=Math.min(t,c[0]),n=Math.min(n,c[1]),r=Math.max(r,c[0]),o=Math.max(o,c[1])}}catch(e){s=!0,u=e}finally{try{!a&&f.return&&f.return()}finally{if(s)throw u}}}),this._extent=new p.default(t,n,r,o)}}return this._extent}}]),t}(f.default);t.default=v,e.exports=t.default},function(e,t,n){"use strict";function r(e,t,n,r,o,i){var a=NaN,u=NaN,f=(n-t)/r;if(1===f)a=e[t],u=e[t+1];else if(2==f)a=(1-o)*e[t]+o*e[t+r],u=(1-o)*e[t+1]+o*e[t+r+1];else if(0!==f){var c=e[t],h=e[t+1],d=0,p=[0],y=void 0;for(y=t+r;y<n;y+=r){var _=e[y],v=e[y+1];d+=Math.sqrt((_-c)*(_-c)+(v-h)*(v-h)),p.push(d),c=_,h=v}var g=o*d,m=(0,s.binarySearch)(p,g);if(m<0){var b=(g-p[-m-2])/(p[-m-1]-p[-m-2]),E=t+(-m-2)*r;a=(0,l.lerp)(e[E],e[E+r],b),u=(0,l.lerp)(e[E+1],e[E+r+1],b)}else a=e[t+m*r],u=e[t+m*r+1]}return i?(i[0]=a,i[1]=u,i):[a,u]}function o(e,t,n,r,o,i,a){var l=void 0,f=void 0,c=void 0,h=void 0,d=void 0,p=void 0,y=void 0,_=o[i+1],v=[],g=n[0];for(h=e[g-r],p=e[g-r+1],l=t;l<g;l+=r)d=e[l],y=e[l+1],(_<=p&&y<=_||p<=_&&_<=y)&&(c=(_-p)/(y-p)*(d-h)+h,v.push(c)),h=d,p=y;var m=NaN,b=-(1/0);for(v.sort(s.numberSafeCompareFunction),h=v[0],l=1,f=v.length;l<f;++l){d=v[l];var E=Math.abs(d-h);E>b&&(c=(h+d)/2,(0,u.linearRingsContainsXY)(e,t,n,r,c,_)&&(m=c,b=E)),h=d}return isNaN(m)&&(m=o[i]),a?(a.push(m,_),a):[m,_]}function i(e,t,n,r,i){var a=[],s=void 0,u=void 0;for(s=0,u=n.length;s<u;++s){var l=n[s];a=o(e,t,l,r,i,2*s,a),t=l[l.length-1]}return a}function a(e,t,n,r){var o=[],i=void 0,a=void 0,s=f.ExtentUtil.createEmpty();for(i=0,a=n.length;i<a;++i){var u=n[i];s=f.ExtentUtil.createOrUpdateFromFlatCoordinates(e,t,u[0],r),o.push((s[0]+s[2])/2,(s[1]+s[3])/2),t=u[u.length-1]}return o}Object.defineProperty(t,"__esModule",{value:!0}),t.lineString=r,t.linearRings=o,t.linearRingss=i,t.centerLinearRingss=a;var s=n(27),u=n(11),l=n(28),f=n(2)},function(e,t){"use strict";function n(e,t,n,o,i){var a=void 0,s=void 0;for(a=0,s=n.length;a<s;++a)t=r(e,t,n[a],o,i);return t}function r(e,t,n,r,o){var i=void 0!==o&&o,s=void 0,u=void 0;for(s=0,u=n.length;s<u;++s){var l=n[s],f=a(e,t,l,r),c=0===s?i&&f||!i&&!f:i&&!f||!i&&f;c&&(e=e.reverse()),t=l}return t}function o(e,t,n,r,o){var a=void 0,s=void 0;for(a=0,s=n.length;a<s;++a)if(!i(e,t,n[a],r,o))return!1;return!0}function i(e,t,n,r,o){var i=void 0!==o&&o,s=void 0,u=void 0;for(s=0,u=n.length;s<u;++s){var l=n[s],f=a(e,t,l,r);if(0===s){if(i&&f||!i&&!f)return!1}else if(i&&!f||!i&&f)return!1;t=l}return!0}function a(e,t,n,r){for(var o=0,i=e[n-r],a=e[n-r+1];t<n;t+=r){var s=e[t],u=e[t+1];o+=(s-i)*(u+a),i=s,a=u}return o>0}Object.defineProperty(t,"__esModule",{value:!0}),t.orientLinearRingss=n,t.orientLinearRings=r,t.linearRingssAreOriented=o,t.linearRingsAreOriented=i,t.linearRingIsClockwise=a},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.Config={};n.DEBUG=!0,n.DEFAULT_ZOOM_FACTOR=2,n.DEFAULT_MAX_ZOOM=10,n.DEFAULT_MIN_ZOOM=0,n.MOUSE_WHEEL_ZOOM_MAXDELTA=1,n.DEFAULT_TILE_SIZE=256,t.default={Config:n}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(3),l=r(u),f=function(e){function t(n,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;o(this,t);var s=i(this,e.call(this));return s.color=n,s.style=r,s.alpha=a,s.textStyle=null,s}return a(t,e),t.prototype.clone=function(){},s(t,[{key:"color",get:function(){return this._color},set:function(e){this._color=e}},{key:"style",get:function(){return this._style},set:function(e){this._style=e}},{key:"alpha",get:function(){return this._alpha},set:function(e){return this._alpha=e}},{key:"textStyle",get:function(){return this._textStyle},set:function(e){this._textStyle=e}}]),t}(l.default);t.default=f,e.exports=t.default},function(e,t){"use strict";function n(){return r++}Object.defineProperty(t,"__esModule",{value:!0}),t.getUid=n;var r=0;t.default={getUid:n}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(8),u=r(s),l=n(14),f=n(55),c=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,e.call(this));return r.applyHandleEventOption({handleDownEvent:r._handleDownEvent,handleDragEvent:r._handleDragEvent}),r.targetPointers=[],r.lastCentroid=null,r._kinetic=n.kinetic,r.lastCentroid=null,r._lastPointersCount=null,r._condition=n.condition?n.condition:l.noModifierKeys,r._noKinetic=!1,r}return a(t,e),t.prototype._handleDownEvent=function(e){return!!(this.targetPointers.length>0&&this._condition(e))&&(this.lastCentroid=null,this._kinetic&&this._kinetic.begin(),this._noKinetic=this.targetPointers.length>1,!0)},t.prototype._handleDragEvent=function(e){var t=this.targetPointers,n=this.centroid(t);if(t.length===this._lastPointersCount){if(this._kinetic&&this._kinetic.update(n[0],n[1]),this.lastCentroid){var r=this.lastCentroid[0]-n[0],o=this.lastCentroid[1]-n[1],i=e.map,a=i.view,s=a.getViewState(),u=[r,o];f.Coordinate.scale(u,s.resolution),f.Coordinate.rotate(u,s.rotation),f.Coordinate.add(u,s.center),a.center=u}}else this._kinetic&&this._kinetic.begin();this.lastCentroid=n,this._lastPointersCount=t.length},t.prototype.centroid=function(e){for(var t=e.length,n=0,r=0,o=0;o<t;o++)n+=e[o].originalEvent.clientX,r+=e[o].originalEvent.clientY;return[n/t,r/t]},t}(u.default);t.default=c,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(12),u=r(s),l=function(e){function t(n,r){o(this,t);var a=i(this,e.call(this,n));return a.feature=r,a}return a(t,e),t}(u.default);t.default=l,l.EventType={DRAW_START:"drawstart",DRAW_END:"drawend"},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(12),u=r(s),l=function(e){function t(n,r,a){o(this,t);var s=i(this,e.call(this,n));return s.features=r,s.browserEvent=a,s}return a(t,e),t}(u.default);t.default=l,l.EventType={MODIFY_START:"modifystart",MODIFY_END:"modifyend"},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(8),u=r(s),l=n(5),f=r(l),c=n(34),h=n(14),d=n(28),p=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,e.call(this));return r._delta=0,r._useAnchor=void 0===n.useAnchor||n.useAnchor,r._duration=void 0!==n.duration?n.duration:250,r._lastAnchor=null,r._startTime=void 0,r._timeout=void 0!==n.timeout?n.timeout:80,r._timeoutId=void 0,r._mode=void 0,r}return a(t,e),t.prototype.handleMouseEvent=function(e){var t=this;if(!(0,h.mouseWheel)(e))return!0;e.preventDefault();var n=e.map,r=e.originalEvent;this._useAnchor&&(this._lastAnchor=e.coordinate);var o=void 0;if(e.type==f.default.WHEEL?o=r.deltaY:e.type==f.default.MOUSE_WHEEL&&(o=-r.wheelDeltaY),0===o)return!1;var i=Date.now();void 0===this._startTime&&(this._startTime=i),this._delta+=o;var a=Math.max(this._timeout-(i-this._startTime),0);return clearTimeout(this._timeoutId),this._timeoutId=setTimeout(function(){return t._handleWheelZoom(n)},a),!1},t.prototype._handleWheelZoom=function(e){var t=e.view,n=c.Config.MOUSE_WHEEL_ZOOM_MAXDELTA,r=(0,d.clamp)(this._delta,-n,n);this.zoomByDelta(t,-r,this._lastAnchor,this._duration),this._mode=void 0,this._delta=0,this._lastAnchor=null,this._startTime=void 0,this._timeoutId=void 0},t}(u.default);t.default=p,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(12),u=r(s),l=function(e){function t(n,r,a){o(this,t);var s=i(this,e.call(this,n));return s.selectedFeatures=r,s.browserEvent=a,s}return a(t,e),t}(u.default);t.default=l,l.EventType={SELECT:"select"},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(20),u=r(s),l=n(5),f=r(l),c=n(4),h=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=void 0!==n.className?n.className:"dt-zoom",a=void 0!==n.delta?n.delta:1,s=void 0!==n.zoomInLabel?n.zoomInLabel:"+",u=void 0!==n.zoomOutLabel?n.zoomOutLabel:"",l=void 0!==n.zoomInTipLabel?n.zoomInTipLabel:"",h=void 0!==n.zoomOutTipLabel?n.zoomOutTipLabel:"",d=document.createElement("button");d.className=r+"-in",d.setAttribute("type","button"),d.title=l,d.appendChild("string"==typeof s?document.createTextNode(s):s);var p=document.createElement("button");p.className=r+"-out",p.setAttribute("type","button"),p.title=h,p.appendChild("string"==typeof u?document.createTextNode(u):u);var y=r+" dt-unselectable dt-control",_=document.createElement("div");_.className=y,_.appendChild(d),_.appendChild(p);var v=i(this,e.call(this,{element:_,target:n.target}));return v._delta=a,(0,c.listen)(d,f.default.CLICK,v._handleClick,v),(0,c.listen)(p,f.default.CLICK,v._handleClickIn,v),v}return a(t,e),t.prototype._handleClickIn=function(e){e.preventDefault(),this._zoomByDelta(-this._delta)},t.prototype._handleClick=function(e){e.preventDefault(),this._zoomByDelta(this._delta)},t.prototype._zoomByDelta=function(e){var t=this.map,n=t.view;if(n){var r=n.resolution;if(r){var o=n.constrainResolution(r,e);n.resolution=o}}},t}(u.default);t.default=h,e.exports=t.default},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){n(this,e),this._pendingRemovals={},this._listeners={},this._dispatching={},this.nullFunction=function(){}}return e.prototype.getListeners=function(e){return this._listeners[e]},e.prototype.hasListener=function(e){return e?Reflect.has(this._listeners,e):Object.keys(this._listeners).length>0},e.prototype.removeEventListener=function(e,t){var n=this._listeners[e];if(n){var r=n.indexOf(t);Reflect.has(this._pendingRemovals,e)?(n[r]=this.nullFunction,++this._pendingRemovals[e]):(n.splice(r,1),0===n.length&&Reflect.deleteProperty(this._listeners,e))}},e.prototype.addEventListener=function(e,t){var n=this._listeners[e];n||(n=this._listeners[e]=[]),n.indexOf(t)===-1&&n.push(t)},e.prototype.dispatchEvent=function(e){var t="string"==typeof e?{type:e}:e,n=t.type;t.target=this;var r=this._listeners[n],o=void 0;if(r){Reflect.has(this._dispatching,n)||(this._dispatching[n]=0,this._pendingRemovals[n]=0),++this._dispatching[n];for(var i=0,a=r.length;i<a;++i)if(r[i].call(this,t)===!1||t.propagationStopped){o=!1;break}if(--this._dispatching[n],0===this._dispatching[n]){var s=this._pendingRemovals[n];for(Reflect.deleteProperty(this._pendingRemovals,n);s--;)this.removeEventListener(n,this.nullFunction);Reflect.deleteProperty(this._dispatching,n)}return o}},e}();t.default=r,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(3),l=r(u),f=n(4),c=n(6),h=function(e){function t(n){o(this,t);var r=i(this,e.call(this)),a=Object.assign({},n);return r.name=a.name||"",r.visible=!0,r.datasource=[],r.opacity=void 0!==a.opacity?n.opacity:1,r.dataExtent=null,r.maxResolution=0,r.minResolution=0,r.zIndex=a.zIndex||0,r._mapRenderKey=null,r}return a(t,e),t.prototype.loadFeature=function(){return this.features},s(t,[{key:"map",get:function(){return this._map},set:function(e){this._mapRenderKey&&((0,f.unlistenByKey)(this._mapRenderKey),this._mapRenderKey=null),e&&(this._map=e,this._mapRenderKey=(0,f.listen)(this,c.EventType.CHANGE,e.render,e),this.changed())}},{key:"visible",get:function(){return this._visible},set:function(e){this._visible!==e&&(this._visible=e)}},{key:"opacity",get:function(){return this._opacity},set:function(e){this._opacity=e}},{key:"minResolution",get:function(){return this._minResolution},set:function(e){this._minResolution=e}},{key:"maxResolution",get:function(){return this._maxResolution},set:function(e){this._maxResolution=e}},{key:"dataExtent",get:function(){},set:function(e){this._dataExtent=e}},{key:"datasouce",get:function(){return this._datasource}},{key:"datasource",set:function(e){this._datasource=e}},{key:"zIndex",get:function(){return this._zIndex},set:function(e){this._zIndex!==e&&(this._zIndex=e)}}]),t}(l.default);t.default=h,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(12),u=r(s),l=function(e){function t(n,r){o(this,t);var a=i(this,e.call(this,n));return a.image=r,a}return a(t,e),t}(u.default);t.default=l,l.Type={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(68),l=r(u),f=n(23),c=n(15),h=r(c),d=n(2),p=n(6),y=n(4),_=n(36),v=function(e){function t(n,r,a,s,u,l,c){o(this,t);var h=i(this,e.call(this,n,r,a,f.ImageState.IDLE,s));return h._src=u,h.domImage=new Image,null!==l&&(h.getDomImage().crossOrigin=l),h._imageByContext={},h._imageListenerKeys=null,h.state=f.ImageState.IDLE,h._imageLoadFunction=c,h}return a(t,e),t.prototype.getDomImage=function(e){if(void 0!==e){var t=void 0,n=(0,_.getUid)(e);return n in this._imageByContext?this._imageByContext[n]:(t=h.default.isEmpty(this._imageByContext)?this._domImage:this._domImage.cloneNode(!1),this._imageByContext[n]=t,t)}return this._domImage},t.prototype._handleImageError=function(){this.state=f.ImageState.ERROR,this._unlistenImage(),this.changed()},t.prototype._handleImageLoad=function(){void 0===this.resolution&&(this.resolution=d.ExtentUtil.getHeight(this.extent)/this.getDomImage().height),this.state=f.ImageState.LOADED,this._unlistenImage(),this.changed()},t.prototype.load=function(){this.state!==f.ImageState.IDLE&&this.state!==f.ImageState.ERROR||(this.state=f.ImageState.LOADING,this.changed(),this._imageListenerKeys=[(0,y.listenOnce)(this.getDomImage(),p.EventType.ERROR,this._handleImageError,this),(0,y.listenOnce)(this.getDomImage(),p.EventType.LOAD,this._handleImageLoad,this)],this._imageLoadFunction(this,this._src))},t.prototype._unlistenImage=function(){this._imageListenerKeys.forEach(y.unlistenByKey),this._imageListenerKeys=null},s(t,[{key:"domImage",set:function(e){this._domImage=e}}]),t}(l.default);t.default=v,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(44),l=r(u),f=n(46),c=r(f),h=n(4),d=n(18),p=n(45),y=r(p),_=n(6),v=n(23),g=n(2),m=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,e.call(this,n)),a=n.imageExtent;r.dataExtent=a;var s=void 0!==n.crossOrigin?n.crossOrigin:null,u=void 0!==n.imageLoadFunction?n.imageLoadFunction:r.defaultImageLoadFunction;return r.attributions=n.attributions,r._singleImage=new c.default(a,void 0,1,r.attributions,n.url,s,u),r._imageSize=n.imageSize?n.imageSize:null,(0,h.listen)(r.singleImage,_.EventType.CHANGE,r.handleImageChange,r),r.zIndex=0,r}return a(t,e),t.prototype.defaultImageLoadFunction=function(e,t){e.getDomImage().src=t},t.prototype.getImageInternal=function(e){return g.ExtentUtil.intersects(e,this.singleImage.extent)?this.singleImage:null},t.prototype.handleImageChange=function(e){if(this.singleImage.state===v.ImageState.LOADED){var t=this.singleImage.extent,n=this.singleImage.getDomImage(),r=void 0,o=void 0;this._imageSize?(r=this._imageSize[0],o=this._imageSize[1]):(r=n.width,o=n.height);var i=g.ExtentUtil.getHeight(t)/o,a=Math.ceil(g.ExtentUtil.getWidth(t)/i);if(a!==r){var s=(0,d.createCanvasContext2D)(a,o),u=s.canvas;s.drawImage(n,0,0,r,o,0,0,u.width,u.height),this.singleImage.domImage=u}}this._dispatchImageEvent(e)},t.prototype._dispatchImageEvent=function(e){var t=e.target;switch(t.state){case v.ImageState.LOADING:this.dispatchEvent(new y.default(y.default.Type.IMAGELOADSTART,t));break;case v.ImageState.LOADED:this.dispatchEvent(new y.default(y.default.Type.IMAGELOADEND,t));break;case v.ImageState.ERROR:this.dispatchEvent(new y.default(y.default.Type.IMAGELOADERROR,t))}},s(t,[{key:"imageSrc",set:function(e){this._singleImage._src=e,this._singleImage.domImage=new Image,this._singleImage.state=v.ImageState.IDLE}},{key:"singleImage",get:function(){return this._singleImage}},{key:"attributions",set:function(e){this._attributes=e},get:function(){return this._attributes||null}}]),t}(l.default);t.default=m,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(12),u=r(s),l=function(e){function t(n,r){o(this,t);var a=i(this,e.call(this,n));return a.feature=r,a}return a(t,e),t}(u.default);t.default=l,l.EventType={ADD_FEATURE:"addfeature",REMOVE_FEATURE:"removefeature",CLEAR:"clear",FEATURE_COLLECTION_CHANGED:"featurecollectionchanged"},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(3),l=r(u),f=n(2),c=n(34),h=n(27),d=n(28),p=function(e){function t(n){o(this,t);var r=i(this,e.call(this)),a=Object.assign({},n);return r._applyOptions(a),r}return a(t,e),t.prototype._applyOptions=function(e){var t=this._createResolutionConstraint(e);this._maxResolution=t.maxResolution,this._minResolution=t.minResolution,this._zoomFactor=t.zoomFactor,this._resolutions=e.resolutions,this._minZoom=t.minZoom;var n=this._createCenterConstraint(e),r=t.constraint,o=this._createRotationConstraint(e);this._constraints={center:n,resolution:r,rotation:o},this.center=void 0!==e.center?e.center:this._calculateCenter(),this.resolution=void 0!==e.resolution?e.resolution:this.constrainResolution(this._maxResolution,e.zoom-this._minZoom),this._originalCenter=this.center,this._originalResolution=this.resolution,this.rotation=0,this.dataExtent=t.extent,this._options=e},t.prototype._createRotationConstraint=function(){return 0},t.prototype._createCenterConstraint=function(){return function(e){return e}},t.prototype._createResolutionConstraint=function(e){var t=void 0,n=void 0,r=void 0,o=void 0,i=c.Config.DEFAULT_MAX_ZOOM,a=c.Config.DEFAULT_ZOOM_FACTOR,s=c.Config.DEFAULT_MIN_ZOOM,u=c.Config.DEFAULT_TILE_SIZE,l=void 0!==e.minZoom?e.minZoom:s,h=void 0!==e.maxZoom?e.maxZoom:i,d=void 0!==e.zoomFactor?e.zoomFactor:a,p=e.projection;if(o=p.extent,void 0!==e.resolutions){var y=e.resolutions;n=y[0],r=y[y.length-1],t=this.createSnapToResolutions(y)}else{var _=Math.max(f.ExtentUtil.getWidth(o),f.ExtentUtil.getHeight(o)),v=_/u/Math.pow(a,s),g=v/Math.pow(a,i-s);n=e.maxResolution,void 0!==n?l=0:n=v/Math.pow(d,l),r=e.minResolution,void 0===r&&(r=void 0!==e.maxZoom?void 0!==e.maxResolution?n/Math.pow(d,h):v/Math.pow(d,h):g),h=l+Math.floor(Math.log(n/r)/Math.log(d)),r=n/Math.pow(d,h-l),t=this.createSnapToPower(d,n,h-l)}return{constraint:t,maxResolution:n,minResolution:r,minZoom:l,zoomFactor:d,extent:o}},t.prototype.createSnapToPower=function(e,t,n){return function(r,o,i){if(void 0!==r){var a=-i/2+.5,s=Math.floor(Math.log(t/r)/Math.log(e)+a),u=Math.max(s+o,0);void 0!==n&&(u=Math.min(u,n));var l=t/Math.pow(e,u);return l}}},t.prototype.createSnapToResolutions=function(e){return function(t,n,r){if(void 0!==t){var o=(0,h.linearFindNearest)(e,t,r);o=(0,d.clamp)(o+n,0,e.length-1);var i=Math.floor(o);if(o!=i&&i<e.length-1){var a=e[i]/e[i+1];return e[i]/Math.pow(a,o-i)}return e[i]}}},t.prototype._calculateCenter=function(){return[500,500]},t.prototype.getViewState=function(){var e=this.center,t=this.resolution,n=this.rotation;return{center:e.slice(),resolution:t,rotation:n}},t.prototype.constrainResolution=function(e,t,n){var r=t||0,o=n||0;return this._constraints.resolution(e,r,o)},t.prototype.calculateCenterZoom=function(e,t){var n=void 0,r=this.center,o=this.resolution;if(void 0!==r&&void 0!==o){var i=t[0]-e*(t[0]-r[0])/o,a=t[1]-e*(t[1]-r[1])/o;n=[i,a]}return n},t.prototype.constrainCenter=function(e){return this._constraints.center=e,this._center=e,!0},s(t,[{key:"center",get:function(){return this._center},set:function(e){this.constrainCenter(e),this.changed()}},{key:"resolution",get:function(){return this._resolution},set:function(e){this._resolution=e,this.changed()}},{key:"rotation",get:function(){return this._rotation},set:function(e){this._rotation=e}},{key:"dataExtent",get:function(){return this._dataExtent},set:function(e){this._dataExtent=e}},{key:"minResolution",get:function(){return this._minResolution}},{key:"maxResolution",get:function(){return this._maxResolution}},{key:"originalCenter",get:function(){return this._originalCenter}},{key:"originalResolution",get:function(){return this._originalResolution}}]),t}(l.default);t.default=p,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(3),l=r(u),f=n(7),c=n(2),h=n(23),d=n(6),p=n(54),y=n(4),_=function(e){function t(n,r){o(this,t);var a=i(this,e.call(this));return a._context=r,a._layer=n,a.renderedResolution=void 0,a._transform=c.ExtentUtil.createEmpty(),a}return a(t,e),t.prototype.getTransform=function(e,t){var n=e.viewState,r=1,o=r*e.size[0]/2,i=r*e.size[1]/2,a=r/n.resolution,s=a,u=-n.rotation,l=-n.center[0]+t,c=-n.center[1];return f.Transform.compose(this._transform,o,i,a,s,u,l,c);
},t.prototype.loadImage=function(e){var t=e.state;return t!==h.ImageState.LOADED&&t!==h.ImageState.ERROR&&(0,y.listen)(e,d.EventType.CHANGE,this._handleImageChange,this),t===h.ImageState.IDLE&&(e.load(),t=e.state),t===h.ImageState.LOADED},t.prototype._handleImageChange=function(e){var t=e.target;t.state===h.ImageState.LOADED&&this.renderIfReadyAndVisible()},t.prototype.renderIfReadyAndVisible=function(){var e=this.layer;e.visible&&e.changed()},t.prototype.clip=function(e,t,n){var r=t.pixelRatio,o=t.size[0]*r,i=t.size[1]*r,a=t.viewState.rotation,s=c.ExtentUtil.getTopLeft(n),u=c.ExtentUtil.getTopRight(n),l=c.ExtentUtil.getBottomRight(n),h=c.ExtentUtil.getBottomLeft(n);f.Transform.apply(t.toPixelTransform,s),f.Transform.apply(t.toPixelTransform,u),f.Transform.apply(t.toPixelTransform,l),f.Transform.apply(t.toPixelTransform,h),e.save(),p.Canvas.rotateAtOffset(e,-a,o/2,i/2),e.beginPath(),e.moveTo(s[0]*r,s[1]*r),e.lineTo(u[0]*r,u[1]*r),e.lineTo(l[0]*r,l[1]*r),e.lineTo(h[0]*r,h[1]*r),e.clip(),p.Canvas.rotateAtOffset(e,a,o/2,i/2)},t.prototype.prepareFrame=function(e){},t.prototype.composeFrame=function(e,t){},t.prototype.postCompose=function(e,t,n){},t.prototype.preCompose=function(e,t,n){},s(t,[{key:"layer",get:function(){return this._layer}},{key:"context",get:function(){return this._context}}]),t}(l.default);t.default=_,e.exports=t.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.RenderEventType={};n.PRERENDER="prerender",n.POSTRENDER="postrender",n.RENDER="render"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(35),l=r(u),f=n(26),c=r(f),h=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[255,255,255],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.SOLID;o(this,t);var u=i(this,e.call(this,n,s,a));return u._borderStyle=r,u.textStyle=new c.default,u}return a(t,e),t.prototype.clone=function(){var e=new t(this.color,this.borderStyle.clone(),this.alpha,this.style);return this.textStyle&&(e.textStyle=this.textStyle),e},s(t,[{key:"borderStyle",get:function(){return this._borderStyle},set:function(e){return this._borderStyle=e}}]),t}(l.default);t.default=h,h.SOLID="solid",e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(35),l=r(u),f=n(26),c=r(f),h=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[255,0,0],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,f=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:t.CIRCLE;o(this,t);var d=i(this,e.call(this,r,h,a));return d._size=n,d._xoffset=u,d._yoffset=l,d._angle=f,d._borderStyle=s,d.textStyle=new c.default,d}return a(t,e),t.prototype.clone=function(){var e=new t(this.size,this.color,this.alpha,this.borderStyle.clone(),this.xoffset,this.yoffset,this.angle,this.style);return this.textStyle&&(e.textStyle=this.textStyle),e},s(t,[{key:"size",get:function(){return this._size},set:function(e){this._size=e}},{key:"xoffset",get:function(){return this._xoffset},set:function(e){this._xoffset=e}},{key:"yoffset",get:function(){return this._yoffset},set:function(e){this._yoffset=e}},{key:"angle",get:function(){return this._angle},set:function(e){this._angle=e}},{key:"borderStyle",get:function(){return this._borderStyle},set:function(e){this._borderStyle=e}}]),t}(l.default);t.default=h,h.CIRCLE="circle",h.SQUARE="square",h.CROSS="cross",h.X="x",h.TRIANGLE="triangle",e.exports=t.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.Canvas={};n.rotateAtOffset=function(e,t,n,r){0!==t&&(e.translate(n,r),e.rotate(t),e.translate(-n,-r))},t.default={Canvas:n}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.Coordinate={};n.add=function(e,t){return e[0]+=t[0],e[1]+=t[1],e},n.rotate=function(e,t){var n=Math.cos(t),r=Math.sin(t),o=e[0]*n-e[1]*r,i=e[1]*n+e[0]*r;return e[0]=o,e[1]=i,e},n.scale=function(e,t){return e[0]*=t,e[1]*=t,e},t.default={Coordinate:n}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.functions={};n.TURE=function(){return!0},n.FALSE=function(){return!1},t.default={functions:n}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new Set,n=new a.default(-.005,.05,100),r=void 0===e.dragPan||e.dragPan;r&&t.add(new u.default({kinetic:n}));var o=void 0===e.mouseWheelZoom||e.mouseWheelZoom;o&&t.add(new f.default({constrainResolution:e.constrainResolution,duration:e.zoomDuration}));var i=void 0===e.keyboard||e.keyborad;return i&&(t.add(new h.default(e)),t.add(new _.default(e)),t.add(new p.default({delta:e.zoomDelta}))),t}Object.defineProperty(t,"__esModule",{value:!0}),t.componentsDefaults=o;var i=n(62),a=r(i),s=n(37),u=r(s),l=n(40),f=r(l),c=n(59),h=r(c),d=n(61),p=r(d),y=n(60),_=r(y);t.default={componentsDefaults:o}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(8),l=r(u),f=n(17),c=n(13),h=r(c),d=n(24),p=r(d),y=n(1),_=r(y),v=n(22),g=r(v),m=n(30),b=r(m),E=n(10),w=r(E),x=n(31),O=r(x),T=n(9),P=r(T),C=n(2),M=n(11),I=n(4),L=n(5),S=r(L),R=n(38),N=r(R),k=n(21),D=r(k),j=n(56),F=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,e.call(this));return r.applyHandleEventOption({handleDownEvent:r._handleDownEvent,handleMouseEvent:r.handleMouseEvent,handleUpEvent:r._handleUpEvent}),r._mapRenderKey=null,r._drawLayer=n.drawLayer?n.drawLayer:null,r._downPointPx=null,r._finishCoordinate=null,r.drawMode=t.getDrawMode(n.type),r._sketchCoords=null,r._sketchLine=null,r._finishCondition=n.finishCondition?n.finishCondition:j.functions.TURE,r._undoCondition=void 0!==n.undoCondition?n.undoCondition:j.functions.TURE,r._undoStep=n.freehandUndoStep?n.freehandUndoStep:2,(n.undoCondition||n.finishCondition)&&(0,I.listen)(document,"keyup",r._handleKeyboardEvent,r),r._sketchLayer=new h.default({name:"sketch layer for draw component"}),r._sketchLayer.style=r.getDefaultStyleFunction(),r._sketchPoint=null,r._enableSketchPoint=!!n.enableSketchPoint&&n.enableSketchPoint,r._sketchFeature=null,r._geometryFunction=null,r._sketchLineCoords=null,r._freehand=!!n.freehand&&n.freehand,r._snapTolerance=n.snapTolerance?n.snapTolerance:2,r._maxLinePoints=n.maxLinePoints?n.maxLinePoints:1/0,r._maxPolygonPoints=n.maxPolygonPoints?n.maxPolygonPoints:1/0,r._minPoints=n.minPoints?n.minPoints:r.drawMode===t.DrawMode.POLYGON?3:2,r._condition=n.condition?n.condition:j.functions.TURE,r._shouldHandle=!1,r._squaredClickTolerance=n.clickUpTolerance?n.clickUpTolerance*n.clickUpTolerance:36,r}return a(t,e),t.prototype._handleKeyboardEvent=function(e){if(this._finishCondition(e)){if(this.drawMode===t.DrawMode.POLYGON){if(null===this._sketchFeature)return;var n=this._sketchFeature.geometry.getCoordinates();if(n[0].length<4)return}if(this.drawMode===t.DrawMode.LINE){if(null===this._sketchFeature)return;var r=this._sketchFeature.geometry.getCoordinates();if(r.length<=2)return}this._finishDrawing()}this._undoCondition&&this._undoCondition(e)&&this._undoDrawing()},t.prototype._existInDrawMode=function(e){if("string"==typeof e&&e.constructor===String){var n=t.DrawMode,r=e.toUpperCase();if(r===t.DrawMode.UNDEFINED.toUpperCase())return!1;for(var o in n)if(r===n[o].toUpperCase())return!0}return!1},t.prototype._geometryFactory=function(){var e=void 0,n=this.drawMode;return n===t.DrawMode.POINT?e=g.default:n===t.DrawMode.LINE?e=b.default:n===t.DrawMode.POLYGON?e=w.default:n===t.DrawMode.EXTENT?e=P.default:n===t.DrawMode.PARALLELOGRAM&&(e=D.default),e},t.prototype._initGeometryFunction=function(){var e=this,n=function(n,r){var o=e.drawMode,i=r;if(i)o===t.DrawMode.POLYGON||o===t.DrawMode.PARALLELOGRAM||o===t.DrawMode.LINE?i.setCoordinates(n):o===t.DrawMode.EXTENT&&i.setCoordinates(C.ExtentUtil.boundingExtent(n));else{var a=e._geometryFactory();i=new a(n[0],n[1])}return i};return n},t.prototype._freehandEnable=function(){var e=this.drawMode;return(e===t.DrawMode.POLYGON||e===t.DrawMode.LINE)&&this._freehand},t.prototype.handleMouseEvent=function(t){var n=t.originalEvent.buttons;if(2===n)return!1;t.coordinate=this.coordinateBeyond(t.coordinate);var r=this._freehandEnable(),o=!0,i=t.type;return r&&i===S.default.MOUSE_DRAG&&null!==this._sketchFeature?this._addToDrawing(t):i===S.default.MOUSE_MOVE?o=this._handleMove(t):i===S.default.DBLCLICK&&(o=!1),e.prototype.handleMouseEvent.call(this,t)&&o},t.prototype._handleMove=function(e){if(this._downPointPx&&(!this._freehand&&this._shouldHandle||this._freehand&&!this._shouldHandle)){var t=this._downPointPx,n=e.pixel,r=t[0]-n[0],o=t[1]-n[1],i=r*r+o*o;this._shouldHandle=this._freehand?i>this._squaredClickTolerance:i<=this._squaredClickTolerance}return this._finishCoordinate?this._modifyDrawing(e):this._updateSketchPoint(e),!0},t.prototype._handleDownEvent=function(e){return this._shouldHandle=!this._freehand,this._freehand?(this._downPointPx=e.pixel,this._finishCoordinate||this._startDrawing(e),!1):!!this._condition(e)&&(this._downPointPx=e.pixel,!0)},t.prototype._handleUpEvent=function(e){if(this.drawMode!==t.DrawMode.UNDEFINED){var n=!0,r=this.drawMode;return this._handleMove(e),this._shouldHandle?this._finishCoordinate?r===t.DrawMode.CIRCLE||(r===t.DrawMode.EXTENT?this._finishDrawing():this._atFinish(e)?this._finishCondition(e)&&this._finishDrawing():this._addToDrawing(e)):(this._startDrawing(e),this.drawMode===t.DrawMode.POINT&&this._finishDrawing()):this._freehand&&!this._finishCondition&&(this._finishCoordinate=null,this._abortDrawing()),n}},t.prototype._startDrawing=function(e){var n=e.coordinate;this._finishCoordinate=n;var r=this.drawMode;r===t.DrawMode.POINT?this._sketchCoords=n.slice():r===t.DrawMode.POLYGON?(this._sketchCoords=[[n.slice(),n.slice()]],this._sketchLineCoords=this._sketchCoords[0]):r===t.DrawMode.PARALLELOGRAM?(this._sketchCoords=[[n.slice(),n.slice()]],this._sketchLineCoords=this._sketchCoords[0]):(this._sketchCoords=[n.slice(),n.slice()],r===t.DrawMode.EXTENT&&(this._sketchLineCoords=this._sketchCoords)),this._sketchLineCoords&&(this._sketchLine=new p.default(new b.default(this._sketchLineCoords)));var o=this.geometryFunction(this._sketchCoords);this._sketchFeature=new p.default,this._sketchFeature.geometry=o,this._updateSketchFeatures(),this.dispatchEvent(new N.default(N.default.EventType.DRAW_START,this._sketchFeature))},t.prototype._modifyDrawing=function(e){var n=e.coordinate,r=this._sketchFeature.geometry,o=null,i=null,a=this.drawMode;if(a===t.DrawMode.POINT)i=this._sketchCoords,i[0]=n[0],i[1]=n[1];else if(a===t.DrawMode.POLYGON)o=this._sketchCoords[0],i=o[o.length-1],this._atFinish(e)&&(n=this._finishCoordinate.slice()),i[0]=n[0],i[1]=n[1];else if(a===t.DrawMode.PARALLELOGRAM){o=this._sketchCoords[0],i=o[o.length-1],o.length>3?(o=o.slice(0,2),o.push(n)):(i[0]=n[0],i[1]=n[1]);var s=o[o.length-2];if(s[0]!==i[0]&&s[1]!==i[1]&&3===o.length){var u=D.default.getTheLastPoint(o);o.push(u,o[0]),this._sketchCoords=[o],this._sketchLineCoords=o}}else o=this._sketchCoords,i=o[o.length-1],i[0]=n[0],i[1]=n[1];if(this._freehand){var l=this._sketchCoords[0];if(l.length>2){var f=l[l.length-1],c=l[l.length-2];f[0]===c[0]&&f[1]===c[1]&&l.pop()}}if(this.geometryFunction(this._sketchCoords,r),this._sketchPoint){var h=this._sketchPoint.geometry;h.update(n[0],n[1])}var d=void 0;if(a===t.DrawMode.EXTENT){this._sketchLine||(this._sketchLine=new p.default(new b.default(null)));var y=r.getCoordinates();d=this._sketchLine.geometry,d.path=y}else this._sketchLineCoords&&(d=this._sketchLine.geometry,d.path=this._sketchLineCoords);this._updateSketchFeatures()},t.prototype._addToDrawing=function(e){var n=e.coordinate,r=this._sketchFeature.geometry,o=void 0,i=void 0,a=this.drawMode;if(a===t.DrawMode.LINE){if(this._finishCoordinate=n.slice(),o=this._sketchCoords,o.length>this._maxLinePoints&&(this._freehand?o.pop():i=!0),this._freehand&&o.length>1){var s=o[o.length-1];s[0]===n[0]&&s[1]===n[1]&&o.pop()}o.push(n.slice()),this.geometryFunction(o,r)}else a===t.DrawMode.POLYGON?(o=this._sketchCoords[0],o.length>this._maxPolygonPoints&&(this._freehand?o.pop():i=!0),o.push(n.slice()),i&&(this._finishCoordinate=o[0]),this.geometryFunction(this._sketchCoords,r)):a===t.DrawMode.PARALLELOGRAM&&(o=this._sketchCoords[0],o.push(n.slice()),i=o.length>this._maxPolygonPoints,i&&(this._finishCoordinate=o[0]),this.geometryFunction(this._sketchCoords,r));this._updateSketchFeatures(),i&&this._finishDrawing()},t.prototype._abortDrawing=function(){this._finishCoordinate=null;var e=this._sketchFeature;return e&&(this._sketchFeature=null,this._sketchPoint=null,this._sketchLine=null,this._sketchLayer.clear()),e},t.prototype._finishDrawing=function(){if(null===this._sketchFeature)return void this.dispatchEvent(new N.default(N.default.EventType.DRAW_END));var e=this._abortDrawing(),n=this._sketchCoords,r=e.geometry,o=this.drawMode;o===t.DrawMode.LINE?(n.pop(),this.geometryFunction(n,r)):o===t.DrawMode.POLYGON&&(n[0].pop(),n[0].push(n[0][0]),this.geometryFunction(n,r)),o===_.default.MULTI_POINT||o===_.default.MULTI_LINE||o===_.default.MULTI_POLYGON&&(e.geometry=new O.default([n])),this._freehand&&(0,M.simplify)(e.geometry),this._drawLayer&&(e.style=void 0,this._drawLayer.addFeatures([e])),this.dispatchEvent(new N.default(N.default.EventType.DRAW_END,e))},t.prototype._atFinish=function(e){var n=!1;if(this._sketchFeature){if(this._freehand&&this._finishCondition)return!1;var r=!1,o=[this._finishCoordinate],i=this.drawMode;if(i===t.DrawMode.LINE?r=this._sketchCoords.length>this._minPoints:i===t.DrawMode.POLYGON?(r=this._sketchCoords[0].length>this._minPoints,o=[this._sketchCoords[0][0],this._sketchCoords[0][this._sketchCoords[0].length-2]]):i===t.DrawMode.PARALLELOGRAM&&(n=5===this._sketchCoords[0].length),r)for(var a=e.map,s=0,u=o.length;s<u;s++){var l=o[s],f=a.getPixelFromCoordinate(l),c=e.pixel,h=c[0]-f[0],d=c[1]-f[1],p=this._freehand,y=p?1:this._snapTolerance;if(n=Math.sqrt(h*h+d*d)<=y){this._finishCoordinate=l;break}}}return n},t.prototype._updateSketchPoint=function(e){var t=e.coordinate;if(this._enableSketchPoint)if(null===this._sketchPoint){var n=new g.default(t[0],t[1]);this._sketchPoint=new p.default(n),this._updateSketchFeatures()}else{var r=this._sketchPoint.geometry;r.setCoordinates(t)}},t.prototype._autoPan=function(e){var t=e.pixel,n=this.map.size,r=t[0],o=t[1];r<=2||o<=2||r>=n[0]-5||o>=n[1]-5},t.prototype._updateSketchFeatures=function(){var e=[];this._sketchFeature&&e.push(this._sketchFeature),this._sketchLine&&e.push(this._sketchLine),this._sketchPoint&&e.push(this._sketchPoint),this._sketchLayer.clear(),this._sketchLayer.addFeatures(e)},t.prototype._undoDrawing=function(){var e=this.drawMode,n=1,r=2;if(this._freehand&&(n=this._undoStep,r=3),e===t.DrawMode.LINE){if(this._sketchFeature){var o=this._sketchFeature.geometry.getCoordinates();o.length+n>2&&(o.splice(o.length-2,n),this._sketchFeature.changed())}}else if(e===t.DrawMode.POLYGON&&this._sketchFeature){var i=this._sketchFeature.geometry.getCoordinates()[0];i.length+n>r?(i.splice(i.length-r,n),this._sketchFeature.changed()):(this._abortDrawing(),this._finishDrawing())}},t.prototype._updateState=function(){var e=this.map,t=this.active;e&&t||this._abortDrawing(),this._sketchLayer.map=e},t.prototype.getDefaultStyleFunction=function(){var e=f.Style.createDefaultEditing();return function(t){return e[t.geometry.geometryType]}},t.prototype.shouldStopEvent=function(){return!!this._freehand},s(t,[{key:"geometryFunction",get:function(){return this._geometryFunction||(this._geometryFunction=this._initGeometryFunction()),this._geometryFunction}},{key:"drawMode",get:function(){return this._drawMode},set:function(e){var n=this._existInDrawMode(e);this.active=!!n,this._drawMode=n?e:t.DrawMode.UNDEFINED,this._sketchLineCoords=null,this._abortDrawing(),this._minPoints=this._drawMode===t.DrawMode.POLYGON?3:2}},{key:"map",get:function(){return this._map},set:function(e){this._mapRenderKey&&((0,I.unlistenByKey)(this._mapRenderKey),this._mapRenderKey=null),e&&(this._map=e,e.addLayer(this._sketchLayer)),this._updateState()}},{key:"drawLayer",get:function(){return this._drawLayer}},{key:"freehand",get:function(){return this._freehand},set:function(e){this._freehand=e}},{key:"active",get:function(){return this._active},set:function(e){this._active=e,this._active===!1&&(this._sketchLayer&&this._sketchLayer.clear(),this._sketchPoint=null)}}]),t}(l.default);t.default=F,F.getDrawMode=function(e){var t=F.DrawMode.UNDEFINED;switch(e){case _.default.POINT:case _.default.MULTI_POINT:t=F.DrawMode.POINT;break;case _.default.LINE:case _.default.MULTI_LINE:t=F.DrawMode.LINE;break;case _.default.POLYGON:case _.default.MULTI_POLYGON:t=F.DrawMode.POLYGON;break;case _.default.EXTENT:t=F.DrawMode.EXTENT;break;case _.default.PARALLELOGRAM:t=F.DrawMode.PARALLELOGRAM}return t},F.DrawMode={POINT:"Point",LINE:"Line",POLYGON:"Polygon",CIRCLE:"Circle",EXTENT:"Extent",PARALLELOGRAM:"Parallelogram",UNDEFINED:"undefined"},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(8),u=r(s),l=n(14),f=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,e.call(this));return r._defaultCondition=function(e){var t=e.originalEvent.keyCode;return(0,l.noModifierKeys)(e)&&(0,l.targetNotEditable)(e)&&36===t},r._condition=n.condition?n.condition:r._defaultCondition,r}return a(t,e),t.prototype.handleMouseEvent=function(e){var t=!1;return this._condition(e)&&this._goToHome(),!t},t.prototype._goToHome=function(){var e=this.map.view;if(e){var t=e.originalCenter,n=e.originalResolution;e.center=t,e.resolution=n}},t}(u.default);t.default=f,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(8),u=r(s),l=n(5),f=r(l),c=n(14),h=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,e.call(this));return r._defaultCondition=function(e){var t=e.originalEvent.keyCode;return(0,c.noModifierKeys)(e)&&(0,c.targetNotEditable)(e)&&(40===t||37===t||39===t||38===t)},r._condition=void 0!==n.condition?n.condition:r._defaultCondition,r._duration=void 0!==n.duration?n.duration:100,r._pixelDelta=void 0!==n.pixelDelta?n.pixelDelta:128,r}return a(t,e),t.prototype.handleMouseEvent=function(t){var n=!1;if(t.type===f.default.KEYDOWN){var r=t.originalEvent,o=r.keyCode;if(this._condition(t)){var i=t.map,a=i.view,s=a.resolution*this._pixelDelta,u=0,l=0;40===o?l=s:37===o?u=-s:39===o?u=s:l=-s;var c=[u,l];e.prototype.pan.call(this,a,c,null),t.preventDefault(),n=!0}}return!n},t}(u.default);t.default=h,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(8),u=r(s),l=n(5),f=r(l),c=n(14),h=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,e.call(this));return r._condition=n.condition?n.condition:c.targetNotEditable,r._delta=n.delta?n.delta:1,r}return a(t,e),t.prototype.handleMouseEvent=function(t){var n=!1;if(t.type==f.default.KEYDOWN||t.type==f.default.KEYPRESS){var r=t.originalEvent,o=r.charCode;if(this._condition(t)&&(o=="+".charCodeAt(0)||o=="-".charCodeAt(0))){var i=t.map,a=o=="+".charCodeAt(0)?this._delta:-this._delta,s=i.view;e.prototype.zoomByDelta.call(this,s,a,void 0,null),t.preventDefault(),n=!0}}return!n},t}(u.default);t.default=h,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(3),u=r(s),l=function(e){function t(n,r,a){o(this,t);var s=i(this,e.call(this));return s._decay=n,s._minVelocity=r,s._delay=a,s._points=[],s._angle=0,s._initialVelocity=0,s}return a(t,e),t.prototype.begin=function(){this._points.length=0,this._angle=0,this._initialVelocity=0},t.prototype.update=function(e,t){this._points.push(e,t,Date.now())},t.prototype.end=function(){if(this._points.length<6)return!1;var e=Date.now()-this._delay,t=this._points.length-3;if(this._points[t+2]<e)return!1;for(var n=t-3;n>0&&this._points[n+2]>e;)n-=3;var r=this._points[t+2]-this._points[n+2],o=this._points[t]-this._points[n],i=this._points[t+1]-this._points[n+1];return this._angle=Math.atan2(i,o),this._initialVelocity=Math.sqrt(o*o+i*i)/r,this._initialVelocity>this._minVelocity},t.prototype.getDistance=function(){return(this._minVelocity-this._initialVelocity)/this._decay},t.prototype.angle=function(){return this._angle},t}(u.default);t.default=l,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(8),l=r(u),f=n(5),c=r(f),h=n(1),d=r(h),p=n(22),y=r(p),_=n(21),v=r(_),g=n(4),m=n(6),b=n(39),E=r(b),w=n(24),x=r(w),O=n(13),T=r(O),P=n(17),C=n(2),M=n(11),I=n(14),L=n(56),S=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,e.call(this,n));r.applyHandleEventOption({handleDownEvent:r._handleDownEvent,handleDragEvent:r._handleDragEvent,handleUpEvent:r._handleUpEvent}),r._features=[],r._pixelTolerance=n.pixelTolerance?n.pixelTolerance:10,r._movableGeometrys=n.movableGeometrys?n.movableGeometrys:["extent"],r._hasMoveableGeometrys=!0;var a=r._movableGeometrys;return null!==a&&void 0!==a||(r._hasMoveableGeometrys=!1),Array.isArray(a)&&0===a.length&&(r._hasMoveableGeometrys=!1),r.movableGeometrySet,r._hasMoveableGeometrys&&(r.movableGeometrySet=new Set(r._movableGeometrys)),r._deleteCondition=n.deleteCondition?n.deleteCondition:r._defaultDeleteCondition,r._vertexEditableCondition=n.vertexEditableCondition?n.vertexEditableCondition:L.functions.TURE,r._edgeEditableCondition=n.edgeEditableCondition?n.edgeEditableCondition:L.functions.TURE,r._snappedToVertex=!1,r._snapSegments=null,r._vertexFeature=null,r.features=n.features||[],r._lastPixel=[0,0],r._overLayer=new T.default({style:n.style?n.style:r.getDefaultStyleFunction(),zIndex:1e3}),r.active=!0,r._dragSegments=[],r._modified=!1,r._changingFeature=!0,r._ignoreNextSingleClick=!1,r._shouldAddToVertexs=!1,r._insertVertices=[],r._downPoint=null,r._currentMovedGeometry=null,r._oldEditedVertex=null,r}return a(t,e),t.prototype.handleMouseEvent=function(t){if(!(t instanceof c.default))return!0;t.coordinate=this.coordinateBeyond(t.coordinate),this.lastPointerEvent_=t;var n=void 0;return t.type!=c.default.MOUSE_MOVE||this.handlingDownUpSequence||this._handlePointerMove(t),this._vertexFeature&&this._deleteCondition(t)&&(n=!(t.type!==c.default.SINGLE_CLICK||!this._ignoreNextSingleClick)||this.removePoint()),t.type==c.default.SINGLE_CLICK&&(this._ignoreNextSingleClick=!1),e.prototype.handleMouseEvent.call(this,t)&&!n},t.prototype.removePoint=function(){if(this._lastPointerEvent&&this._lastPointerEvent.type!=c.default.MOUSE_DRAG){var e=this.lastPointerEvent_;return this.willModifyFeatures_(e),this._removeVertex(),this.dispatchEvent(new E.default(E.default.EventType.MODIFY_END,this.features,e)),this._modified=!1,!0}return!1},t.prototype._compareIndexes=function(e,t){return e.index-t.index},t.prototype._willModifyFeatures=function(e){this._modified||(this._modified=!0,this.dispatchEvent(new E.default(E.default.EventType.MODIFY_START,this.features,e)))},t.prototype._handleDownEvent=function(e){var t=this;this._downPoint=e.coordinate,this._dragSegments.length=0,this._modified=!1;var n=e.coordinate,r=this._vertexFeature;if(r){var o=[this._snapSegments];return o.length&&this._willModifyFeatures(e),this._shouldAddToVertexs=!0,this._insertVertices=o,!!this._vertexFeature}if(this._hasMoveableGeometrys){var i=this.features.filter(function(e){var r=e.geometry;return t.movableGeometrySet.has(r.geometryType)&&r.containsXY(n[0],n[1])});return i.length>0&&(this._currentMovedGeometry=i[0],!0)}},t.prototype._handlePointerMove=function(e){this._lastPixel=e.pixel,this._handlePointerAtPixel(e.pixel,e.map)},t.prototype._handlePointerAtPixel=function(e,n){var r=this,o=n.getCoordinateFromPixel(e),i=function(e,t){var n=r._pointDistanceToSegment(o,e),i=r._pointDistanceToSegment(o,t);return n-i};if(this._snapSegments=null,0!==this.features.length){var a=this._getInExtent(this.features,o,this._pixelTolerance);if(a.length>0){a.sort(i);var s=a[0],u=s.geometry,l=u.geometryType,f=s.segment,c=this._closestOnSegment(o,s),h=n.getPixelFromCoordinate(c),p=(0,M.distance)(e,h);if(p<=this._pixelTolerance){this._snapSegments=s;var y=!1;if(l===d.default.CIRCLE&&s.index===t.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX)this._snappedToVertex=!0;else{if(this._vertexEditableCondition(s)){var _=n.getPixelFromCoordinate(f[0]),v=n.getPixelFromCoordinate(f[1]),g=(0,M.squaredDistance)(h[0],h[1],_[0],_[1]),m=(0,M.squaredDistance)(h[0],h[1],v[0],v[1]);if(p=Math.sqrt(Math.min(g,m)),this._snappedToVertex=p<=this._pixelTolerance,this._snappedToVertex){c=g>m?f[1]:f[0];var b=u.getCoordinateIndex(c);l===d.default.POLYGON||l===d.default.PARALLELOGRAM?(this._snapSegments.index=b.index,this._snapSegments.ringIndex=b.ringIndex):l===d.default.MULTI_POLYGON?(this._snapSegments.index=b.index,this._snapSegments.ringIndex=b.ringIndex,this._snapSegments.polygonIndex=b.polygonIndex):this._snapSegments.index=b,this._snapSegments.isVertex=!0,y=!0}}l===d.default.PARALLELOGRAM&&(this._snapSegments.index=s.index,this._snapSegments.ringIndex=s.ringIndex)}return void(this._edgeEditableCondition(s)||y?this._createOrUpdateVertexFeature(c):this._snapSegments=null)}}this._vertexFeature&&(this._overLayer.removeFeature(this._vertexFeature),this._vertexFeature=null)}},t.prototype._handleDragEvent=function(e){this._ignoreNextSingleClick=!1;var n=e.coordinate;if(this._shouldAddToVertexs){
for(var r=this._vertexFeature,o=r.geometry.getCoordinates(),i=this._insertVertices,a=i.length-1;a>=0;--a)this._insertVertex(i[a],o);this._shouldAddToVertexs=!1}var s=this._dragSegments,u=s.length;if(0!==u){this._willModifyFeatures(e);for(var l=0;l<u;++l){var f=s[l],c=f[0],h=c.depth,p=c.geometry,y=null,_=c.segment,g=f.index;switch(p.geometryType){case d.default.POINT:y=n,_[0]=_[1]=n;break;case d.default.MULTI_POINT:y=p.getCoordinates(),y[c.index]=n,_[0]=_[1]=n;break;case d.default.LINE:y=p.getCoordinates(),y[c.index]=n;break;case d.default.MULTI_LINE:y=p.getCoordinates(),y[h[0]][c.index+g]=n,_[g]=n;break;case d.default.POLYGON:y=p.getCoordinates(),y[c.ringIndex][c.index]=n,0===c.index&&(y[c.ringIndex][y[c.ringIndex].length-1]=n);break;case d.default.PARALLELOGRAM:y=v.default.updateCoordinatesForModification(p,n,this._oldEditedVertex,f),this._oldEditedVertex=n;break;case d.default.EXTENT:y=C.ExtentUtil.updateExtent(p,n,f);break;case d.default.MULTI_POLYGON:y=p.getCoordinates(),y[c.polygonIndex][c.ringIndex][c.index]=n,0===c.index&&(y[c.polygonIndex][c.ringIndex][y[c.polygonIndex][c.ringIndex].length-1]=n);break;case d.default.CIRCLE:_[0]=_[1]=n,c.index===t.MODIFY_SEGMENT_CIRCLE_CENTER_INDEX?(this._changingFeature=!0,p.setCenter(n),this._changingFeature=!1):(this._changingFeature=!0,p.setRadius((0,M.distance)(p.getCenter(),n)),this._changingFeature=!1)}y&&this._setGeometryCoordinates(p,y)}this._createOrUpdateVertexFeature(n)}else if(this._currentMovedGeometry){var m=this._downPoint,b=n[0]-m[0],E=n[1]-m[1];this._currentMovedGeometry.geometry.move(b,E,{beyond:{xmin:0,ymin:0,xmax:this.map.view.dataExtent[2],ymax:this.map.view.dataExtent[3]}}),this.changed(),this._downPoint=n}},t.prototype._handleUpEvent=function(e){return this._dragSegments.length=0,this._shouldAddToVertexs=!1,this._insertVertices=[],this._vertexFeature&&(this._overLayer.removeFeature(this._vertexFeature),this._vertexFeature=null),this._oldEditedVertex=null,this._downPoint=null,this._currentMovedGeometry=null,this._modified&&(this.dispatchEvent(new E.default(E.default.EventType.MODIFY_END,this.features,e)),this._modified=!1),!1},t.prototype._insertVertex=function(e,t){var n=e.segment,r=e.feature,o=e.geometry,i=e.depth,a=e.isVertex,s=e.index,u=void 0;switch(o.geometryType){case d.default.MULTI_LINE:u=o.getCoordinates(),u[i[0]].splice(s+1,0,t);break;case d.default.POLYGON:u=o.getCoordinates(),a||(u[e.ringIndex].splice(s+1,0,t),s+=1);break;case d.default.MULTI_POLYGON:u=o.getCoordinates(),a||(u[e.polygonIndex][e.ringIndex].splice(s+1,0,t),s+=1);break;case d.default.LINE:u=o.getCoordinates(),a||(u.splice(s+1,0,t),s+=1);break;case d.default.POINT:u=o.getCoordinates(),u=t;break;case d.default.EXTENT:u=o.getCoordinates();break;case d.default.PARALLELOGRAM:break;default:return}this._setGeometryCoordinates(o,u);var l={segment:[n[0],t],feature:r,geometry:o,depth:i,index:s,ringIndex:e.ringIndex,polygonIndex:e.polygonIndex,isVertex:a};this._dragSegments.push([l,1]),this._ignoreNextSingleClick=!0},t.prototype._getInExtent=function(e,t,n){var r=[],o=C.ExtentUtil;return e.forEach(function(e){var i=e.geometry,a=i.extent,s=o.buffer([a.xmin,a.ymin,a.xmax,a.ymax],n);if(o.containsPoint(s,t)){var u=i.geometryType;if(u===d.default.POINT){var l=i.getCoordinates(),f=(0,M.distance)(l,t);f<=n&&r.push({geometry:i,segment:[l,l],index:0})}else if(u===d.default.POLYGON||u===d.default.PARALLELOGRAM){var c=i.getCoordinates();c.forEach(function(e,a){for(var s=0,u=e.length-1;s<u;s++){var l=e[s],f=e[s+1],c=o.boundingExtentFromTwoPoints(l,f),h=o.buffer(c,n);if(C.ExtentUtil.containsPoint(h,t)){var d=[l,f];r.push({geometry:i,segment:d,index:s,ringIndex:a})}}})}else if(u===d.default.MULTI_POLYGON){var h=i.getCoordinates();h.forEach(function(e,a){e.forEach(function(e,s){for(var u=0,l=e.length-1;u<l;u++){var f=e[u],c=e[u+1],h=o.boundingExtentFromTwoPoints(f,c),d=o.buffer(h,n);if(C.ExtentUtil.containsPoint(d,t)){var p=[f,c];r.push({geometry:i,segment:p,polygonIndex:a,index:u,ringIndex:s})}}})})}else if(u===d.default.EXTENT||u===d.default.LINE)for(var p=i.getCoordinates(),y=0,_=p.length-1;y<_;y++){var v=p[y],g=p[y+1],m=o.boundingExtentFromTwoPoints(v,g),b=o.buffer(m,n);if(C.ExtentUtil.containsPoint(b,t)){var E=[v,g];r.push({geometry:i,segment:E,index:y})}}}}),r},t.prototype._setGeometryCoordinates=function(e,t){t&&(this._changingFeature=!0,e.setCoordinates(t),this._changingFeature=!1)},t.prototype._pointDistanceToSegment=function(e,n){var r=n.geometry;if(r.geometryType===d.default.CIRCLE){var o=r;if(n.index===t.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX){var i=(0,M.squaredDistance)(o.getCenter(),e),a=Math.sqrt(i)-o.getRadius();return a*a}}return(0,M.squaredDistanceToSegment)(e,n.segment)},t.prototype._closestOnSegment=function(e,t){return(0,M.closestOnSegment)(e,t.segment)},t.prototype._createOrUpdateVertexFeature=function(e){var t=this._vertexFeature;if(t){var n=t.geometry;n.update(e[0],e[1]),this._overLayer.changed()}else t=new x.default(new y.default(e[0],e[1])),this._vertexFeature=t,this._overLayer.addFeature(t)},t.prototype.getDefaultStyleFunction=function(){var e=P.Style.createDefaultEditing();return function(){return e[d.default.POINT]}},t.prototype._defaultDeleteCondition=function(e){return(0,I.noModifierKeys)(e)&&(0,I.singleClick)(e)},s(t,[{key:"features",get:function(){return this._features},set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this._features=e,this._snapSegments=null,this._vertexFeature&&(this._overLayer.removeFeature(this._vertexFeature),this._vertexFeature=null),this._hasMoveableGeometrys=0!==e.length,this._dragSegments=[],this._snappedToVertex=!1}},{key:"active",get:function(){return this._active},set:function(e){this._vertexFeature&&!e&&(this._overLayer.removeFeature(this._vertexFeature),this._vertexFeature=null),this._active=e}},{key:"map",get:function(){return this._map},set:function(e){this._mapRenderKey&&((0,g.unlistenByKey)(this._mapRenderKey),this._mapRenderKey=null),e&&(this._map=e,this._mapRenderKey=(0,g.listen)(this,m.EventType.CHANGE,e.render,e),e.addLayer(this._overLayer))}}]),t}(l.default);t.default=S,S.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX=1,S.MODIFY_SEGMENT_CIRCLE_CENTER_INDEX=0,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(8),l=r(u),f=n(5),c=r(f),h=n(13),d=r(h),p=n(4),y=n(6),_=n(17),v=n(41),g=r(v),m=Symbol("hasmutilselected"),b=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,e.call(this));return r._hitTolerance=n.hitTolerance?n.hitTolerance:6,r._hasSelectedStyle=!1,r._multiSelectMode=!1,r._selectLayer=new d.default,n.style?(r._selectLayer.style=n.style,r._hasSelectedStyle=!0):r._hasSelectedStyle=!1,r._selectFeatures=[],r.selectMode=n.selectMode?n.selectMode:c.default.CLICK,r._selectMultiMode=n.selectMultiMode?n.selectMultiMode:function(){return!0},n.selectMultiMode&&(0,p.listen)(document,"keydown",r._handleCtrlKeyDwon,r),n.selectMultiMode&&(0,p.listen)(document,"keyup",r._handleCtrlKeyUp,r),r}return a(t,e),t.prototype._condition=function(e){return this.selectMode===e.type},t.prototype._keyPress=function(){},t.prototype._handleCtrlKeyDwon=function(e){this._selectMultiMode(e)&&(this._multiSelectMode=!0)},t.prototype._handleCtrlKeyUp=function(e){this._selectMultiMode(e)&&(this._multiSelectMode=!1)},t.prototype.handleMouseEvent=function(e){var t=this;if(!this._condition(e))return!0;var n=e.map,r=e.pixel,o=this._hitTolerance;this._multiSelectMode||this.clear(),n.forEachFeatureAtPiexl(r,function(e){e.length>0&&(t.selectFeatures=e)},o),this.selectFeatures.length>0&&(this._forEachStyle(),this._selectLayer.addFeatures(this.selectFeatures)),this.dispatchEvent(new g.default(g.default.EventType.SELECT,this.selectFeatures,e))},t.prototype.clear=function(){this._selectLayer.clear(),this.selectFeatures.forEach(function(e){e.styleHighLight=!1,e.delete(m)}),this.selectFeatures=[]},t.prototype._isInSelectFeatures=function(e){var t=this.selectFeatures,n=t.find(function(t){return t.id===e.id});return void 0!==n},t.prototype._updateState=function(){var e=this.map;this.active;e.addLayer(this._selectLayer)},t.prototype._forEachStyle=function(){if(!this._hasSelectedStyle){var e=this.selectFeatures;e.forEach(function(e){e.get(m)||(e.styleHighLight=!0,e.set(m,!0))})}},t.prototype.getDefaultStyleFunction=function(){var e=_.Style.createDefaultEditing();return function(t){return e[t.geometry.geometryType]}},s(t,[{key:"selectFeatures",get:function(){return this._selectFeatures},set:function(e){var t=this;0===e.length?this._selectFeatures=[]:e.forEach(function(e){t._isInSelectFeatures(e)||t._selectFeatures.push(e)})}},{key:"map",get:function(){return this._map},set:function(e){this._mapRenderKey&&((0,p.unlistenByKey)(this._mapRenderKey),this._mapRenderKey=null),e&&(this._map=e,this._mapRenderKey=(0,p.listen)(this,y.EventType.CHANGE,e.render,e)),this._updateState()}},{key:"selectMode",get:function(){return this._selectMode},set:function(e){this._selectMode!==e&&(this._selectMode=e,this.clear())}}]),t}(l.default);t.default=b,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[],n=void 0===e.zoom||e.zoom;n&&t.push(new a.default(e.zoomOptions));var r=void 0===e.home||e.home;r&&t.push(new u.default(e.homeOptions));var o=void 0===e.zoomPercentage||e.zoomPercentage;return o&&t.push(new f.default(e.zoomPercentageOptions)),t}Object.defineProperty(t,"__esModule",{value:!0}),t.controlDefaults=o;var i=n(42),a=r(i),s=n(66),u=r(s),l=n(67),f=r(l);t.default={controlDefaults:o}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(20),u=r(s),l=n(5),f=r(l),c=n(4),h=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=n.className?n.className:"dt-zoom-extent",a=n.homeLabel?n.homeLabel:"H",s=n.homeLabelTip?n.homeLabelTip:"",u=document.createElement("button");u.setAttribute("type","button"),u.title=s,u.appendChild("string"==typeof a?document.createTextNode(a):a);var l=r+" dt-unselectable dt-control",h=document.createElement("div");h.className=l,h.appendChild(u);var d=i(this,e.call(this,{element:h,target:n.target}));return(0,c.listen)(u,f.default.CLICK,d._handleClick,d),d}return a(t,e),t.prototype._handleClick=function(e){e.preventDefault(),this._goToHome()},t.prototype._goToHome=function(){var e=this.map.view;if(e){var t=e.originalCenter,n=e.originalResolution;e.center=t,e.resolution=n}},t}(u.default);t.default=h,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(20),l=r(u),f=n(18),c=n(4),h=n(6),d=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,e.call(this));r._map=void 0;var a=n.className?n.className:"dt-scale-line";return r._innerElement=document.createElement("DIV"),r._innerElement.className=a+"-inner",r._element=document.createElement("DIV"),r._element.className=a+" dt-unselectable",r._element.appendChild(r._innerElement),r}return a(t,e),t.prototype.render=function(){var e=this.map.view,t=(1/e.resolution).toFixed(2),n="&#8195;"+100*t+"% &#8195;";this._innerElement.innerHTML=n},s(t,[{key:"map",get:function(){return this._map},set:function(e){if(this.map&&(0,f.removeNode)(this._element),this._listenerKeys.forEach(function(e){return(0,c.unlistenByKey)(e)}),this._listenerKeys.length=0,this._map=e,this._map){var t=this._target?this._target:e.overlayContainerStopEvent;t.appendChild(this._element),this._listenerKeys.push((0,c.listen)(e,h.EventType.VIEW_CHANGED,this.render,this)),this.render()}}}]),t}(l.default);t.default=d,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(3),l=r(u),f=function(e){function t(n,r,a,s,u){o(this,t);var l=i(this,e.call(this));return l._attributions=u,l._extent=n,l._pixelRatio=a,l._resolution=r,l._state=s,l}return a(t,e),t.prototype.getDomImage=function(e){return e},t.prototype.load=function(){},s(t,[{key:"attributions",get:function(){return this._attributions}},{key:"extent",get:function(){return this._extent}},{key:"pixelRatio",get:function(){return this._pixelRatio}},{key:"resolution",get:function(){return this._resolution},set:function(e){this._resolution!==e&&(this._resolution=e)}},{key:"state",get:function(){return this._state},set:function(e){this.state!==e&&(this._state=e)}}]),t}(l.default);t.default=f,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=r(i),s=n(22),u=r(s),l=n(10),f=r(l),c=n(31),h=r(c),d=n(30),p=r(d),y=n(9),_=r(y),v=n(21),g=r(v),m=n(24),b=r(m),E=n(15),w=r(E),x=function(){function e(){o(this,e)}return e.read=function(e){var t=[];if(e){var n=e.features;return n.forEach(function(e){if("Feature"===e.type&&e.geometry){var n=void 0,r=e.geometry,o=r.type;if("Point"===o?n=u.default:"LineString"===o?n=p.default:"Polygon"===o?n=f.default:"ExtentPolygon"===o?n=_.default:"MutilPolygon"===o?n=h.default:"ParallelogramPolygon"===o&&(n=g.default),void 0===n)throw new Error(" Geometry ");var i=r.coordinates,a=new n;a.setCoordinates(i);var s=void 0;e.properties&&(s=e.properties);var l=e.title,c=new b.default(a,s,l);t.push(c)}}),t}},e.write=function(t){var n=[];return t.forEach(function(t){n.push({type:"Feature",geometry:{type:e.getGeoJSONGeometryType(t.geometry),coordinates:t.geometry.getCoordinates()},properties:w.default.mapToObject(t._attributesMap),title:t.displayText})}),{type:"FeatureCollection",features:n}},e.getGeoJSONGeometryType=function(e){var t=e.geometryType,n=void 0;switch(t){case a.default.POINT:n="Point";break;case a.default.LINE:n="LineString";break;case a.default.POLYGON:n="Polygon";break;case a.default.MULTI_POLYGON:n="MutilPolygon";break;case a.default.EXTENT:n="ExtentPolygon";break;case a.default.PARALLELOGRAM:n="ParallelogramPolygon"}return n},e}();t.default=x,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(null===e||void 0===e||null===t||void 0===t)return!1;var n=e.extent,r=t.extent,o=[n.xmin,n.ymin,n.xmax,n.ymax],i=[r.xmin,r.ymin,r.xmax,r.ymax];if(!s.ExtentUtil.intersects(o,i))return!1;var f=e.geometryType,h=!1;switch(f){case a.default.POINT:h=u(e,t);break;case a.default.LINE:h=l(e,t);break;case a.default.POLYGON:case a.default.EXTENT:h=c(e,t)}return h}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=n(1),a=r(i),s=n(2),u=function(e,t){var n=t.geometryType;switch(n){case a.default.POINT:case a.default.LINE:case a.default.POLYGON:case a.default.EXTENT:return t.containsXY(e.x,e.y)}return!1},l=function(e,t){var n=t.geometryType;switch(n){case a.default.POINT:return e.containsXY(t.x,t.y);case a.default.LINE:return f(e,t);case a.default.POLYGON:case a.default.EXTENT:return h(e,t)}},f=function(e,t){var n=e.getCoordinates(),r=t.getCoordinates();return p(n,r)},c=function(e,t){var n=t.geometryType;switch(n){case a.default.POINT:return e.containsXY(t.x,t.y);case a.default.LINE:return h(t,e);case a.default.POLYGON:case a.default.EXTENT:return d(e,t)}},h=function(e,t){var n=e.getCoordinates(),r=t.getCoordinates();t.geometryType!==a.default.POLYGON&&t.geometry!==a.default.MULTI_POLYGON||(r=r[0]);var o=p(n,r);if(!o)for(var i=0,s=n.length;i<s;++i){var u=n[i];if(o=t.containsXY(u[0],u[1]))break}return o},d=function(e,t){var n=e.getCoordinates(),r=t.getCoordinates();e.geometryType===a.default.POLYGON&&(n=n[0]),t.geometryType===a.default.POLYGON&&(r=r[0]);var o=p(n,r);if(!o)for(var i=0,s=n.length;i<s;++i){var u=n[i];if(o=t.containsXY(u[0],u[1]))break}if(!o)for(var l=0,f=r.length;l<f;++l){var c=r[l];if(o=e.containsXY(c[0],c[1]))break}return o},p=function(e,t){for(var n=!1,r=y(e),o=y(t),i=void 0,a=void 0,s=void 0,u=void 0,l=void 0,f=void 0,c=void 0,h=void 0,d=0,p=r.length;d<p;++d){i=r[d],a=i.x1,s=i.x2,u=i.y1,l=i.y2;for(var v=0,g=o.length;v<g&&(f=o[v],!(f.x1>s));++v)if(!(f.x2<a)&&(c=f.y1,h=f.y2,!(Math.min(c,h)>Math.max(u,l))&&!(Math.max(c,h)<Math.min(u,l))&&_(i,f))){n=!0;break}}return n},y=function(e){function t(e,t){return e.x1-t.x1}for(var n=e.length-1,r=new Array(n),o=void 0,i=void 0,a=0;a<n;++a)o=e[a],i=e[a+1],o[0]<i[0]?r[a]={x1:o[0],y1:o[1],x2:i[0],y2:i[1]}:r[a]={x1:i[0],y1:i[1],x2:o[0],y2:o[1]};return r.sort(t)},_=function(e,t,n){var r=n&&n.point,o=n&&n.tolerance,i=!1,a=e.x1-t.x1,s=e.y1-t.y1,u=e.x2-e.x1,l=e.y2-e.y1,f=t.y2-t.y1,c=t.x2-t.x1,h=f*u-c*l,d=c*s-f*a,p=u*s-l*a;if(0==h)0==d&&0==p&&(i=!0);else{var y=d/h,_=p/h;if(y>=0&&y<=1&&_>=0&&_<=1)if(r){var g=e.x1+y*u,m=e.y1+y*l;i={x:g,y:m}}else i=!0}if(o){var b=void 0;if(i){if(r)for(var E=[e,t],w=void 0,x=void 0,O=void 0,T=0;T<2;++T){w=E[T];for(var P=1;P<3;++P)if(x=w["x"+P],O=w["y"+P],b=Math.sqrt(Math.pow(x-i.x,2)+Math.pow(O-i.y,2)),b<o){i.x=x,i.y=O;break}}}else for(var C=[e,t],M=void 0,I=void 0,L=void 0,S=void 0,R=0;R<2;++R){M=C[R],I=C[(R+1)%2];for(var N=1;N<3;++N)if(L={x:M["x"+N],y:M["y"+N]},S=v(L,I),S.distance<o){i=!r||{x:L.x,y:L.y};break}}}return i},v=function(e,t){var n=g(e,t);return n.distance=Math.sqrt(n.distance),n},g=function(e,t){var n=e.x,r=e.y,o=t.x1,i=t.y1,a=t.x2,s=t.y2,u=a-o,l=s-i,f=(u*(n-o)+l*(r-i))/(Math.pow(u,2)+Math.pow(l,2)),c=void 0,h=void 0;return f<=0?(c=o,h=i):f>=1?(c=a,h=s):(c=o+f*u,h=i+f*l),{distance:Math.pow(c-n,2)+Math.pow(h-r,2),x:c,y:h,along:f}};e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=e.clone(),r=t.clone(),o=n,i=r.getCoordinates(),u=n.getCoordinates(),f=n.geometryType;if(f===a.default.POLYGON&&(0,l.default)(n,r)){var c=i[0],h=u[0],d=[],p=[];c.forEach(function(e){d.push(e[0],e[1])}),h.forEach(function(e){p.push(e[0],e[1])});var y=(0,s.linearRingIsClockwise)(d,0,d.length,2),_=(0,s.linearRingIsClockwise)(p,0,p.length,2);u.length>1?y!==_?u.push(c.slice()):u.push(c.slice().reverse()):y!==_?u.push(c.slice()):u.push(c.slice().reverse())}return o}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=n(1),a=r(i),s=n(33),u=n(29),l=r(u);e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=e.clone(),r=t.clone(),o=n.getCoordinates()[0],i=r.getCoordinates(),a=m(o,i);if(0===a.length||a.length%2===1)return[];var s=y(a,i),u=p(a,s),f=v(a,o),c=d(f,u),h=[];return c.forEach(function(e){var t=[];e.forEach(function(e){t.push([e[0],e[1]])});var n=new l.default;n.setCoordinates([t]),h.push(n)}),x(n,h,r),h}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=n(29),a=r(i),s=n(2),u=n(10),l=r(u),f=Symbol("isDividedPoint"),c=Symbol("alreadyUsed"),h=Symbol("dividePoint"),d=function(e,t){for(var n=0,r=e.length,o=function(e,t){return t.find(function(t){return t[0]===e[0]&&t[1]===e[1]})},i=function(e){for(var n=0,r=t.length;n<r;n++){var o=t[n],i=o[0],a=o[o.length-1];if(i[0]===e[0]&&i[1]===e[1])return o;if(a[0]===e[0]&&a[1]===e[1]){var s=[].concat(o);return s.reverse()}}},a=function(t){for(var n=0,r=e.length;n<r;n++){var o=e[n];if(o[0]===t[0]&&o[1]===t[1])return n===e.length-1?o:e[n+1]}},s=[],u=[],l=function e(t,n){if(n.length>1){var r=n[0];if(r[0]===t[0]&&r[1]===t[1])return n.push(t),!0}if(t.length>=3&&t[2]===f){var o=i(t);o.forEach(function(e){n.push(e)});var s=n[0],u=n[n.length-1];if(s[0]===u[0]&&s[1]===u[1])return!0;var l=o[o.length-1],c=a(l);e(c,n)}else if(2===t.length){n.push(t);var h=a(t);e(h,n)}},h=function(e,t){t.forEach(function(t){o(t,e)&&(2===t.length?t.push(c):3===t.length&&t[2]===f?t.push("1"):4===t.length&&"1"===t[3]&&(t[3]="2"))})},d=function(e,n){for(var r=t,o=0,i=0,a=r.length;i<a;i++){var s=r[i];o=0;for(var u=0,l=s.length;u<l;u++){var f=s[u];if(f[0]===e[0]&&f[1]===e[1]&&o++,f[0]===n[0]&&f[1]===n[1]&&o++,2===o)return!0}}return!1};n<r-1;n++){var p=e[n];if(2===p.length){o(p,s)||s.push(p);var y=e[n+1];l(y,s),h(s,e),u.push(s),s=[]}else if(3===p.length&&p[2]===f){o(p,s)||s.push(p);var _=e[n+1];l(_,s),h(s,e),u.push(s),s=[]}else if(4===p.length&&"1"===p[3]){var v=e[n+1];v.length>=3&&v[2]===f&&d(p,v)?v=p:o(p,s)||s.push(p),l(v,s),h(s,e);var g=s[0],m=s[s.length-1];g[0]===m[0]&&g[1]===m[1]||s.push(g),u.push(s),s=[]}}return u},p=function(e,t){for(var n=[],r=[],o=!1,i=0,a=t.length;i<a;i++){var s=t[i];o!==!1||3!==s.length?o&&2===s.length?r.push(s):o&&3===s.length&&(r.push([s[0],s[1]]),o=!1,n.push(r),r=[]):(r.push([s[0],s[1]]),o=!0)}return n},y=function(e,t){for(var n=function(t,n){return e.filter(function(e){var r=e.intersectFrom.fromPoint,o=e.intersectFrom.endPoint;return r[0]===t[0]&&r[1]===t[1]&&o[0]===n[0]&&o[1]===n[1]})},r=function(e){return a.find(function(t){return t[0]===e[0]&&t[1]===e[1]})},o=t.length,i=0,a=[];i<o-1;i++){var s=t[i],u=t[i+1];r(s)||a.push(s);var l=n(s,u);0!==l.length&&(1===l.length?a.push([l[0].point.x,l[0].point.y,h]):!function(){var e={x:s[0],y:s[1]};l.sort(function(t,n){return _(t.point,e)-_(n.point,e)}),l.forEach(function(e){a.push([e.point.x,e.point.y,h])})}()),r(u)||a.push(u)}return a},_=function(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))},v=function(e,t){for(var n=[],r=function(t,n){return e.filter(function(e){var r=e.originPoint,o=r.fromPoint,i=r.toPoint;return t[0]===o[0]&&t[1]===o[1]&&n[0]===i[0]&&n[1]===i[1]})},o=t.length,i=0;i<o-1;i++){var a=t[i],s=t[i+1];n.push(a);var u=r(a,s);u.length>0&&(u.length>1&&!function(){var e={x:a[0],y:a[1]};u.sort(function(t,n){return _(t.point,e)-_(n.point,e)})}(),u.forEach(function(e){var t=e.point;n.push([t.x,t.y,f])}))}return n.push(n[0]),n},g=function(e,t){for(var n=s.ExtentUtil,r=n.boundingExtentFromTwoPoints(t[0],t[1]),o=n.buffer(r,4),i={x1:t[0][0],y1:t[0][1],x2:t[1][0],y2:t[1][1]},a=[],u=0,l=e.length-1;u<l;u++){var f=e[u],c=e[u+1],h=n.boundingExtentFromTwoPoints(f,c);if(n.intersects(h,o)){var d={x1:f[0],y1:f[1],x2:c[0],y2:c[1]},p=b(d,i,{point:!0});p instanceof Object&&a.push({point:p,originPoint:{fromPoint:f,toPoint:c},index:u})}}return a},m=function(e,t){for(var n=g,r=[],o=function(o,i){var a=t[o],s=t[o+1],u=n(e,[a,s]);u.forEach(function(e){e.intersectIndex=o,e.intersectFrom={fromPoint:a,endPoint:s}}),r=r.concat(u)},i=0,a=t.length-1;i<a;i++)o(i,a);return r},b=function(e,t,n){var r=n&&n.point,o=n&&n.tolerance,i=!1,a=e.x1-t.x1,s=e.y1-t.y1,u=e.x2-e.x1,l=e.y2-e.y1,f=t.y2-t.y1,c=t.x2-t.x1,h=f*u-c*l,d=c*s-f*a,p=u*s-l*a;if(0==h)0==d&&0==p&&(i=!0);else{var y=d/h,_=p/h;if(y>=0&&y<=1&&_>=0&&_<=1)if(r){var v=e.x1+y*u,g=e.y1+y*l;i={x:v,y:g}}else i=!0}if(o){var m=void 0;if(i){if(r)for(var b=[e,t],w=void 0,x=void 0,O=void 0,T=0;T<2;++T){w=b[T];for(var P=1;P<3;++P)if(x=w["x"+P],O=w["y"+P],m=Math.sqrt(Math.pow(x-i.x,2)+Math.pow(O-i.y,2)),m<o){i.x=x,i.y=O;break}}}else for(var C=[e,t],M=void 0,I=void 0,L=void 0,S=void 0,R=0;R<2;++R){M=C[R],I=C[(R+1)%2];for(var N=1;N<3;++N)if(L={x:M["x"+N],y:M["y"+N]},S=E(L,I),S.distance<o){i=!r||{x:L.x,y:L.y};break}}}return i},E=function(e,t){var n=w(e,t);return n.distance=Math.sqrt(n.distance),n},w=function(e,t){var n=e.x,r=e.y,o=t.x1,i=t.y1,a=t.x2,s=t.y2,u=a-o,l=s-i,f=(u*(n-o)+l*(r-i))/(Math.pow(u,2)+Math.pow(l,2)),c=void 0,h=void 0;return f<=0?(c=o,h=i):f>=1?(c=a,h=s):(c=o+f*u,h=i+f*l),{distance:Math.pow(c-n,2)+Math.pow(h-r,2),x:c,y:h,along:f}},x=function(e,t,n){if(e.hasHoles())for(var r=function(e,t){var n=new l.default([e]),r=t.find(function(e){return(0,a.default)(e,n)});r&&r.getCoordinates().push(e)},o=e.getCoordinates(),i=n,s=1,u=o.length;s<u;s++){var f=m(o[s],i);0===f.length&&r(o[s],t)}};e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(3),u=r(s),l=n(4),f=n(5),c=r(f),h=function(e){function t(n,r){o(this,t);var a=i(this,e.call(this));return a.map=n,a._element=r,a._dragging=!1,a._down=null,a._dragListenerKeys=[],a._clickTimeoutId=0,a._mapping={mousedown:a._mousedown,mousemove:a._mousemove,mouseup:a._mouseup,mouseover:a._mouseover,mouseout:a._mouseout},a._registerSource(),a}return a(t,e),t.prototype._registerSource=function(){var e=this,t=this.getEvents();t.forEach(function(t){return(0,l.listen)(e._element,t,e._mapping[t],e)})},t.prototype.getEvents=function(){return Object.keys(this._mapping)},t.prototype._mousedown=function(e){var t=new c.default(this.map,e,c.default.MOUSE_DOWN);if(this.dispatchEvent(t),this._dragging=!1,this._down=e,0===this._dragListenerKeys.length){var n=document;this._dragListenerKeys.push((0,l.listen)(n,c.default.MOUSE_MOVE,this._mousemove,this),(0,l.listen)(n,c.default.MOUSE_UP,this._mouseup,this))}},t.prototype._mousemove=function(e){var t=new c.default(this.map,e,c.default.MOUSE_MOVE);if(null!==t.coordinate&&(this.dispatchEvent(t),this._isMoving(e))){this._dragging=!0;var n=new c.default(this.map,e,c.default.MOUSE_DRAG,this._dragging);this.dispatchEvent(n)}},t.prototype._mouseup=function(e){var t=new c.default(this.map,e,c.default.MOUSE_UP);this.dispatchEvent(t),!this._dragging&&this._down&&this._emulateClick(this._down),this._dragListenerKeys.forEach(l.unlistenByKey),this._dragListenerKeys.length=0,this._dragging=!1,this._down=null},t.prototype._mouseover=function(e){var t=new c.default(this.map,e,c.default.MOUSE_OVER);this.dispatchEvent(t)},t.prototype._mouseout=function(e){var t=new c.default(this.map,e,c.default.MOUSE_OUT);this.dispatchEvent(t)},t.prototype._emulateClick=function(e){var t=new c.default(this.map,e,c.default.CLICK);this.dispatchEvent(t),0!==this._clickTimeoutId?(clearTimeout(this._clickTimeoutId),this._clickTimeoutId=0,t=new c.default(this.map,e,c.default.DBLCLICK),this.dispatchEvent(t)):this._clickTimeoutId=setTimeout(function(){this._clickTimeoutId=0;var t=new c.default(this.map,e,c.default.SINGLE_CLICK);this.dispatchEvent(t)}.bind(this),250)},t.prototype._isMoving=function(e){return null!==this._down&&(e.clientX!==this._down.clientX||e.clientY!==this._down.clientY)},t}(u.default);t.default=h,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(3),f=r(l),c=n(76),h=r(c),d=n(73),p=r(d),y=n(5),_=r(y),v=n(49),g=r(v),m=n(13),b=r(m),E=n(4),w=n(7),x=n(6),O=n(2),T=n(57),P=n(65),C=function(e){function t(n){i(this,t);var r=a(this,e.call(this));r._frameState=null,r._layers=[],r._toPixelTransform=w.Transform.create(),r._toCoordinateTransform=w.Transform.create(),r._animationDelayKey=void 0,r._components=[],r._controls=[],r._createViewport(),r._overlayContainer=document.createElement("DIV"),r._overlayContainer.className="dt-overlaycontainer",r.viewport.appendChild(r._overlayContainer),r._overlayContainerStopEvent=document.createElement("DIV"),r._overlayContainerStopEvent.className="dt-overlaycontainer-stopevent";var o=[_.default.CLICK,_.default.DBLCLICK,_.default.MOUSE_DOWN,_.default.MOUSE_UP,_.default.MOUSE_WHEEL,_.default.WHEEL];o.forEach(function(e){(0,E.listen)(r._overlayContainerStopEvent,e,function(e){e.stopPropagation()})}),r.viewport.appendChild(r._overlayContainerStopEvent);var s=t.parseOptionsInner(n);return r.allowCoordinatesBeyondImage=n.allowCoordinatesBeyondImage||!1,r._renderer=new s.rendererClass(r.viewport,r),r._createBrowserEventHandler(),r._animationDelay=function(){
r._animationDelayKey=void 0,r._renderFrame(Date.now())},r.layers=s.values.layers,r.target=s.values.target,r.view=s.values.view,s.components.forEach(function(e){return r.addComponents(e)}),s.controls.forEach(function(e){return r.addControl(e)}),r._overlayIdIndex={},r._overlays=s.overlays,r._overlays.forEach(function(e){return r._addOverlayInternal(e)}),(0,E.listen)(r.view,x.EventType.CHANGE,r._handleViewChange,r),(0,E.listen)(r.viewport,_.default.MOUSE_WHEEL,r._handleMouseWheelEvent,r),(0,E.listen)(r.viewport,_.default.WHEEL,r._handleMouseWheelEvent,r),r}return s(t,e),t.prototype._createViewport=function(){var e=document.createElement("DIV");e.className="dt-viewport",e.style.position="relative",e.style.overflow="hidden",e.style.width="100%",e.style.height="100%",this._viewport=e},t.prototype._createRenderer=function(){this._renderer=new h.default(this.viewport,this)},t.prototype._createBrowserEventHandler=function(){this._browserEventHandler=new p.default(this,this.viewport);for(var e in _.default)(0,E.listen)(this._browserEventHandler,_.default[e],this._handleBrowserEvent,this)},t.prototype._handleMouseWheelEvent=function(e){var t=e.type,n=new _.default(this,e,t);this._handleBrowserEvent(n)},t.prototype._handleKeyboardEvent=function(e){var t=e.type,n=new _.default(this,e,t);this._handleBrowserEvent(n)},t.prototype._handleBrowserEvent=function(e){var t=this.components,n=void 0;if(this.dispatchEvent(e)!==!1)for(n=t.length-1;n>=0;n--){var r=t[n];if(r.active){var o=r.handleMouseEvent(e);if(!o)break}}},t.prototype._renderFrame=function(){var e=this.size,t=this.view,n=null,r=O.ExtentUtil.createEmpty(),o=t.getViewState();n={size:e,viewState:o,pixelRatio:1,extent:r,toPixelTransform:this._toPixelTransform,toCoordinateTransform:this._toCoordinateTransform},n&&(n.extent=O.ExtentUtil.getForViewAndSize(o.center,o.resolution,o.rotation,n.size,r)),this._frameState=n,this._renderer.renderFrame(n)},t.prototype.render=function(){void 0===this._animationDelayKey&&(this._animationDelayKey=window.requestAnimationFrame(this._animationDelay))},t.prototype._handleViewChange=function(){this.render(),this.dispatchEvent(x.EventType.VIEW_CHANGED)},t.prototype.isRendered=function(){return!!this._frameState},t.prototype.addComponents=function(e){this.components.push(e),e.map=this},t.prototype.addControl=function(e){this.controls.push(e),e.map=this},t.prototype.addLayer=function(e){this.layers.push(e),e.map=this},t.prototype.getFeaturesLayer=function(){return this.layers.filter(function(e){return e instanceof b.default})},t.prototype._addOverlayInternal=function(e){var t=e.overlayId;void 0!==t&&(this._overlayIdIndex[t.toString()]=e),e.map=this},t.prototype.getTargetElement=function(){var e=this.target;return void 0!==e?"string"==typeof e?document.getElementById(e):e:null},t.prototype.forEachFeatureAtPiexl=function(e,t,n){if(this._frameState){for(var r=this.getCoordinateFromPixel(e),o=n,i=this.getFeaturesLayer(),a=null,s=0,u=i.length;s<u;s++){var l=i[s];if(l.visible&&(a=l.forEachFeatureAtPiexl(this._frameState,r,t,o)))return t(a,l)}return a}},t.prototype.updateSize=function(){var e=this.getTargetElement();if(e){var t=getComputedStyle(e);this.size=[e.offsetWidth-Number.parseFloat(t.borderLeftWidth)-Number.parseFloat(t.paddingLeft)-Number.parseFloat(t.paddingRight)-Number.parseFloat(t.borderRightWidth),e.offsetHeight-Number.parseFloat(t.borderTopWidth)-Number.parseFloat(t.paddingTop)-Number.parseFloat(t.paddingBottom)-Number.parseFloat(t.borderBottomWidth)]}else this.size=void 0},t.prototype.getEventPixel=function(e){var t=this.viewport.getBoundingClientRect(),n=e;return[n.clientX-t.left,n.clientY-t.top]},t.prototype.getCoordinateFromPixel=function(e){var t=this._frameState;return t?w.Transform.apply(t.toCoordinateTransform,e.slice()):null},t.prototype.getPixelFromCoordinate=function(e){var t=this._frameState;return t?w.Transform.apply(t.toPixelTransform,e.slice(0,2)):null},t.parseOptionsInner=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=h.default,n={};n.view=void 0!==e.view?e.view:new g.default,n.target=e.target,n.layers=void 0!==e.layers?e.layers:[];var r=void 0;r=e.components?e.components:(0,T.componentsDefaults)();var i=void 0;i=e.controls?e.controls:(0,P.controlDefaults)();var a=void 0;return void 0!==e.overlays?Array.isArray(e.overlays)&&(a=[].concat(o(e.overlays))):a=[],{rendererClass:t,components:r,controls:i,values:n,overlays:a}},u(t,[{key:"overlayContainer",get:function(){return this._overlayContainer}},{key:"overlayContainerStopEvent",get:function(){return this._overlayContainerStopEvent}},{key:"viewport",get:function(){return this._viewport}},{key:"size",get:function(){return this._size},set:function(e){this._size=e}},{key:"components",get:function(){return this._components}},{key:"controls",get:function(){return this._controls}},{key:"layers",get:function(){return this._layers},set:function(e){var t=this;Array.isArray(e)&&e.forEach(function(e){t.addLayer(e)})}},{key:"target",get:function(){return this._target},set:function(e){this._target=e;var t=document.getElementById(this._target);t.appendChild(this.viewport),(0,E.listen)(document,_.default.KEYDOWN,this._handleKeyboardEvent,this),(0,E.listen)(document,_.default.KEYPRESS,this._handleKeyboardEvent,this);var n=this.updateSize.bind(this);window.addEventListener(x.EventType.RESIZE,n,!1),this.updateSize(),this.render()}}]),t}(f.default);t.default=C,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(3),l=r(u),f=n(4),c=n(51),h=n(2),d=n(18),p=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,e.call(this));return r._element=void 0,r._map=void 0,r._offset=void 0,r._position=void 0,r._positioning=void 0,r._overlay=n.id,r._insertFirst=void 0===n.insertFirst||n.insertFirst,r._stopEvent=void 0===n.stopEvent||n.stopEvent,r._element=document.createElement("DIV"),r._element.className="dt-overlay-container dt-selectable",r._element.style.position="absolute",r.autoPan=void 0!==n.autoPan&&n.autoPan,r._autoPanAnimation=n.autoPanAnimation||{},r._autoPanMargin=void 0!==n.autoPanMargin?n.autoPanMargin:20,r._rendered={_bottom:"",_left:"",_right:"",_top:"",_visible:!0},r._mapPostrenderListenerKey=null,void 0!==n.element&&(r.popupEelement=n.element),r.offset=void 0!==n.offset?n.offset:[0,0],r.positioning=void 0!==n.positioning?n.positioning:y.TOP_LEFT,void 0!==n.position&&(r.position=n.position),r}return a(t,e),t.prototype.render=function(){this.updatePixelPosition()},t.prototype.updatePixelPosition=function(){var e=this.map;if(e){var t=this.position;if(!e||!e.isRendered()||!t)return void this.setVisible(!1);var n=e.getPixelFromCoordinate(t),r=e.size;this.updateRenderedPosition(n,r)}},t.prototype.updateRenderedPosition=function(e,t){var n=this._element.style,r=this.offset,o=this.positioning;this.setVisible(!0);var i=r[0],a=r[1];if(o==y.BOTTOM_RIGHT||o==y.CENTER_RIGHT||o==y.TOP_RIGHT){""!==this._rendered.left_&&(this._rendered.left_=n.left="");var s=Math.round(t[0]-e[0]-i)+"px";this._rendered.right_!=s&&(this._rendered.right_=n.right=s)}else{""!==this._rendered.right_&&(this._rendered.right_=n.right=""),o!=y.BOTTOM_CENTER&&o!=y.CENTER_CENTER&&o!=y.TOP_CENTER||(i-=this._element.offsetWidth/2);var u=Math.round(e[0]+i)+"px";this._rendered.left_!=u&&(this._rendered.left_=n.left=u)}if(o==y.BOTTOM_LEFT||o==y.BOTTOM_CENTER||o==y.BOTTOM_RIGHT){""!==this._rendered.top_&&(this._rendered.top_=n.top="");var l=Math.round(t[1]-e[1]-a)+"px";this._rendered.bottom_!=l&&(this._rendered.bottom_=n.bottom=l)}else{""!==this._rendered.bottom_&&(this._rendered.bottom_=n.bottom=""),o!=y.CENTER_LEFT&&o!=y.CENTER_CENTER&&o!=y.CENTER_RIGHT||(a-=this._element.offsetHeight/2);var f=Math.round(e[1]+a)+"px";this._rendered.top_!=f&&(this._rendered.top_=n.top=f)}},t.prototype.setVisible=function(e){this._rendered.visible!==e&&(this._element.style.display=e?"":"none",this._rendered.visible=e)},t.prototype._panIntoView=function(){var e=this.map;if(e&&e.getTargetElement()){var t=this._getRect(e.getTargetElement(),e.size),n=this.popupEelement;if(0!==n.clientHeight||0!==n.clientWidth){var r=this._getRect(n,[(0,d.outerWidth)(n),(0,d.outerHeight)(n)]),o=this._autoPanMargin;if(!h.ExtentUtil.containsExtent(t,r)){var i=r[0]-t[0],a=t[2]-r[2],s=r[1]-t[1],u=t[3]-r[3],l=[0,0];if(i<0?l[0]=i-o:a<0&&(l[0]=Math.abs(a)+o),s<0?l[1]=s-o:u<0&&(l[1]=Math.abs(u)+o),0!==l[0]||0!==l[1]){var f=e.view.center,c=e.getPixelFromCoordinate(f),p=[c[0]+l[0],c[1]+l[1]];e.view.center=e.getCoordinateFromPixel(p)}}}}},t.prototype._getRect=function(e,t){var n=e.getBoundingClientRect(),r=n.left+window.pageXOffset,o=n.top+window.pageYOffset;return[r,o,r+t[0],o+t[1]]},t.prototype._setElement=function(){(0,d.removeChildren)(this._element);var e=this.popupEelement;e&&this._element.appendChild(e)},s(t,[{key:"overlayId",get:function(){return this._overlayId}},{key:"popupEelement",get:function(){return this._popupEelement},set:function(e){this._popupEelement=e,this._setElement()}},{key:"map",get:function(){return this._map},set:function(e){if(this._map=e,this._map){var t=this._map;this._mapPostrenderListenerKey=(0,f.listen)(t,c.RenderEventType.POSTRENDER,this.render,this),this.updatePixelPosition();var n=this._stopEvent?t.overlayContainerStopEvent:t.overlayContainer;this._insertFirst?n.insertBefore(this._element,n.childNodes[0]||null):n.appendChild(this._element)}}},{key:"offset",get:function(){return this._offset},set:function(e){this._offset=e,this.updatePixelPosition()}},{key:"position",get:function(){return this._position},set:function(e){this._position=e,this.updatePixelPosition(),this._position&&this.autoPan&&this._panIntoView()}},{key:"positioning",get:function(){return this._positioning},set:function(e){this._positioning=e,this.updatePixelPosition()}}]),t}(l.default);t.default=p;var y={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"};e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(47),l=r(u),f=n(13),c=r(f),h=n(83),d=r(h),p=n(77),y=r(p),_=n(78),v=r(_),g=n(18),m=n(7),b=n(51),E=n(27),w=n(84),x=r(w),O=function(e){function t(n,r){o(this,t);var a=i(this,e.call(this,n,r));return a._context=null,a._canvas=null,a._rendererVisible=!0,a._layerRenderers=[],a._transform=m.Transform.create(),a._addToContainer(n),a}return a(t,e),t.prototype._addToContainer=function(e){var t=this.context;this._canvas=t.canvas,this._canvas.style.width="100%",this._canvas.style.height="100%",this._canvas.className="dt-unselectable",e.insertBefore(this._canvas,e.childNodes[0]||null)},t.prototype.renderFrame=function(e){var t=this;if(null!==this.map){if(!e&&this._rendererVisible)return this._canvas.style.display="none",void(this._rendererVisible=!1);var n=this.context,r=e.size[0],o=e.size[1];this._canvas.width!==r||this._canvas.height!==o?(this._canvas.width=r,this._canvas.height=o):n.clearRect(0,0,r,o);var i=this.map.layers;(0,E.stableSort)(i,this.sortByZIndex),this.updateTransform(e),this._dispatchComposeEvent(b.RenderEventType.PRERENDER,e),i.forEach(function(r){if(r.visible){var o=t.getLayerRenderer(r);o.prepareFrame(e)&&o.composeFrame(e,n)}}),this._dispatchComposeEvent(b.RenderEventType.POSTRENDER,e)}},t.prototype.getLayerRenderer=function(e){var t=e.id.toString();if(t in this._layerRenderers)return this._layerRenderers[t];var n=this.createLayerRenderer(e);return this._layerRenderers[t]=n,n},t.prototype.createLayerRenderer=function(e){return e instanceof l.default?new v.default(e,this.context):e instanceof c.default?new y.default(e,this.context):null},t.prototype.updateTransform=function(e){var t=e.viewState,n=e.toPixelTransform,r=e.toCoordinateTransform,o=e.size,i=t.resolution,a=t.center,s=t.rotation;m.Transform.compose(n,o[0]/2,o[1]/2,1/i,1/i,-s,-a[0],-a[1]),m.Transform.invert(m.Transform.setFromArray(r,n))},t.prototype.sortByZIndex=function(e,t){return e.zIndex-t.zIndex},t.prototype._dispatchComposeEvent=function(e,t){var n=this.map,r=this.context;if(n.hasListener(e)){var o=new x.default(e,t,r,null);n.dispatchEvent(o)}},s(t,[{key:"canvas",get:function(){return this._canvas}},{key:"context",get:function(){return this._context||(this._context=(0,g.createCanvasContext2D)()),this._context}}]),t}(d.default);t.default=O,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(50),u=r(s),l=n(80),f=r(l),c=n(79),h=r(c),d=n(81),p=r(d),y=n(82),_=r(y),v=n(7),g=n(2),m=function(e){function t(n,r){o(this,t);var a=i(this,e.call(this,n,r));return a._geometryRenderGroup=new Map,a._textRender=new _.default(a.context),a._maxExtent=null,a._renderFeatures=[],a._renderResolution=Number.NaN,a._renderExtent=[1/0,1/0,-(1/0),-(1/0)],a._renderRevision=NaN,a._cacheableThisTime=!0,a}return a(t,e),t.prototype._getGeometryRender=function(e){var n=e.geometryType;return this._geometryRenderGroup.has(n)||this._geometryRenderGroup.set(n,new t.GeometryRender[n](this.context)),this._geometryRenderGroup.get(n)},t.prototype._renderFeaturesInOrder=function(e){return null===e||void 0===e?e:0===e.length?e:void 0},t.prototype.prepareFrame=function(e){var t=this.layer,n=e.extent,r=e.viewState,o=r.resolution,i=t.revision,a=t.renderBuffer,s=g.ExtentUtil.buffer(n,a*o);this._renderResolution===o&&this._renderRevision===i&&g.ExtentUtil.containsExtent(this._renderExtent,s)&&(this._cacheableThisTime=!0);var u=this.layer.loadFeature(s);return this._cacheableThisTime=!1,this._renderFeatures=u,this._maxExtent=s,this._renderResolution=o,this._renderExtent=s,this._renderRevision=i,0!==u.length},t.prototype.composeFrame=function(e,t){var n=this,r=e,o=r.viewState,i=this.layer,a=this._renderFeatures,s=o.resolution,u=this.getTransform(r,0);return this.preCompose(t,r,u),this._clipExtent(u,t),a.forEach(function(e){var t=void 0;if(e.style)t=e.style;else{var r=i.styleFunction;r&&(t=r(e,s),e.style=n._cloneRenderStyle(t))}var o=n._getGeometryRender(e.geometry);n._resetRender(o),o.render(e,t,u),e.textDisplay&&n._textRender.render(e,t,u)}),t.restore(),this.postCompose(t,r,u),!0},t.prototype._cloneRenderStyle=function(e){if(e){var t=[];return e.forEach(function(e){t.push(e.clone())}),t}return null},t.prototype._clipExtent=function(e,t){var n=this.getClipCoords(e);t.save(),t.beginPath(),t.moveTo(n[0],n[1]),t.lineTo(n[2],n[3]),t.lineTo(n[4],n[5]),t.lineTo(n[6],n[7]),t.clip()},t.prototype.getClipCoords=function(e){var t=this._maxExtent,n=t[0],r=t[1],o=t[2],i=t[3],a=[n,r,n,i,o,i,o,r];return v.Transform.transform2D(a,0,8,2,e,a),a},t.prototype._resetRender=function(e){this._cacheableThisTime||e.resetRenderOption()},t.prototype.preCompose=function(){},t.prototype.postCompose=function(){},t}(u.default);t.default=m,m.GeometryRender={},m.GeometryRender.point=f.default,m.GeometryRender.line=h.default,m.GeometryRender.polygon=p.default,m.GeometryRender.multi_polygon=p.default,m.GeometryRender.extent=p.default,m.GeometryRender.parallelogram=p.default,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(50),l=r(u),f=n(7),c=n(2),h=function(e){function t(n){o(this,t);var r=i(this,e.call(this,n));return r._image=null,r._imageTransform=f.Transform.create(),r.coordinateToCanvasPixelTransform=f.Transform.create(),r}return a(t,e),t.prototype.prepareFrame=function(e){var t=e.pixelRatio,n=e.size,r=e.viewState,o=r.center,i=r.resolution,a=void 0,s=this.layer,u=e.extent;if(!c.ExtentUtil.isEmpty(u)){var l=r.projection;if(a=s.getImageInternal(u,i,t,l)){var h=this.loadImage(a);h&&(this._image=a)}}if(this._image){a=this._image;var d=a.extent,p=a.resolution,y=a.pixelRatio,_=t*p/(i*y),v=f.Transform.compose(this.imageTransform,t*n[0]/2,t*n[1]/2,_,-_,0,y*(d[0]-o[0])/p,y*(o[1]-d[3])/p);f.Transform.compose(this.coordinateToCanvasPixelTransform,t*n[0]/2-v[4],t*n[1]/2-v[5],t/i,-t/i,0,-o[0],-o[1])}return!!this.image},t.prototype.composeFrame=function(e,t){this.preCompose(t,e);var n=this.image;if(n){var r=void 0,o=void 0!==r&&!c.ExtentUtil.containsExtent(r,e.extent)&&c.ExtentUtil.intersects(r,e.extent);o&&this.clip(t,e,r);var i=this.layer,a=this.imageTransform,s=t.globalAlpha;t.globalAlpha=i.opacity;var u=a[4],l=a[5],f=n.width*a[0],h=n.height*a[3];t.imageSmoothingEnabled=!1,t.drawImage(n,0,0,+n.width,+n.height,Math.round(u),Math.round(l),Math.round(f),Math.round(h)),t.globalAlpha=s,o&&t.restore()}this.postCompose(t,e)},s(t,[{key:"image",get:function(){return this._image?this._image.getDomImage():null}},{key:"imageTransform",get:function(){return this._imageTransform}}]),t}(l.default);t.default=h,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(25),u=r(s),l=n(16),f=r(l),c=n(19),h=n(7),d=function(e){function t(n){return o(this,t),i(this,e.call(this,n))}return a(t,e),t.prototype.render=function(e,t,n){if(e){var r=this.context,o=t,i=e.geometry,a=h.Transform.transform2D,s=[];if(this._pixelCoordinates&&this.equalsTransform(n,this.renderedTransform))s=this._pixelCoordinates;else{var u=i.getCoordinates();u.forEach(function(e){var t=a(e,0,e.length,2,n);t[0]=t[0]+.5|0,t[1]=t[1]+.5|0,s.push(t)}),this._pixelCoordinates=s,h.Transform.setFromArray(this.renderedTransform,n)}for(var l=o.length,d=0;d<l;d++){var p=o[d],y={coordinates:s,width:p.width,strokeStyle:(0,c.colorToString)(p.color,p.alpha),lineCap:p.lineCap,lineJion:p.lineJion,miterLimit:p.miterLimit,hasDash:p.style===f.default.DASH};this.drawLine(r,y)}}},t.prototype.drawLine=function(e,t){e.save(),e.strokeStyle=t.strokeStyle,e.lineWidth=t.width,e.lineCap=t.lineCap,e.lineJoin=t.lineJion,e.miterLimit=t.miterLimit,e.beginPath();for(var n=t.coordinates,r=0,o=n.length;r<o-1;r++)e.moveTo(n[r][0],n[r][1]),e.lineTo(n[r+1][0],n[r+1][1]);t.hasDash&&e.setLineDash([5,5]),e.stroke(),e.closePath(),e.restore()},t}(u.default);t.default=d,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(25),u=r(s),l=n(19),f=n(7),c=function(e){function t(n){o(this,t);var r=i(this,e.call(this,n));return r._pixelCoordinates=[],r}return a(t,e),t.prototype.render=function(e,t,n){if(e)for(var r=this.context,o=t,i=e.geometry,a=[i.x,i.y],s=f.Transform.transform2D(a,0,a.length,2,n,this._pixelCoordinates),u=s[0],c=s[1],h=o.length,d=0;d<h;d++){var p=o[d],y={centerX:u+.5|0,centerY:c+.5|0,radius:p.size/2||p.borderStyle.width/2,fillStyle:(0,l.colorToString)(p.color,p.alpha),borderStyle:p.borderStyle};this.drawCircle(r,y)}},t.prototype.drawCircle=function(e,t){e.save(),e.beginPath(),e.arc(t.centerX,t.centerY,t.radius,0,2*Math.PI,!0),t.fillStyle&&(e.fillStyle=t.fillStyle,e.fill());var n=t.borderStyle;n&&(e.strokeStyle=(0,l.colorToString)(n.color,n.alpha),e.lineWidth=n.width,n.lineDash&&e.setLineDash(n.lineDash),e.stroke()),e.closePath(),e.restore()},t}(u.default);t.default=c,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),u=r(s),l=n(25),f=r(l),c=n(16),h=r(c),d=n(7),p=n(19),y=function(e){function t(n){return o(this,t),i(this,e.call(this,n))}return a(t,e),t.prototype.render=function(e,t,n){if(e){var r=this.context,o=t,i=e.geometry,a=d.Transform.transform2D,s=i.getCoordinates();if(i.geometryType===u.default.EXTENT&&(s=[s]),!s)return!1;if(0===s.length)return!1;var l=[],f=[];if(this._pixelCoordinates&&this.equalsTransform(n,this.renderedTransform))f=this._pixelCoordinates;else{if(i.geometryType===u.default.MULTI_POLYGON){var c=[];s.forEach(function(e){e.forEach(function(e){e.forEach(function(e){var t=a(e,0,e.length,2,n);t[0]=t[0]+.5|0,t[1]=t[1]+.5|0,l.push(t)}),c.push(l),l=[]}),f.push(c),c=[]}),this.renderMutilPolygon(r,o,f)}else s.forEach(function(e){e.forEach(function(e){var t=a(e,0,e.length,2,n);t[0]=t[0]+.5|0,t[1]=t[1]+.5|0,l.push(t)}),f.push(l),l=[]});this.renderPolygon(r,o,f)}return this._pixelCoordinates=f,d.Transform.setFromArray(this.renderedTransform,n),!0}},t.prototype.renderMutilPolygon=function(e,t,n){var r=this;n.forEach(function(n){r.renderPolygon(e,t,n)})},t.prototype.renderPolygon=function(e,t,n){for(var r=t.length,o=0;o<r;o++){var i=t[o],a={coordinates:n,fillStyle:(0,p.colorToString)(i.color,i.alpha),borderStyle:i.borderStyle};this.drawStylePolygon(e,a)}},t.prototype.drawStylePolygon=function(e,t){e.save(),t.fillStyle&&(e.fillStyle=t.fillStyle);var n=t.borderStyle;n&&(e.strokeStyle=(0,p.colorToString)(n.color,n.alpha),e.lineWidth=n.width,n.style===h.default.DASH&&e.setLineDash([5,5]));var r=t.coordinates;r.forEach(function(t,n){0===n&&e.beginPath(),e.moveTo(t[0][0],t[0][1]);for(var r=1,o=t.length;r<o;r++){var i=t[r];e.lineTo(i[0],i[1])}e.closePath()}),e.fill(),e.stroke(),e.restore()},t}(f.default);t.default=y,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(25),u=r(s),l=n(7),f=n(19),c=function(e){function t(n){o(this,t);var r=i(this,e.call(this,n));return r._pixelCoordinates=[],r}return a(t,e),t.prototype.render=function(e,t,n){var r=t[0].textStyle;if(e.displayText&&r){var o=String(e.displayText);r.text=o;var i=this.context;i.save();var a=e.geometry,s=a.getFlatInteriorPoint();this._pixelCoordinates=[];for(var u=l.Transform.transform2D(s,0,s.length,2,n,this._pixelCoordinates),f=0,c=u.length;f<c;f+=2){var h=u[f],d=u[f+1];this._setTextStyle(i,r);var p=r.offsetX-10,y=r.offsetY-10,_=!!r.stroke,v=!!r.fill,g=r.text,m=h+p,b=d+y,E=g.split("\n"),w=E.length,x=void 0,O=void 0;w>1?(x=Math.round(1.5*i.measureText("M").width),O=b-(w-1)/2*x):(x=0,O=b);for(var T=0;T<w;T++){var P=E[T];_&&i.strokeText(P,m,O),v&&i.fillText(P,m,O),O+=x}}i.restore()}},t.prototype._setTextStyle=function(e,t){var n=t.stroke;e.font=t.font,e.strokeStyle=(0,f.colorToString)(n.color,1),e.fillStyle=(0,f.colorToString)(t.fill,1),e.textBaseline=t.textBaseline,e.textAlign=t.textAlign,e.lineWidth=n.width,e.lineCap=n.lineCap,e.lineJoin=n.lineJion},t}(u.default);t.default=c,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(3),l=r(u),f=function(e){function t(n,r){o(this,t);var a=i(this,e.call(this));return a._map=r,a}return a(t,e),t.prototype.renderFrame=function(e){},t.prototype.clear=function(){},s(t,[{key:"map",get:function(){return this._map}}]),t}(l.default);t.default=f,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(12),u=r(s),l=function(e){function t(n,r,a,s){o(this,t);var u=i(this,e.call(this,n));return u.frameState=r,u.trasform=s,u.context=a,u}return a(t,e),t}(u.default);t.default=l,e.exports=t.default}])});
//# sourceMappingURL=meek.min.js.map