{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///meek.min.js","webpack:///webpack/bootstrap f9e9c03819448e440bcb","webpack:///./src/main.js","webpack:///./src/geometry/geometry.js","webpack:///./src/geometry/support/extentutil.js","webpack:///./src/core/baseobject.js","webpack:///./src/core/eventmanager.js","webpack:///./src/meek/browserevent.js","webpack:///./src/meek/eventtype.js","webpack:///./src/data/matrix/transform.js","webpack:///./src/components/component.js","webpack:///./src/geometry/extent.js","webpack:///./src/geometry/polygon.js","webpack:///./src/geometry/support/geometryutil.js","webpack:///./src/core/baseevent.js","webpack:///./src/lyr/featurelayer.js","webpack:///./src/utils/mousekey.js","webpack:///./src/utils/obj.js","webpack:///./src/style/linestyle.js","webpack:///./src/style/style.js","webpack:///./src/utils/domutil.js","webpack:///./src/utils/helpers.js","webpack:///./src/control/control.js","webpack:///./src/geometry/parallelogram.js","webpack:///./src/geometry/point.js","webpack:///./src/lyr/image/imagestate.js","webpack:///./src/meek/feature.js","webpack:///./src/renderer/render/geomertyrender.js","webpack:///./src/style/textstyle.js","webpack:///./src/utils/array.js","webpack:///./src/utils/math.js","webpack:///./src/geometry/analysis/contains.js","webpack:///./src/geometry/line.js","webpack:///./src/geometry/mutilpolygon.js","webpack:///./src/geometry/support/interpolate.js","webpack:///./src/geometry/support/orient.js","webpack:///./src/meek/config.js","webpack:///./src/style/basestyle.js","webpack:///./src/utils/counter.js","webpack:///./src/components/dragpan.js","webpack:///./src/components/drawevent.js","webpack:///./src/components/modifyevent.js","webpack:///./src/components/mousewheelzoom.js","webpack:///./src/components/selectevent.js","webpack:///./src/control/zoom.js","webpack:///./src/core/event.js","webpack:///./src/lyr/baselayer.js","webpack:///./src/lyr/image/imageevent.js","webpack:///./src/lyr/image/singleimage.js","webpack:///./src/lyr/singleimagelayer.js","webpack:///./src/meek/featureevent.js","webpack:///./src/meek/view.js","webpack:///./src/renderer/canvas/layerrenderer.js","webpack:///./src/renderer/rendereventtype.js","webpack:///./src/style/fillstyle.js","webpack:///./src/style/pointstyle.js","webpack:///./src/utils/canvas.js","webpack:///./src/utils/coordinate.js","webpack:///./src/utils/functions.js","webpack:///./src/components/componentdefaults.js","webpack:///./src/components/draw.js","webpack:///./src/components/keyboardhome.js","webpack:///./src/components/keyboardpan.js","webpack:///./src/components/keyboardzoom.js","webpack:///./src/components/kinetic.js","webpack:///./src/components/modify.js","webpack:///./src/components/select.js","webpack:///./src/control/controldefaults.js","webpack:///./src/control/home.js","webpack:///./src/control/zoompercentage.js","webpack:///./src/core/baseimage.js","webpack:///./src/data/json/geojson.js","webpack:///./src/geometry/analysis/intersects.js","webpack:///./src/geometry/analysis/polygonwithhole.js","webpack:///./src/geometry/analysis/splitpolygon.js","webpack:///./src/meek/browsereventhandler.js","webpack:///./src/meek/map.js","webpack:///./src/meek/overlay.js","webpack:///./src/renderer/canvas/canvasrenderer.js","webpack:///./src/renderer/canvas/featurelayerrenderer.js","webpack:///./src/renderer/canvas/imagelayerrenderer.js","webpack:///./src/renderer/render/linerender.js","webpack:///./src/renderer/render/pointrender.js","webpack:///./src/renderer/render/polygonrender.js","webpack:///./src/renderer/render/textrender.js","webpack:///./src/renderer/renderer.js","webpack:///./src/renderer/renderevent.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_config","_counter","_counter2","_helpers","_helpers2","_obj","_obj2","_math","_coordinate","_canvas","_geometryutil","_geometryutil2","_extentutil","_eventtype","_style","_event","_event2","_eventmanager","_eventmanager2","_geometry","_geometry2","_extent","_extent2","_point","_point2","_line","_line2","_polygon","_polygon2","_mutilpolygon","_mutilpolygon2","_parallelogram","_parallelogram2","_imagestate","_imageevent","_singleimage","_singleimage2","_pointstyle","_pointstyle2","_linestyle","_linestyle2","_fillstyle","_fillstyle2","_textstyle","_textstyle2","_featurelayer","_featurelayer2","_singleimagelayer","_singleimagelayer2","_draw","_draw2","_drawevent","_drawevent2","_select","_select2","_modify","_modify2","_dragpan","_dragpan2","_mousewheelzoom","_mousewheelzoom2","_browserevent","_browserevent2","_selectevent","_selectevent2","_featureevent","_featureevent2","_modifyevent","_modifyevent2","_control","_control2","_zoom","_zoom2","_feature","_feature2","_map","_map2","_view","_view2","_overlay","_overlay2","_geojson","_geojson2","_intersects","_intersects2","_splitpolygon","_splitpolygon2","_contains","_contains2","_polygonwithhole","_polygonwithhole2","version","Config","Coordinate","Canvas","Event","SelectEvent","FeatureEvent","ModifyEvent","EventManager","Counter","Helpers","ImageState","ImageEvent","SingleImage","Geometry","Extent","Point","Line","Polygon","MutilPolygon","Parallelogram","Style","PointStyle","LineStyle","FillStyle","TextStyle","FeatureLayer","SingleImageLayer","Draw","DrawEvent","BrowserEvent","EventType","Feature","Map","View","Overlay","GeometryUtil","ExtentUtil","Select","Modify","DragPan","Control","Zoom","Obj","Math","MouseWheelZoom","GeoJSON","intersects","splitPolygonByPolyline","contains","polygonWithHole","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","prototype","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","_baseobject","_baseobject2","_BaseObject","_this","stride","pointInExtent","coordinate","containsPoint","extent","intersect","geomtry","getCoordinates","getFormShowPosition","arguments","undefined","getFlatInteriorPoint","containsXY","x","y","move","scale","rotate","angle","anchor","simplify","toJSON","clone","get","UNDEFINED","geometryType","coordinates","fp","sp","f1","f2","f3","LINE","POLYGON","EXTENT","BaseObject","POINT","MULTI_POINT","MULTI_LINE","MULTI_POLYGON","CIRCLE","PARALLELOGRAM","createEmpty","Infinity","createOrUpdateFromFlatCoordinates","flatCoordinates","offset","end","opt_extent","createOrUpdateEmpty","extendFlatCoordinates","extendXY","min","max","createOrUpdate","minX","minY","maxX","maxY","getCenter","createScaleExtent","center","boundingExtentFromTwoPoints","point1","point2","xmin","ymin","xmax","ymax","boundingExtent","ii","extendCoordinate","getBottomLeft","getBottomRight","getTopRight","getTopLeft","boundingSimpleExtent","point","Array","isArray","buffer","optExtent","minMaxToRing","ring","getHeight","getWidth","updateExtent","geometry","newCoordinates","dragSegments","dragSegment","index","extentCoordinates","segment1","segment2","isVertex","getIntersection","extent1","extent2","intersection","containsExtent","isEmpty","getForViewAndSize","resolution","rotation","size","dx","dy","cosRotation","cos","sinRotation","sin","xCos","xSin","yCos","ySin","x0","x1","x2","x3","y0","y1","y2","y3","_Event","_id","getUid","_revision","changed","dispatchEvent","CHANGE","getListeners","type","listenerMap","ol_lm","unlistenByKey","removeEventListener","boundListener","listeners","deleteIndex","indexOf","splice","removeListeners","clear","listen","listener","optThis","optOnce","getListenerMap","listenerObj","findListener","callOnce","bindTo","addEventListener","bindListener","push","listenOnce","opt_this","Reflect","deleteProperty","keys","evt","optSetDeleteIndex","map","oriEvent","eventTyle","originalEvent","pixel","getEventPixel","getCoordinateFromPixel","pointerId","preventDefault","stopPropagation","SINGLE_CLICK","CLICK","DBLCLICK","MOUSE_DRAG","MOUSE_DOWN","MOUSE_MOVE","MOUSE_UP","MOUSE_OVER","MOUSE_OUT","WHEEL","MOUSE_WHEEL","KEYDOWN","KEYPRESS","VIEW_CHANGED","ERROR","LOAD","RESIZE","Transform","tmp_","reset","transform","set","transform2D","opt_dest","dest","j","multiply","transform1","transform2","a1","b1","c1","d1","e1","a2","b2","c2","d2","e2","a","b","d","e","f","setFromArray","apply","translate","compose","dx1","dy1","sx","sy","dx2","dy2","invert","det","determinant","mat","Component","active","_mapRenderKey","targetPointers","_trackedPointers","handlingDownUpSequence","applyHandleEventOption","options","handleMouseEvent","_handleDownEvent","handleDownEvent","_handleDragEvent","handleDragEvent","_handleMoveEvent","handleMoveEvent","_handleUpEvent","handleUpEvent","browserEvent","stopEvent","_updateTrackedPointers","handledUp","handled","shouldStopEvent","_isPointerDraggingEvent","event","getValues","pan","view","delta","currentCenter","zoomByDelta","opt_anchor","opt_duration","currentResolution","constrainResolution","calculateCenterZoom","constrainCenter","zoomWithoutConstraints","getViewDataExtent","_dataExtent","dataExtent","coordinateBeyond","allowCoordinatesBeyondImage","newCoordinate","_active","_Geometry","_xmin","_ymin","_xmax","_ymax","_rings","_flatInteriorPointRevision","_flatInteriorPoint","revision","centerX","centerY","opts","beyond","minPoint","width","height","newMinPoint","newCoordiante","setCoordinates","offsetX","offsetY","rings","extentArr","getCoordinateIndex","coord","findIndex","points","abs","_interpolate","_orient","addRing","_this2","coords","outRing","_inOneRing","coordsTemp","slice","inHole","some","px","py","flag","l","tx","ty","flatCenter","ends","orientedFlatCoordinates","getOrientedFlatCoordinates","linearRings","forEach","linearRingsAreOriented","orientLinearRings","hasHoles","lastPoint","len","jLen","ringIndex","outRings","newPolygon","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","err","return","pointIntersectPoint","pointA","pointB","tolerance","toleranceDistance","distance","squaredDistance","pointIntersectLine","line","path","squaredSegmentDistanceFn","squaredSegmentDistance","find","nowP","nextP","sqrt","t","squaredDistanceToSegment","segment","closestCoordinate","closestOnSegment","equals","coordinate1","coordinate2","coord1","coord2","start","along","linearRingsContainsXY","linearRingContainsXY","wn","getPointInExtendedLineByDistanceFromAB","xa","ya","xb","yb","xab","yab","xbd","xd","yd","geoType","sliceCoords","newCoords","BaseEvent","propagatinoStopped","_baselayer","_baselayer2","_BaseLayer","_features","_styleFunction","_featureChangeKeys","style","features","addFeatures","zIndex","_renderBuffer","renderBufferValue","unlistenByKeyFn","CLEAR","FEATURE_COLLECTION_CHANGED","findFeature","_addFeaturesInner","hasFeature","feature","featureId","_setupChangeEvents","ADD_FEATURE","addFeature","forEachFeatureAtPiexl","frameState","piexl","callback","_getCurrentExtentFeatures","extentFeatures","_getIntersectedFeatures","piexlX","piexlY","viewState","result","filter","removeFeature","delete","REMOVE_FEATURE","featureKey","_handleFeatureChange","loadFeature","newFeatures","pointFeatures","lineFeatures","display","geometryExtent","concat","defaultFunction","createFunction","BaseLayer","singleClick","mouseWheel","noModifierKeys","altKey","metaKey","ctrlKey","shiftKey","targetNotEditable","mapBrowserEvent","tagName","object","values","property","objectToMap","ke","mapToObject","_basestyle","_basestyle2","_BaseStyle","color","alpha","SOLID","lineCap","LineCap","BUTT","lineJion","LineJion","MITER","miterLimit","textStyle","newStyle","_width","_lineCap","_lineJion","_miterLimit","BaseStyle","DASH","DOT","DASHDOT","DASHDOTDOT","NULL","ROUND","SQUARE","BEVEL","_default","white","blue","createDefaultEditing","styles","createDefaultSelecting","outsideLine","insideLine","styleFunction","createCanvasContext2D","optWidth","optHeight","canvas","document","createElement","getContext","outerWidth","element","offsetWidth","getComputedStyle","parseInt","marginLeft","marginRight","outerHeight","offsetHeight","marginTop","marginBottom","removeNode","node","parentNode","removeChild","removeChildren","lastChild","colorToString","r","g","_domutil","_element","_target","_listenerKeys","overlayContainerStopEvent","appendChild","render","getElementById","_Polygon","getTheLastPoint","firstPoint","secondPoint","thirdPoint","updateCoordinatesForModification","vertex","oldVertex","dis","oldRingsCoordinates","oldCoordinates","segement","edgeIndex","firstCoord","nowCood","otherCood","newCood1","tempXX","tempYY","tempX2","tempY2","direction","newCood2","xValue","yValue","nx","ny","opt","update","equal","geom","isNaN","extentObj","_x","_y","IDLE","LOADING","LOADED","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","_s","_i","attributes","displayText","_geometryChangeKey","initArribute","textDisplay","styleHighLight","_handleGeometryChanged","_attributesMap","has","forEachAttribute","cloneAttributesMap","newMap","entries","_step$value","renderStyleArr","_displayText","_styleHighLight","newStyles","s","firstStyle","cloneStyle","unshift","borderStyle","_display","_textDisplay","_array","_transform","GeomertyRender","context","_context","_pixelCoordinates","renderedTransform","resetRenderOption","equalsTransform","renderStyle","optOptions","text","font","DEFAULT_FONT","rotateWithView","DEFAULT_SCALE","textAlign","DEFAULT_TEXT_ALIGN","textBaseline","DEFAULT_BASE_LINE","fill","DEFAULT_FILL_COLOR","stroke","DEFAULT_STROKE","_text","_font","_rotation","_rotateWithView","_scale","_textAlign","_textBaseline","_fill","_stroke","_offsetX","_offsetY","linearFindNearest","n","stableSort","compareFnc","tmp","sort","binarySearch","haystack","needle","opt_comparator","mid","cmp","comparator","numberSafeCompareFunction","low","high","found","arr1","arr2","len1","clamp","lerp","polygon","polyGeometryType","isContained","targetGeometryType","polyContainsLine","polyContainsPoly","poly","lineCoords","polygonContainsLinestring","poly2","poly2Type","hasOne","_path","addPath","forEachSegment","interiorPoint","fraction","lineString","newLine","me","coors","np","_toConsumableArray","from","_polygons","getPolygon","innerRing","polygons","onePolygon","endss","orderArray","lastLen","currLen","flatCenters","centerLinearRingss","linearRingss","linearRingssAreOriented","orientLinearRingss","polygonCoods","iiLen","polygonIndex","allCoords","newMutilPolygon","allPolygonCoords","polyCoods","pointX","NaN","pointY","cumulativeLengths","o","flatCentersOffset","intersections","maxSegmentLength","segmentLength","interiorPoints","opt_right","right","isClockwise","linearRingIsClockwise","reverse","edge","DEBUG","DEFAULT_ZOOM_FACTOR","DEFAULT_MAX_ZOOM","DEFAULT_MIN_ZOOM","MOUSE_WHEEL_ZOOM_MAXDELTA","DEFAULT_TILE_SIZE","_color","_alpha","_textStyle","uid","_component","_component2","_mousekey","_Component","lastCentroid","_kinetic","kinetic","_lastPointersCount","_condition","condition","_noKinetic","begin","centroid","deltaX","deltaY","getViewState","add","pointerEvents","clientX","clientY","_baseevent","_baseevent2","_BaseEvent","DRAW_START","DRAW_END","MODIFY_START","MODIFY_END","_delta","_useAnchor","useAnchor","_duration","duration","_lastAnchor","_startTime","_timeout","timeout","_timeoutId","_mode","wheelEvent","wheelDeltaY","now","Date","timeLeft","clearTimeout","setTimeout","_handleWheelZoom","maxDelta","selectedFeatures","SELECT","_Control","className","zoomInLabel","zoomOutLabel","zoomInTipLabel","zoomOutTipLabel","inElement","setAttribute","title","createTextNode","outElement","cssClasses","_handleClick","_handleClickIn","_zoomByDelta","newResolution","_pendingRemovals","_listeners","_dispatching","nullFunction","hasListener","optType","propagate","propagationStopped","pendingRemovals","baseOptions","assign","name","visible","datasource","opacity","maxResolution","minResolution","_visible","_opacity","_minResolution","_maxResolution","_datasource","_zIndex","image","Type","IMAGELOADSTART","IMAGELOADEND","IMAGELOADERROR","_baseimage","_baseimage2","_BaseImage","pixelRatio","attributions","src","crossOrigin","imageLoadFunction","_src","domImage","Image","getDomImage","_imageByContext","_imageListenerKeys","state","_imageLoadFunction","opt_context","_domImage","cloneNode","_handleImageError","_unlistenImage","_handleImageLoad","load","BaseImage","_imageevent2","imageExtent","defaultImageLoadFunction","_singleImage","url","_imageSize","imageSize","singleImage","handleImageChange","getImageInternal","imageWidth","imageHeight","targetWidth","ceil","drawImage","_dispatchImageEvent","_attributes","_innerOptions","_applyOptions","resolutionConstraint","_createResolutionConstraint","_zoomFactor","zoomFactor","_resolutions","resolutions","_minZoom","minZoom","centerConstraint","_createCenterConstraint","constraint","rotationConstraint","_createRotationConstraint","_constraints","_calculateCenter","zoom","_originalCenter","_originalResolution","_options","defaultMaxZoom","defaultZoomFactor","defaultMinZoom","defaultTileSize","maxZoom","projection","createSnapToResolutions","defaultMaxResolution","pow","defaultMinResolution","floor","log","createSnapToPower","power","opt_maxLevel","oldLevel","newLevel","reso","z","opt_delta","opt_direction","_center","_resolution","LayerRenderer","layer","_layer","renderedResolution","getTransform","loadImage","imageState","_handleImageChange","renderIfReadyAndVisible","clip","topLeft","topRight","bottomRight","bottomLeft","toPixelTransform","save","rotateAtOffset","beginPath","moveTo","lineTo","prepareFrame","frameStateOpt","composeFrame","postCompose","optTransform","preCompose","RenderEventType","PRERENDER","POSTRENDER","RENDER","_borderStyle","xoffset","yoffset","_size","_xoffset","_yoffset","_angle","CROSS","X","TRIANGLE","cosAngle","sinAngle","functions","TURE","FALSE","componentsDefaults","components","Set","Kinetic","dragPan","mouseWheelZoom","zoomDuration","keyboard","keyborad","KeyboardHome","KeyboardPan","KeyboardZoom","zoomDelta","_kinetic2","_keyboardhome","_keyboardhome2","_keyboardzoom","_keyboardzoom2","_keyboardpan","_keyboardpan2","_functions","_drawLayer","drawLayer","_downPointPx","_finishCoordinate","drawMode","getDrawMode","_sketchCoords","_sketchLine","_finishCondition","finishCondition","_undoCondition","undoCondition","_undoStep","freehandUndoStep","_handleKeyboardEvent","_sketchLayer","FeaureLayer","getDefaultStyleFunction","_sketchPoint","_enableSketchPoint","enableSketchPoint","_sketchFeature","_geometryFunction","_sketchLineCoords","_freehand","freehand","_snapTolerance","snapTolerance","_maxLinePoints","maxLinePoints","_maxPolygonPoints","maxPolygonPoints","_minPoints","minPoints","DrawMode","_shouldHandle","_squaredClickTolerance","clickUpTolerance","pcoordinates","_finishDrawing","_undoDrawing","_existInDrawMode","String","modeValue","toUpperCase","val","_geometryFactory","mode","_initGeometryFunction","geometryFunction","opt_geometry","_freehandEnable","buttons","pass","eventType","_addToDrawing","_handleMove","downPx","clickPx","_modifyDrawing","_updateSketchPoint","_startDrawing","_atFinish","_abortDrawing","startPoint","_drawMode","_updateSketchFeatures","last","lastSecondPoint","lstPoint","tempLastRing","lastPoint2","pop","sketchPointGeom","sketchLineGeom","sketchFeature","MultiPolygon","at","potentiallyDone","potentiallyFinishCoordinates","finishCoordinate","finishPixel","getPixelFromCoordinate","sketchPointgeom","_autoPan","undoStep","polygonDeleteStep","_updateState","isIn","mapValue","addLayer","_defaultCondition","keyCode","_goToHome","orignalCenter","originalCenter","originalResolution","_pixelDelta","pixelDelta","keyEvent","mapUnitsDelta","charCode","charCodeAt","decay","minVelocity","delay","_decay","_minVelocity","_delay","_points","_initialVelocity","lastIndex","firstIndex","atan2","getDistance","_pixelTolerance","pixelTolerance","_movableGeometrys","movableGeometrys","_hasMoveableGeometrys","movableGeometrySet","_deleteCondition","deleteCondition","_defaultDeleteCondition","_vertexEditableCondition","vertexEditableCondition","_edgeEditableCondition","edgeEditableCondition","_snappedToVertex","_snapSegments","_vertexFeature","_lastPixel","_overLayer","_dragSegments","_modified","_changingFeature","_ignoreNextSingleClick","_shouldAddToVertexs","_insertVertices","_downPoint","_currentMovedGeometry","_oldEditedVertex","lastPointerEvent_","_handlePointerMove","removePoint","_lastPointerEvent","willModifyFeatures_","_removeVertex","_compareIndexes","_willModifyFeatures","vertexFeature","insertVertices","filters","_handlePointerAtPixel","_this3","pixelCoordinate","sortByDistance","s1","s2","_pointDistanceToSegment","nodes","_getInExtent","closestSegment","_closestOnSegment","vertexPixel","dist","vertexEditable","MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX","pixel1","pixel2","squaredDist1","squaredDist2","coordinateIndex","_createOrUpdateVertexFeature","_insertVertex","segmentData","depth","MODIFY_SEGMENT_CIRCLE_CENTER_INDEX","setCenter","setRadius","_setGeometryCoordinates","downPoint","newSegmentData","tolarance","_ExtentUtil","gometryExtent","bufferExtent","jj","nextPoints","pathExtent","pathBufferExtent","circleGeometry","distanceToCenterSquared","distanceToCircumference","getRadius","isActive","hasMutilSelectedSymbol","_hitTolerance","hitTolerance","_hasSelectedStyle","_multiSelectMode","_selectLayer","_selectFeatures","selectMode","_selectMultiMode","selectMultiMode","_handleCtrlKeyDwon","_handleCtrlKeyUp","_keyPress","selectFeatures","_forEachStyle","_isInSelectFeatures","_selectMode","controlDefaults","controls","zoomControl","zoomOptions","homeControl","home","Home","homeOptions","zoomPercentageControl","zoomPercentage","zoomPercentageOptions","_home","_home2","_zoompercentage","_zoompercentage2","homeLabel","homeLabelTip","homeElement","ZoomPercentage","_innerElement","toFixed","html","innerHTML","_attributions","_pixelRatio","_state","optContext","read","json","featuresObj","featureObj","geometryObj","Error","propertiesObj","properties","write","featuresArr","getGeoJSONGeometryType","jsonType","geometry1","geometry2","ext1Arr","ext2Arr","pointIntersectsGeometry","lineIntersectsGeometry","polygonIntersectsGeometry","lineIntersectsLine","lineIntersectsPolygon","line1","line2","lineLinearRings1","lineLinearRings2","intersectsByLinearRings","polygonIntersectsPolygon","lineLinearRings","polygon2LinearRings","LinearRing1","LinearRings2","segs1","getSortedSegments","segs2","seg1","seg1x1","seg1x2","seg1y1","seg1y2","seg2","seg2y1","seg2y2","jlen","segmentsIntersect","byX1","numSeg","segments","x11_21","y11_21","x12_11","y12_11","y22_21","x22_21","n1","n2","along1","along2","segs","seg","source","distanceToSegment","distanceSquaredToSegment","polygonWithHoles","polygon1","polygon2","holePolygon","resultPolygon","holeCoordinates","polygonCoordinates","holeOutRings","polygonOutRings","tempHoleOutRings","tempPolygonOutRings","holeOriented","polygonOutRingOriented","targetPolygon","splitLine","lineCoordinates","dividedPointList","findIntersectionPoints","afterInsertLineCoords","insertDiveidePointsToSplitLineCoords","allPartsScliedFromLineCoords","sliceDividedPointFromLine","vertexListAfterDivide","insertDividePointsToCoordinates","results","renewal","featureCollection","arrs","handleHolesForPolygon","isDividedPointSymbol","alreadyUsedSymbol","dividePointSymbol","isInArray","singlePolygonCoords","item","findPartners","parts","ep","newParts","findNextPoint","mlen","goThrough","ePoint","ffpoint","eepoint","endPoint","nextPoint","updataStatus","isInOneSegment","onePoint","otherPoint","allPartsScliedFromLineCoordsTemp","findCount","group","jjlen","fPoint","tp","allParts","singleParts","isDividePointStart","getDividePoints","fP","eP","dp","dfPoint","intersectFrom","fromPoint","dePoint","afterArr","dividePoints","firstPointXY","item1","item2","p1","p2","afterInserted","isInDividedPointList","orialPoint","originPoint","ofPoint","oePoint","toPoint","itemDividedPoint","findOneIntersectionPoints","lineCoordinatesExtent","lineCoordinatesExtentBuffer","ntersectionPoints","intersectPoint","_findOneIntersectionPoints","_loop","intersectionPoints","ntp","intersectIndex","geometryCollection","addHoleToPolygon","needPoly","dividedPoints","BrowserEventHandler","_dragging","_down","_dragListenerKeys","_clickTimeoutId","_mapping","mousedown","_mousedown","mousemove","_mousemove","mouseup","_mouseup","mouseover","_mouseover","mouseout","_mouseout","_registerSource","events","getEvents","eventName","documentDom","_isMoving","newEvent","_emulateClick","bind","_canvasrenderer","_canvasrenderer2","_browsereventhandler","_browsereventhandler2","_componentdefaults","_controldefaults","_frameState","_layers","_toPixelTransform","_toCoordinateTransform","_animationDelayKey","_components","_controls","_createViewport","_overlayContainer","viewport","_overlayContainerStopEvent","overlayEvents","overlayEvent","optionsInner","parseOptionsInner","_renderer","rendererClass","_createBrowserEventHandler","_animationDelay","_renderFrame","layers","component","addComponents","control","addControl","_overlayIdIndex","_overlays","overlays","overlay","_addOverlayInternal","_handleViewChange","_handleMouseWheelEvent","position","overflow","_viewport","_createRenderer","CanvasRenderer","_browserEventHandler","_handleBrowserEvent","keyboardEvent","cpts","cpt","cont","toCoordinateTransform","renderFrame","window","requestAnimationFrame","isRendered","getFeaturesLayer","overlayId","toString","getTargetElement","updateSize","targetElement","computedStyle","parseFloat","viewportPosition","getBoundingClientRect","eventPosition","left","top","pixelPoint","handleRize","_rendereventtype","_offset","_position","_positioning","_insertFirst","insertFirst","_stopEvent","autoPan","_autoPanAnimation","autoPanAnimation","_autoPanMargin","autoPanMargin","_rendered","_bottom","_left","_right","_top","_mapPostrenderListenerKey","popupEelement","positioning","OverlayPositioning","TOP_LEFT","updatePixelPosition","setVisible","mapSize","updateRenderedPosition","BOTTOM_RIGHT","CENTER_RIGHT","TOP_RIGHT","left_","round","right_","BOTTOM_CENTER","CENTER_CENTER","TOP_CENTER","BOTTOM_LEFT","top_","bottom","bottom_","CENTER_LEFT","_panIntoView","mapRect","_getRect","clientHeight","clientWidth","overlayRect","margin","offsetLeft","offsetRight","offsetTop","offsetBottom","centerPx","newCenterPx","box","pageXOffset","pageYOffset","_setElement","pelement","_overlayId","_popupEelement","container","overlayContainer","insertBefore","childNodes","_renderer2","_featurelayerrenderer","_featurelayerrenderer2","_imagelayerrenderer","_imagelayerrenderer2","_renderevent","_renderevent2","_Renderer","_rendererVisible","_layerRenderers","_addToContainer","canvasWidth","canvasHeight","clearRect","sortByZIndex","updateTransform","_dispatchComposeEvent","layerRender","getLayerRenderer","layerKey","layerRenderer","createLayerRenderer","ImageLayerRenderer","FeatureLayerRenderer","coordinateToPixelTransform","pixelToCoordinateTransform","state1","state2","composeEvent","RenderEvent","Renderer","_layerrenderer","_layerrenderer2","_pointrender","_pointrender2","_linerender","_linerender2","_polygonrender","_polygonrender2","_textrender","_textrender2","_LayerRenderer","_geometryRenderGroup","_textRender","TextRender","_maxExtent","_renderFeatures","_renderResolution","_renderExtent","_renderRevision","_cacheableThisTime","_getGeometryRender","GeometryRender","_renderFeaturesInOrder","frameExtent","layerRevision","featureLayerRenderBuffer","renderBuffer","renderExtent","_clipExtent","_cloneRenderStyle","geomertyRender","_resetRender","restore","rs","flatClipCoords","getClipCoords","maxExtent","PointRender","LineRender","PolygonRender","_image","_imageTransform","coordinateToCanvasPixelTransform","viewCenter","viewResolution","imageLayer","renderedExtent","imageResolution","imagePixelRatio","imageTransform","clipped","globalAlpha","dw","dh","imageSmoothingEnabled","_geomertyrender","_geomertyrender2","_GeometryRender","ctx","styleArray","geometryCoordinates","styleObj","renderOptions","strokeStyle","hasDash","drawLine","renderOpt","lineWidth","lineJoin","setLineDash","closePath","geomerty","pixelCoordinates","radius","fillStyle","drawCircle","arc","PI","lineDash","geometryCoordinages","renderCoords","polygonCoords","renderMutilPolygon","renderPolygon","drawStylePolygon","k","kk","cd","_setTextStyle","lines","split","numLines","fontSize","lineY","measureText","lineIndex","lineText","strokeText","fillText","contianer","trasform"],"mappings":"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","file":"meek.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Datatang\"] = factory();\n\telse\n\t\troot[\"Datatang\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Datatang\"] = factory();\n\telse\n\t\troot[\"Datatang\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"<%=baseUrl%>/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/*!*********************!*\\\n  !*** ./src/main.js ***!\n  \\*********************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _config = __webpack_require__(/*! meek/config */ 34);\n\t\n\tvar _counter = __webpack_require__(/*! utils/counter */ 36);\n\t\n\tvar _counter2 = _interopRequireDefault(_counter);\n\t\n\tvar _helpers = __webpack_require__(/*! utils/helpers */ 19);\n\t\n\tvar _helpers2 = _interopRequireDefault(_helpers);\n\t\n\tvar _obj = __webpack_require__(/*! utils/obj */ 15);\n\t\n\tvar _obj2 = _interopRequireDefault(_obj);\n\t\n\tvar _math = __webpack_require__(/*! utils/math */ 28);\n\t\n\tvar _coordinate = __webpack_require__(/*! utils/coordinate */ 55);\n\t\n\tvar _canvas = __webpack_require__(/*! utils/canvas */ 54);\n\t\n\tvar _geometryutil = __webpack_require__(/*! geometry/support/geometryutil */ 11);\n\t\n\tvar _geometryutil2 = _interopRequireDefault(_geometryutil);\n\t\n\tvar _extentutil = __webpack_require__(/*! geometry/support/extentutil */ 2);\n\t\n\tvar _eventtype = __webpack_require__(/*! meek/eventtype */ 6);\n\t\n\tvar _style = __webpack_require__(/*! style/style */ 17);\n\t\n\tvar _event = __webpack_require__(/*! core/event */ 43);\n\t\n\tvar _event2 = _interopRequireDefault(_event);\n\t\n\tvar _eventmanager = __webpack_require__(/*! core/eventmanager */ 4);\n\t\n\tvar _eventmanager2 = _interopRequireDefault(_eventmanager);\n\t\n\tvar _geometry = __webpack_require__(/*! geometry/geometry */ 1);\n\t\n\tvar _geometry2 = _interopRequireDefault(_geometry);\n\t\n\tvar _extent = __webpack_require__(/*! geometry/extent */ 9);\n\t\n\tvar _extent2 = _interopRequireDefault(_extent);\n\t\n\tvar _point = __webpack_require__(/*! geometry/point */ 22);\n\t\n\tvar _point2 = _interopRequireDefault(_point);\n\t\n\tvar _line = __webpack_require__(/*! geometry/line */ 30);\n\t\n\tvar _line2 = _interopRequireDefault(_line);\n\t\n\tvar _polygon = __webpack_require__(/*! geometry/polygon */ 10);\n\t\n\tvar _polygon2 = _interopRequireDefault(_polygon);\n\t\n\tvar _mutilpolygon = __webpack_require__(/*! geometry/mutilpolygon */ 31);\n\t\n\tvar _mutilpolygon2 = _interopRequireDefault(_mutilpolygon);\n\t\n\tvar _parallelogram = __webpack_require__(/*! geometry/parallelogram */ 21);\n\t\n\tvar _parallelogram2 = _interopRequireDefault(_parallelogram);\n\t\n\tvar _imagestate = __webpack_require__(/*! lyr/image/imagestate */ 23);\n\t\n\tvar _imageevent = __webpack_require__(/*! lyr/image/imageevent */ 45);\n\t\n\tvar _singleimage = __webpack_require__(/*! lyr/image/singleimage */ 46);\n\t\n\tvar _singleimage2 = _interopRequireDefault(_singleimage);\n\t\n\tvar _pointstyle = __webpack_require__(/*! style/pointstyle */ 53);\n\t\n\tvar _pointstyle2 = _interopRequireDefault(_pointstyle);\n\t\n\tvar _linestyle = __webpack_require__(/*! style/linestyle */ 16);\n\t\n\tvar _linestyle2 = _interopRequireDefault(_linestyle);\n\t\n\tvar _fillstyle = __webpack_require__(/*! style/fillstyle */ 52);\n\t\n\tvar _fillstyle2 = _interopRequireDefault(_fillstyle);\n\t\n\tvar _textstyle = __webpack_require__(/*! style/textstyle */ 26);\n\t\n\tvar _textstyle2 = _interopRequireDefault(_textstyle);\n\t\n\tvar _featurelayer = __webpack_require__(/*! lyr/featurelayer */ 13);\n\t\n\tvar _featurelayer2 = _interopRequireDefault(_featurelayer);\n\t\n\tvar _singleimagelayer = __webpack_require__(/*! lyr/singleimagelayer */ 47);\n\t\n\tvar _singleimagelayer2 = _interopRequireDefault(_singleimagelayer);\n\t\n\tvar _draw = __webpack_require__(/*! components/draw */ 58);\n\t\n\tvar _draw2 = _interopRequireDefault(_draw);\n\t\n\tvar _drawevent = __webpack_require__(/*! components/drawevent */ 38);\n\t\n\tvar _drawevent2 = _interopRequireDefault(_drawevent);\n\t\n\tvar _select = __webpack_require__(/*! components/select */ 64);\n\t\n\tvar _select2 = _interopRequireDefault(_select);\n\t\n\tvar _modify = __webpack_require__(/*! components/modify */ 63);\n\t\n\tvar _modify2 = _interopRequireDefault(_modify);\n\t\n\tvar _dragpan = __webpack_require__(/*! components/dragpan */ 37);\n\t\n\tvar _dragpan2 = _interopRequireDefault(_dragpan);\n\t\n\tvar _mousewheelzoom = __webpack_require__(/*! components/mousewheelzoom */ 40);\n\t\n\tvar _mousewheelzoom2 = _interopRequireDefault(_mousewheelzoom);\n\t\n\tvar _browserevent = __webpack_require__(/*! meek/browserevent */ 5);\n\t\n\tvar _browserevent2 = _interopRequireDefault(_browserevent);\n\t\n\tvar _selectevent = __webpack_require__(/*! components/selectevent */ 41);\n\t\n\tvar _selectevent2 = _interopRequireDefault(_selectevent);\n\t\n\tvar _featureevent = __webpack_require__(/*! meek/featureevent */ 48);\n\t\n\tvar _featureevent2 = _interopRequireDefault(_featureevent);\n\t\n\tvar _modifyevent = __webpack_require__(/*! components/modifyevent */ 39);\n\t\n\tvar _modifyevent2 = _interopRequireDefault(_modifyevent);\n\t\n\tvar _control = __webpack_require__(/*! control/control */ 20);\n\t\n\tvar _control2 = _interopRequireDefault(_control);\n\t\n\tvar _zoom = __webpack_require__(/*! control/zoom */ 42);\n\t\n\tvar _zoom2 = _interopRequireDefault(_zoom);\n\t\n\tvar _feature = __webpack_require__(/*! meek/feature */ 24);\n\t\n\tvar _feature2 = _interopRequireDefault(_feature);\n\t\n\tvar _map = __webpack_require__(/*! meek/map */ 74);\n\t\n\tvar _map2 = _interopRequireDefault(_map);\n\t\n\tvar _view = __webpack_require__(/*! meek/view */ 49);\n\t\n\tvar _view2 = _interopRequireDefault(_view);\n\t\n\tvar _overlay = __webpack_require__(/*! meek/overlay */ 75);\n\t\n\tvar _overlay2 = _interopRequireDefault(_overlay);\n\t\n\tvar _geojson = __webpack_require__(/*! data/json/geojson */ 69);\n\t\n\tvar _geojson2 = _interopRequireDefault(_geojson);\n\t\n\tvar _intersects = __webpack_require__(/*! geometry/analysis/intersects */ 70);\n\t\n\tvar _intersects2 = _interopRequireDefault(_intersects);\n\t\n\tvar _splitpolygon = __webpack_require__(/*! geometry/analysis/splitpolygon */ 72);\n\t\n\tvar _splitpolygon2 = _interopRequireDefault(_splitpolygon);\n\t\n\tvar _contains = __webpack_require__(/*! geometry/analysis/contains */ 29);\n\t\n\tvar _contains2 = _interopRequireDefault(_contains);\n\t\n\tvar _polygonwithhole = __webpack_require__(/*! geometry/analysis/polygonwithhole */ 71);\n\t\n\tvar _polygonwithhole2 = _interopRequireDefault(_polygonwithhole);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * Created by zypc on 2016/11/28.\n\t */\n\t\n\tvar version = (\"2.3.0\");\n\t\n\texports.default = {\n\t  Config: _config.Config,\n\t  Coordinate: _coordinate.Coordinate,\n\t  Canvas: _canvas.Canvas,\n\t  Event: _event2.default,\n\t  SelectEvent: _selectevent2.default,\n\t  FeatureEvent: _featureevent2.default,\n\t  ModifyEvent: _modifyevent2.default,\n\t  EventManager: _eventmanager2.default,\n\t  Counter: _counter2.default,\n\t  Helpers: _helpers2.default,\n\t  ImageState: _imagestate.ImageState,\n\t  ImageEvent: _imageevent.ImageEvent,\n\t  SingleImage: _singleimage2.default,\n\t  Geometry: _geometry2.default,\n\t  Extent: _extent2.default,\n\t  Point: _point2.default,\n\t  Line: _line2.default,\n\t  Polygon: _polygon2.default,\n\t  MutilPolygon: _mutilpolygon2.default,\n\t  Parallelogram: _parallelogram2.default,\n\t  Style: _style.Style,\n\t  PointStyle: _pointstyle2.default,\n\t  LineStyle: _linestyle2.default,\n\t  FillStyle: _fillstyle2.default,\n\t  TextStyle: _textstyle2.default,\n\t  FeatureLayer: _featurelayer2.default,\n\t  SingleImageLayer: _singleimagelayer2.default,\n\t  Draw: _draw2.default,\n\t  DrawEvent: _drawevent2.default,\n\t  BrowserEvent: _browserevent2.default,\n\t  EventType: _eventtype.EventType,\n\t  Feature: _feature2.default,\n\t  Map: _map2.default,\n\t  View: _view2.default,\n\t  Overlay: _overlay2.default,\n\t  GeometryUtil: _geometryutil2.default,\n\t  ExtentUtil: _extentutil.ExtentUtil,\n\t  Select: _select2.default,\n\t  Modify: _modify2.default,\n\t  DragPan: _dragpan2.default,\n\t  Control: _control2.default,\n\t  Zoom: _zoom2.default,\n\t  Obj: _obj2.default,\n\t  Math: _math.Math,\n\t  MouseWheelZoom: _mousewheelzoom2.default,\n\t  GeoJSON: _geojson2.default,\n\t  version: version,\n\t  intersects: _intersects2.default,\n\t  splitPolygonByPolyline: _splitpolygon2.default,\n\t  contains: _contains2.default,\n\t  polygonWithHole: _polygonwithhole2.default\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 1 */\n/*!**********************************!*\\\n  !*** ./src/geometry/geometry.js ***!\n  \\**********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _baseobject = __webpack_require__(/*! ../core/baseobject */ 3);\n\t\n\tvar _baseobject2 = _interopRequireDefault(_baseobject);\n\t\n\tvar _extentutil = __webpack_require__(/*! ./support/extentutil */ 2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zypc on 2016/11/13.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t\n\t/**\n\t * 图形基础类，不能直接实例化改类，只能继承和扩展，并实现该类定义的接口\n\t *\n\t * @class Geometry\n\t * @extends BaseObject\n\t * @module geometry\n\t * @constructor\n\t */\n\tvar Geometry = function (_BaseObject) {\n\t  _inherits(Geometry, _BaseObject);\n\t\n\t  /**\n\t   * @constructor\n\t   */\n\t  function Geometry() {\n\t    _classCallCheck(this, Geometry);\n\t\n\t    var _this = _possibleConstructorReturn(this, _BaseObject.call(this));\n\t\n\t    _this._extent = null;\n\t\n\t    /**\n\t     * @type {number}\n\t     */\n\t    _this.stride = 2;\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * 获取图形的类型\n\t   *\n\t   * @property geometryType\n\t   * @type {String}\n\t   */\n\t\n\t\n\t  /**\n\t   * 判断传入的点坐标是否在图形内\n\t   *\n\t   * @method pointInExtent\n\t   * @param coordinate {Array} 包含x, y的点数组\n\t   * @return {Boolean} ture returned if success, false otherwise.\n\t   */\n\t  Geometry.prototype.pointInExtent = function pointInExtent(coordinate) {\n\t    return _extentutil.ExtentUtil.containsPoint(this.extent, coordinate);\n\t  };\n\t\n\t  /**\n\t   * 判断是否相交\n\t   *\n\t   * intersect\n\t   * @param geomtry {Geometry}\n\t   * @returns {Boolean}\n\t   */\n\t\n\t\n\t  Geometry.prototype.intersect = function intersect(geomtry) {\n\t    // eslint-disable-line no-unused-vars\n\t    return false;\n\t  };\n\t\n\t  /**\n\t   * 获取图形的坐标信息\n\t   * @abstract\n\t   * @method getCoordinates\n\t   * @return {Array} 返回坐标数组\n\t   */\n\t\n\t\n\t  Geometry.prototype.getCoordinates = function getCoordinates() {\n\t    return [];\n\t  };\n\t\n\t  /**\n\t   * 计算表单显示的坐标\n\t   *\n\t   *  @method getFormShowPosition\n\t   *  @param {Number} offsetX 表单显示的 x 偏移量, 默认为 0\n\t   *  @param {Number} offsetY 表单显示的 y 偏移量, 默认为 0\n\t   *  @return {Array} 返回点坐标的数组表达方式\n\t   *  @example\n\t   *\n\t   *      var point = geometry.getFormShowPosition(10, 10)\n\t   *      Form.position = point\n\t   */\n\t\n\t\n\t  Geometry.prototype.getFormShowPosition = function getFormShowPosition() {\n\t    var offsetX = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\t    var offsetY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\t    return [];\n\t  }; // eslint-disable-line no-unused-vars\n\t\n\t  /**\n\t   * 计算线的平面内点\n\t   *\n\t   * @method getFlatInteriorPoint\n\t   * @returns {Array}\n\t   */\n\t\n\t\n\t  Geometry.prototype.getFlatInteriorPoint = function getFlatInteriorPoint() {\n\t    return [];\n\t  };\n\t\n\t  /**\n\t   * 判断当前图形是否包含一个点\n\t   *\n\t   * @abstract\n\t   * @method containsXY\n\t   * @param x {Number} x 坐标信息\n\t   * @param y {Number} y 坐标信息\n\t   * @return {Boolean} ture returned if contains, false otherwise\n\t   */\n\t\n\t\n\t  Geometry.prototype.containsXY = function containsXY(x, y) {\n\t    return true;\n\t  }; // eslint-disable-line no-unused-vars\n\t\n\t  /**\n\t   * 移动改图形，移动图形，需要传递x，y的移动量\n\t   *\n\t   * @method move\n\t   * @abstract\n\t   * @param x {Number} x 坐标信息\n\t   * @param y {Number} y 坐标信息\n\t   */\n\t\n\t\n\t  Geometry.prototype.move = function move() {\n\t    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\t    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\t    var opts = arguments[2];\n\t  }; // eslint-disable-line no-unused-vars\n\t\n\t  /**\n\t   * 定义对图形本身的缩放方法\n\t   *\n\t   * @method scale\n\t   * @abstract\n\t   * @param scale {Number} 缩放比率\n\t   * @param origin {Array} 缩放参考点\n\t   */\n\t\n\t\n\t  Geometry.prototype.scale = function scale() {\n\t    var _scale = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n\t\n\t    var origin = arguments[1];\n\t  }; // eslint-disable-line no-unused-vars\n\t\n\t  /**\n\t   * 定义图形本身的旋转方法\n\t   *\n\t   * @method rotate\n\t   * @abstract\n\t   * @param angle {Number} 旋转的角度\n\t    * @param anchor {Object}\n\t   */\n\t\n\t\n\t  Geometry.prototype.rotate = function rotate(angle, anchor) {}; // eslint-disable-line no-unused-vars\n\t\n\t  /**\n\t   * 创建一个简化后的图形副本\n\t   *\n\t   * @method simplify\n\t   * @abstract\n\t   * @param tolerance {Number} 阈值\n\t   */\n\t\n\t\n\t  Geometry.prototype.simplify = function simplify() {\n\t    var tolerance = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n\t  }; // eslint-disable-line no-unused-vars\n\t\n\t  /**\n\t   * 将图形转换成json格式\n\t   *\n\t   * @method toJSON\n\t   * @abstrct\n\t   */\n\t\n\t\n\t  Geometry.prototype.toJSON = function toJSON() {};\n\t\n\t  /**\n\t   * 克隆一个图形副本\n\t   *\n\t   * @method clone\n\t   * @abstract\n\t   */\n\t\n\t\n\t  Geometry.prototype.clone = function clone() {};\n\t\n\t  _createClass(Geometry, [{\n\t    key: 'geometryType',\n\t    get: function get() {\n\t      return Geometry.UNDEFINED;\n\t    }\n\t\n\t    /**\n\t     * 获取图形的最小外接矩形(MBR-Minimum Bounding Rectangle)\n\t     * 除去点意外，任何图形都有最小外接矩形\n\t     *\n\t     * @property extent\n\t     * @type {Datatang.Extent}\n\t     */\n\t\n\t  }, {\n\t    key: 'extent',\n\t    get: function get() {\n\t      return this._extent;\n\t    }\n\t\n\t    /**\n\t     * 获取图形是否是逆时针\n\t     *\n\t     * @property anticlockwise\n\t     * @type {Boolean}\n\t     */\n\t\n\t  }, {\n\t    key: 'anticlockwise',\n\t    get: function get() {\n\t      var geometryType = this.geometryType;\n\t      var coordinates = this.getCoordinates();\n\t\n\t      var fp = void 0,\n\t          sp = void 0,\n\t          f1 = void 0,\n\t          f2 = void 0,\n\t          f3 = void 0;\n\t\n\t      if (geometryType === Geometry.LINE) {\n\t        f1 = [0, 0];\n\t        f2 = coordinates[0];\n\t        f3 = coordinates[1];\n\t      } else if (geometryType === Geometry.POLYGON || geometryType === Geometry.EXTENT) {\n\t        f1 = coordinates[0];\n\t        f2 = coordinates[1];\n\t        f3 = coordinates[2];\n\t      }\n\t\n\t      fp = [f2[0] - f1[0], f2[1] - f1[1]];\n\t      sp = [f3[0] - f2[0], f3[1] - f2[1]];\n\t\n\t      return fp[0] * sp[1] - sp[0] * fp[1] < 0;\n\t    }\n\t  }]);\n\t\n\t  return Geometry;\n\t}(_baseobject2.default);\n\t\n\t/**\n\t * 点类型\n\t *\n\t * @property POINT\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\t\n\t\n\texports.default = Geometry;\n\tGeometry.POINT = 'point';\n\t\n\t/**\n\t * 多点类型\n\t *\n\t * @property MULTI_POINT\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tGeometry.MULTI_POINT = 'multi_point';\n\t\n\t/**\n\t * 线类型\n\t *\n\t * @property LINE\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tGeometry.LINE = 'line';\n\t\n\t/**\n\t * 多线类型\n\t *\n\t * @property MULTI_LINE\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tGeometry.MULTI_LINE = 'multi_line';\n\t\n\t/**\n\t * 多边形类型\n\t *\n\t * @property POLYGON\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tGeometry.POLYGON = 'polygon';\n\t\n\t/**\n\t * 多个多边形类型\n\t *\n\t * @property MULTI_POLYGON\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tGeometry.MULTI_POLYGON = 'multi_polygon';\n\t\n\t/**\n\t * 矩形类型\n\t *\n\t * @property EXTENT\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tGeometry.EXTENT = 'extent';\n\t\n\t/**\n\t * 圆类型\n\t *\n\t * @property CIRCLE\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tGeometry.CIRCLE = 'circle';\n\t\n\t/**\n\t * 定义平行四边形图形\n\t * @type {string}\n\t */\n\tGeometry.PARALLELOGRAM = 'parallelogram';\n\t\n\t/**\n\t * 未定义\n\t *\n\t * @property UNDEFINED\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tGeometry.UNDEFINED = 'undefined';\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 2 */\n/*!********************************************!*\\\n  !*** ./src/geometry/support/extentutil.js ***!\n  \\********************************************/\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t/**\n\t * Created by zhangyong on 2017/5/24.\n\t */\n\t\n\tvar ExtentUtil = exports.ExtentUtil = {};\n\t\n\t/**\n\t * 创建一个空矩形\n\t *\n\t * @method createEmpty\n\t * @returns {[*,*,*,*]}\n\t */\n\tExtentUtil.createEmpty = function () {\n\t  return [Infinity, Infinity, -Infinity, -Infinity];\n\t};\n\t\n\t/**\n\t *\n\t * @param flatCoordinates\n\t * @param offset\n\t * @param end\n\t * @param stride\n\t * @param opt_extent\n\t */\n\tExtentUtil.createOrUpdateFromFlatCoordinates = function (flatCoordinates, offset, end, stride, opt_extent) {\n\t  var extent = ExtentUtil.createOrUpdateEmpty(opt_extent);\n\t  return extendFlatCoordinates(extent, flatCoordinates, offset, end, stride);\n\t};\n\t\n\tvar extendXY = function extendXY(extent, x, y) {\n\t  extent[0] = Math.min(extent[0], x);\n\t  extent[1] = Math.min(extent[1], y);\n\t  extent[2] = Math.max(extent[2], x);\n\t  extent[3] = Math.max(extent[3], y);\n\t};\n\t\n\tvar extendFlatCoordinates = function extendFlatCoordinates(extent, flatCoordinates, offset, end, stride) {\n\t  for (; offset < end; offset += stride) {\n\t    extendXY(extent, flatCoordinates[offset], flatCoordinates[offset + 1]);\n\t  }\n\t\n\t  return extent;\n\t};\n\t\n\t/**\n\t *\n\t * @param opt_extent\n\t * @returns {*}\n\t */\n\tExtentUtil.createOrUpdateEmpty = function (opt_extent) {\n\t  return ExtentUtil.createOrUpdate(Infinity, Infinity, -Infinity, -Infinity, opt_extent);\n\t};\n\t\n\t/**\n\t * 创建或更新矩形\n\t *\n\t * @method createOrUpdate\n\t * @param minX {Number}\n\t * @param minY {Number}\n\t * @param maxX {Number}\n\t * @param maxY {Number}\n\t * @param opt_extent {Array}\n\t * @returns {*}\n\t */\n\tExtentUtil.createOrUpdate = function (minX, minY, maxX, maxY, opt_extent) {\n\t  if (opt_extent) {\n\t    opt_extent[0] = minX;\n\t    opt_extent[1] = minY;\n\t    opt_extent[2] = maxX;\n\t    opt_extent[3] = maxY;\n\t    return opt_extent;\n\t  } else {\n\t    return [minX, minY, maxX, maxY];\n\t  }\n\t};\n\t\n\t/**\n\t * 获取矩形的中心点\n\t *\n\t * @method getCenter\n\t * @param extent\n\t * @returns {[*,*]}\n\t */\n\tExtentUtil.getCenter = function (extent) {\n\t  return [(extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2];\n\t};\n\t\n\t/**\n\t * Create an empty extent.\n\t * @returns {[*,*,*,*]}\n\t */\n\tExtentUtil.createScaleExtent = function (center, value) {\n\t  return [center.x - value, center.y - value, center.x + value, center.y + value];\n\t};\n\t\n\t/**\n\t *\n\t * @param point1\n\t * @param point2\n\t * @returns {[*,*,*,*]}\n\t */\n\tExtentUtil.boundingExtentFromTwoPoints = function (point1, point2) {\n\t  var xmin = 0,\n\t      ymin = 0,\n\t      xmax = 0,\n\t      ymax = 0;\n\t\n\t  if (point1[0] > point2[0]) {\n\t    xmin = point2[0];\n\t    xmax = point1[0];\n\t  } else {\n\t    xmin = point1[0];\n\t    xmax = point2[0];\n\t  }\n\t\n\t  if (point1[1] > point2[1]) {\n\t    ymin = point2[1];\n\t    ymax = point1[1];\n\t  } else {\n\t    ymin = point1[1];\n\t    ymax = point2[1];\n\t  }\n\t\n\t  return [xmin, ymin, xmax, ymax];\n\t};\n\t\n\t/**\n\t * 通过坐标数据构建矩形\n\t *\n\t * @method boundingExtent\n\t * @param extent\n\t * @param coordinate\n\t */\n\tExtentUtil.boundingExtent = function (coordinates) {\n\t  var extent = ExtentUtil.createEmpty();\n\t\n\t  for (var i = 0, ii = coordinates.length; i < ii; ++i) {\n\t    ExtentUtil.extendCoordinate(extent, coordinates[i]);\n\t  }\n\t\n\t  return [ExtentUtil.getBottomLeft(extent), ExtentUtil.getBottomRight(extent), ExtentUtil.getTopRight(extent), ExtentUtil.getTopLeft(extent), ExtentUtil.getBottomLeft(extent)];\n\t};\n\t\n\t/**\n\t * Build an extent that includes all given coordinates.\n\t * @param extent\n\t * @param coordinate\n\t */\n\tExtentUtil.boundingSimpleExtent = function (coordinates) {\n\t  var extent = ExtentUtil.createEmpty();\n\t\n\t  for (var i = 0, ii = coordinates.length; i < ii; ++i) {\n\t    ExtentUtil.extendCoordinate(extent, coordinates[i]);\n\t  }\n\t\n\t  return extent;\n\t};\n\t\n\t/**\n\t * 通过坐标更新矩形\n\t *\n\t * @method extendCoordinate\n\t * @param extent {Geometry}\n\t * @param coordinate {Array}\n\t */\n\tExtentUtil.extendCoordinate = function (extent, coordinate) {\n\t  if (coordinate[0] < extent[0]) {\n\t    extent[0] = coordinate[0];\n\t  }\n\t\n\t  if (coordinate[0] > extent[2]) {\n\t    extent[2] = coordinate[0];\n\t  }\n\t\n\t  if (coordinate[1] < extent[1]) {\n\t    extent[1] = coordinate[1];\n\t  }\n\t\n\t  if (coordinate[1] > extent[3]) {\n\t    extent[3] = coordinate[1];\n\t  }\n\t};\n\t\n\t/**\n\t * 获取矩形右侧线段坐标\n\t *\n\t * getBottomRight\n\t * @param extent {Geometry}\n\t * @returns {[*,*]}\n\t */\n\tExtentUtil.getBottomRight = function (extent) {\n\t  return [extent[2], extent[1]];\n\t};\n\t\n\t/**\n\t * 获取矩形左侧线段坐标\n\t *\n\t * getBottomLef\n\t * @param extent {Geometry}\n\t * @returns {[*,*]}\n\t */\n\tExtentUtil.getBottomLeft = function (extent) {\n\t  return [extent[0], extent[1]];\n\t};\n\t\n\t/**\n\t * Get the top right coordinate of an extent\n\t * extent\n\t * @returns {[*,*]}\n\t */\n\tExtentUtil.getTopRight = function (extent) {\n\t  return [extent[2], extent[3]];\n\t};\n\t\n\t/**\n\t * Get the top left coordinate of an extent\n\t *  extent\n\t * @returns {[*,*]}\n\t */\n\tExtentUtil.getTopLeft = function (extent) {\n\t  return [extent[0], extent[3]];\n\t};\n\t\n\t/**\n\t * 判断点是否在矩形上\n\t *\n\t * @method containsPoint\n\t * @param extent {Geometry}\n\t * @param point {Array}\n\t * @returns {Boolean}\n\t */\n\tExtentUtil.containsPoint = function (extent, point) {\n\t  var x = point[0];\n\t  var y = point[1];\n\t\n\t  if (Array.isArray(extent)) {\n\t    return extent[0] <= x && x <= extent[2] && extent[1] <= y && y <= extent[3];\n\t  } else {\n\t    return extent.xmin - 1 <= x && x <= extent.xmax + 1 && extent.ymin - 1 <= y && y <= extent.ymax + 1;\n\t  }\n\t};\n\t\n\t/**\n\t * Return extent increased by the provided value.\n\t * @param extent\n\t * @param value\n\t * @param optExtent\n\t * @returns {*}\n\t */\n\tExtentUtil.buffer = function (extent, value, optExtent) {\n\t  if (optExtent) {\n\t    optExtent[0] = extent[0] - value;\n\t    optExtent[1] = extent[1] - value;\n\t    optExtent[2] = extent[2] + value;\n\t    optExtent[3] = extent[3] + value;\n\t    return optExtent;\n\t  } else {\n\t    return [extent[0] - value, extent[1] - value, extent[2] + value, extent[3] + value];\n\t  }\n\t};\n\t\n\t/**\n\t * Convert xmin, ymin, xmax, ymax of an extent to a ring array\n\t * @param xmin\n\t * @param ymin\n\t * @param xmax\n\t * @param ymax\n\t * @returns {[*,*,*,*,*]}\n\t */\n\tExtentUtil.minMaxToRing = function (xmin, ymin, xmax, ymax) {\n\t  var ring = [[xmin, ymin], [xmax, ymin], [xmax, ymax], [xmin, ymax], [xmin, ymin]];\n\t\n\t  return ring;\n\t};\n\t\n\t/**\n\t * 获取图形的高\n\t *\n\t * @method getHeight\n\t * @param extent {Geometry}\n\t * @returns {Number}\n\t */\n\tExtentUtil.getHeight = function (extent) {\n\t  return extent[3] - extent[1];\n\t};\n\t\n\t/**\n\t * 获取图形的宽\n\t *\n\t * @method getWidth\n\t * @param extent {Geometry}\n\t * @returns {Number}\n\t */\n\tExtentUtil.getWidth = function (extent) {\n\t  return extent[2] - extent[0];\n\t};\n\t\n\t/**\n\t * 矩形坐标点更新\n\t *\n\t * @method updateExtent\n\t * @param geometry {Geometry}\n\t * @param newCoordinates {Array}\n\t * @param dragSegments\n\t * @returns {Array}\n\t */\n\tExtentUtil.updateExtent = function (geometry, newCoordinates, dragSegments) {\n\t  var dragSegment = dragSegments[0];\n\t  var index = dragSegment.index;\n\t  var extentCoordinates = geometry.getCoordinates();\n\t  var segment1 = extentCoordinates[index];\n\t  var segment2 = extentCoordinates[index + 1];\n\t\n\t  var isVertex = dragSegment.isVertex;\n\t  if (isVertex) {\n\t    if (index === 0 || index === 4) {\n\t      extentCoordinates[0] = newCoordinates;\n\t      extentCoordinates[4] = newCoordinates;\n\t      extentCoordinates[1][1] = newCoordinates[1];\n\t      extentCoordinates[3][0] = newCoordinates[0];\n\t    } else if (index === 1) {\n\t      extentCoordinates[1] = newCoordinates;\n\t\n\t      extentCoordinates[2][0] = newCoordinates[0];\n\t      extentCoordinates[0][1] = newCoordinates[1];\n\t      extentCoordinates[4] = extentCoordinates[0];\n\t    } else if (index === 2) {\n\t      extentCoordinates[2] = newCoordinates;\n\t      extentCoordinates[1][0] = newCoordinates[0];\n\t      extentCoordinates[3][1] = newCoordinates[1];\n\t    } else if (index === 3) {\n\t      extentCoordinates[3] = newCoordinates;\n\t      extentCoordinates[2][1] = newCoordinates[1];\n\t      extentCoordinates[0][0] = newCoordinates[0];\n\t      extentCoordinates[4] = extentCoordinates[0];\n\t    }\n\t  } else {\n\t    if (segment1[0] === segment2[0]) {\n\t      extentCoordinates[index][0] = newCoordinates[0];\n\t      extentCoordinates[index + 1][0] = newCoordinates[0];\n\t    }\n\t\n\t    if (segment1[1] === segment2[1]) {\n\t      extentCoordinates[index][1] = newCoordinates[1];\n\t      extentCoordinates[index + 1][1] = newCoordinates[1];\n\t    }\n\t\n\t    if (index === 3) {\n\t      extentCoordinates[0] = extentCoordinates[4];\n\t    }\n\t    if (index === 0) {\n\t      extentCoordinates[4] = extentCoordinates[0];\n\t    }\n\t  }\n\t\n\t  return extentCoordinates;\n\t};\n\t\n\t/**\n\t *\n\t * @param extent1\n\t * @param extent2\n\t * @param opt_extent\n\t * @returns {(*|*|*|*)[]}\n\t */\n\tExtentUtil.getIntersection = function (extent1, extent2, opt_extent) {\n\t  var intersection = opt_extent ? opt_extent : ExtentUtil.createEmpty();\n\t  if (ExtentUtil.intersects(extent1, extent2)) {\n\t    if (extent1[0] > extent2[0]) {\n\t      intersection[0] = extent1[0];\n\t    } else {\n\t      intersection[0] = extent2[0];\n\t    }\n\t\n\t    if (extent1[1] > extent2[1]) {\n\t      intersection[1] = extent1[1];\n\t    } else {\n\t      intersection[1] = extent2[1];\n\t    }\n\t\n\t    if (extent1[2] < extent2[2]) {\n\t      intersection[2] = extent1[2];\n\t    } else {\n\t      intersection[2] = extent2[2];\n\t    }\n\t\n\t    if (extent1[3] < extent2[3]) {\n\t      intersection[3] = extent1[3];\n\t    } else {\n\t      intersection[3] = extent2[3];\n\t    }\n\t  }\n\t\n\t  return intersection;\n\t};\n\t\n\t/**\n\t * 判断两个矩形是否相交\n\t *\n\t * @method intersects\n\t * @param extent1 {Geometry}\n\t * @param extent2 {Geometry}\n\t * @returns {Boolean}\n\t */\n\tExtentUtil.intersects = function (extent1, extent2) {\n\t  return extent1[0] <= extent2[2] && extent1[2] >= extent2[0] && extent1[1] <= extent2[3] && extent1[3] >= extent2[1];\n\t};\n\t\n\t/**\n\t * 判断矩形是否包含在另一个矩形中\n\t *\n\t * @method containsExtent\n\t * @param extent1\n\t * @param extent2\n\t * @returns {Boolean}\n\t */\n\tExtentUtil.containsExtent = function (extent1, extent2) {\n\t  return extent1[0] <= extent2[0] && extent2[2] <= extent1[2] && extent1[1] <= extent2[1] && extent2[3] <= extent1[3];\n\t};\n\t\n\t/**\n\t *\n\t * @param extent\n\t * @returns {boolean}\n\t */\n\tExtentUtil.isEmpty = function (extent) {\n\t  return extent[2] < extent[0] || extent[3] < extent[1];\n\t};\n\t\n\t/**\n\t *\n\t * @param center\n\t * @param resolution\n\t * @param rotation\n\t * @param size\n\t * @param opt_extent\n\t * @returns {*}\n\t */\n\tExtentUtil.getForViewAndSize = function (center, resolution, rotation, size, opt_extent) {\n\t  var dx = resolution * size[0] / 2;\n\t  var dy = resolution * size[1] / 2;\n\t  var cosRotation = Math.cos(rotation);\n\t  var sinRotation = Math.sin(rotation);\n\t  var xCos = dx * cosRotation;\n\t  var xSin = dx * sinRotation;\n\t  var yCos = dy * cosRotation;\n\t  var ySin = dy * sinRotation;\n\t  var x = center[0];\n\t  var y = center[1];\n\t  var x0 = x - xCos + ySin;\n\t  var x1 = x - xCos - ySin;\n\t  var x2 = x + xCos - ySin;\n\t  var x3 = x + xCos + ySin;\n\t  var y0 = y - xSin - yCos;\n\t  var y1 = y - xSin + yCos;\n\t  var y2 = y + xSin + yCos;\n\t  var y3 = y + xSin - yCos;\n\t\n\t  return ExtentUtil.createOrUpdate(Math.min(x0, x1, x2, x3), Math.min(y0, y1, y2, y3), Math.max(x0, x1, x2, x3), Math.max(y0, y1, y2, y3), opt_extent);\n\t};\n\t\n\texports.default = {\n\t  ExtentUtil: ExtentUtil\n\t};\n\n/***/ }),\n/* 3 */\n/*!********************************!*\\\n  !*** ./src/core/baseobject.js ***!\n  \\********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _event = __webpack_require__(/*! ./event */ 43);\n\t\n\tvar _event2 = _interopRequireDefault(_event);\n\t\n\tvar _counter = __webpack_require__(/*! ../utils/counter */ 36);\n\t\n\tvar _eventtype = __webpack_require__(/*! ../meek/eventtype */ 6);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zypc on 2016/11/13.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t// The BaseObject is a base class that only can be inherited, not be instanced.\n\t\n\t\n\t/**\n\t * 对象基类，所有子类原则上要继承该类。\n\t *\n\t * 该类提供一个 id 和一个 revision,id 作为类的唯一标示\n\t *\n\t * @class BaseObject\n\t * @extends Event\n\t * @constructor\n\t * @module core\n\t */\n\tvar BaseObject = function (_Event) {\n\t  _inherits(BaseObject, _Event);\n\t\n\t  /**\n\t   * Create a BaseObject\n\t   *\n\t   * 构造函数\n\t   *\n\t   * @consructor\n\t   */\n\t  function BaseObject() {\n\t    _classCallCheck(this, BaseObject);\n\t\n\t    /**\n\t     * ID\n\t     *\n\t     * @property id\n\t     * @type {Number}\n\t     * @private\n\t     */\n\t    var _this = _possibleConstructorReturn(this, _Event.call(this));\n\t\n\t    _this._id = (0, _counter.getUid)();\n\t\n\t    /**\n\t     * 版本号\n\t     *\n\t     * @property revision\n\t     * @type {Number}\n\t     * @private\n\t     */\n\t    _this._revision = 0;\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * 此方法用于派发map渲染事件\n\t   *\n\t   * @example this.changed() | super.changed()\n\t   *\n\t   * @method changed\n\t   */\n\t\n\t\n\t  BaseObject.prototype.changed = function changed() {\n\t    ++this._revision;\n\t    this.dispatchEvent(_eventtype.EventType.CHANGE);\n\t  };\n\t\n\t  /**\n\t   *\n\t   * ID属性，用于获取该对象的ID编号\n\t   *\n\t   * @property id\n\t   * @type {Number}\n\t   */\n\t\n\t\n\t  _createClass(BaseObject, [{\n\t    key: 'id',\n\t    get: function get() {\n\t      return this._id;\n\t    }\n\t\n\t    /**\n\t     *\n\t     * 地图渲染的版本号\n\t     *\n\t     * @property revision\n\t     * @type {Number}\n\t     * @returns {Number} the revision id\n\t     */\n\t\n\t  }, {\n\t    key: 'revision',\n\t    get: function get() {\n\t      return this._revision;\n\t    }\n\t  }]);\n\t\n\t  return BaseObject;\n\t}(_event2.default);\n\t\n\texports.default = BaseObject;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 4 */\n/*!**********************************!*\\\n  !*** ./src/core/eventmanager.js ***!\n  \\**********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.getListeners = getListeners;\n\texports.unlistenByKey = unlistenByKey;\n\texports.listen = listen;\n\texports.listenOnce = listenOnce;\n\t\n\tvar _obj = __webpack_require__(/*! ../utils/obj */ 15);\n\t\n\tvar _obj2 = _interopRequireDefault(_obj);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * 根据事件标识和监听对象获取该对象上的事件监听函数列表\n\t *\n\t * @method getListeners\n\t * @param target\n\t * @param type\n\t * @returns {Undefined}\n\t */\n\tfunction getListeners(target, type) {\n\t  var listenerMap = target.ol_lm;\n\t  return listenerMap ? listenerMap[type] : undefined;\n\t}\n\t\n\t/**\n\t * 根据事件标示和事件对象，移除全部事件监听\n\t *\n\t * @param target\n\t * @param type\n\t */\n\t/**\n\t * Created by zypc on 2016/11/17.\n\t */\n\t\n\tvar removeListeners = function removeListeners(target, type) {\n\t  var listeners = getListeners(target, type);\n\t  if (listeners) {\n\t    for (var i = 0, ii = listeners.length; i < ii; ++i) {\n\t      target.removeEventListener(type, listeners[i].boundListener);\n\t      _obj2.default.clear(listeners[i]);\n\t    }\n\t    listeners.length = 0;\n\t    var listenerMap = target.ol_lm;\n\t    if (listenerMap) {\n\t      Reflect.deleteProperty(listenerMap, type);\n\t      if (Object.keys(listenerMap).length === 0) {\n\t        Reflect.deleteProperty(target, ol_lm);\n\t      }\n\t    }\n\t  }\n\t};\n\t\n\t/**\n\t * 移除该事件标识下全部事件监听\n\t *\n\t * @method unlistenByKey\n\t * @param key {String} 事件标示\n\t */\n\tfunction unlistenByKey(key) {\n\t  if (key && key.target) {\n\t    key.target.removeEventListener(key.type, key.boundListener);\n\t    var listeners = getListeners(key.target, key.type);\n\t    if (listeners) {\n\t      var i = 'deleteIndex' in key ? key.deleteIndex : listeners.indexOf(key);\n\t      if (i !== -1) {\n\t        listeners.splice(i, 1);\n\t      }\n\t      if (listeners.length === 0) {\n\t        removeListeners(key.target, key.type);\n\t      }\n\t    }\n\t\n\t    _obj2.default.clear(key);\n\t  }\n\t}\n\t\n\t/**\n\t * @param listenerObj\n\t * @returns {boundListener}\n\t */\n\tvar bindListener = function bindListener(listenerObj) {\n\t  var boundListener = function boundListener(evt) {\n\t    var listener = listenerObj.listener;\n\t    var bindTo = listenerObj.bindTo || listenerObj.target;\n\t    if (listenerObj.callOnce) {\n\t      unlistenByKey(listenerObj);\n\t    }\n\t    return listener.call(bindTo, evt);\n\t  };\n\t\n\t  listenerObj.boundListener = boundListener;\n\t  return boundListener;\n\t};\n\t\n\t/**\n\t *\n\t * @param listeners\n\t * @param listener\n\t * @param optThis\n\t * @param optSetDeleteIndex\n\t * @returns {*}\n\t */\n\tvar findListener = function findListener(listeners, listener, optThis, optSetDeleteIndex) {\n\t  var listenerObj = void 0;\n\t  for (var i = 0, ii = listeners.length; i < ii; ++i) {\n\t    listenerObj = listeners[i];\n\t    if (listenerObj.listener === listener && listenerObj.bindTo === optThis) {\n\t      if (optSetDeleteIndex) {\n\t        listenerObj.deleteIndex = i;\n\t      }\n\t      return listenerObj;\n\t    }\n\t  }\n\t  return undefined;\n\t};\n\t\n\t/**\n\t *\n\t * @param target\n\t * @returns {{}|*}\n\t */\n\tvar getListenerMap = function getListenerMap(target) {\n\t  var listenerMap = target.ol_lm;\n\t  if (!listenerMap) {\n\t    listenerMap = target.ol_lm = {};\n\t  }\n\t  return listenerMap;\n\t};\n\t\n\t/**\n\t * 监听事件\n\t *\n\t * @method listen\n\t * @param target {Object} 监听对象\n\t * @param type {String} 事件标识\n\t * @param listener {Array} 事件响应函数列表\n\t * @param optThis {This} 可选\n\t * @param optOnce\n\t * @returns {Array}\n\t */\n\tfunction listen(target, type, listener, optThis, optOnce) {\n\t  var listenerMap = getListenerMap(target);\n\t  var listeners = listenerMap[type];\n\t  if (!listeners) {\n\t    listeners = listenerMap[type] = [];\n\t  }\n\t\n\t  var listenerObj = findListener(listeners, listener, optThis, false);\n\t\n\t  if (listenerObj) {\n\t    if (!optOnce) {\n\t      listenerObj.callOnce = false; // Turn one-off listener into a permanent one.\n\t    }\n\t  } else {\n\t    listenerObj = {\n\t      bindTo: optThis,\n\t      callOnce: !!optOnce,\n\t      listener: listener,\n\t      target: target,\n\t      type: type\n\t    };\n\t\n\t    target.addEventListener(type, bindListener(listenerObj));\n\t    listeners.push(listenerObj);\n\t  }\n\t\n\t  return listenerObj;\n\t}\n\t\n\t/**\n\t * 对事件只是监听一次\n\t *\n\t * @method listenOnce\n\t * @param target\n\t * @param type\n\t * @param listener\n\t * @param opt_this\n\t * @returns {*}\n\t */\n\tfunction listenOnce(target, type, listener, opt_this) {\n\t  return listen(target, type, listener, opt_this, true);\n\t}\n\t\n\t/**\n\t * 定义关于事件的注册、注销、派发、监听的通用工具模块\n\t *\n\t * @module core\n\t * @class EventManager\n\t */\n\texports.default = {\n\t  getListeners: getListeners,\n\t  listen: listen,\n\t  listenOnce: listenOnce,\n\t  unlistenByKey: unlistenByKey\n\t};\n\n/***/ }),\n/* 5 */\n/*!**********************************!*\\\n  !*** ./src/meek/browserevent.js ***!\n  \\**********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _baseobject = __webpack_require__(/*! ../core/baseobject */ 3);\n\t\n\tvar _baseobject2 = _interopRequireDefault(_baseobject);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zypc on 2016/12/4.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * BrowserEvent\n\t *\n\t * @class BrowserEvent\n\t * @extends BaseObject\n\t * @module meek\n\t * @constructor\n\t */\n\tvar BrowserEvent = function (_BaseObject) {\n\t  _inherits(BrowserEvent, _BaseObject);\n\t\n\t  /**\n\t   * @constructor\n\t   * @param map\n\t   * @param oriEvent\n\t   * @param eventTyle\n\t   */\n\t  function BrowserEvent(map, oriEvent, eventTyle) {\n\t    _classCallCheck(this, BrowserEvent);\n\t\n\t    /**\n\t     * 标示事件类型\n\t     */\n\t    var _this = _possibleConstructorReturn(this, _BaseObject.call(this));\n\t\n\t    _this.type = eventTyle;\n\t\n\t    /**\n\t     *\n\t     */\n\t    _this.map = map;\n\t\n\t    /**\n\t     * 记录事件源对象\n\t     */\n\t    _this.originalEvent = oriEvent;\n\t\n\t    /**\n\t     * 将浏览器坐标转换成canvas屏幕坐标\n\t     * The pixel of the original browser event.\n\t     * @type {ol.Pixel}\n\t     * @api stable\n\t     */\n\t    _this.pixel = map.getEventPixel(oriEvent);\n\t\n\t    /**\n\t     * 将canvas左边转换成地图坐标\n\t     */\n\t    _this.coordinate = map.getCoordinateFromPixel(_this.pixel);\n\t\n\t    /**\n\t     * @type {number}\n\t     */\n\t    _this.pointerId = 0;\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * 取消事件的默认动作\n\t   *\n\t   * @method preventDefault\n\t   */\n\t\n\t\n\t  BrowserEvent.prototype.preventDefault = function preventDefault() {\n\t    this.originalEvent.preventDefault();\n\t  };\n\t\n\t  /**\n\t   * 阻止当前事件在DOM树上冒泡\n\t   *\n\t   * @method stopPropagation\n\t   */\n\t\n\t\n\t  BrowserEvent.prototype.stopPropagation = function stopPropagation() {\n\t    this.originalEvent.stopPropagation();\n\t  };\n\t\n\t  return BrowserEvent;\n\t}(_baseobject2.default);\n\t// The single click is different form double click,which\n\t// consider as two click heppen during 250ms.\n\t/**\n\t * 鼠标在一段时间内单击标识\n\t *\n\t * @property SINGLE_CLICK\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\t\n\t\n\texports.default = BrowserEvent;\n\tBrowserEvent.SINGLE_CLICK = 'singleclick';\n\t\n\t/**\n\t *\n\t * 鼠标单击事件标识\n\t *\n\t * @property CLICK\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tBrowserEvent.CLICK = 'click';\n\t\n\t/**\n\t *\n\t * 鼠标双击事件标识\n\t *\n\t * @property DBLCLICK\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tBrowserEvent.DBLCLICK = 'dblclick';\n\t\n\t/**\n\t * 鼠标拖拽事件标识\n\t *\n\t * @property MOUSE_DRAG\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tBrowserEvent.MOUSE_DRAG = 'mousedrag';\n\t\n\t/**\n\t * 鼠标按下事件标识\n\t *\n\t * @property MOUSE_DOWN\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tBrowserEvent.MOUSE_DOWN = 'mousedown';\n\t\n\t/**\n\t * 鼠标移动事件标识\n\t *\n\t * @property MOUSE_MOVE\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tBrowserEvent.MOUSE_MOVE = 'mousemove';\n\t\n\t/**\n\t * 鼠标抬起事件标识\n\t *\n\t * @property MOUSE_UP\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tBrowserEvent.MOUSE_UP = 'mouseup';\n\t\n\t/**\n\t * 鼠标移入事件标识\n\t *\n\t * @property MOUSE_OVER\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tBrowserEvent.MOUSE_OVER = 'mouseover';\n\t\n\t/**\n\t * 鼠标移开事件标识\n\t *\n\t * @property MOUSE_OUT\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tBrowserEvent.MOUSE_OUT = 'mouseout';\n\t\n\t/**\n\t * 滚轮事件标识\n\t *\n\t * @property WHEEL\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tBrowserEvent.WHEEL = 'wheel';\n\t\n\t/**\n\t * 鼠标滚轮事件标识\n\t *\n\t * @property MOUSE_WHEEL\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tBrowserEvent.MOUSE_WHEEL = 'mousewheel';\n\t\n\t/**\n\t *\n\t * @type {string}\n\t */\n\tBrowserEvent.KEYDOWN = 'keydown';\n\t\n\t/**\n\t *\n\t * @type {string}\n\t */\n\tBrowserEvent.KEYPRESS = 'keypress';\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 6 */\n/*!*******************************!*\\\n  !*** ./src/meek/eventtype.js ***!\n  \\*******************************/\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t/**\n\t * Created by zypc on 2016/12/6.\n\t */\n\tvar EventType = exports.EventType = {};\n\t\n\t/**\n\t * Triggered when map is needed to render\n\t *\n\t * @property CHANGE\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tEventType.CHANGE = 'change';\n\t\n\t/**\n\t * Triggered when view has been changed\n\t *\n\t * 当地图视图发生变化时将会派发改事件\n\t *\n\t * @property VIEW_CHANGED\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tEventType.VIEW_CHANGED = 'viewchanged';\n\t\n\t/**\n\t * Triggered when a image download error\n\t *\n\t * @property ERROR\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tEventType.ERROR = 'error';\n\t\n\t/**\n\t * Triggered when a image finish load\n\t *\n\t * @property LOAD\n\t * @static\n\t * @final\n\t * @type {String}\n\t */\n\tEventType.LOAD = 'load';\n\t\n\t/**\n\t * 当浏览器窗口的尺寸发生变化时派发\n\t *\n\t * @property RESIZE\n\t * @static\n\t * @final\n\t * @type {string}\n\t */\n\tEventType.RESIZE = 'resize';\n\t\n\texports.default = {\n\t  EventType: EventType\n\t};\n\n/***/ }),\n/* 7 */\n/*!**************************************!*\\\n  !*** ./src/data/matrix/transform.js ***!\n  \\**************************************/\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t/**\n\t * Created by zhangyong on 2017/3/17.\n\t */\n\t\n\t/**\n\t * Collection of affine 2d transformation functions. The functions work on an\n\t * array of 6 elements. The element order is compatible with the [SVGMatrix\n\t * interface](https://developer.mozilla.org/en-US/docs/Web/API/SVGMatrix) and is\n\t * a subset (elements a to f) of a 3x3 martrix:\n\t * ```\n\t * [ a c e ]\n\t * [ b d f ]\n\t * [ 0 0 1 ]\n\t * ```\n\t */\n\t\n\tvar Transform = exports.Transform = {\n\t\n\t  /**\n\t   * @private\n\t   * @type {ol.Transform}\n\t   */\n\t  tmp_: new Array(6),\n\t\n\t  /**\n\t   * 恒等矩阵\n\t   *\n\t   * Create an identity（恒等） transform.\n\t   * @return {!Transform} Identity transform.\n\t   */\n\t  create: function create() {\n\t    return [1, 0, 0, 1, 0, 0];\n\t  },\n\t\n\t  /**\n\t   * Resets the given transform to an identity（恒等） transform.\n\t   *\n\t   * @param {!Transform} transform Transform.\n\t   * @return {!Transform} Transform.\n\t   */\n\t  reset: function reset(transform) {\n\t    return transform.set(transform, 1, 0, 0, 1, 0, 0);\n\t  },\n\t\n\t  /**\n\t   *\n\t   * @param flatCoordinates\n\t   * @param offset\n\t   * @param end\n\t   * @param stride\n\t   * @param transform\n\t   * @param opt_dest\n\t   * @returns {Array}\n\t   */\n\t  transform2D: function transform2D(flatCoordinates, offset, end, stride, transform, opt_dest) {\n\t    var dest = opt_dest ? opt_dest : [];\n\t    var i = 0;\n\t    var j = void 0;\n\t\n\t    for (j = offset; j < end; j += stride) {\n\t      var x = flatCoordinates[j];\n\t      var y = flatCoordinates[j + 1];\n\t      dest[i++] = transform[0] * x + transform[2] * y + transform[4];\n\t      dest[i++] = transform[1] * x + transform[3] * y + transform[5];\n\t    }\n\t\n\t    if (opt_dest && dest.length != i) {\n\t      dest.length = i;\n\t    }\n\t\n\t    return dest;\n\t  },\n\t\n\t  /**\n\t   * 矩阵相乘\n\t   *\n\t   * Multiply（相乘） the underlying matrices of two transforms and return the result in\n\t   * the first transform.\n\t   *\n\t   * @param {!Transform} transform1 Transform parameters of matrix 1.\n\t   * @param {!Transform} transform2 Transform parameters of matrix 2.\n\t   * @return {!Transform} transform1 multiplied with transform2.\n\t   */\n\t  multiply: function multiply(transform1, transform2) {\n\t    var a1 = transform1[0];\n\t    var b1 = transform1[1];\n\t    var c1 = transform1[2];\n\t    var d1 = transform1[3];\n\t    var e1 = transform1[4];\n\t    var f1 = transform1[5];\n\t    var a2 = transform2[0];\n\t    var b2 = transform2[1];\n\t    var c2 = transform2[2];\n\t    var d2 = transform2[3];\n\t    var e2 = transform2[4];\n\t    var f2 = transform2[5];\n\t\n\t    transform1[0] = a1 * a2 + c1 * b2;\n\t    transform1[1] = b1 * a2 + d1 * b2;\n\t    transform1[2] = a1 * c2 + c1 * d2;\n\t    transform1[3] = b1 * c2 + d1 * d2;\n\t    transform1[4] = a1 * e2 + c1 * f2 + e1;\n\t    transform1[5] = b1 * e2 + d1 * f2 + f1;\n\t\n\t    return transform1;\n\t  },\n\t\n\t  /**\n\t   * Set the transform components a-f on a given transform.\n\t   *\n\t   * @param {!Transform} transform Transform.\n\t   * @param {number} a The a component of the transform.\n\t   * @param {number} b The b component of the transform.\n\t   * @param {number} c The c component of the transform.\n\t   * @param {number} d The d component of the transform.\n\t   * @param {number} e The e component of the transform.\n\t   * @param {number} f The f component of the transform.\n\t   * @return {!Transform} Matrix with transform applied.\n\t   */\n\t  set: function set(transform, a, b, c, d, e, f) {\n\t    transform[0] = a;\n\t    transform[1] = b;\n\t    transform[2] = c;\n\t    transform[3] = d;\n\t    transform[4] = e;\n\t    transform[5] = f;\n\t    return transform;\n\t  },\n\t\n\t  /**\n\t   * Set transform on one matrix from another matrix.\n\t   *\n\t   * @param {!Transform} transform1 Matrix to set transform to.\n\t   * @param {!Transform} transform2 Matrix to set transform from.\n\t   * @return {!Transform} transform1 with transform from transform2 applied.\n\t   */\n\t  setFromArray: function setFromArray(transform1, transform2) {\n\t    transform1[0] = transform2[0];\n\t    transform1[1] = transform2[1];\n\t    transform1[2] = transform2[2];\n\t    transform1[3] = transform2[3];\n\t    transform1[4] = transform2[4];\n\t    transform1[5] = transform2[5];\n\t    return transform1;\n\t  },\n\t\n\t  /**\n\t   * 矩阵运算\n\t   * 将坐标值矩阵运算\n\t   *\n\t   * Transforms the given coordinate with the given transform returning the\n\t   * resulting, transformed coordinate. The coordinate will be modified in-place.\n\t   *\n\t   * @param {Transform} transform The transformation.\n\t   * @param {Coordinate|Pixel} coordinate The coordinate to transform.\n\t   * @return {Coordinate|Pixel} return coordinate so that operations can be\n\t   *     chained together.\n\t   */\n\t  apply: function apply(transform, coordinate) {\n\t    var x = coordinate[0];\n\t    var y = coordinate[1];\n\t    coordinate[0] = transform[0] * x + transform[2] * y + transform[4];\n\t    coordinate[1] = transform[1] * x + transform[3] * y + transform[5];\n\t    return coordinate;\n\t  },\n\t\n\t  /**\n\t   * Applies rotation to the given transform.\n\t   *\n\t   * 矩阵旋转\n\t   *\n\t   * @param {!Transform} transform Transform.\n\t   * @param {number} angle Angle in radians.\n\t   * @return {!Transform} The rotated transform.\n\t   */\n\t  rotate: function rotate(transform, angle) {\n\t    var cos = Math.cos(angle);\n\t    var sin = Math.sin(angle);\n\t    return transform.multiply(transform, transform.set(transform.tmp_, cos, sin, -sin, cos, 0, 0));\n\t  },\n\t\n\t  /**\n\t   *  Applies scale to a given transform.\n\t   *\n\t   * 矩阵缩放\n\t   *\n\t   * @param {!Transform} transform Transform.\n\t   * @param {number} x Scale factor x.\n\t   * @param {number} y Scale factor y.\n\t   * @return {!Transform} The scaled transform.\n\t   */\n\t  scale: function scale(transform, x, y) {\n\t    return transform.multiply(transform, transform.set(transform.tmp_, x, 0, 0, y, 0, 0));\n\t  },\n\t\n\t  /**\n\t   * Applies translation to the given transform.\n\t   *\n\t   * 矩阵转换\n\t   *\n\t   * @param {!Transform} transform Transform.\n\t   * @param {number} dx Translation x.\n\t   * @param {number} dy Translation y.\n\t   * @return {!Transform} The translated transform.\n\t   */\n\t  translate: function translate(transform, dx, dy) {\n\t    return transform.multiply(transform, transform.set(transform.tmp_, 1, 0, 0, 1, dx, dy));\n\t  },\n\t\n\t  /**\n\t   * Creates a composite transform given an initial translation, scale, rotation, and\n\t   * final translation (in that order only, not commutative).\n\t   *\n\t   * 复杂矩形运算\n\t   *\n\t   * @param {!Transform} transform The transform (will be modified in place).\n\t   * @param {number} dx1 Initial translation x.\n\t   * @param {number} dy1 Initial translation y.\n\t   * @param {number} sx Scale factor x.\n\t   * @param {number} sy Scale factor y.\n\t   * @param {number} angle Rotation (in counter-clockwise radians).\n\t   * @param {number} dx2 Final translation x.\n\t   * @param {number} dy2 Final translation y.\n\t   * @return {!Transform} The composite transform.\n\t   */\n\t  compose: function compose(transform, dx1, dy1, sx, sy, angle, dx2, dy2) {\n\t    var sin = Math.sin(angle);\n\t    var cos = Math.cos(angle);\n\t    transform[0] = sx * cos;\n\t    transform[1] = sy * sin;\n\t    transform[2] = -sx * sin;\n\t    transform[3] = sy * cos;\n\t    transform[4] = dx2 * sx * cos - dy2 * sx * sin + dx1;\n\t    transform[5] = dx2 * sy * sin + dy2 * sy * cos + dy1;\n\t    return transform;\n\t  },\n\t\n\t  /**\n\t   * Invert the given transform.\n\t   *\n\t   * @param {!Transform} transform Transform.\n\t   * @return {!Transform} Inverse of the transform.\n\t   */\n\t  invert: function invert(transform) {\n\t    var det = Transform.determinant(transform);\n\t\n\t    var a = transform[0];\n\t    var b = transform[1];\n\t    var c = transform[2];\n\t    var d = transform[3];\n\t    var e = transform[4];\n\t    var f = transform[5];\n\t\n\t    transform[0] = d / det;\n\t    transform[1] = -b / det;\n\t    transform[2] = -c / det;\n\t    transform[3] = a / det;\n\t    transform[4] = (c * f - d * e) / det;\n\t    transform[5] = -(a * f - b * e) / det;\n\t\n\t    return transform;\n\t  },\n\t\n\t  /**\n\t   * Returns the determinant of the given matrix.\n\t   *\n\t   * 行列式\n\t   *\n\t   * @param {!Transform} mat Matrix.\n\t   * @return {number} Determinant.\n\t   */\n\t  determinant: function determinant(mat) {\n\t    return mat[0] * mat[3] - mat[1] * mat[2];\n\t  }\n\t};\n\t\n\texports.default = {\n\t  Transform: Transform\n\t};\n\n/***/ }),\n/* 8 */\n/*!*************************************!*\\\n  !*** ./src/components/component.js ***!\n  \\*************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _baseobject = __webpack_require__(/*! ../core/baseobject */ 3);\n\t\n\tvar _baseobject2 = _interopRequireDefault(_baseobject);\n\t\n\tvar _browserevent = __webpack_require__(/*! ../meek/browserevent */ 5);\n\t\n\tvar _browserevent2 = _interopRequireDefault(_browserevent);\n\t\n\tvar _obj = __webpack_require__(/*! ../utils/obj */ 15);\n\t\n\tvar _obj2 = _interopRequireDefault(_obj);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zypc on 2016/11/15.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t *\n\t * 定义组件基础类\n\t *\n\t * @class Component\n\t * @extends BaseObject\n\t * @module component\n\t *\n\t */\n\t\n\t// Abstract base class,represent a base componnet whcih should be inhrited\n\tvar Component = function (_BaseObject) {\n\t  _inherits(Component, _BaseObject);\n\t\n\t  /**\n\t   * 构造函数\n\t   *\n\t   * @constructor\n\t   */\n\t  function Component() {\n\t    _classCallCheck(this, Component);\n\t\n\t    /**\n\t     * 当前组件开关，默认为ture，设置为false时，则关闭当前组件的功能\n\t     *\n\t     * @property active\n\t     * @type {Boolean}\n\t     */\n\t    var _this = _possibleConstructorReturn(this, _BaseObject.call(this));\n\t\n\t    _this.active = true;\n\t\n\t    /**\n\t     * @property mapRenderKey\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._mapRenderKey = null;\n\t\n\t    /**\n\t     * @property targetPointers\n\t     * @type {null}\n\t     */\n\t    _this.targetPointers = null;\n\t\n\t    /**\n\t     * @property trackedPointers\n\t     * @type {{}}\n\t     * @private\n\t     */\n\t    _this._trackedPointers = {};\n\t\n\t    /**\n\t     * handlingDownUpSequence\n\t     * @type {boolean}\n\t     */\n\t    _this.handlingDownUpSequence = false;\n\t\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * applyHandleEventOption\n\t   * @param options\n\t   */\n\t\n\t\n\t  Component.prototype.applyHandleEventOption = function applyHandleEventOption(options) {\n\t\n\t    /**\n\t     *\n\t     */\n\t    this.handleMouseEvent = options.handleMouseEvent ? options.handleMouseEvent : this.handleMouseEvent;\n\t\n\t    /**\n\t     *\n\t     * @private\n\t     */\n\t    this._handleDownEvent = options.handleDownEvent ? options.handleDownEvent : function () {\n\t      return false;\n\t    };\n\t\n\t    /**\n\t     *\n\t     * @private\n\t     */\n\t    this._handleDragEvent = options.handleDragEvent ? options.handleDragEvent : function () {};\n\t\n\t    /**\n\t     * @private\n\t     */\n\t    this._handleMoveEvent = options.handleMoveEvent ? options.handleMoveEvent : function () {};\n\t\n\t    /**\n\t     * @private\n\t     */\n\t    this._handleUpEvent = options.handleUpEvent ? options.handleUpEvent : function () {\n\t      return false;\n\t    };\n\t  };\n\t\n\t  /**\n\t   * 处理鼠标事件\n\t   *\n\t   * handleMouseEvent\n\t   * @param browserEvent {browserEvent}\n\t   *\n\t   * @returns {Boolean}\n\t   */\n\t\n\t\n\t  Component.prototype.handleMouseEvent = function handleMouseEvent(browserEvent) {\n\t    var stopEvent = false;\n\t    this._updateTrackedPointers(browserEvent);\n\t\n\t    if (this.handlingDownUpSequence) {\n\t\n\t      if (browserEvent.type === _browserevent2.default.MOUSE_DRAG) {\n\t        this._handleDragEvent(browserEvent);\n\t      } else if (browserEvent.type === _browserevent2.default.MOUSE_UP) {\n\t\n\t        var handledUp = this._handleUpEvent(browserEvent);\n\t        this.handlingDownUpSequence = handledUp && this.targetPointers.length > 0;\n\t      }\n\t    } else {\n\t      if (browserEvent.type === _browserevent2.default.MOUSE_DOWN) {\n\t\n\t        var handled = this._handleDownEvent(browserEvent);\n\t        this.handlingDownUpSequence = handled;\n\t        stopEvent = this.shouldStopEvent(handled);\n\t      } else if (browserEvent.type === _browserevent2.default.MOUSE_MOVE) {\n\t        this._handleMoveEvent(browserEvent);\n\t      }\n\t    }\n\t\n\t    return !stopEvent;\n\t  };\n\t\n\t  /**\n\t   *\n\t   * 根据浏览器鼠标操作事件的类型返回true或false\n\t   *\n\t   * isPointerDraggingEvent\n\t   * @param browserEvent {browserEvent}\n\t   *\n\t   * @returns {Boolean}\n\t   * @private\n\t   */\n\t\n\t\n\t  Component.prototype._isPointerDraggingEvent = function _isPointerDraggingEvent(browserEvent) {\n\t    var type = browserEvent.type;\n\t    return type === _browserevent2.default.MOUSE_DOWN || type === _browserevent2.default.MOUSE_DRAG || type === _browserevent2.default.MOUSE_UP;\n\t  };\n\t\n\t  /**\n\t   *\n\t   * 处理浏览器鼠标操作事件\n\t   *\n\t   * updateTrackedPointers\n\t   *\n\t   * @param browserEvent {browserEvent}\n\t   * @private\n\t   */\n\t\n\t\n\t  Component.prototype._updateTrackedPointers = function _updateTrackedPointers(browserEvent) {\n\t    if (this._isPointerDraggingEvent(browserEvent)) {\n\t      var event = browserEvent;\n\t\n\t      if (browserEvent.type == _browserevent2.default.MOUSE_UP) {\n\t        delete this._trackedPointers[event.pointerId];\n\t      } else if (browserEvent.type == _browserevent2.default.MOUSE_DOWN) {\n\t        this._trackedPointers[event.pointerId] = event;\n\t      } else if (event.pointerId in this._trackedPointers) {\n\t        this._trackedPointers[event.pointerId] = event;\n\t      }\n\t      this.targetPointers = _obj2.default.getValues(this._trackedPointers);\n\t    }\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param view\n\t   * @param delta\n\t   * @param opt_duration\n\t   */\n\t\n\t\n\t  Component.prototype.pan = function pan(view, delta) {\n\t    var currentCenter = view.center;\n\t    if (currentCenter) {\n\t      view.center = [currentCenter[0] + delta[0], currentCenter[1] + delta[1]];\n\t    }\n\t  };\n\t\n\t  /**\n\t   *\n\t   * 根据Delta值进行视图缩放，Delta等于1时固定放大，等于-1时固定缩小\n\t   *\n\t   * @method zoomByDelta\n\t   *\n\t   * @param view {Object}\n\t   * @param delta {Number}\n\t   * @param opt_anchor {Number}\n\t   * @param opt_duration {Number}\n\t   *\n\t   */\n\t\n\t\n\t  Component.prototype.zoomByDelta = function zoomByDelta(view, delta, opt_anchor, opt_duration) {\n\t    var currentResolution = view.resolution;\n\t    var resolution = view.constrainResolution(currentResolution, delta, 0);\n\t\n\t    if (opt_anchor && resolution !== undefined && resolution !== currentResolution) {\n\t      var currentCenter = view.center;\n\t      var center = view.calculateCenterZoom(resolution, opt_anchor);\n\t      center = view.constrainCenter(center);\n\t\n\t      opt_anchor = [(resolution * currentCenter[0] - currentResolution * center[0]) / (resolution - currentResolution), (resolution * currentCenter[1] - currentResolution * center[1]) / (resolution - currentResolution)];\n\t    }\n\t\n\t    this.zoomWithoutConstraints(view, resolution, opt_anchor, opt_duration);\n\t  };\n\t\n\t  /**\n\t   *\n\t   * 根据resolution进行缩放\n\t   *\n\t   * @method zoomWithoutConstraints\n\t   *\n\t   * @param view {Object}\n\t   * @param resolution {Number}\n\t   * @param opt_anchor {Number}\n\t   * @param opt_duration {Number}\n\t   */\n\t\n\t\n\t  Component.prototype.zoomWithoutConstraints = function zoomWithoutConstraints(view, resolution, opt_anchor, opt_duration) {\n\t    if (resolution) {\n\t      var currentResolution = view.resolution;\n\t      var currentCenter = view.center;\n\t\n\t      if (currentResolution !== undefined && currentCenter && resolution !== currentResolution && opt_duration) {\n\t        view.resolution = resolution;\n\t      } else {\n\t        if (opt_anchor) {\n\t          var center = view.calculateCenterZoom(resolution, opt_anchor);\n\t          view.center = center;\n\t        }\n\t        view.resolution = resolution;\n\t      }\n\t    }\n\t  };\n\t\n\t  /**\n\t   * 获取当前标注视图的坐标范围(标注的图片的像素)\n\t   *\n\t   * @method getViewDataExtent\n\t   *\n\t   * @returns {*|null}\n\t   */\n\t\n\t\n\t  Component.prototype.getViewDataExtent = function getViewDataExtent() {\n\t    if (!this._dataExtent) {\n\t      this._dataExtent = this.map.view.dataExtent;\n\t    }\n\t\n\t    return this._dataExtent;\n\t  };\n\t\n\t  /**\n\t   *\n\t   * 坐标自检测，如果有小于0的坐标，修正为0，如果有大于最大值的坐标，修正为最大值\n\t   *\n\t   * @method coordinateBeyond\n\t   * @param coordinate {Array} 坐标点{x,y}\n\t   * @returns {Array} new Coordinate\n\t   */\n\t\n\t\n\t  Component.prototype.coordinateBeyond = function coordinateBeyond(coordinate) {\n\t    // 如果允许坐标可超出图片的边界\n\t    if (this.map.allowCoordinatesBeyondImage) {\n\t      return coordinate;\n\t    }\n\t\n\t    if (coordinate === undefined) {\n\t      return coordinate;\n\t    }\n\t\n\t    var newCoordinate = new Array(2);\n\t\n\t    var x = void 0,\n\t        y = void 0;\n\t\n\t    try {\n\t      x = coordinate[0];\n\t      y = coordinate[1];\n\t    } catch (e) {\n\t      // console.log(coordinate)\n\t    }\n\t\n\t    newCoordinate[0] = x;\n\t    newCoordinate[1] = y;\n\t\n\t    if (x <= 0) {\n\t      newCoordinate[0] = 0;\n\t    }\n\t\n\t    if (y <= 0) {\n\t      newCoordinate[1] = 0;\n\t    }\n\t\n\t    var extent = this.getViewDataExtent();\n\t\n\t    if (extent) {\n\t      if (x >= extent[2]) {\n\t        newCoordinate[0] = extent[2];\n\t      }\n\t\n\t      if (y >= extent[3]) {\n\t        newCoordinate[1] = extent[3];\n\t      }\n\t    }\n\t\n\t    return newCoordinate;\n\t  };\n\t\n\t  /**\n\t   * shouldStopEvent\n\t   * @param handled\n\t   * @returns {*}\n\t   *\n\t   */\n\t\n\t\n\t  Component.prototype.shouldStopEvent = function shouldStopEvent(handled) {\n\t    return handled;\n\t  };\n\t\n\t  /**\n\t   * map读写器, 读取设置当前map\n\t   *\n\t   * @type {Function}\n\t   * @property map\n\t   * @type {Datatang.map}\n\t   */\n\t\n\t\n\t  _createClass(Component, [{\n\t    key: 'map',\n\t    get: function get() {\n\t      return this._map;\n\t    },\n\t    set: function set(value) {\n\t      this._map = value;\n\t    }\n\t\n\t    /**\n\t     * active读写器, 读取设置active\n\t     *\n\t     * @type {Function}\n\t     * @property active\n\t     */\n\t\n\t  }, {\n\t    key: 'active',\n\t    get: function get() {\n\t      return this._active;\n\t    },\n\t    set: function set(value) {\n\t      this._active = value;\n\t    }\n\t  }]);\n\t\n\t  return Component;\n\t}(_baseobject2.default);\n\t\n\texports.default = Component;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 9 */\n/*!********************************!*\\\n  !*** ./src/geometry/extent.js ***!\n  \\********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _geometry = __webpack_require__(/*! ./geometry */ 1);\n\t\n\tvar _geometry2 = _interopRequireDefault(_geometry);\n\t\n\tvar _extentutil = __webpack_require__(/*! ./support/extentutil */ 2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zypc on 2016/11/13.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * 矩形类和数据结构\n\t *\n\t * @class Extent\n\t * @extends Geometry\n\t * @module geometry\n\t * @constructor\n\t * @example\n\t *\n\t *  var rect = new Datatang.Extent(10, 10, 500, 500)\n\t */\n\tvar Extent = function (_Geometry) {\n\t  _inherits(Extent, _Geometry);\n\t\n\t  /**\n\t   * 构造函数，构建一个extent对象\n\t   *\n\t   * @param xmin {Number}\n\t   * @param ymin {Number}\n\t   * @param xmax {Number}\n\t   * @param ymax {Number}\n\t   *\n\t   */\n\t  function Extent() {\n\t    var xmin = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\t    var ymin = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\t    var xmax = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\t    var ymax = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n\t\n\t    _classCallCheck(this, Extent);\n\t\n\t    var _this = _possibleConstructorReturn(this, _Geometry.call(this));\n\t\n\t    _this._xmin = xmin;\n\t    _this._ymin = ymin;\n\t    _this._xmax = xmax;\n\t    _this._ymax = ymax;\n\t\n\t    _this._rings = [];\n\t\n\t    /**\n\t     * 记录内点更新的次数\n\t     * @type {number}\n\t     * @private\n\t     */\n\t    _this._flatInteriorPointRevision = -1;\n\t\n\t    /**\n\t     * 缓存当前内点\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._flatInteriorPoint = null;\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * 获取Geometry的类型\n\t   *\n\t   * @property geometryType\n\t   * @returns {String}\n\t   */\n\t\n\t\n\t  /**\n\t   * 判断点是否在矩形内\n\t   *\n\t   * @method containsXY\n\t   * @param x {Number}\n\t   * @param y {Number}\n\t   */\n\t  Extent.prototype.containsXY = function containsXY(x, y) {\n\t    return _extentutil.ExtentUtil.containsPoint(this, [x, y]);\n\t  };\n\t\n\t  /**\n\t   * getFlatInteriorPoint\n\t   * @returns {[*,*]}\n\t   */\n\t\n\t\n\t  Extent.prototype.getFlatInteriorPoint = function getFlatInteriorPoint() {\n\t    if (this._flatInteriorPointRevision !== this.revision) {\n\t      this._flatInteriorPointRevision = this.revision;\n\t      this._flatInteriorPoint = [this.centerX, this.centerY];\n\t    }\n\t\n\t    return this._flatInteriorPoint;\n\t  };\n\t\n\t  /**\n\t   * 移动矩形通过x，y值\n\t   *\n\t   * @method move\n\t   * @param x {Number}\n\t   * @param y {Number}\n\t   */\n\t\n\t\n\t  Extent.prototype.move = function move() {\n\t    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\t    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\t    var opts = arguments[2];\n\t\n\t    var beyond = void 0;\n\t    if (opts) {\n\t      if (opts.beyond) {\n\t        beyond = opts.beyond;\n\t      }\n\t    }\n\t\n\t    var minPoint = [this.xmin, this.ymin];\n\t    var width = this.width;\n\t    var height = this.height;\n\t\n\t    var newMinPoint = new Array(2);\n\t\n\t    newMinPoint[0] = minPoint[0] + x;\n\t    newMinPoint[1] = minPoint[1] + y;\n\t\n\t    if (beyond) {\n\t      if (minPoint[0] < beyond.xmin) {\n\t        minPoint[0] = beyond.xmin;\n\t        newMinPoint[0] = minPoint[0];\n\t      }\n\t\n\t      if (minPoint[0] + width + x >= beyond.xmax) {\n\t        newMinPoint[0] = minPoint[0];\n\t      }\n\t\n\t      if (minPoint[1] < beyond.ymin) {\n\t        minPoint[1] = beyond.ymin;\n\t        newMinPoint[1] = minPoint[1];\n\t      }\n\t\n\t      if (minPoint[1] + height + y >= beyond.ymax) {\n\t        newMinPoint[1] = minPoint[1];\n\t      }\n\t    }\n\t\n\t    var newCoordiante = [newMinPoint, [newMinPoint[0] + width, newMinPoint[1]], [newMinPoint[0] + width, newMinPoint[1] + height], [newMinPoint[0], newMinPoint[1] + height], newMinPoint];\n\t\n\t    this.setCoordinates(newCoordiante);\n\t  };\n\t\n\t  /**\n\t   * 设置多边形的边，如果设置了边，则需要重新计算\n\t   * 外接矩形\n\t   *\n\t   * @method rings\n\t   * @returns {Array}\n\t   */\n\t\n\t\n\t  /**\n\t   * 获取图形的坐标数据\n\t   *\n\t   * @method getCoordinates\n\t   * @returns {[*,*]}\n\t   */\n\t  Extent.prototype.getCoordinates = function getCoordinates() {\n\t    if (this._rings.length === 0) {\n\t      if (this.xmin !== 0 && this.ymin !== 0 && this.xmax !== 0 && this.ymax !== 0) {\n\t        this._rings = _extentutil.ExtentUtil.minMaxToRing(this.xmin, this.ymin, this.xmax, this.ymax);\n\t      }\n\t    }\n\t\n\t    return this._rings;\n\t  };\n\t\n\t  /**\n\t   * 根据得到的坐标点，计算出表单显示的位置\n\t   *\n\t   * @param {Number} offsetX x的偏移量\n\t   * @param {Number} offsetY y的偏移量\n\t   * @returns {[*,*]}\n\t   */\n\t\n\t\n\t  Extent.prototype.getFormShowPosition = function getFormShowPosition() {\n\t    var offsetX = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\t    var offsetY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\t\n\t    return [(this.xmin + this.xmax) / 2 - offsetX, this.ymin - offsetY];\n\t  };\n\t\n\t  /**\n\t   * 设置坐标数据\n\t   *\n\t   * @method setCoordinates\n\t   * @param coordinates\n\t   */\n\t\n\t\n\t  Extent.prototype.setCoordinates = function setCoordinates(coordinates) {\n\t    this.rings = coordinates;\n\t\n\t    var extentArr = _extentutil.ExtentUtil.boundingSimpleExtent(coordinates);\n\t    this.xmin = extentArr[0];\n\t    this.ymin = extentArr[1];\n\t    this.xmax = extentArr[2];\n\t    this.ymax = extentArr[3];\n\t\n\t    this.changed();\n\t  };\n\t\n\t  /**\n\t   * 获取点位于图形坐标点的下标\n\t   *\n\t   * @method getCoordinateIndex\n\t   * @param coord {Array}\n\t   * @returns {Number}\n\t   */\n\t\n\t\n\t  Extent.prototype.getCoordinateIndex = function getCoordinateIndex(coord) {\n\t    return this.getCoordinates().findIndex(function (points) {\n\t      return points[0] === coord[0] && points[1] === coord[1];\n\t    });\n\t  };\n\t\n\t  /**\n\t   * 克隆矩形框\n\t   *\n\t   * @method clone\n\t   * @returns {Extent}\n\t   */\n\t\n\t\n\t  Extent.prototype.clone = function clone() {\n\t    return new Extent(this.xmin, this.ymin, this.xmax, this.ymax);\n\t  };\n\t\n\t  _createClass(Extent, [{\n\t    key: 'geometryType',\n\t    get: function get() {\n\t      return _geometry2.default.EXTENT;\n\t    }\n\t\n\t    /**\n\t     * 计算x轴的中心坐标\n\t     *\n\t     * @property centerX\n\t     * @type {Number}\n\t     */\n\t\n\t  }, {\n\t    key: 'centerX',\n\t    get: function get() {\n\t      return (this.xmax + this.xmin) / 2;\n\t    }\n\t\n\t    /**\n\t     * 计算Y轴的中心坐标\n\t     *\n\t     * @property centerY\n\t     * @type {Number}\n\t     */\n\t\n\t  }, {\n\t    key: 'centerY',\n\t    get: function get() {\n\t      return (this.ymax + this.ymin) / 2;\n\t    }\n\t\n\t    /**\n\t     * 计算最小外接矩形的宽\n\t     *\n\t     * @property width\n\t     * @returns {Number}\n\t     */\n\t\n\t  }, {\n\t    key: 'width',\n\t    get: function get() {\n\t      return Math.abs(this.xmax - this.xmin);\n\t    }\n\t\n\t    /**\n\t     * 计算最小外接矩形的高\n\t     *\n\t     * @property height\n\t     * @returns {Number}\n\t     */\n\t\n\t  }, {\n\t    key: 'height',\n\t    get: function get() {\n\t      return Math.abs(this.ymax - this.ymin);\n\t    }\n\t\n\t    /**\n\t     * 获取最小外接矩形本对象\n\t     *\n\t     * @property extent\n\t     * @returns {Object} extent\n\t     */\n\t\n\t  }, {\n\t    key: 'extent',\n\t    get: function get() {\n\t      return this;\n\t    }\n\t\n\t    /**\n\t     * X 轴最小值\n\t     *\n\t     * @property xmin\n\t     * @type {Number}\n\t     */\n\t\n\t  }, {\n\t    key: 'xmin',\n\t    get: function get() {\n\t      return this._xmin;\n\t    },\n\t    set: function set(value) {\n\t      this._xmin = value;\n\t      this.changed();\n\t    }\n\t\n\t    /**\n\t     * Y 轴最小值\n\t     *\n\t     * @property ymin\n\t     * @type {Number}\n\t     */\n\t\n\t  }, {\n\t    key: 'ymin',\n\t    get: function get() {\n\t      return this._ymin;\n\t    },\n\t    set: function set(value) {\n\t      this._ymin = value;\n\t      this.changed();\n\t    }\n\t\n\t    /**\n\t     * X 轴最大值\n\t     *\n\t     * @property xmax\n\t     * @type {Number}\n\t     */\n\t\n\t  }, {\n\t    key: 'xmax',\n\t    get: function get() {\n\t      return this._xmax;\n\t    },\n\t    set: function set(value) {\n\t      this._xmax = value;\n\t      this.changed();\n\t    }\n\t\n\t    /**\n\t     * X 轴最大值\n\t     *\n\t     * @property ymax\n\t     * @type {Number}\n\t     */\n\t\n\t  }, {\n\t    key: 'ymax',\n\t    get: function get() {\n\t      return this._ymax;\n\t    },\n\t    set: function set(value) {\n\t      this._ymax = value;\n\t      this.changed();\n\t    }\n\t  }, {\n\t    key: 'rings',\n\t    get: function get() {\n\t      if (this._rings.length === 0) {\n\t        if (this.xmin !== 0 && this.ymin !== 0 && this.xmax !== 0 && this.ymax !== 0) {\n\t          this._rings = _extentutil.ExtentUtil.minMaxToRing(this.xmin, this.ymin, this.xmax, this.ymax);\n\t        }\n\t      }\n\t\n\t      return this._rings;\n\t    },\n\t    set: function set(value) {\n\t      this._rings = value;\n\t      var extentArr = _extentutil.ExtentUtil.boundingSimpleExtent(value);\n\t      this.xmin = extentArr[0];\n\t      this.ymin = extentArr[1];\n\t      this.xmax = extentArr[2];\n\t      this.ymax = extentArr[3];\n\t    }\n\t  }]);\n\t\n\t  return Extent;\n\t}(_geometry2.default);\n\t\n\texports.default = Extent;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 10 */\n/*!*********************************!*\\\n  !*** ./src/geometry/polygon.js ***!\n  \\*********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _geometry = __webpack_require__(/*! ./geometry */ 1);\n\t\n\tvar _geometry2 = _interopRequireDefault(_geometry);\n\t\n\tvar _extent = __webpack_require__(/*! ./extent */ 9);\n\t\n\tvar _extent2 = _interopRequireDefault(_extent);\n\t\n\tvar _interpolate = __webpack_require__(/*! ./support/interpolate */ 32);\n\t\n\tvar _orient = __webpack_require__(/*! ./support/orient */ 33);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zypc on 2016/11/13.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * 面类和数据结构\n\t *\n\t * 多边形是<b>闭合数据结构</b>，所有首尾点必须相同。\n\t *\n\t * 多边形顶点存储是一个二维数组，数组中第一条闭合点串表示多边形\n\t * 的最外层，第二条及其以后表示多边形的内部洞环。\n\t *\n\t * @class Polygon\n\t * @extends Geometry\n\t * @module geometry\n\t * @constructor\n\t * @example\n\t *\n\t *  var polygon = new Datatang.Polygon([[100, 100], [120, 130],[50, 50],[100, 100]])\n\t *\n\t */\n\tvar Polygon = function (_Geometry) {\n\t  _inherits(Polygon, _Geometry);\n\t\n\t  /**\n\t   * 创建一个Polygon实例\n\t   * @constructor\n\t   * @param rings\n\t   */\n\t  function Polygon() {\n\t    var rings = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\t\n\t    _classCallCheck(this, Polygon);\n\t\n\t    var _this = _possibleConstructorReturn(this, _Geometry.call(this));\n\t\n\t    _this._rings = [];\n\t\n\t    /**\n\t     * 记录当前多边形内点更新的次数\n\t     * @type {number}\n\t     * @private\n\t     */\n\t    _this._flatInteriorPointRevision = -1;\n\t\n\t    /**\n\t     * 缓存当前多边形内点\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._flatInteriorPoint = null;\n\t\n\t    /**\n\t     * 更新多边形的坐标\n\t     */\n\t    _this.setCoordinates(rings);\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * 获取图形的最小外接矩形(MBR-Minimum Bounding Rectangle)\n\t   * 可用来对图形进行拖动、旋转、缩放\n\t   *\n\t   * @method extent\n\t   * @abstrct function\n\t   * @returns {Extent}\n\t   */\n\t\n\t\n\t  /**\n\t   * 多边形添加线段\n\t   *\n\t   * @method addRing\n\t   * @param ring {Array}\n\t   *\n\t   */\n\t  Polygon.prototype.addRing = function addRing(ring) {\n\t    this.rings.push(ring);\n\t    this._extent = null;\n\t  };\n\t\n\t  /**\n\t   * 判断点是否在多边形上\n\t   *\n\t   * @method containsXY\n\t   * @param x {Number}\n\t   * @param y {Number}\n\t   * @returns {Boolean}\n\t   */\n\t\n\t\n\t  Polygon.prototype.containsXY = function containsXY(x, y) {\n\t    var _this2 = this;\n\t\n\t    var coords = this.getCoordinates();\n\t    var outRing = coords[0];\n\t\n\t    var contains = false;\n\t    if (this._inOneRing(x, y, outRing)) {\n\t      contains = true;\n\t    }\n\t\n\t    if (coords.length > 1 && contains) {\n\t      var coordsTemp = coords.slice(1);\n\t\n\t      var inHole = coordsTemp.some(function (ring) {\n\t        return _this2._inOneRing(x, y, ring);\n\t      });\n\t\n\t      if (inHole) {\n\t        contains = false;\n\t      }\n\t    }\n\t\n\t    return contains;\n\t  };\n\t\n\t  /**\n\t   * 判断 x 和 y 的值是否在环内\n\t   *\n\t   * @param x {Number}\n\t   * @param y {Number}\n\t   * @param ring {Array}\n\t   * @returns {Boolean}\n\t   * @private\n\t   */\n\t\n\t\n\t  Polygon.prototype._inOneRing = function _inOneRing(x, y, ring) {\n\t    var px = x;\n\t    var py = y;\n\t    var flag = false;\n\t\n\t    for (var i = 0, l = ring.length, j = l - 1; i < l; j = i, i++) {\n\t      var sx = ring[i][0];\n\t      var sy = ring[i][1];\n\t      var tx = ring[j][0];\n\t      var ty = ring[j][1];\n\t\n\t      // 点与多边形顶点重合\n\t      if (sx === px && sy === py || tx === px && ty === py) {\n\t        return true;\n\t      }\n\t\n\t      // 判断线段两端点是否在射线两侧\n\t      if (sy < py && ty >= py || sy >= py && ty < py) {\n\t        // 线段上与射线 Y 坐标相同的点的 X 坐标\n\t        var _x2 = sx + (py - sy) * (tx - sx) / (ty - sy);\n\t\n\t        // 点在多边形的边上\n\t        if (_x2 === px) {\n\t          return true;\n\t        }\n\t\n\t        // 射线穿过多边形的边界\n\t        if (_x2 > px) {\n\t          flag = !flag;\n\t        }\n\t      }\n\t    }\n\t\n\t    // 射线穿过多边形边界的次数为奇数时点在多边形内\n\t    return flag;\n\t  };\n\t\n\t  /**\n\t   * 计算多边形的内点\n\t   *\n\t   * @method getFlatInteriorPoint\n\t   * @returns {Array} 返回内点，格式 [x, y]\n\t   */\n\t\n\t\n\t  Polygon.prototype.getFlatInteriorPoint = function getFlatInteriorPoint() {\n\t    // 缓存限制\n\t    if (this._flatInteriorPointRevision !== this.revision) {\n\t      var flatCenter = [this.extent.centerX, this.extent.centerY];\n\t\n\t      var ends = [this.getCoordinates()[0].length * 2];\n\t      var orientedFlatCoordinates = this.getOrientedFlatCoordinates();\n\t\n\t      this._flatInteriorPoint = (0, _interpolate.linearRings)(orientedFlatCoordinates, 0, ends, this.stride, flatCenter, 0);\n\t\n\t      this._flatInteriorPointRevision = this.revision;\n\t    }\n\t\n\t    return this._flatInteriorPoint;\n\t  };\n\t\n\t  /**\n\t   * 对多边形的边进行顺序化\n\t   * getOrientedFlatCoordinates\n\t   * @returns {*}\n\t   */\n\t\n\t\n\t  Polygon.prototype.getOrientedFlatCoordinates = function getOrientedFlatCoordinates() {\n\t    var orientedFlatCoordinates = void 0;\n\t\n\t    var flatCoordinates = [];\n\t    var coordinates = this.getCoordinates()[0];\n\t\n\t    coordinates.forEach(function (point) {\n\t      flatCoordinates.push(point[0], point[1]);\n\t    });\n\t\n\t    var ends = [flatCoordinates.length];\n\t\n\t    if ((0, _orient.linearRingsAreOriented)(flatCoordinates, 0, ends, this.stride)) {\n\t      orientedFlatCoordinates = flatCoordinates;\n\t    } else {\n\t      orientedFlatCoordinates = flatCoordinates.slice();\n\t      orientedFlatCoordinates.length = (0, _orient.orientLinearRings)(orientedFlatCoordinates, 0, ends, this.stride);\n\t    }\n\t\n\t    // this.orientedRevision_ = this.getRevision()\n\t\n\t    return orientedFlatCoordinates;\n\t  };\n\t\n\t  /**\n\t   * 判断当前多边形是否有洞\n\t   *\n\t   * @method hasHoles\n\t   * @returns {boolean}\n\t   */\n\t\n\t\n\t  Polygon.prototype.hasHoles = function hasHoles() {\n\t    return this.getCoordinates().length > 1;\n\t  };\n\t\n\t  /**\n\t   * 获取多边形坐标\n\t   *\n\t   * @method getCoordinates\n\t   * @returns {[*,*]}\n\t   */\n\t\n\t\n\t  Polygon.prototype.getCoordinates = function getCoordinates() {\n\t    return this.rings;\n\t  };\n\t\n\t  /**\n\t   * 得到最后一个点的坐标，显示表单\n\t   *\n\t   * @param {Number} offsetX x的偏移量\n\t   * @param {Number} offsetY y的偏移量\n\t   * @returns {[*,*]}\n\t   */\n\t\n\t\n\t  Polygon.prototype.getFormShowPosition = function getFormShowPosition() {\n\t    var offsetX = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\t    var offsetY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\t\n\t    var coordinates = this.getCoordinates()[0];\n\t    if (coordinates.length === 0) {\n\t      return;\n\t    }\n\t\n\t    var lastPoint = coordinates[coordinates.length - 2];\n\t    return [lastPoint[0] - offsetX, lastPoint[1] - offsetY];\n\t  };\n\t\n\t  /**\n\t   * 设置多边形的坐标\n\t   *\n\t   * @method setCoordinates\n\t   * @param coords\n\t   */\n\t\n\t\n\t  Polygon.prototype.setCoordinates = function setCoordinates(coords) {\n\t    this.rings = coords;\n\t    this._extent = null;\n\t    this.stride = 2;\n\t    this.changed();\n\t  };\n\t\n\t  /**\n\t   * getCoordinateIndex\n\t   * @param coord\n\t   * @returns {*|number}\n\t   */\n\t\n\t\n\t  Polygon.prototype.getCoordinateIndex = function getCoordinateIndex(coord) {\n\t    var coords = this.getCoordinates();\n\t    for (var i = 0, len = coords.length; i < len; i++) {\n\t      var rings = coords[i];\n\t      for (var j = 0, jLen = rings.length; j < jLen; j++) {\n\t        var point = rings[j];\n\t        if (point[0] === coord[0] && point[1] === coord[1]) {\n\t          return {\n\t            ringIndex: i,\n\t            index: j\n\t          };\n\t        }\n\t      }\n\t    }\n\t\n\t    return {\n\t      ringIndex: -1,\n\t      index: -1\n\t    };\n\t  };\n\t\n\t  /**\n\t   * 克隆多边形\n\t   *\n\t   * @method clone\n\t   * @returns {Polygon}\n\t   */\n\t\n\t\n\t  Polygon.prototype.clone = function clone() {\n\t    var coords = this.getCoordinates();\n\t\n\t    var newCoordinates = [];\n\t    var outRings = [];\n\t    coords.forEach(function (ring) {\n\t      ring.forEach(function (points) {\n\t        outRings.push([points[0], points[1]]);\n\t      });\n\t\n\t      newCoordinates.push(outRings);\n\t      outRings = [];\n\t    });\n\t\n\t    var newPolygon = new Polygon();\n\t    newPolygon.setCoordinates(newCoordinates);\n\t\n\t    return newPolygon;\n\t  };\n\t\n\t  _createClass(Polygon, [{\n\t    key: 'extent',\n\t    get: function get() {\n\t      if (this._extent === null) {\n\t        var coords = this.getCoordinates();\n\t\n\t        // 计算最小外界矩形，只考虑外围环\n\t        if (coords.length > 0) {\n\t          var rings = coords[0];\n\t\n\t          var xmin = Number.POSITIVE_INFINITY;\n\t          var ymin = Number.POSITIVE_INFINITY;\n\t          var xmax = Number.NEGATIVE_INFINITY;\n\t          var ymax = Number.NEGATIVE_INFINITY;\n\t\n\t          var _iteratorNormalCompletion = true;\n\t          var _didIteratorError = false;\n\t          var _iteratorError = undefined;\n\t\n\t          try {\n\t            for (var _iterator = rings[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t              var ring = _step.value;\n\t\n\t              xmin = Math.min(xmin, ring[0]);\n\t              ymin = Math.min(ymin, ring[1]);\n\t              xmax = Math.max(xmax, ring[0]);\n\t              ymax = Math.max(ymax, ring[1]);\n\t            }\n\t          } catch (err) {\n\t            _didIteratorError = true;\n\t            _iteratorError = err;\n\t          } finally {\n\t            try {\n\t              if (!_iteratorNormalCompletion && _iterator.return) {\n\t                _iterator.return();\n\t              }\n\t            } finally {\n\t              if (_didIteratorError) {\n\t                throw _iteratorError;\n\t              }\n\t            }\n\t          }\n\t\n\t          this._extent = new _extent2.default(xmin, ymin, xmax, ymax);\n\t        }\n\t      }\n\t\n\t      return this._extent;\n\t    }\n\t\n\t    /**\n\t     * 获取对象的几何类型\n\t     *\n\t     * @method geometryType\n\t     * @abstrct function\n\t     * @returns {String}\n\t     */\n\t\n\t  }, {\n\t    key: 'geometryType',\n\t    get: function get() {\n\t      return _geometry2.default.POLYGON;\n\t    }\n\t\n\t    /**\n\t     * 设置多边形的边，如果设置了边，则需要重新计算\n\t     * 外接矩形\n\t     *\n\t     * @property rings\n\t     */\n\t\n\t  }, {\n\t    key: 'rings',\n\t    get: function get() {\n\t      return this._rings;\n\t    },\n\t    set: function set(value) {\n\t      this._rings = value;\n\t      this._extent = null;\n\t    }\n\t  }]);\n\t\n\t  return Polygon;\n\t}(_geometry2.default);\n\t\n\texports.default = Polygon;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 11 */\n/*!**********************************************!*\\\n  !*** ./src/geometry/support/geometryutil.js ***!\n  \\**********************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.pointIntersectPoint = pointIntersectPoint;\n\texports.pointIntersectLine = pointIntersectLine;\n\texports.squaredSegmentDistance = squaredSegmentDistance;\n\texports.squaredDistanceToSegment = squaredDistanceToSegment;\n\texports.equals = equals;\n\texports.squaredDistance = squaredDistance;\n\texports.distance = distance;\n\texports.closestOnSegment = closestOnSegment;\n\texports.linearRingsContainsXY = linearRingsContainsXY;\n\texports.linearRingContainsXY = linearRingContainsXY;\n\texports.getPointInExtendedLineByDistanceFromAB = getPointInExtendedLineByDistanceFromAB;\n\texports.simplify = simplify;\n\t\n\tvar _geometry = __webpack_require__(/*! ../../geometry/geometry */ 1);\n\t\n\tvar _geometry2 = _interopRequireDefault(_geometry);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * 判断两个点是否相交\n\t *\n\t * @method pointIntersectPoint\n\t * @param pointA\n\t * @param pointB\n\t * @param tolerance {Number}\n\t * @returns {Boolean}\n\t */\n\tfunction pointIntersectPoint(pointA, pointB, tolerance) {\n\t  var toleranceDistance = tolerance ? tolerance : 2;\n\t\n\t  var distance = squaredDistance(pointA.x, pointA.y, pointB.x, pointB.y);\n\t  if (distance <= toleranceDistance) {\n\t    return true;\n\t  }\n\t\n\t  return false;\n\t}\n\t\n\t/**\n\t * 判断点是否与线相交\n\t *\n\t * @method pointIntersectLine\n\t * @param pointA\n\t * @param line\n\t * @param tolerance {Number}\n\t * @returns {Boolean}\n\t */\n\t/**\n\t * Created by zhangyong on 2017/5/23.\n\t */\n\t\n\tfunction pointIntersectLine(pointA, line, tolerance) {\n\t  var path = line.path;\n\t  var squaredSegmentDistanceFn = squaredSegmentDistance;\n\t  var x = pointA.x;\n\t  var y = pointA.y;\n\t\n\t  var find = false;\n\t  for (var i = 0, ii = path.length - 1; i < ii; i++) {\n\t    var nowP = path[i];\n\t    var nextP = path[i + 1];\n\t    var _distance = squaredSegmentDistanceFn(x, y, nowP.x, nowP.y, nextP.x, nextP.y);\n\t    _distance = Math.sqrt(_distance);\n\t    if (_distance <= tolerance) {\n\t      find = true;\n\t      break;\n\t    }\n\t  }\n\t\n\t  return find;\n\t}\n\t\n\t/**\n\t * Return the square of the closest distance between the point\n\t * and the line segment.\n\t * @param x\n\t * @param y\n\t * @param x1\n\t * @param y1\n\t * @param x2\n\t * @param y2\n\t * @returns {number}\n\t */\n\tfunction squaredSegmentDistance(x, y, x1, y1, x2, y2) {\n\t  var dx = x2 - x1;\n\t  var dy = y2 - y1;\n\t  if (dx !== 0 || dy !== 0) {\n\t    var t = ((x - x1) * dx + (y - y1) * dy) / (dx * dx + dy * dy);\n\t    if (t > 1) {\n\t      x1 = x2;\n\t      y1 = y2;\n\t    } else if (t > 0) {\n\t      x1 += dx * t;\n\t      y1 += dy * t;\n\t    }\n\t  }\n\t\n\t  return squaredDistance(x, y, x1, y1);\n\t}\n\t\n\t/**\n\t *\n\t * @param coordinate\n\t * @param segment\n\t * @returns {number}\n\t */\n\tfunction squaredDistanceToSegment(coordinate, segment) {\n\t  var closestCoordinate = closestOnSegment(coordinate, segment);\n\t  return squaredDistance(coordinate[0], coordinate[1], closestCoordinate[0], closestCoordinate[1]);\n\t}\n\t\n\t/**\n\t * 判断两个坐标是否相等\n\t *\n\t * @method equals\n\t * @param coordinate1\n\t * @param coordinate2\n\t * @returns {Boolean}\n\t */\n\tfunction equals(coordinate1, coordinate2) {\n\t  var equals = true;\n\t  for (var i = coordinate1.length - 1; i >= 0; --i) {\n\t    if (coordinate1[i] != coordinate2[i]) {\n\t      equals = false;\n\t      break;\n\t    }\n\t  }\n\t\n\t  return equals;\n\t}\n\t\n\t/**\n\t * 计算两点之间的距离的平方\n\t *\n\t * @method squaredDistance\n\t * @param x1\n\t * @param y1\n\t * @param x2\n\t * @param y2\n\t * @returns {Number} squared distance\n\t */\n\tfunction squaredDistance(x1, y1, x2, y2) {\n\t  var dx = x2 - x1;\n\t  var dy = y2 - y1;\n\t  return dx * dx + dy * dy;\n\t}\n\t\n\t/**\n\t * 计算两点之间的距离\n\t *\n\t * @method distance\n\t * @param coord1\n\t * @param coord2\n\t * @returns {Number}\n\t */\n\tfunction distance(coord1, coord2) {\n\t  return Math.sqrt(squaredDistance(coord1[0], coord1[1], coord2[0], coord2[1]));\n\t}\n\t\n\t/**\n\t *\n\t * @param coordinate {Array}\n\t * @param segment\n\t * @returns {Array}\n\t */\n\tfunction closestOnSegment(coordinate, segment) {\n\t  var x0 = coordinate[0];\n\t  var y0 = coordinate[1];\n\t  var start = segment[0];\n\t  var end = segment[1];\n\t  var x1 = start[0];\n\t  var y1 = start[1];\n\t  var x2 = end[0];\n\t  var y2 = end[1];\n\t  var dx = x2 - x1;\n\t  var dy = y2 - y1;\n\t\n\t  var along = dx === 0 && dy === 0 ? 0 : (dx * (x0 - x1) + dy * (y0 - y1)) / (dx * dx + dy * dy || 0);\n\t\n\t  var x = void 0,\n\t      y = void 0;\n\t  if (along <= 0) {\n\t    x = x1;\n\t    y = y1;\n\t  } else if (along >= 1) {\n\t    x = x2;\n\t    y = y2;\n\t  } else {\n\t    x = x1 + along * dx;\n\t    y = y1 + along * dy;\n\t  }\n\t\n\t  return [x, y];\n\t}\n\t\n\t/**\n\t *\n\t * @param flatCoordinates\n\t * @param offset\n\t * @param ends\n\t * @param stride\n\t * @param x\n\t * @param y\n\t * @returns {oolean}\n\t */\n\tfunction linearRingsContainsXY(flatCoordinates, offset, ends, stride, x, y) {\n\t  if (ends.length === 0) {\n\t    return false;\n\t  }\n\t\n\t  if (!linearRingContainsXY(flatCoordinates, offset, ends[0], stride, x, y)) {\n\t    return false;\n\t  }\n\t\n\t  var i = void 0,\n\t      ii = void 0;\n\t  for (i = 1, ii = ends.length; i < ii; ++i) {\n\t    if (linearRingContainsXY(flatCoordinates, ends[i - 1], ends[i], stride, x, y)) {\n\t      return false;\n\t    }\n\t  }\n\t\n\t  return true;\n\t}\n\t\n\t/**\n\t *\n\t * @param flatCoordinates\n\t * @param offset\n\t * @param end\n\t * @param stride\n\t * @param x\n\t * @param y\n\t * @returns {boolean}\n\t */\n\tfunction linearRingContainsXY(flatCoordinates, offset, end, stride, x, y) {\n\t  // http://geomalgorithms.com/a03-_inclusion.html\n\t  // Copyright 2000 softSurfer, 2012 Dan Sunday\n\t  // This code may be freely used and modified for any purpose\n\t  // providing that this copyright notice is included with it.\n\t  // SoftSurfer makes no warranty for this code, and cannot be held\n\t  // liable for any real or imagined damage resulting from its use.\n\t  // Users of this code must verify correctness for their application.\n\t  var wn = 0;\n\t  var x1 = flatCoordinates[end - stride];\n\t  var y1 = flatCoordinates[end - stride + 1];\n\t  for (; offset < end; offset += stride) {\n\t    var x2 = flatCoordinates[offset];\n\t    var y2 = flatCoordinates[offset + 1];\n\t\n\t    if (y1 <= y) {\n\t      if (y2 > y && (x2 - x1) * (y - y1) - (x - x1) * (y2 - y1) > 0) {\n\t        wn++;\n\t      }\n\t    } else if (y2 <= y && (x2 - x1) * (y - y1) - (x - x1) * (y2 - y1) < 0) {\n\t      wn--;\n\t    }\n\t\n\t    x1 = x2;\n\t    y1 = y2;\n\t  }\n\t\n\t  return wn !== 0;\n\t}\n\t\n\t/**\n\t * 计算在 AB 延长线上的距离点 B d 距离的点\n\t * @param xa A 点的 X\n\t * @param ya A 点的 Y\n\t * @param xb B 点的 X\n\t * @param yb B 点的 Y\n\t * @param d 距离 B 点 d 距离\n\t * @returns {Array} 返回延长线上的点\n\t */\n\tfunction getPointInExtendedLineByDistanceFromAB(xa, ya, xb, yb, d) {\n\t  var xab = void 0,\n\t      yab = void 0;\n\t  var xbd = void 0;\n\t  var xd = void 0,\n\t      yd = void 0;\n\t\n\t  xab = xb - xa;\n\t  yab = yb - ya;\n\t\n\t  xbd = Math.sqrt(d * d / (yab / xab * (yab / xab) + 1));\n\t\n\t  if (xab > 0) {\n\t    xbd = Math.sqrt(d * d / (yab / xab * (yab / xab) + 1));\n\t  } else {\n\t    xbd = -Math.sqrt(d * d / (yab / xab * (yab / xab) + 1));\n\t  }\n\t\n\t  xd = xb + xbd;\n\t  yd = yb + yab / xab * xbd;\n\t\n\t  return [xd, yd];\n\t}\n\t\n\tfunction simplify(geometry) {\n\t  if (!geometry) {\n\t    return geometry;\n\t  }\n\t\n\t  var coordinates = void 0;\n\t  var geoType = geometry.geometryType;\n\t  if (geoType === _geometry2.default.POLYGON) {\n\t    coordinates = geometry.getCoordinates()[0];\n\t  } else if (geoType === _geometry2.default.LINE) {\n\t    coordinates = geometry.getCoordinates();\n\t\n\t    var sliceCoords = coordinates.slice(1, coordinates.length - 2);\n\t    var newCoords = [coordinates[0]];\n\t\n\t    for (var i = 0, len = sliceCoords.length; i < len; i += 2) {\n\t      newCoords.push(sliceCoords[i]);\n\t    }\n\t\n\t    newCoords.push(coordinates[coordinates.length - 1]);\n\t    geometry.setCoordinates(newCoords);\n\t  }\n\t}\n\t\n\texports.default = {\n\t  linearRingContainsXY: linearRingContainsXY,\n\t  linearRingsContainsXY: linearRingsContainsXY,\n\t  pointIntersectPoint: pointIntersectPoint,\n\t  squaredDistance: squaredDistance,\n\t  closestOnSegment: closestOnSegment,\n\t  getPointInExtendedLineByDistanceFromAB: getPointInExtendedLineByDistanceFromAB,\n\t  equals: equals,\n\t  simplify: simplify,\n\t  distance: distance\n\t};\n\n/***/ }),\n/* 12 */\n/*!*******************************!*\\\n  !*** ./src/core/baseevent.js ***!\n  \\*******************************/\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t/**\n\t * Created by zhangyong on 2017/5/22.\n\t */\n\t//  The BaseEvent is a base class, all event dinfined in library should inherit this.\n\t//\n\t// The sub event class can define it's own property ,\n\t//\n\t//  which can be passed to other event Listener via event dispatch.\n\t/**\n\t * 定义事件模型基类，自定义事件必须继承该类。\n\t *\n\t * 事件类及其继承者用于事件传递、数据传送和信息通告。\n\t *\n\t * @class BaseEvent\n\t * @constructor\n\t * @module core\n\t *\n\t */\n\tvar BaseEvent =\n\t\n\t/**\n\t * 构造函数\n\t *\n\t * @constructor\n\t * @param type\n\t */\n\tfunction BaseEvent(type) {\n\t  _classCallCheck(this, BaseEvent);\n\t\n\t  /**\n\t   * 是否停止事件的冒泡\n\t   *\n\t   * @type {Boolean}\n\t   * @property propagatinoStopped\n\t   */\n\t  this.propagatinoStopped = false;\n\t\n\t  /**\n\t   * 事件标示\n\t   *\n\t   * @example'mousedown' | 'mousemove' | 'click'\n\t   *\n\t   * @type {String}\n\t   * @property type\n\t   */\n\t  this.type = type;\n\t\n\t  /**\n\t   * 事件源\n\t   *\n\t   * @type {Object}\n\t   * @property target\n\t   */\n\t  this.target = null;\n\t};\n\t\n\t/**\n\t *\n\t * 用于阻止事件的冒泡\n\t *\n\t * @param evt {Object} evt DOM event model\n\t * @static\n\t * @method stopPropagation\n\t */\n\t\n\t\n\texports.default = BaseEvent;\n\tBaseEvent.stopPropagation = function (evt) {\n\t  return evt.stopPropagation();\n\t};\n\t\n\t/**\n\t *\n\t * 用于阻止浏览器的默认行为\n\t *\n\t * @static\n\t * @method preventDefault\n\t * @param evt {Object} evt DOM event model\n\t */\n\tBaseEvent.preventDefault = function (evt) {\n\t  return evt.preventDefault();\n\t};\n\tmodule.exports = exports[\"default\"];\n\n/***/ }),\n/* 13 */\n/*!*********************************!*\\\n  !*** ./src/lyr/featurelayer.js ***!\n  \\*********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _baselayer = __webpack_require__(/*! ./baselayer */ 44);\n\t\n\tvar _baselayer2 = _interopRequireDefault(_baselayer);\n\t\n\tvar _style = __webpack_require__(/*! ../style/style */ 17);\n\t\n\tvar _extentutil = __webpack_require__(/*! ../geometry/support/extentutil */ 2);\n\t\n\tvar _featureevent = __webpack_require__(/*! ../meek/featureevent */ 48);\n\t\n\tvar _featureevent2 = _interopRequireDefault(_featureevent);\n\t\n\tvar _eventtype = __webpack_require__(/*! ../meek/eventtype */ 6);\n\t\n\tvar _eventmanager = __webpack_require__(/*! ../core/eventmanager */ 4);\n\t\n\tvar _geometry = __webpack_require__(/*! ../geometry/geometry */ 1);\n\t\n\tvar _geometry2 = _interopRequireDefault(_geometry);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t/**\n\t * FeatureLayer\n\t *\n\t * class FeatureLayer\n\t * @extends BaseObject\n\t * @module layer\n\t * @constructor\n\t */\n\tvar FeatureLayer = function (_BaseLayer) {\n\t  _inherits(FeatureLayer, _BaseLayer);\n\t\n\t  function FeatureLayer() {\n\t    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t    _classCallCheck(this, FeatureLayer);\n\t\n\t    /**\n\t     *\n\t     * @type {Array}\n\t     * @private\n\t     */\n\t    var _this = _possibleConstructorReturn(this, _BaseLayer.call(this, options));\n\t\n\t    _this._features = [];\n\t\n\t    /**\n\t     *\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._style = null;\n\t\n\t    /**\n\t     *\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._styleFunction = null;\n\t\n\t    /**\n\t     *\n\t     * @type {Map}\n\t     * @private\n\t     */\n\t    _this._featureChangeKeys = new Map();\n\t\n\t    /**\n\t     *\n\t     */\n\t    _this.style = options.style;\n\t\n\t    // add features if passed by options\n\t    if (options.features) {\n\t      _this.addFeatures(options.features);\n\t    }\n\t\n\t    /**\n\t     * zIndex\n\t     *\n\t     * @property zIndex\n\t     * @type {Number}\n\t     */\n\t    _this.zIndex = options.zIndex || 2;\n\t\n\t    /**\n\t     * The rendering buffer will be used for building an extent that\n\t     * limit geometries rendering\n\t     * @type {number}\n\t     * @private\n\t     */\n\t    _this._renderBuffer = options.renderBufferValue !== undefined ? options.renderBufferValue : 100;\n\t\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * 清除所有features\n\t   *\n\t   * @method clear\n\t   */\n\t\n\t\n\t  FeatureLayer.prototype.clear = function clear() {\n\t    if (this._features.length !== 0) {\n\t      this._features = [];\n\t\n\t      // remove the event listener from feature\n\t      var unlistenByKeyFn = _eventmanager.unlistenByKey;\n\t\n\t      this._featureChangeKeys.forEach(function (value) {\n\t        unlistenByKeyFn(value);\n\t      });\n\t\n\t      this._featureChangeKeys.clear();\n\t\n\t      this.dispatchEvent(new _featureevent2.default(_featureevent2.default.EventType.CLEAR));\n\t      this.dispatchEvent(_featureevent2.default.EventType.FEATURE_COLLECTION_CHANGED);\n\t      this.changed();\n\t    }\n\t  };\n\t\n\t  /**\n\t   * 获取features\n\t   *\n\t   * @returns {Array}\n\t   */\n\t\n\t\n\t  /**\n\t   * 通过id查找feature\n\t   *\n\t   * @param id\n\t   * @returns {Boolean}\n\t   */\n\t  FeatureLayer.prototype.findFeature = function findFeature(id) {\n\t    var features = this.features;\n\t    return features.find(function (f) {\n\t      return f.id === id;\n\t    });\n\t  };\n\t\n\t  /**\n\t   * 向layer中添加features\n\t   *\n\t   * @method addFeatures\n\t   * @param {Object} features\n\t   * @returns {Boolean}\n\t   */\n\t\n\t\n\t  FeatureLayer.prototype.addFeatures = function addFeatures(features) {\n\t    if (!Array.isArray(features)) {\n\t      return false;\n\t    }\n\t\n\t    this._addFeaturesInner(features);\n\t    this.dispatchEvent(_featureevent2.default.EventType.FEATURE_COLLECTION_CHANGED);\n\t    this.changed();\n\t  };\n\t\n\t  /**\n\t   * 判断feature是否存在\n\t   *\n\t   * @param feature\n\t   * @returns {Boolean}\n\t   */\n\t\n\t\n\t  FeatureLayer.prototype.hasFeature = function hasFeature(feature) {\n\t    if (feature === null || feature === undefined) {\n\t      return false;\n\t    }\n\t\n\t    var featureId = feature.id;\n\t    var features = this.features;\n\t    var findIndex = features.findIndex(function (f) {\n\t      return f.id === featureId;\n\t    });\n\t\n\t    return findIndex > -1;\n\t  };\n\t\n\t  /**\n\t   * 添加feature到layer的集合中，并派发feature事件\n\t   *\n\t   * addFeaturesInner\n\t   * @param features\n\t   * @private\n\t   */\n\t\n\t\n\t  FeatureLayer.prototype._addFeaturesInner = function _addFeaturesInner(features) {\n\t    var _this2 = this;\n\t\n\t    features.forEach(function (feature) {\n\t      if (!_this2.hasFeature(feature)) {\n\t        _this2.features.push(feature);\n\t\n\t        _this2._setupChangeEvents(feature.id, feature);\n\t        _this2.dispatchEvent(new _featureevent2.default(_featureevent2.default.EventType.ADD_FEATURE, feature));\n\t      }\n\t    });\n\t  };\n\t\n\t  /**\n\t   * 添加feature到layer的集合中\n\t   *\n\t   * @method addFeature\n\t   * @param feature\n\t   * @returns {Boolean}\n\t   */\n\t\n\t\n\t  FeatureLayer.prototype.addFeature = function addFeature(feature) {\n\t    if (!feature) {\n\t      return false;\n\t    }\n\t\n\t    this._addFeaturesInner([feature]);\n\t    this.dispatchEvent(_featureevent2.default.EventType.FEATURE_COLLECTION_CHANGED);\n\t    this.changed();\n\t  };\n\t\n\t  /**\n\t   * 获取当前鼠标点的所有feature\n\t   *\n\t   * @method forEachFeatureAtPiexl\n\t   * @param frameState\n\t   * @param piexl {Array}\n\t   * @param callback\n\t   * @param tolerance {Number}\n\t   * @returns {*}\n\t   */\n\t\n\t\n\t  FeatureLayer.prototype.forEachFeatureAtPiexl = function forEachFeatureAtPiexl(frameState, piexl, callback, tolerance) {\n\t    // frameState 携带 view 信息\n\t\n\t    // 1、计算当前屏幕内的feature\n\t    var features = this._getCurrentExtentFeatures();\n\t\n\t    // calculate features that their extent has intersected with a given point\n\t    var extentFeatures = this._getIntersectedFeatures(piexl, features);\n\t\n\t    var piexlX = piexl[0];\n\t    var piexlY = piexl[1];\n\t    var options = {\n\t      tolerance: tolerance * frameState.viewState.resolution\n\t    };\n\t\n\t    var result = extentFeatures.filter(function (feature) {\n\t      return feature.geometry.containsXY(piexlX, piexlY, options);\n\t    });\n\t\n\t    return result;\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param point\n\t   * @param features\n\t   * @private\n\t   */\n\t\n\t\n\t  FeatureLayer.prototype._getIntersectedFeatures = function _getIntersectedFeatures(point, features) {\n\t    return features.filter(function (feature) {\n\t      return feature.geometry.pointInExtent(point);\n\t    });\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @returns {*}\n\t   * @private\n\t   */\n\t\n\t\n\t  FeatureLayer.prototype._getCurrentExtentFeatures = function _getCurrentExtentFeatures() {\n\t    return this.features;\n\t  };\n\t\n\t  /**\n\t   * 从集合中移除feature\n\t   *\n\t   * @param feature\n\t   * @returns {Boolean}\n\t   */\n\t\n\t\n\t  FeatureLayer.prototype.removeFeature = function removeFeature(feature) {\n\t    var features = this.features;\n\t    if (features.length === 0) {\n\t      return false;\n\t    }\n\t\n\t    var featureId = feature.id;\n\t    var index = features.findIndex(function (f) {\n\t      return f.id === featureId;\n\t    });\n\t\n\t    if (index > -1) {\n\t      features.splice(index, 1);\n\t\n\t      this._featureChangeKeys.delete(featureId);\n\t\n\t      this.dispatchEvent(new _featureevent2.default(_featureevent2.default.EventType.REMOVE_FEATURE, feature));\n\t      this.dispatchEvent(_featureevent2.default.EventType.FEATURE_COLLECTION_CHANGED);\n\t      this.changed();\n\t    }\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param featureKey\n\t   * @param feature\n\t   * @private\n\t   */\n\t\n\t\n\t  FeatureLayer.prototype._setupChangeEvents = function _setupChangeEvents(featureKey, feature) {\n\t    this._featureChangeKeys.set(featureKey, (0, _eventmanager.listen)(feature, _eventtype.EventType.CHANGE, this._handleFeatureChange, this));\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @private\n\t   */\n\t\n\t\n\t  FeatureLayer.prototype._handleFeatureChange = function _handleFeatureChange() {\n\t    this.changed();\n\t  };\n\t\n\t  /**\n\t   * 样式读写器\n\t   *\n\t   * @property style\n\t   * @param value\n\t   */\n\t\n\t\n\t  /**\n\t   * 加载当前屏幕的 features\n\t   *\n\t   * 默认会把点、线放在队列尾部\n\t   *\n\t   * @method loadFeature\n\t   * @param extent {Geometry}\n\t   * @returns {feature}\n\t   */\n\t  FeatureLayer.prototype.loadFeature = function loadFeature(extent) {\n\t    var features = this.features;\n\t    var intersects = _extentutil.ExtentUtil.intersects;\n\t    var createOrUpdate = _extentutil.ExtentUtil.createOrUpdate;\n\t    var newFeatures = [];\n\t    var pointFeatures = [];\n\t    var lineFeatures = [];\n\t\n\t    features.forEach(function (feature) {\n\t      // 判断图形是否显示\n\t      if (feature.display) {\n\t        var geometry = feature.geometry;\n\t        var geometryExtent = geometry.extent;\n\t        var extentArr = createOrUpdate(geometryExtent.xmin, geometryExtent.ymin, geometryExtent.xmax, geometryExtent.ymax);\n\t\n\t        if (intersects(extentArr, extent)) {\n\t          var geometryType = geometry.geometryType;\n\t          if (geometryType === _geometry2.default.POINT || geometryType === _geometry2.default.MULTI_POINT) {\n\t            pointFeatures.push(feature);\n\t          } else if (geometryType === _geometry2.default.LINE || geometryType === _geometry2.default.MULTI_LINE) {\n\t            lineFeatures.push(feature);\n\t          } else {\n\t            newFeatures.push(feature);\n\t          }\n\t        }\n\t      }\n\t    });\n\t\n\t    return [].concat(newFeatures, lineFeatures, pointFeatures);\n\t  };\n\t\n\t  /**\n\t   * 获取样式\n\t   *\n\t   * @method styleFunction\n\t   * @returns {null|undefined|*}\n\t   */\n\t\n\t\n\t  _createClass(FeatureLayer, [{\n\t    key: 'features',\n\t    get: function get() {\n\t      return this._features;\n\t    }\n\t  }, {\n\t    key: 'style',\n\t    set: function set(value) {\n\t      this._style = value !== undefined ? value : _style.Style.defaultFunction();\n\t      this._styleFunction = value === null ? undefined : _style.Style.createFunction(this._style);\n\t    },\n\t    get: function get() {\n\t      if (this._style === null) {\n\t        this._style = _style.Style.defaultFunction();\n\t      }\n\t\n\t      return this._style;\n\t    }\n\t\n\t    /**\n\t     * renderBuffer读写器\n\t     *\n\t     */\n\t\n\t  }, {\n\t    key: 'renderBuffer',\n\t    get: function get() {\n\t      return this._renderBuffer;\n\t    },\n\t    set: function set(renderBufferValue) {\n\t      if (this._renderBuffer !== renderBufferValue) {\n\t        this._renderBuffer = renderBufferValue;\n\t      }\n\t    }\n\t  }, {\n\t    key: 'styleFunction',\n\t    get: function get() {\n\t      return this._styleFunction;\n\t    }\n\t  }]);\n\t\n\t  return FeatureLayer;\n\t}(_baselayer2.default);\n\t\n\texports.default = FeatureLayer;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 14 */\n/*!*******************************!*\\\n  !*** ./src/utils/mousekey.js ***!\n  \\*******************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.singleClick = singleClick;\n\texports.mouseWheel = mouseWheel;\n\texports.noModifierKeys = noModifierKeys;\n\texports.targetNotEditable = targetNotEditable;\n\t\n\tvar _browserevent = __webpack_require__(/*! ../meek/browserevent */ 5);\n\t\n\tvar _browserevent2 = _interopRequireDefault(_browserevent);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction singleClick(browserEvent) {\n\t  return browserEvent.type === _browserevent2.default.SINGLE_CLICK;\n\t} /**\n\t   * Created by zhangyong on 2017/5/23.\n\t   */\n\t\n\tfunction mouseWheel(browserEvent) {\n\t  return browserEvent.type === _browserevent2.default.MOUSE_WHEEL || browserEvent.type === _browserevent2.default.WHEEL;\n\t}\n\t\n\tfunction noModifierKeys(browserEvent) {\n\t  var originalEvent = browserEvent.originalEvent;\n\t  return !originalEvent.altKey && !(originalEvent.metaKey || originalEvent.ctrlKey) && !originalEvent.shiftKey;\n\t}\n\t\n\tfunction targetNotEditable(mapBrowserEvent) {\n\t  var target = mapBrowserEvent.originalEvent.target;\n\t  var tagName = target.tagName;\n\t  return tagName !== 'INPUT' && tagName !== 'SELECT' && tagName !== 'TEXTAREA';\n\t}\n\t\n\texports.default = {\n\t  singleClick: singleClick,\n\t  mouseWheel: mouseWheel,\n\t  noModifierKeys: noModifierKeys,\n\t  targetNotEditable: targetNotEditable\n\t};\n\n/***/ }),\n/* 15 */\n/*!**************************!*\\\n  !*** ./src/utils/obj.js ***!\n  \\**************************/\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t/**\n\t * Created by zhangyong on 2017/6/5.\n\t */\n\t\n\tvar Obj = function () {\n\t  function Obj() {\n\t    _classCallCheck(this, Obj);\n\t  }\n\t\n\t  /**\n\t   * Get a collection from object\n\t   * @param object\n\t   * @returns {Array}\n\t   */\n\t  Obj.getValues = function getValues(object) {\n\t    var values = [];\n\t    for (var property in object) {\n\t      values.push(object[property]);\n\t    }\n\t    return values;\n\t  };\n\t\n\t  /**\n\t   * Clear all properties in object\n\t   * @param object\n\t   */\n\t\n\t\n\t  Obj.clear = function clear(object) {\n\t    for (var property in object) {\n\t      Reflect.deleteProperty(object, property);\n\t    }\n\t  };\n\t\n\t  /**\n\t   * Convert an object to a map instance\n\t   * @param obj\n\t   * @returns {Map}\n\t   */\n\t\n\t\n\t  Obj.objectToMap = function objectToMap(obj) {\n\t    var map = new Map();\n\t\n\t    var _iteratorNormalCompletion = true;\n\t    var _didIteratorError = false;\n\t    var _iteratorError = undefined;\n\t\n\t    try {\n\t      for (var _iterator = Object.keys(obj)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t        var ke = _step.value;\n\t\n\t        map.set(ke, obj[ke]);\n\t      }\n\t    } catch (err) {\n\t      _didIteratorError = true;\n\t      _iteratorError = err;\n\t    } finally {\n\t      try {\n\t        if (!_iteratorNormalCompletion && _iterator.return) {\n\t          _iterator.return();\n\t        }\n\t      } finally {\n\t        if (_didIteratorError) {\n\t          throw _iteratorError;\n\t        }\n\t      }\n\t    }\n\t\n\t    return map;\n\t  };\n\t\n\t  /**\n\t   *\n\t   * Convert a map object to object\n\t   *\n\t   * @static\n\t   * @method mapToObject\n\t   * @param map {Map} 传入的 Map 的对象\n\t   * @returns {Object} 装换成后的 Object 的对象\n\t   */\n\t\n\t\n\t  Obj.mapToObject = function mapToObject(map) {\n\t    // 合法性判断\n\t    if (map === undefined || map === null) {\n\t      return {};\n\t    }\n\t\n\t    var object = {};\n\t    map.forEach(function (value, key) {\n\t      object[key] = value;\n\t    });\n\t\n\t    return object;\n\t  };\n\t\n\t  return Obj;\n\t}();\n\t\n\texports.default = Obj;\n\tmodule.exports = exports[\"default\"];\n\n/***/ }),\n/* 16 */\n/*!********************************!*\\\n  !*** ./src/style/linestyle.js ***!\n  \\********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _basestyle = __webpack_require__(/*! ./basestyle */ 35);\n\t\n\tvar _basestyle2 = _interopRequireDefault(_basestyle);\n\t\n\tvar _textstyle = __webpack_require__(/*! ./textstyle */ 26);\n\t\n\tvar _textstyle2 = _interopRequireDefault(_textstyle);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zypc on 2016/11/15.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * 定义一个线图形的样式\n\t *\n\t * @class LineStyle\n\t * @extends BaseStyle\n\t * @module style\n\t * @constructor\n\t * @example\n\t *\n\t *     var lineStye = new Datatang.LineStyle([0, 0, 255],1,3,\n\t *        Datatang.LineStyle.LineCap.ROUND,\n\t *        Datatang.LineStyle.LineJion.ROUND)\n\t */\n\tvar LineStyle = function (_BaseStyle) {\n\t  _inherits(LineStyle, _BaseStyle);\n\t\n\t  /**\n\t   * @constructor\n\t   * @param color\n\t   * @param alpha\n\t   * @param width\n\t   * @param style\n\t   * @param lineCap\n\t   * @param lineJion\n\t   * @param miterLimit\n\t   */\n\t  function LineStyle() {\n\t    var color = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [255, 255, 255];\n\t    var alpha = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\t    var width = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\t    var style = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : LineStyle.SOLID;\n\t    var lineCap = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : LineStyle.LineCap.BUTT;\n\t    var lineJion = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : LineStyle.LineJion.MITER;\n\t    var miterLimit = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 10;\n\t\n\t    _classCallCheck(this, LineStyle);\n\t\n\t    var _this = _possibleConstructorReturn(this, _BaseStyle.call(this, color, style, alpha));\n\t\n\t    _this.width = width;\n\t    _this.lineCap = lineCap;\n\t    _this.lineJion = lineJion;\n\t    _this.miterLimit = miterLimit;\n\t    _this.textStyle = new _textstyle2.default();\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * 线宽\n\t   *\n\t   * @property width\n\t   * @type {Number}\n\t   */\n\t\n\t\n\t  /**\n\t   * 克隆线样式\n\t   *\n\t   * @method clone\n\t   * @returns {LineStyle}\n\t   */\n\t  LineStyle.prototype.clone = function clone() {\n\t    var newStyle = new LineStyle(this.color, this.alpha, this.width, this.style, this.lineCap, this.lineJion, this.miterLimit);\n\t\n\t    if (this.textStyle) {\n\t      newStyle.textStyle = this.textStyle;\n\t    }\n\t\n\t    return newStyle;\n\t  };\n\t\n\t  _createClass(LineStyle, [{\n\t    key: 'width',\n\t    get: function get() {\n\t      return this._width;\n\t    },\n\t    set: function set(value) {\n\t      this._width = value;\n\t    }\n\t\n\t    /**\n\t     * 线的末端样式\n\t     *\n\t     * @property lineCap\n\t     * @type {Number}\n\t     */\n\t\n\t  }, {\n\t    key: 'lineCap',\n\t    set: function set(value) {\n\t      this._lineCap = value;\n\t    },\n\t    get: function get() {\n\t      return this._lineCap;\n\t    }\n\t\n\t    /**\n\t     * 交叉线时的样式\n\t     *\n\t     * @property lineJion\n\t     * @type {Number}\n\t     */\n\t\n\t  }, {\n\t    key: 'lineJion',\n\t    set: function set(value) {\n\t      this._lineJion = value;\n\t    },\n\t    get: function get() {\n\t      return this._lineJion;\n\t    }\n\t\n\t    /**\n\t     * 斜角缝限制\n\t     *\n\t     * @property miterLimit\n\t     * @type {Number}\n\t     */\n\t\n\t  }, {\n\t    key: 'miterLimit',\n\t    set: function set(value) {\n\t      this._miterLimit = value;\n\t    },\n\t    get: function get() {\n\t      return this._miterLimit;\n\t    }\n\t  }]);\n\t\n\t  return LineStyle;\n\t}(_basestyle2.default);\n\t\n\t/**\n\t * 定义线的样式\n\t * @type {string}\n\t */\n\t\n\t\n\texports.default = LineStyle;\n\tLineStyle.SOLID = 'solid';\n\t\n\t/**\n\t * TODO 由郭靖来处理，参考 PointStyle\n\t * @type {string}\n\t */\n\tLineStyle.DASH = 'dash';\n\t\n\tLineStyle.DOT = 'dot';\n\t\n\tLineStyle.DASHDOT = 'dashdot';\n\t\n\tLineStyle.DASHDOTDOT = 'dashdotdot';\n\t\n\tLineStyle.NULL = 'none';\n\t\n\tLineStyle.LineCap = {\n\t  BUTT: 'butt',\n\t  ROUND: 'round',\n\t  SQUARE: 'square'\n\t\n\t  // visit http://www.w3school.com.cn/tags/canvas_linejoin.asp for more infomation\n\t};LineStyle.LineJion = {\n\t  MITER: 'miter', // 默认，创建尖角\n\t  BEVEL: 'bevel',\n\t  ROUND: 'round'\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 17 */\n/*!****************************!*\\\n  !*** ./src/style/style.js ***!\n  \\****************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.Style = undefined;\n\t\n\tvar _geometry = __webpack_require__(/*! ../geometry/geometry */ 1);\n\t\n\tvar _geometry2 = _interopRequireDefault(_geometry);\n\t\n\tvar _fillstyle = __webpack_require__(/*! ./fillstyle */ 52);\n\t\n\tvar _fillstyle2 = _interopRequireDefault(_fillstyle);\n\t\n\tvar _linestyle = __webpack_require__(/*! ./linestyle */ 16);\n\t\n\tvar _linestyle2 = _interopRequireDefault(_linestyle);\n\t\n\tvar _pointstyle = __webpack_require__(/*! ./pointstyle */ 53);\n\t\n\tvar _pointstyle2 = _interopRequireDefault(_pointstyle);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * Created by zhangyong on 2017/3/17.\n\t */\n\t\n\tvar Style = exports.Style = {};\n\t\n\t/**\n\t * 设置缺省图形style\n\t *\n\t * Create a defaut style for feature layer\n\t * @returns {null|Array|[*]}\n\t */\n\tStyle.defaultFunction = function () {\n\t  if (!Style._default) {\n\t    var white = [255, 255, 255];\n\t    var blue = [0, 153, 255];\n\t    var width = 1.5;\n\t\n\t    Style._default = {};\n\t\n\t    // 面样式 polygon style\n\t    Style._default[_geometry2.default.POLYGON] = [new _fillstyle2.default(white, new _linestyle2.default(blue, 1, 1.25), 0.2)];\n\t    Style._default[_geometry2.default.MULTI_POLYGON] = Style._default[_geometry2.default.POLYGON];\n\t    Style._default[_geometry2.default.PARALLELOGRAM] = Style._default[_geometry2.default.POLYGON];\n\t\n\t    // same as polygon style\n\t    Style._default[_geometry2.default.EXTENT] = Style._default[_geometry2.default.POLYGON];\n\t\n\t    // 线样式 line style\n\t    Style._default[_geometry2.default.LINE] = [new _linestyle2.default(blue, 1, width) // 内框\n\t    ];\n\t\n\t    // 点样式 point style\n\t    Style._default[_geometry2.default.POINT] = [new _pointstyle2.default(10, white, 1, new _linestyle2.default(blue, 1, width))];\n\t  }\n\t\n\t  return Style._default;\n\t};\n\t\n\t/**\n\t * Create a default style while drawing\n\t * @returns {{}}\n\t */\n\tStyle.createDefaultEditing = function () {\n\t  var styles = {};\n\t  var white = [255, 255, 255];\n\t  var blue = [0, 153, 255];\n\t  var width = 1.5;\n\t\n\t  // 面样式\n\t  styles[_geometry2.default.POLYGON] = [new _fillstyle2.default(white, // 填充\n\t  new _linestyle2.default(blue, 1, 1) // 边框\n\t  , 0.2)];\n\t\n\t  styles[_geometry2.default.MULTI_POLYGON] = styles[_geometry2.default.POLYGON];\n\t  styles[_geometry2.default.EXTENT] = styles[_geometry2.default.POLYGON];\n\t  styles[_geometry2.default.PARALLELOGRAM] = styles[_geometry2.default.POLYGON];\n\t\n\t  // 线样式\n\t  styles[_geometry2.default.LINE] = [new _linestyle2.default(white, 1, width + 1, _linestyle2.default.LineCap.ROUND, _linestyle2.default.LineJion.ROUND), // 外框\n\t  new _linestyle2.default(blue, 1, width, _linestyle2.default.LineCap.ROUND, _linestyle2.default.LineJion.ROUND) // 内框\n\t  ];\n\t  styles[_geometry2.default.MULTI_LINE] = styles[_geometry2.default.LINE];\n\t\n\t  // 点样式\n\t  styles[_geometry2.default.POINT] = [new _pointstyle2.default(10, white, 0.1, new _linestyle2.default(blue, 1, 2))];\n\t  styles[_geometry2.default.MULTI_POINT] = styles[_geometry2.default.POINT];\n\t\n\t  return styles;\n\t};\n\t\n\t/**\n\t *\n\t * @returns {{}}\n\t */\n\tStyle.createDefaultSelecting = function () {\n\t  var styles = {};\n\t  var white = [255, 255, 255];\n\t  var blue = [0, 153, 255];\n\t  var width = 3;\n\t  var outsideLine = new _linestyle2.default(white, 1, width + 2, _linestyle2.default.LineCap.ROUND, _linestyle2.default.LineJion.ROUND); // 外框\n\t  var insideLine = new _linestyle2.default(blue, 1, width, _linestyle2.default.LineCap.ROUND, _linestyle2.default.LineJion.ROUND);\n\t  // 面样式\n\t  styles[_geometry2.default.POLYGON] = [new _fillstyle2.default(white, outsideLine, 0.5), new _fillstyle2.default(white, insideLine, 0)];\n\t  styles[_geometry2.default.MULTI_POLYGON] = styles[_geometry2.default.POLYGON];\n\t  styles[_geometry2.default.EXTENT] = styles[_geometry2.default.POLYGON];\n\t\n\t  // 线样式\n\t  styles[_geometry2.default.LINE] = [outsideLine, // 外框\n\t  insideLine // 内框\n\t  ];\n\t  styles[_geometry2.default.MULTI_LINE] = styles[_geometry2.default.LINE];\n\t\n\t  // 点样式\n\t  styles[_geometry2.default.POINT] = [new _pointstyle2.default(12, blue, 1, new _linestyle2.default(blue, 1, 1))];\n\t  styles[_geometry2.default.MULTI_POINT] = styles[_geometry2.default.POINT];\n\t\n\t  return styles;\n\t};\n\t\n\t/**\n\t * Convert the passed obj into a style function.\n\t *\n\t * @param obj\n\t * @returns {*}\n\t */\n\tStyle.createFunction = function (obj) {\n\t  var styleFunction = void 0;\n\t\n\t  if (typeof obj === 'function') {\n\t    styleFunction = obj;\n\t  } else {\n\t    var styles = void 0;\n\t\n\t    if (Array.isArray(obj)) {\n\t      styles = obj;\n\t    } else {\n\t      styles = [obj];\n\t    }\n\t\n\t    styleFunction = function styleFunction(feature) {\n\t      return styles[0][feature.geometry.geometryType];\n\t    };\n\t  }\n\t\n\t  return styleFunction;\n\t};\n\t\n\texports.default = {\n\t  Style: Style\n\t};\n\n/***/ }),\n/* 18 */\n/*!******************************!*\\\n  !*** ./src/utils/domutil.js ***!\n  \\******************************/\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.createCanvasContext2D = createCanvasContext2D;\n\texports.outerWidth = outerWidth;\n\texports.outerHeight = outerHeight;\n\texports.removeNode = removeNode;\n\texports.removeChildren = removeChildren;\n\t/**\n\t * Created by zhangyong on 2017/3/17.\n\t */\n\t\n\t/**\n\t *\n\t * @param optWidth\n\t * @param optHeight\n\t * @returns {CanvasRenderingContext2D|WebGLRenderingContext}\n\t */\n\tfunction createCanvasContext2D(optWidth, optHeight) {\n\t  var canvas = document.createElement('CANVAS');\n\t  if (optWidth) {\n\t    canvas.width = optWidth;\n\t  }\n\t\n\t  if (optHeight) {\n\t    canvas.height = optHeight;\n\t  }\n\t\n\t  return canvas.getContext('2d');\n\t}\n\t\n\t/**\n\t *\n\t * @param element\n\t * @returns {number}\n\t */\n\tfunction outerWidth(element) {\n\t  var width = element.offsetWidth;\n\t  var style = getComputedStyle(element);\n\t  width += parseInt(style.marginLeft, 10) + parseInt(style.marginRight, 10);\n\t\n\t  return width;\n\t}\n\t\n\t/**\n\t *\n\t * @param element\n\t * @returns {number}\n\t */\n\tfunction outerHeight(element) {\n\t  var height = element.offsetHeight;\n\t  var style = getComputedStyle(element);\n\t  height += parseInt(style.marginTop, 10) + parseInt(style.marginBottom, 10);\n\t\n\t  return height;\n\t}\n\t\n\tfunction removeNode(node) {\n\t  return node && node.parentNode ? node.parentNode.removeChild(node) : null;\n\t}\n\t\n\t/**\n\t *\n\t * @param node\n\t */\n\tfunction removeChildren(node) {\n\t  while (node.lastChild) {\n\t    node.removeChild(node.lastChild);\n\t  }\n\t}\n\t\n\texports.default = {\n\t  createCanvasContext2D: createCanvasContext2D,\n\t  outerWidth: outerWidth,\n\t  outerHeight: outerHeight,\n\t  removeChildren: removeChildren,\n\t  removeNode: removeNode\n\t};\n\n/***/ }),\n/* 19 */\n/*!******************************!*\\\n  !*** ./src/utils/helpers.js ***!\n  \\******************************/\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.colorToString = colorToString;\n\t/**\n\t * Created by zypc on 2016/11/13.\n\t */\n\t\n\t/**\n\t * 将rbg数组装换成rgba的字符串格式\n\t * @param color rgb数组\n\t * @param alpha 透明度\n\t * @returns {string} 返回rgba格式字符串\n\t */\n\tfunction colorToString(color) {\n\t  var alpha = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\t\n\t  var r = color[0];\n\t  if (r != (r | 0)) {\n\t    r = r + 0.5 | 0;\n\t  }\n\t\n\t  var g = color[1];\n\t  if (g != (g | 0)) {\n\t    g = g + 0.5 | 0;\n\t  }\n\t\n\t  var b = color[2];\n\t  if (b != (b | 0)) {\n\t    b = b + 0.5 | 0;\n\t  }\n\t\n\t  return \"rgba(\" + r + \", \" + g + \" , \" + b + \" , \" + alpha + \" )\";\n\t}\n\t\n\texports.default = {\n\t  colorToString: colorToString\n\t};\n\n/***/ }),\n/* 20 */\n/*!********************************!*\\\n  !*** ./src/control/control.js ***!\n  \\********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _baseobject = __webpack_require__(/*! ../core/baseobject */ 3);\n\t\n\tvar _baseobject2 = _interopRequireDefault(_baseobject);\n\t\n\tvar _domutil = __webpack_require__(/*! ../utils/domutil */ 18);\n\t\n\tvar _eventmanager = __webpack_require__(/*! ../core/eventmanager */ 4);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/8/2.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar Control = function (_BaseObject) {\n\t  _inherits(Control, _BaseObject);\n\t\n\t  function Control() {\n\t    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t    _classCallCheck(this, Control);\n\t\n\t    var _this = _possibleConstructorReturn(this, _BaseObject.call(this));\n\t\n\t    _this._element = options.element ? options.element : null;\n\t\n\t    _this._target = null;\n\t\n\t    _this._map = null;\n\t\n\t    _this._listenerKeys = [];\n\t\n\t    if (options.target) {\n\t      _this.target = options.target;\n\t    }\n\t    return _this;\n\t  }\n\t\n\t  _createClass(Control, [{\n\t    key: 'map',\n\t    get: function get() {\n\t      return this._map;\n\t    },\n\t    set: function set(value) {\n\t      if (this.map) {\n\t        (0, _domutil.removeNode)(this._element);\n\t      }\n\t\n\t      this._listenerKeys.forEach(function (listener) {\n\t        return (0, _eventmanager.unlistenByKey)(listener);\n\t      });\n\t\n\t      this._listenerKeys.length = 0;\n\t      this._map = value;\n\t\n\t      if (this._map) {\n\t        var target = this._target ? this._target : value.overlayContainerStopEvent;\n\t        target.appendChild(this._element);\n\t\n\t        value.render();\n\t      }\n\t    }\n\t  }, {\n\t    key: 'target',\n\t    set: function set(value) {\n\t      this._target = typeof value === 'string' ? document.getElementById(value) : value;\n\t    }\n\t  }]);\n\t\n\t  return Control;\n\t}(_baseobject2.default);\n\t\n\texports.default = Control;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 21 */\n/*!***************************************!*\\\n  !*** ./src/geometry/parallelogram.js ***!\n  \\***************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _geometry = __webpack_require__(/*! ./geometry */ 1);\n\t\n\tvar _geometry2 = _interopRequireDefault(_geometry);\n\t\n\tvar _polygon = __webpack_require__(/*! ./polygon */ 10);\n\t\n\tvar _polygon2 = _interopRequireDefault(_polygon);\n\t\n\tvar _geometryutil = __webpack_require__(/*! ../geometry/support/geometryutil */ 11);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/8/23.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar Parallelogram = function (_Polygon) {\n\t  _inherits(Parallelogram, _Polygon);\n\t\n\t  function Parallelogram(coordinates) {\n\t    _classCallCheck(this, Parallelogram);\n\t\n\t    return _possibleConstructorReturn(this, _Polygon.call(this, coordinates));\n\t  }\n\t\n\t  Parallelogram.prototype.getCoordinateIndex = function getCoordinateIndex(coord) {\n\t    return this.getCoordinates()[0].findIndex(function (points) {\n\t      return points[0] === coord[0] && points[1] === coord[1];\n\t    });\n\t  };\n\t\n\t  Parallelogram.prototype.clone = function clone() {\n\t    return new Parallelogram(this.getCoordinates());\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param coordinates\n\t   * @returns {Array}\n\t   */\n\t\n\t\n\t  Parallelogram.getTheLastPoint = function getTheLastPoint(coordinates) {\n\t    var firstPoint = coordinates[0];\n\t    var secondPoint = coordinates[1];\n\t    var thirdPoint = coordinates[2];\n\t\n\t    var dx = thirdPoint[0] - secondPoint[0];\n\t    var dy = thirdPoint[1] - secondPoint[1];\n\t\n\t    return [firstPoint[0] + dx, firstPoint[1] + dy];\n\t  };\n\t\n\t  /**\n\t   * 用于计算和更新平行四边形的顶点\n\t   *\n\t   * @param p 平行四边形对象\n\t   * @param vertex 新移动的点\n\t   * @param oldVertex 上次移动的点\n\t   * @param dragSegment 数据对象\n\t   * @returns {*} 返回新的点集合（3维数组）\n\t   */\n\t\n\t\n\t  Parallelogram.updateCoordinatesForModification = function updateCoordinatesForModification(p, vertex, oldVertex, dragSegment) {\n\t    var dis = 0;\n\t    if (oldVertex) {\n\t      dis = (0, _geometryutil.distance)(oldVertex, vertex);\n\t    }\n\t\n\t    var oldRingsCoordinates = p.getCoordinates();\n\t    if (dis === 0) {\n\t      return oldRingsCoordinates;\n\t    }\n\t\n\t    var oldCoordinates = oldRingsCoordinates[0];\n\t    var segement = dragSegment[0];\n\t    var edgeIndex = segement.index;\n\t\n\t    var firstCoord = void 0;\n\t    var nowCood = void 0;\n\t    var otherCood = void 0;\n\t\n\t    if (edgeIndex === 0 || edgeIndex === 4) {\n\t      firstCoord = oldCoordinates[3];\n\t      nowCood = oldCoordinates[0];\n\t      otherCood = oldCoordinates[1];\n\t    } else {\n\t      firstCoord = oldCoordinates[edgeIndex - 1];\n\t      nowCood = oldCoordinates[edgeIndex];\n\t      otherCood = oldCoordinates[edgeIndex + 1];\n\t    }\n\t\n\t    // 计算延长线上的一点\n\t    var newCood1 = (0, _geometryutil.getPointInExtendedLineByDistanceFromAB)(firstCoord[0], firstCoord[1], nowCood[0], nowCood[1], dis);\n\t\n\t    // 计算向量\n\t    var tempXX = nowCood[0] - firstCoord[0];\n\t    var tempYY = nowCood[1] - firstCoord[1];\n\t    var tempX2 = vertex[0] - oldVertex[0];\n\t    var tempY2 = vertex[1] - oldVertex[1];\n\t\n\t    // 使用向量的点积，来计算两个向量的方向是否一致\n\t    // 如果 <0 则表示异向\n\t    var direction = tempX2 * tempXX + tempY2 * tempYY;\n\t\n\t    var dx = newCood1[0] - nowCood[0];\n\t    var dy = newCood1[1] - nowCood[1];\n\t    var newCood2 = void 0;\n\t\n\t    // 不同方向\n\t    if (direction < 0) {\n\t      newCood1[0] = nowCood[0] - dx;\n\t      newCood1[1] = nowCood[1] - dy;\n\t\n\t      newCood2 = [otherCood[0] - dx, otherCood[1] - dy];\n\t    } else {\n\t      newCood2 = [otherCood[0] + dx, otherCood[1] + dy];\n\t    }\n\t\n\t    oldCoordinates[edgeIndex] = newCood1;\n\t    oldCoordinates[edgeIndex + 1] = newCood2;\n\t\n\t    if (edgeIndex === 0) {\n\t      oldCoordinates[4] = oldCoordinates[0];\n\t    } else if (edgeIndex === 4 || edgeIndex === 3) {\n\t      oldCoordinates[0] = oldCoordinates[4];\n\t    }\n\t\n\t    return [oldCoordinates];\n\t  };\n\t\n\t  _createClass(Parallelogram, [{\n\t    key: 'geometryType',\n\t    get: function get() {\n\t      return _geometry2.default.PARALLELOGRAM;\n\t    }\n\t  }]);\n\t\n\t  return Parallelogram;\n\t}(_polygon2.default);\n\t\n\texports.default = Parallelogram;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 22 */\n/*!*******************************!*\\\n  !*** ./src/geometry/point.js ***!\n  \\*******************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _geometry = __webpack_require__(/*! ./geometry */ 1);\n\t\n\tvar _geometry2 = _interopRequireDefault(_geometry);\n\t\n\tvar _extent = __webpack_require__(/*! ./extent */ 9);\n\t\n\tvar _extent2 = _interopRequireDefault(_extent);\n\t\n\tvar _extentutil = __webpack_require__(/*! ./support/extentutil */ 2);\n\t\n\tvar _geometryutil = __webpack_require__(/*! ./support/geometryutil */ 11);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zypc on 2016/11/13.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * 定义点类和数据结构\n\t *\n\t * @class Point\n\t * @extends Geometry\n\t * @module geometry\n\t * @constructor\n\t * @example\n\t *\n\t *    var point = new Datatang.Point(100, 100)\n\t */\n\tvar Point = function (_Geometry) {\n\t  _inherits(Point, _Geometry);\n\t\n\t  /**\n\t   * 根据x和y构建一个点对象\n\t   * @param x 默认值为0\n\t   * @param y 默认值为0\n\t   * @constructor\n\t   */\n\t  function Point(xValue, yValue) {\n\t    _classCallCheck(this, Point);\n\t\n\t    var _this = _possibleConstructorReturn(this, _Geometry.call(this));\n\t\n\t    _this.x = xValue;\n\t    _this.y = yValue;\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * 获取对象的几何类型\n\t   *\n\t   * @protected\n\t   */\n\t\n\t\n\t  /**\n\t   * 根据x,y的偏移量得到点\n\t   *\n\t   * @method offset\n\t   * @param nx x轴偏移量\n\t   * @param ny y轴偏移量\n\t   * @returns {Datatang.Point} 返回偏移以后的点对象\n\t   */\n\t  Point.prototype.offset = function offset(nx, ny) {\n\t    return new Point(this.x + nx, this.y + ny);\n\t  };\n\t\n\t  /**\n\t   * containsXY\n\t   * @param x\n\t   * @param y\n\t   * @param opt\n\t   * @returns {boolean}\n\t   */\n\t\n\t\n\t  Point.prototype.containsXY = function containsXY(x, y) {\n\t    var opt = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\t\n\t    var tolerance = opt.tolerance ? opt.tolerance : 2;\n\t    var pointA = this;\n\t\n\t    var distance = (0, _geometryutil.squaredDistance)(pointA.x, pointA.y, x, y);\n\t    if (Math.sqrt(distance / 2) <= tolerance) {\n\t      return true;\n\t    }\n\t\n\t    return false;\n\t  };\n\t\n\t  /**\n\t   * 更新x,y坐标值\n\t   *\n\t   * @method update\n\t   * @param nx x新值\n\t   * @param ny y新值\n\t   */\n\t\n\t\n\t  Point.prototype.update = function update(nx, ny) {\n\t    this.x = nx;\n\t    this.y = ny;\n\t\n\t    this._extent = null;\n\t  };\n\t\n\t  /**\n\t   *\n\t   *\n\t   * getFlatInteriorPoint\n\t   * @returns {[]}\n\t   */\n\t\n\t\n\t  Point.prototype.getFlatInteriorPoint = function getFlatInteriorPoint() {\n\t    return this.getCoordinates();\n\t  };\n\t\n\t  /**\n\t   * 获取点的坐标\n\t   *\n\t   * @method getCoordinates\n\t   * @returns {Array}\n\t   */\n\t\n\t\n\t  Point.prototype.getCoordinates = function getCoordinates() {\n\t    return [this.x, this.y];\n\t  };\n\t\n\t  /**\n\t   * 点的位置就是坐标点的位置减去偏移量的位置\n\t   *\n\t   * @method getFormShowPosition\n\t   * @param {Number} offsetX x的偏移量\n\t   * @param {Number} offsetY y的偏移量\n\t   * @return {[]}\n\t   */\n\t\n\t\n\t  Point.prototype.getFormShowPosition = function getFormShowPosition() {\n\t    var offsetX = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\t    var offsetY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10;\n\t\n\t    return [this.x - offsetX, this.y - offsetY];\n\t  };\n\t\n\t  /**\n\t   * 设置点的坐标\n\t   *\n\t   * @method setCoordinates\n\t   * @param coordinates\n\t   */\n\t\n\t\n\t  Point.prototype.setCoordinates = function setCoordinates(coordinates) {\n\t    this.update(coordinates[0], coordinates[1]);\n\t    this.changed();\n\t  };\n\t\n\t  /**\n\t   * getCoordinateIndex\n\t   * @returns {number}\n\t   */\n\t\n\t\n\t  Point.prototype.getCoordinateIndex = function getCoordinateIndex() {\n\t    return 0;\n\t  };\n\t\n\t  /**\n\t   * 判断两个图形对象是否相等\n\t   *\n\t   * 判断标准：该图形的所有顶点值是否一致\n\t   *\n\t   * @method equal\n\t   * @param geometry\n\t   * @return {Boolean}\n\t   */\n\t\n\t\n\t  Point.prototype.equal = function equal(geom) {\n\t    var equals = false;\n\t    if (geom !== null) {\n\t      equals = this.x === geom.x && this.y === geom.x || Number.isNaN(this.x) && Number.isNaN(this.y) && Number.isNaN(geom.x) && Number.isNaN(geom.y);\n\t    }\n\t    return equals;\n\t  };\n\t\n\t  /**\n\t   * 克隆点\n\t   *\n\t   * @method clone\n\t   * @returns {Point}\n\t   */\n\t\n\t\n\t  Point.prototype.clone = function clone() {\n\t    return new Point(this.x, this.y);\n\t  };\n\t\n\t  _createClass(Point, [{\n\t    key: 'geometryType',\n\t    get: function get() {\n\t      return _geometry2.default.POINT;\n\t    }\n\t\n\t    /**\n\t     * 获取点的最小外接矩形\n\t     *\n\t     * @note 点是没有最小外接矩形\n\t     * @returns {null}\n\t     */\n\t\n\t  }, {\n\t    key: 'extent',\n\t    get: function get() {\n\t      if (!this._extent) {\n\t        var extentObj = _extentutil.ExtentUtil.createScaleExtent(this, 8);\n\t        this._extent = new _extent2.default(extentObj[0], extentObj[1], extentObj[2], extentObj[3]);\n\t      }\n\t\n\t      return this._extent;\n\t    }\n\t\n\t    /**\n\t     * 获取 X 坐标值\n\t     *\n\t     * @property x\n\t     * @type x {number}\n\t     */\n\t\n\t  }, {\n\t    key: 'x',\n\t    get: function get() {\n\t      return this._x;\n\t    },\n\t    set: function set(value) {\n\t      this._x = value;\n\t    }\n\t\n\t    /**\n\t     * 获取 Y 坐标值\n\t     *\n\t     * @property y\n\t     * @type {number}\n\t     */\n\t\n\t  }, {\n\t    key: 'y',\n\t    get: function get() {\n\t      return this._y;\n\t    },\n\t    set: function set(value) {\n\t      this._y = value;\n\t    }\n\t  }]);\n\t\n\t  return Point;\n\t}(_geometry2.default);\n\t\n\texports.default = Point;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 23 */\n/*!*************************************!*\\\n  !*** ./src/lyr/image/imagestate.js ***!\n  \\*************************************/\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t/**\n\t * Created by zhangyong on 2017/6/6.\n\t */\n\t\n\tvar ImageState = exports.ImageState = {};\n\t\n\t/**\n\t * On IDLE\n\t * @type {number}\n\t */\n\tImageState.IDLE = 0;\n\t\n\t/**\n\t * On loading\n\t * @type {number}\n\t */\n\tImageState.LOADING = 1;\n\t\n\t/**\n\t * Already loaded\n\t * @type {number}\n\t */\n\tImageState.LOADED = 2;\n\t\n\t/**\n\t * Error occurred\n\t * @type {number}\n\t */\n\tImageState.ERROR = 3;\n\t\n\texports.default = {\n\t  ImageState: ImageState\n\t};\n\n/***/ }),\n/* 24 */\n/*!*****************************!*\\\n  !*** ./src/meek/feature.js ***!\n  \\*****************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _baseobject = __webpack_require__(/*! ../core/baseobject */ 3);\n\t\n\tvar _baseobject2 = _interopRequireDefault(_baseobject);\n\t\n\tvar _obj = __webpack_require__(/*! ../utils/obj */ 15);\n\t\n\tvar _obj2 = _interopRequireDefault(_obj);\n\t\n\tvar _eventmanager = __webpack_require__(/*! ../core/eventmanager */ 4);\n\t\n\tvar _eventtype = __webpack_require__(/*! ../meek/eventtype */ 6);\n\t\n\tvar _geometry = __webpack_require__(/*! ../geometry/geometry */ 1);\n\t\n\tvar _geometry2 = _interopRequireDefault(_geometry);\n\t\n\tvar _linestyle = __webpack_require__(/*! ../style/linestyle */ 16);\n\t\n\tvar _linestyle2 = _interopRequireDefault(_linestyle);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zypc on 2016/11/15.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * The feature class is intent to represent geographic features,with a geometry ,a style and\n\t * other attrubutes properties.\n\t * Feature provides a function named style that can be seted a style you want,\n\t * otherwise will use the style of feature layer.\n\t *\n\t * @class Feature\n\t * @extends BaseObject\n\t * @module meek\n\t * @constructor\n\t */\n\tvar Feature = function (_BaseObject) {\n\t  _inherits(Feature, _BaseObject);\n\t\n\t  function Feature(geometry) {\n\t    var attributes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\t    var displayText = arguments[2];\n\t    var style = arguments[3];\n\t\n\t    _classCallCheck(this, Feature);\n\t\n\t    /**\n\t     *\n\t     * @type {undefined}\n\t     * @private\n\t     */\n\t    var _this = _possibleConstructorReturn(this, _BaseObject.call(this));\n\t\n\t    _this._styleFunction = undefined;\n\t\n\t    /**\n\t     *\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._geometryChangeKey = null;\n\t\n\t    /**\n\t     *\n\t     */\n\t    _this.geometry = geometry;\n\t\n\t    /**\n\t     * 设置feature属性\n\t     */\n\t    _this.initArribute(attributes);\n\t\n\t    /**\n\t     * 设置feature样式\n\t     *\n\t     */\n\t    _this.style = style;\n\t\n\t    /**\n\t     * 设置feature文本\n\t     *\n\t     */\n\t    _this.displayText = displayText;\n\t\n\t    /**\n\t     * 设置feature是否显示\n\t     *\n\t     * @type {Boolean}\n\t     * @private\n\t     */\n\t    _this.display = true;\n\t\n\t    /**\n\t     * 设置feature的标签是否显示\n\t     * @type {Boolean}\n\t     * @private\n\t     */\n\t    _this.textDisplay = true;\n\t\n\t    /**\n\t     * 设置feature的样式是否高亮\n\t     * @type {Boolean}\n\t     * @private\n\t     */\n\t    _this.styleHighLight = false;\n\t\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   *\n\t   * @private\n\t   */\n\t\n\t\n\t  Feature.prototype._handleGeometryChanged = function _handleGeometryChanged() {\n\t    this.changed();\n\t  };\n\t\n\t  /**\n\t   * 设置feature属性\n\t   *\n\t   * @method initArribute\n\t   * @param attributes\n\t   */\n\t\n\t\n\t  Feature.prototype.initArribute = function initArribute(attributes) {\n\t    if (!(attributes instanceof Object)) {\n\t      attributes = {};\n\t    }\n\t\n\t    this._attributesMap = _obj2.default.objectToMap(attributes);\n\t  };\n\t\n\t  /**\n\t   * 获取feature属性\n\t   *\n\t   * @method get\n\t   * @param property\n\t   * @return {*}\n\t   */\n\t\n\t\n\t  Feature.prototype.get = function get(property) {\n\t    if (this._attributesMap.has(property)) {\n\t      return this._attributesMap.get(property);\n\t    }\n\t\n\t    return undefined;\n\t  };\n\t\n\t  /**\n\t   * 设置属性的值\n\t   *\n\t   * @method set\n\t   * @param property\n\t   * @param value\n\t   * @return {Map.<K, V>}\n\t   */\n\t\n\t\n\t  Feature.prototype.set = function set(property, value) {\n\t    return this._attributesMap.set(property, value);\n\t  };\n\t\n\t  /**\n\t   * 删除属性\n\t   *\n\t   * @method delete\n\t   * @param property\n\t   * @return {boolean}\n\t   */\n\t\n\t\n\t  Feature.prototype.delete = function _delete(property) {\n\t    return this._attributesMap.delete(property);\n\t  };\n\t\n\t  /**\n\t   * 遍历属性\n\t   *\n\t   * @method forEachAttribute\n\t   * @param callback\n\t   */\n\t\n\t\n\t  Feature.prototype.forEachAttribute = function forEachAttribute(callback) {\n\t    this._attributesMap.forEach(callback);\n\t  };\n\t\n\t  /**\n\t   * 判断属性是否存在\n\t   *\n\t   * @method has\n\t   * @param property\n\t   * @return {Boolean}\n\t   */\n\t\n\t\n\t  Feature.prototype.has = function has(property) {\n\t    return this._attributesMap.has(property);\n\t  };\n\t\n\t  /**\n\t   * Geometry 读写器\n\t   *\n\t   * @property geometry\n\t   * @return {*}\n\t   */\n\t\n\t\n\t  /**\n\t   * 克隆map属性\n\t   *\n\t   * @method cloneAttributesMap\n\t   * @returns {Map}\n\t   */\n\t  Feature.prototype.cloneAttributesMap = function cloneAttributesMap() {\n\t    var newMap = new Map();\n\t    if (this._attributesMap.size !== 0) {\n\t      var entries = this._attributesMap.entries();\n\t      var _iteratorNormalCompletion = true;\n\t      var _didIteratorError = false;\n\t      var _iteratorError = undefined;\n\t\n\t      try {\n\t        for (var _iterator = entries[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t          var _step$value = _slicedToArray(_step.value, 2),\n\t              key = _step$value[0],\n\t              value = _step$value[1];\n\t\n\t          newMap.set(key, value);\n\t        }\n\t      } catch (err) {\n\t        _didIteratorError = true;\n\t        _iteratorError = err;\n\t      } finally {\n\t        try {\n\t          if (!_iteratorNormalCompletion && _iterator.return) {\n\t            _iterator.return();\n\t          }\n\t        } finally {\n\t          if (_didIteratorError) {\n\t            throw _iteratorError;\n\t          }\n\t        }\n\t      }\n\t    }\n\t\n\t    return newMap;\n\t  };\n\t\n\t  /**\n\t   * features 克隆方法\n\t   *\n\t   * @method clone\n\t   * @returns {Feature}\n\t   */\n\t\n\t\n\t  Feature.prototype.clone = function clone() {\n\t    var renderStyleArr = void 0;\n\t    if (this.style) {\n\t      var style = void 0;\n\t      if (Array.isArray(this.style)) {\n\t        style = this.style[0].clone();\n\t      } else {\n\t        style = this.style.clone();\n\t      }\n\t\n\t      renderStyleArr = [style];\n\t    }\n\t\n\t    return new Feature(this.geometry.clone(), this.cloneAttributesMap(), this.displayText, renderStyleArr);\n\t  };\n\t\n\t  _createClass(Feature, [{\n\t    key: 'geometry',\n\t    get: function get() {\n\t      return this._geometry;\n\t    },\n\t    set: function set(value) {\n\t      if (value) {\n\t        this._geometry = value;\n\t\n\t        if (this._geometryChangeKey) {\n\t          (0, _eventmanager.unlistenByKey)(this._geometryChangeKey);\n\t        }\n\t\n\t        this._geometryChangeKey = (0, _eventmanager.listen)(value, _eventtype.EventType.CHANGE, this._handleGeometryChanged, this);\n\t      }\n\t    }\n\t\n\t    /**\n\t     * 缺省样式读写器\n\t     *\n\t     * @property styleFunction\n\t     * @return {*}\n\t     */\n\t\n\t  }, {\n\t    key: 'styleFunction',\n\t    get: function get() {\n\t      return this._styleFunction;\n\t    },\n\t    set: function set(value) {\n\t      this._styleFunction = value;\n\t    }\n\t\n\t    /**\n\t     * 样式读写器\n\t     *\n\t     * @property style\n\t     * @return {*}\n\t     */\n\t\n\t  }, {\n\t    key: 'style',\n\t    get: function get() {\n\t      return this._style;\n\t    },\n\t    set: function set(value) {\n\t      this._style = value;\n\t    }\n\t\n\t    /**\n\t     * feature标题读写器\n\t     *\n\t     * @property text\n\t     * @return {*}\n\t     */\n\t\n\t  }, {\n\t    key: 'displayText',\n\t    get: function get() {\n\t      return this._displayText;\n\t    },\n\t    set: function set(value) {\n\t      this._displayText = value;\n\t    }\n\t\n\t    /**\n\t     * 样式高亮读写器\n\t     *\n\t     * @property styleHighLight\n\t     * @returns {*}\n\t     */\n\t\n\t  }, {\n\t    key: 'styleHighLight',\n\t    get: function get() {\n\t      return this._styleHighLight;\n\t    },\n\t    set: function set(value) {\n\t      if (this._styleHighLight === value) {\n\t        return;\n\t      }\n\t\n\t      this._styleHighLight = value;\n\t\n\t      if (this.style === undefined) {\n\t        return;\n\t      }\n\t\n\t      var white = [255, 255, 255];\n\t      var newStyles = [];\n\t\n\t      for (var i = 0, len = this.style.length; i < len; i++) {\n\t        var s = this.style[i];\n\t        newStyles.push(s.clone());\n\t      }\n\t\n\t      if (this._styleHighLight) {\n\t        this.set('_originStyle', this.style);\n\t\n\t        var geometryType = this.geometry.geometryType;\n\t\n\t        if (geometryType === _geometry2.default.LINE) {\n\t          var firstStyle = newStyles[0];\n\t          firstStyle.width = firstStyle.width + 1;\n\t\n\t          var cloneStyle = firstStyle.clone();\n\t          cloneStyle.width = cloneStyle.width + 1;\n\t          cloneStyle.color = white;\n\t\n\t          newStyles.unshift(cloneStyle);\n\t        } else if (geometryType === _geometry2.default.POLYGON || geometryType === _geometry2.default.MULTI_POLYGON || geometryType === _geometry2.default.PARALLELOGRAM || geometryType === _geometry2.default.EXTENT) {\n\t          var _firstStyle = newStyles[0];\n\t          _firstStyle.borderStyle.width = _firstStyle.borderStyle.width + 1;\n\t\n\t          var _cloneStyle = _firstStyle.clone();\n\t          _cloneStyle.alpha = 0;\n\t          _cloneStyle.borderStyle.width = _firstStyle.borderStyle.width + 1;\n\t          _cloneStyle.borderStyle.color = white;\n\t          _cloneStyle.borderStyle.lineCap = _linestyle2.default.LineCap.ROUND;\n\t          _cloneStyle.borderStyle.lineJion = _linestyle2.default.LineJion.ROUND;\n\t\n\t          newStyles.unshift(_cloneStyle);\n\t        } else if (geometryType === _geometry2.default.POINT) {\n\t          var _firstStyle2 = newStyles[0];\n\t          _firstStyle2.size = _firstStyle2.size + 3;\n\t          _firstStyle2.borderStyle.width = _firstStyle2.borderStyle.width + 1;\n\t        }\n\t\n\t        this.style = newStyles;\n\t      } else {\n\t        if (this.get('_originStyle')) {\n\t          this.style = this.get('_originStyle');\n\t          this.delete('_originStyle');\n\t        }\n\t      }\n\t\n\t      this.changed();\n\t    }\n\t\n\t    /**\n\t     * 设置图层的透明度\n\t     *\n\t     * 将会触发map的重绘事件\n\t     *\n\t     * @method display\n\t     * @param value\n\t     */\n\t\n\t  }, {\n\t    key: 'display',\n\t    get: function get() {\n\t      return this._display;\n\t    },\n\t    set: function set(value) {\n\t      if (this._display !== value) {\n\t        this._display = value;\n\t        // 需要触动绘制事件派发\n\t        this.changed();\n\t      }\n\t    }\n\t\n\t    /**\n\t     * 设置标签是否显示\n\t     *\n\t     * 将会触发map的重绘事件\n\t     *\n\t     * @method textDisplay\n\t     * @param value\n\t     */\n\t\n\t  }, {\n\t    key: 'textDisplay',\n\t    get: function get() {\n\t      return this._textDisplay;\n\t    },\n\t    set: function set(value) {\n\t      if (this._textDisplay !== value) {\n\t        this._textDisplay = value;\n\t        // 需要触动绘制事件派发\n\t        this.changed();\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return Feature;\n\t}(_baseobject2.default);\n\t\n\texports.default = Feature;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 25 */\n/*!***********************************************!*\\\n  !*** ./src/renderer/render/geomertyrender.js ***!\n  \\***********************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _baseobject = __webpack_require__(/*! ../../core/baseobject */ 3);\n\t\n\tvar _baseobject2 = _interopRequireDefault(_baseobject);\n\t\n\tvar _array = __webpack_require__(/*! ../../utils/array */ 27);\n\t\n\tvar _transform = __webpack_require__(/*! ../../data/matrix/transform */ 7);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/3/20.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar GeomertyRender = function (_BaseObject) {\n\t  _inherits(GeomertyRender, _BaseObject);\n\t\n\t  function GeomertyRender(context) {\n\t    _classCallCheck(this, GeomertyRender);\n\t\n\t    /**\n\t     *\n\t     */\n\t    var _this = _possibleConstructorReturn(this, _BaseObject.call(this));\n\t\n\t    _this._context = context;\n\t\n\t    /**\n\t     *\n\t     * @type {Array}\n\t     * @private\n\t     */\n\t    _this._pixelCoordinates = null;\n\t\n\t    /**\n\t     *\n\t     * @type {*}\n\t     */\n\t    _this.renderedTransform = _transform.Transform.create();\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   *\n\t   */\n\t\n\t\n\t  GeomertyRender.prototype.resetRenderOption = function resetRenderOption() {\n\t    this._pixelCoordinates = null;\n\t    this.renderedTransform = _transform.Transform.create();\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param transform1\n\t   * @param transform2\n\t   */\n\t\n\t\n\t  GeomertyRender.prototype.equalsTransform = function equalsTransform(transform1, transform2) {\n\t    return (0, _array.equals)(transform1, transform2);\n\t  };\n\t\n\t  /**\n\t   * context getter\n\t   * @returns {*}\n\t   */\n\t\n\t\n\t  /**\n\t   * abstract function\n\t   * @param feature\n\t   * @param renderStyle\n\t   * @param transform\n\t   */\n\t  GeomertyRender.prototype.render = function render(feature, renderStyle, transform) {}; // eslint-disable-line no-unused-vars\n\t\n\t\n\t  _createClass(GeomertyRender, [{\n\t    key: 'context',\n\t    get: function get() {\n\t      return this._context;\n\t    }\n\t  }]);\n\t\n\t  return GeomertyRender;\n\t}(_baseobject2.default);\n\t\n\texports.default = GeomertyRender;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 26 */\n/*!********************************!*\\\n  !*** ./src/style/textstyle.js ***!\n  \\********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _baseobject = __webpack_require__(/*! ../core/baseobject */ 3);\n\t\n\tvar _baseobject2 = _interopRequireDefault(_baseobject);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/6/12.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t *\n\t * 定义文本样式\n\t *\n\t * @class TextStyle\n\t * @extends BaseStyle\n\t * @module style\n\t * @constructor\n\t * @example\n\t *\n\t *     new Datatang.TextStyle({\n\t *       textAlign: 'center',\n\t *       textBaseline: 'middle',\n\t *       font: 'Arial',\n\t *       text: '标注示例',\n\t *       fill: [255, 0, 0],\n\t *       stroke: new Datatang.LineStyle([255, 255, 255],1,3,\n\t *          Datatang.LineStyle.LineCap.ROUND,\n\t *          Datatang.LineStyle.LineJion.ROUND),\n\t *       offsetX: 0,\n\t *       offsetY: 0,\n\t *       rotation: 0\n\t *     });\n\t *\n\t */\n\tvar TextStyle = function (_BaseObject) {\n\t  _inherits(TextStyle, _BaseObject);\n\t\n\t  /**\n\t   *\n\t   * @constructor\n\t   * @param optOptions\n\t   */\n\t  function TextStyle(optOptions) {\n\t    _classCallCheck(this, TextStyle);\n\t\n\t    var _this = _possibleConstructorReturn(this, _BaseObject.call(this));\n\t\n\t    var options = optOptions || {};\n\t\n\t    /**\n\t     *\n\t     */\n\t    _this.text = options.text || '';\n\t\n\t    /**\n\t     * @private\n\t     * @type {string|undefined}\n\t     */\n\t    _this.font = options.font || TextStyle.DEFAULT_FONT;\n\t\n\t    /**\n\t     * @private\n\t     * @type {number|undefined}\n\t     */\n\t    _this.rotation = options.rotation || 0;\n\t\n\t    /**\n\t     * @private\n\t     * @type {boolean|undefined}\n\t     */\n\t    _this.rotateWithView = options.rotateWithView;\n\t\n\t    /**\n\t     * @private\n\t     * @type {number|undefined}\n\t     */\n\t    _this.scale = options.scale || TextStyle.DEFAULT_SCALE;\n\t\n\t    /**\n\t     * @private\n\t     * @type {string|undefined}\n\t     */\n\t    _this.textAlign = options.textAlign || TextStyle.DEFAULT_TEXT_ALIGN;\n\t\n\t    /**\n\t     * @private\n\t     * @type {string|undefined}\n\t     */\n\t    _this.textBaseline = options.textBaseline || TextStyle.DEFAULT_BASE_LINE;\n\t\n\t    /**\n\t     * @private\n\t     * @type {ol.style.Fill}\n\t     */\n\t    _this.fill = options.fill !== undefined ? options.fill : TextStyle.DEFAULT_FILL_COLOR;\n\t\n\t    /**\n\t     * @private\n\t     * @type {ol.style.Stroke}\n\t     */\n\t    _this.stroke = options.stroke !== undefined ? options.stroke : TextStyle.DEFAULT_STROKE;\n\t\n\t    /**\n\t     * @private\n\t     * @type {number}\n\t     */\n\t    _this.offsetX = options.offsetX !== undefined ? options.offsetX : 0;\n\t\n\t    /**\n\t     * @property offsetY\n\t     * @type {number}\n\t     */\n\t    _this.offsetY = options.offsetY !== undefined ? options.offsetY : 0;\n\t\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * 要显示的文本\n\t   *\n\t   * @property text\n\t   * @type {Stirng}\n\t   */\n\t\n\t\n\t  /**\n\t   * 克隆字体样式\n\t   *\n\t   * @method clone\n\t   * @returns {TextStyle}\n\t   */\n\t  TextStyle.prototype.clone = function clone() {\n\t    return new TextStyle({\n\t      font: this.font,\n\t      rotation: this.rotation,\n\t      rotateWithView: this.rotateWithView,\n\t      scale: this.scale,\n\t      text: this.text,\n\t      textAlign: this.textAlign,\n\t      textBaseline: this.textBaseline,\n\t      fill: this.fill ? this.fill.clone : undefined,\n\t      stroke: this.stroke ? this.stroke.clone : undefined,\n\t      offsetX: this.offsetX,\n\t      offsetY: this.offsetY\n\t    });\n\t  };\n\t\n\t  _createClass(TextStyle, [{\n\t    key: 'text',\n\t    get: function get() {\n\t      return this._text;\n\t    },\n\t    set: function set(value) {\n\t      this._text = value;\n\t    }\n\t\n\t    /**\n\t     * 显示的字体\n\t     *\n\t     * @property font\n\t     * @type {Stirng}\n\t     */\n\t\n\t  }, {\n\t    key: 'font',\n\t    get: function get() {\n\t      return this._font;\n\t    },\n\t    set: function set(value) {\n\t      this._font = value;\n\t    }\n\t\n\t    /**\n\t     * 旋转的角度\n\t     *\n\t     * @property rotation\n\t     * @type {Stirng}\n\t     */\n\t\n\t  }, {\n\t    key: 'rotation',\n\t    get: function get() {\n\t      return this._rotation;\n\t    },\n\t    set: function set(value) {\n\t      this._rotation = value;\n\t    }\n\t\n\t    /**\n\t     * 旋转视图\n\t     *\n\t     * @property rotateWithView\n\t     * @type {Stirng}\n\t     */\n\t\n\t  }, {\n\t    key: 'rotateWithView',\n\t    get: function get() {\n\t      return this._rotateWithView;\n\t    },\n\t    set: function set(value) {\n\t      this._rotateWithView = value;\n\t    }\n\t\n\t    /**\n\t     * 缩放比例\n\t     *\n\t     * @property scale\n\t     * @type {Stirng}\n\t     */\n\t\n\t  }, {\n\t    key: 'scale',\n\t    get: function get() {\n\t      return this._scale;\n\t    },\n\t    set: function set(value) {\n\t      this._scale = value;\n\t    }\n\t\n\t    /**\n\t     * 字体\n\t     *\n\t     * @property textAlign\n\t     * @type {Stirng}\n\t     */\n\t\n\t  }, {\n\t    key: 'textAlign',\n\t    get: function get() {\n\t      return this._textAlign;\n\t    },\n\t    set: function set(value) {\n\t      this._textAlign = value;\n\t    }\n\t\n\t    /**\n\t     * 字体线\n\t     *\n\t     * @property textBaseline\n\t     * @type {Stirng}\n\t     */\n\t\n\t  }, {\n\t    key: 'textBaseline',\n\t    get: function get() {\n\t      return this._textBaseline;\n\t    },\n\t    set: function set(value) {\n\t      this._textBaseline = value;\n\t    }\n\t\n\t    /**\n\t     * 字体颜色\n\t     *\n\t     * @property fill\n\t     * @type {Stirng}\n\t     */\n\t\n\t  }, {\n\t    key: 'fill',\n\t    get: function get() {\n\t      return this._fill;\n\t    },\n\t    set: function set(value) {\n\t      this._fill = value;\n\t    }\n\t\n\t    /**\n\t     * 字体线的样式\n\t     *\n\t     * property stroke\n\t     * @type {Stirng}\n\t     */\n\t\n\t  }, {\n\t    key: 'stroke',\n\t    get: function get() {\n\t      return this._stroke;\n\t    },\n\t    set: function set(value) {\n\t      this._stroke = value;\n\t    }\n\t\n\t    /**\n\t     * 字体x轴偏移\n\t     *\n\t     * @property offsetX\n\t     * @type {Stirng}\n\t     */\n\t\n\t  }, {\n\t    key: 'offsetX',\n\t    get: function get() {\n\t      return this._offsetX;\n\t    },\n\t    set: function set(value) {\n\t      this._offsetX = value;\n\t    }\n\t\n\t    /**\n\t     * 字体y轴偏移\n\t     *\n\t     * @property offsetY\n\t     * @type {Stirng}\n\t     */\n\t\n\t  }, {\n\t    key: 'offsetY',\n\t    get: function get() {\n\t      return this._offsetY;\n\t    },\n\t    set: function set(value) {\n\t      this._offsetY = value;\n\t    }\n\t  }]);\n\t\n\t  return TextStyle;\n\t}(_baseobject2.default);\n\t\n\t/**\n\t *\n\t * 默认字体边框样式\n\t * @type {String} DEFAULT_STROKE\n\t * @static\n\t * @final\n\t *\n\t */\n\t\n\t\n\texports.default = TextStyle;\n\tTextStyle.DEFAULT_STROKE = {\n\t  color: [255, 255, 255],\n\t  width: 2,\n\t  lineCap: 'round',\n\t  lineJion: 'round'\n\t\n\t  /**\n\t   *\n\t   * 默认字体颜色\n\t   * @type {String} DEFAULT_FILL_COLOR\n\t   * @static\n\t   * @final\n\t   *\n\t   */\n\t};TextStyle.DEFAULT_FILL_COLOR = [0, 0, 255];\n\t\n\t/**\n\t * 默认字体样式\n\t * @type {String} DEFAULT_FONT\n\t * @static\n\t * @final\n\t *\n\t */\n\tTextStyle.DEFAULT_FONT = 'bold 12px Arial';\n\t\n\t/**\n\t * 默认字体显示位置\n\t * @type {String} DEFAULT_TEXT_ALIGN\n\t * @static\n\t * @final\n\t *\n\t */\n\tTextStyle.DEFAULT_TEXT_ALIGN = 'center';\n\t\n\t/**\n\t * 默认字体显示位置\n\t * @type {String} DEFAULT_BASE_LINE\n\t * @static\n\t * @final\n\t *\n\t */\n\tTextStyle.DEFAULT_BASE_LINE = 'middle';\n\t\n\t/**\n\t * 默认字体缩放初始值\n\t * @type {String} DEFAULT_BASE_LINE\n\t * @static\n\t * @final\n\t *\n\t */\n\tTextStyle.DEFAULT_SCALE = 10;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 27 */\n/*!****************************!*\\\n  !*** ./src/utils/array.js ***!\n  \\****************************/\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.linearFindNearest = linearFindNearest;\n\texports.stableSort = stableSort;\n\texports.binarySearch = binarySearch;\n\texports.equals = equals;\n\texports.numberSafeCompareFunction = numberSafeCompareFunction;\n\t/**\n\t * Created by zhangyong on 2017/6/14.\n\t */\n\t\n\t/**\n\t *\n\t * @param arr\n\t * @param target\n\t * @param direction\n\t * @returns {number}\n\t */\n\tfunction linearFindNearest(arr, target, direction) {\n\t  var n = arr.length;\n\t  if (arr[0] <= target) {\n\t    return 0;\n\t  } else if (target <= arr[n - 1]) {\n\t    return n - 1;\n\t  } else {\n\t    var i = void 0;\n\t    if (direction > 0) {\n\t      for (i = 1; i < n; ++i) {\n\t        if (arr[i] < target) {\n\t          return i - 1;\n\t        }\n\t      }\n\t    } else if (direction < 0) {\n\t      for (i = 1; i < n; ++i) {\n\t        if (arr[i] <= target) {\n\t          return i;\n\t        }\n\t      }\n\t    } else {\n\t      for (i = 1; i < n; ++i) {\n\t        if (arr[i] == target) {\n\t          return i;\n\t        } else if (arr[i] < target) {\n\t          if (arr[i - 1] - target < target - arr[i]) {\n\t            return i - 1;\n\t          } else {\n\t            return i;\n\t          }\n\t        }\n\t      }\n\t    }\n\t    return n - 1;\n\t  }\n\t}\n\t\n\t/**\n\t *\n\t * @param arr\n\t * @param compareFnc\n\t */\n\tfunction stableSort(arr, compareFnc) {\n\t  var length = arr.length;\n\t  var tmp = Array(arr.length);\n\t  var i = void 0;\n\t\n\t  for (i = 0; i < length; i++) {\n\t    tmp[i] = { index: i, value: arr[i] };\n\t  }\n\t\n\t  tmp.sort(function (a, b) {\n\t    return compareFnc(a.value, b.value) || a.index - b.index;\n\t  });\n\t\n\t  for (i = 0; i < arr.length; i++) {\n\t    arr[i] = tmp[i].value;\n\t  }\n\t}\n\t\n\t/**\n\t *\n\t * @param haystack\n\t * @param needle\n\t * @param opt_comparator\n\t * @returns {number}\n\t */\n\tfunction binarySearch(haystack, needle, opt_comparator) {\n\t  var mid = void 0,\n\t      cmp = void 0;\n\t  var comparator = opt_comparator || numberSafeCompareFunction;\n\t  var low = 0;\n\t  var high = haystack.length;\n\t  var found = false;\n\t\n\t  while (low < high) {\n\t    /* Note that \"(low + high) >>> 1\" may overflow, and results in a typecast\n\t     * to double (which gives the wrong results). */\n\t    mid = low + (high - low >> 1);\n\t    cmp = +comparator(haystack[mid], needle);\n\t\n\t    if (cmp < 0.0) {\n\t      /* Too low. */\n\t      low = mid + 1;\n\t    } else {\n\t      /* Key found or too high */\n\t      high = mid;\n\t      found = !cmp;\n\t    }\n\t  }\n\t\n\t  /* Key not found. */\n\t  return found ? low : ~low;\n\t}\n\t\n\t/**\n\t * Determine if two arrays get equal to each other\n\t * @param arr1\n\t * @param arr2\n\t * @returns {boolean}\n\t */\n\tfunction equals(arr1, arr2) {\n\t  var len1 = arr1.length;\n\t  if (len1 !== arr2.length) {\n\t    return false;\n\t  }\n\t\n\t  for (var i = 0; i < len1; i++) {\n\t    if (arr1[i] !== arr2[i]) {\n\t      return false;\n\t    }\n\t  }\n\t\n\t  return true;\n\t}\n\t\n\t/**\n\t *\n\t * @param a\n\t * @param b\n\t * @returns {number}\n\t */\n\tfunction numberSafeCompareFunction(a, b) {\n\t  return a > b ? 1 : a < b ? -1 : 0;\n\t}\n\n/***/ }),\n/* 28 */\n/*!***************************!*\\\n  !*** ./src/utils/math.js ***!\n  \\***************************/\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.clamp = clamp;\n\texports.lerp = lerp;\n\t/**\n\t * Created by zhangyong on 2017/6/5.\n\t */\n\t\n\tfunction clamp(value, min, max) {\n\t  return Math.min(Math.max(value, min), max);\n\t}\n\t\n\tfunction lerp(a, b, x) {\n\t  return a + x * (b - a);\n\t}\n\t\n\texports.default = {\n\t  clamp: clamp,\n\t  lerp: lerp\n\t};\n\n/***/ }),\n/* 29 */\n/*!*******************************************!*\\\n  !*** ./src/geometry/analysis/contains.js ***!\n  \\*******************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = contains;\n\t\n\tvar _geometry = __webpack_require__(/*! ../../geometry/geometry */ 1);\n\t\n\tvar _geometry2 = _interopRequireDefault(_geometry);\n\t\n\tvar _polygon = __webpack_require__(/*! ../../geometry/polygon */ 10);\n\t\n\tvar _polygon2 = _interopRequireDefault(_polygon);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t *\n\t * 判断多边形是否包含另外一个图形\n\t *\n\t * @method contains\n\t * @param polygon\n\t * @param geometry\n\t * @returns {*}\n\t */\n\t/**\n\t * Created by zhangyong on 2017/8/4.\n\t */\n\t\n\tfunction contains(polygon, geometry) {\n\t  var polyGeometryType = polygon.geometryType;\n\t  var isContained = false;\n\t\n\t  if (polyGeometryType === _geometry2.default.POLYGON || polyGeometryType === _geometry2.default.MULTI_POLYGON || polyGeometryType === _geometry2.default.EXTENT) {\n\t    var targetGeometryType = geometry.geometryType;\n\t\n\t    if (targetGeometryType === _geometry2.default.POINT) {\n\t      return polygon.containsXY(geometry.x, geometry.y);\n\t    } else if (targetGeometryType === _geometry2.default.LINE) {\n\t      return polyContainsLine(polygon, geometry);\n\t    } else if (targetGeometryType === _geometry2.default.POLYGON) {\n\t      return polyContainsPoly(polygon, geometry);\n\t    } else if (targetGeometryType === _geometry2.default.PARALLELOGRAM) {\n\t      return polyContainsPoly(polygon, new _polygon2.default(geometry.getCoordinates()));\n\t    }\n\t  }\n\t\n\t  return isContained;\n\t}\n\t\n\tvar polyContainsLine = function polyContainsLine(poly, line) {\n\t  var lineCoords = line.getCoordinates();\n\t  return polygonContainsLinestring(poly, lineCoords);\n\t};\n\t\n\tvar polyContainsPoly = function polyContainsPoly(poly, poly2) {\n\t  var poly2Type = poly2.geometryType;\n\t  if (poly2Type === _geometry2.default.POLYGON) {\n\t    var outRing = poly2.getCoordinates()[0];\n\t    return polygonContainsLinestring(poly, outRing);\n\t  } else if (poly2Type === _geometry2.default.MULTI_POLYGON) {\n\t    return true;\n\t  }\n\t\n\t  return false;\n\t};\n\t\n\tvar polygonContainsLinestring = function polygonContainsLinestring(poly, coords) {\n\t  var hasOne = coords.some(function (coord) {\n\t    return !poly.containsXY(coord[0], coord[1]);\n\t  });\n\t\n\t  return !hasOne;\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 30 */\n/*!******************************!*\\\n  !*** ./src/geometry/line.js ***!\n  \\******************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _geometry = __webpack_require__(/*! ./geometry */ 1);\n\t\n\tvar _geometry2 = _interopRequireDefault(_geometry);\n\t\n\tvar _extent = __webpack_require__(/*! ./extent */ 9);\n\t\n\tvar _extent2 = _interopRequireDefault(_extent);\n\t\n\tvar _geometryutil = __webpack_require__(/*! ./support/geometryutil */ 11);\n\t\n\tvar _interpolate = __webpack_require__(/*! ./support/interpolate */ 32);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zypc on 2016/11/13.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * 定义线类和数据结构\n\t *\n\t * @class Line\n\t * @extends Geometry\n\t * @module geometry\n\t * @constructor\n\t * @example\n\t *\n\t *  var line = new Datatang.Line()\n\t *\n\t *  line.setCoordinates([100, 100], [200, 200], [400, 500])\n\t */\n\tvar Line = function (_Geometry) {\n\t  _inherits(Line, _Geometry);\n\t\n\t  /**\n\t   * Create a line geometry\n\t   * @constructor\n\t   * @param path\n\t   */\n\t  function Line(path) {\n\t    _classCallCheck(this, Line);\n\t\n\t    /**\n\t     * 记录内点更新的次数\n\t     * @type {number}\n\t     * @private\n\t     */\n\t    var _this = _possibleConstructorReturn(this, _Geometry.call(this));\n\t\n\t    _this._flatInteriorPointRevision = -1;\n\t\n\t    /**\n\t     * 缓存当前内点\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._flatInteriorPoint = null;\n\t\n\t    /**\n\t     *\n\t     * @type {Array}\n\t     * @private\n\t     */\n\t    _this._path = [];\n\t\n\t    _this.addPath(path);\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * 添加线段\n\t   *\n\t   * @method addPath\n\t   * @deprecated\n\t   * @param coordinates {Array}\n\t   */\n\t  Line.prototype.addPath = function addPath(coordinates) {\n\t    this.path.push(coordinates);\n\t    this._extent = null;\n\t    this.changed();\n\t  };\n\t\n\t  /**\n\t   * 多段线的长度\n\t   *\n\t   * @property length\n\t   * @type {Number}\n\t   */\n\t\n\t\n\t  /**\n\t   * 遍历每一条边\n\t   *\n\t   * @method forEachSegment\n\t   * @param callback {callback}\n\t   * @param opt\n\t   */\n\t  Line.prototype.forEachSegment = function forEachSegment(callback, opt) {\n\t    this.path.forEach(callback, opt);\n\t  };\n\t\n\t  /**\n\t   * @param x\n\t   * @param y\n\t   * @param opt\n\t   * @returns {boolean}\n\t   */\n\t\n\t\n\t  Line.prototype.containsXY = function containsXY(x, y) {\n\t    var opt = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\t\n\t    var tolerance = opt.tolerance ? opt.tolerance : 2;\n\t    var path = this.path;\n\t    var squaredSegmentDistanceFn = _geometryutil.squaredSegmentDistance;\n\t\n\t    var find = false;\n\t    for (var i = 0, ii = path.length - 1; i < ii; i++) {\n\t      var nowP = path[i];\n\t      var nextP = path[i + 1];\n\t      var _distance = squaredSegmentDistanceFn(x, y, nowP[0], nowP[1], nextP[0], nextP[1]);\n\t      _distance = Math.sqrt(_distance);\n\t      if (_distance <= tolerance) {\n\t        find = true;\n\t        break;\n\t      }\n\t    }\n\t\n\t    return find;\n\t  };\n\t\n\t  /**\n\t   * 计算线的平面内点\n\t   *\n\t   * @method getFlatInteriorPoint\n\t   * @returns {Array}\n\t   */\n\t\n\t\n\t  Line.prototype.getFlatInteriorPoint = function getFlatInteriorPoint() {\n\t    if (this._flatInteriorPointRevision !== this.revision) {\n\t      var interiorPoint = null;\n\t      var fraction = 0.5;\n\t      var flatCoordinates = [];\n\t      var coordinates = this.getCoordinates();\n\t\n\t      coordinates.forEach(function (point) {\n\t        flatCoordinates.push(point[0], point[1]);\n\t      });\n\t\n\t      this._flatInteriorPoint = (0, _interpolate.lineString)(flatCoordinates, 0, flatCoordinates.length, this.stride, fraction, interiorPoint);\n\t\n\t      this._flatInteriorPointRevision = this.revision;\n\t    }\n\t\n\t    return this._flatInteriorPoint;\n\t  };\n\t\n\t  Line.prototype.getCoordinates = function getCoordinates() {\n\t    return this.path;\n\t  };\n\t\n\t  /**\n\t   * 得到最后一个点的坐标，显示表单\n\t   *\n\t   * @param {Number} offsetX x的偏移量\n\t   * @param {Number} offsetY y的偏移量\n\t   * @returns {[*,*]}\n\t   */\n\t\n\t\n\t  Line.prototype.getFormShowPosition = function getFormShowPosition() {\n\t    var offsetX = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\t    var offsetY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\t\n\t    var coordinates = this.getCoordinates();\n\t    if (coordinates.length === 0) {\n\t      return null;\n\t    }\n\t\n\t    var lastPoint = coordinates[coordinates.length - 1];\n\t\n\t    return [lastPoint[0] - offsetX, lastPoint[1] - offsetY];\n\t  };\n\t\n\t  /**\n\t   * 设置坐标数据\n\t   *\n\t   * @method setCoordinates\n\t   * @param coords {Array}\n\t   */\n\t\n\t\n\t  Line.prototype.setCoordinates = function setCoordinates(coords) {\n\t    this.path = coords;\n\t    this._extent = null;\n\t    this.changed();\n\t  };\n\t\n\t  /**\n\t   * 根据坐标点，计算改点的下标\n\t   *\n\t   * @method getCoordinateIndex\n\t   * @param coord\n\t   * @returns {*|number}\n\t   */\n\t\n\t\n\t  Line.prototype.getCoordinateIndex = function getCoordinateIndex(coord) {\n\t    return this.getCoordinates().findIndex(function (points) {\n\t      return points[0] === coord[0] && points[1] === coord[1];\n\t    });\n\t  };\n\t\n\t  /**\n\t   * 克隆线段\n\t   *\n\t   * @method clone\n\t   * @returns {Line} new line\n\t   */\n\t\n\t\n\t  Line.prototype.clone = function clone() {\n\t    var newCoordinates = this.getCoordinates();\n\t    this.getCoordinates().forEach(function (coords) {\n\t      newCoordinates.push([coords[0], coords[1]]);\n\t    });\n\t\n\t    var newLine = new Line();\n\t    newLine.setCoordinates(newCoordinates);\n\t\n\t    return newLine;\n\t  };\n\t\n\t  _createClass(Line, [{\n\t    key: 'geometryType',\n\t    get: function get() {\n\t      return _geometry2.default.LINE;\n\t    }\n\t\n\t    /**\n\t     * 获取图形的最小外接矩形(MBR-Minimum Bounding Rectangle)\n\t     *\n\t     * @returns {Object} 返回对象的最小外接矩形\n\t     *\n\t     */\n\t\n\t  }, {\n\t    key: 'extent',\n\t    get: function get() {\n\t      var me = this;\n\t      if (me._extent === null) {\n\t        var xmin = Number.POSITIVE_INFINITY;\n\t        var ymin = Number.POSITIVE_INFINITY;\n\t        var xmax = Number.NEGATIVE_INFINITY;\n\t        var ymax = Number.NEGATIVE_INFINITY;\n\t\n\t        var coors = me.getCoordinates();\n\t        var _iteratorNormalCompletion = true;\n\t        var _didIteratorError = false;\n\t        var _iteratorError = undefined;\n\t\n\t        try {\n\t          for (var _iterator = coors[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t            var p = _step.value;\n\t\n\t            xmin = Math.min(xmin, p[0]);\n\t            ymin = Math.min(ymin, p[1]);\n\t            xmax = Math.max(xmax, p[0]);\n\t            ymax = Math.max(ymax, p[1]);\n\t          }\n\t        } catch (err) {\n\t          _didIteratorError = true;\n\t          _iteratorError = err;\n\t        } finally {\n\t          try {\n\t            if (!_iteratorNormalCompletion && _iterator.return) {\n\t              _iterator.return();\n\t            }\n\t          } finally {\n\t            if (_didIteratorError) {\n\t              throw _iteratorError;\n\t            }\n\t          }\n\t        }\n\t\n\t        me._extent = new _extent2.default(xmin, ymin, xmax, ymax);\n\t      }\n\t\n\t      return me._extent;\n\t    }\n\t\n\t    /**\n\t     * 线段读写器\n\t     *\n\t     * @property path\n\t     * @returns\n\t     */\n\t\n\t  }, {\n\t    key: 'path',\n\t    get: function get() {\n\t      return this._path;\n\t    },\n\t    set: function set(value) {\n\t      this._path = value;\n\t      this._extent = null;\n\t    }\n\t  }, {\n\t    key: 'length',\n\t    get: function get() {\n\t      var coordinates = this.getCoordinates();\n\t      var len = 0;\n\t      for (var i = 0, ii = coordinates.length; i < ii - 1; i++) {\n\t        var fp = coordinates[i];\n\t        var np = coordinates[i + 1];\n\t        len += (0, _geometryutil.distance)(fp, np);\n\t      }\n\t\n\t      return len;\n\t    }\n\t  }]);\n\t\n\t  return Line;\n\t}(_geometry2.default);\n\t\n\texports.default = Line;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 31 */\n/*!**************************************!*\\\n  !*** ./src/geometry/mutilpolygon.js ***!\n  \\**************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _geometry = __webpack_require__(/*! ./geometry */ 1);\n\t\n\tvar _geometry2 = _interopRequireDefault(_geometry);\n\t\n\tvar _polygon = __webpack_require__(/*! ./polygon */ 10);\n\t\n\tvar _polygon2 = _interopRequireDefault(_polygon);\n\t\n\tvar _extent = __webpack_require__(/*! ./extent */ 9);\n\t\n\tvar _extent2 = _interopRequireDefault(_extent);\n\t\n\tvar _interpolate = __webpack_require__(/*! ./support/interpolate */ 32);\n\t\n\tvar _orient = __webpack_require__(/*! ./support/orient */ 33);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/8/4.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * 定义复合多边形对象和数据结构\n\t *\n\t *\n\t * @class MutilPolygon\n\t * @module geometry\n\t * @constructor\n\t *\n\t */\n\tvar MutilPolygon = function (_Geometry) {\n\t  _inherits(MutilPolygon, _Geometry);\n\t\n\t  function MutilPolygon(coordinates) {\n\t    _classCallCheck(this, MutilPolygon);\n\t\n\t    var _this = _possibleConstructorReturn(this, _Geometry.call(this));\n\t\n\t    _this._polygons = [];\n\t\n\t    _this.stride = 2;\n\t\n\t    /**\n\t     * 记录当前多边形内点更新的次数\n\t     * @type {number}\n\t     * @private\n\t     */\n\t    _this._flatInteriorPointRevision = -1;\n\t\n\t    /**\n\t     * 缓存当前多边形内点\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._flatInteriorPoint = null;\n\t\n\t    _this.setCoordinates(coordinates);\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   *\n\t   * @returns {String}\n\t   */\n\t\n\t\n\t  /**\n\t   * 获得复合多边形的坐标\n\t   * @returns {Array|*}\n\t   */\n\t  MutilPolygon.prototype.getCoordinates = function getCoordinates() {\n\t    return this._polygons;\n\t  };\n\t\n\t  /**\n\t   * 设置复合多边形的坐标\n\t   * @param coordinates\n\t   */\n\t\n\t\n\t  MutilPolygon.prototype.setCoordinates = function setCoordinates(coordinates) {\n\t    this._polygons = coordinates;\n\t    this._extent = null;\n\t    this.changed();\n\t  };\n\t\n\t  /**\n\t   * 获得一个多边形对象\n\t   * @method getPolygon\n\t   * @param index 多边形的下标\n\t   * @returns {Datatang.Polygon} 返回一个新的多边形对象\n\t   */\n\t\n\t\n\t  MutilPolygon.prototype.getPolygon = function getPolygon(index) {\n\t    if (index < 0 && this._polygons.length < index) {\n\t      return null;\n\t    }\n\t\n\t    var coords = this._polygons[index];\n\t    var outRing = [];\n\t    var innerRing = [];\n\t    coords.forEach(function (rings) {\n\t      rings.forEach(function (points) {\n\t        innerRing.push([points[0], points[1]]);\n\t      });\n\t\n\t      outRing.push(innerRing);\n\t      innerRing = [];\n\t    });\n\t\n\t    var polygon = new _polygon2.default(outRing);\n\t    return polygon;\n\t  };\n\t\n\t  /**\n\t   * 判断集合多边形是否包括指定 x 和 y\n\t   * @param x\n\t   * @param y\n\t   * @returns {boolean}\n\t   */\n\t\n\t\n\t  MutilPolygon.prototype.containsXY = function containsXY(x, y) {\n\t    var polygons = this._polygons;\n\t    for (var i = 0, len = polygons.length; i < len; i++) {\n\t      var onePolygon = this.getPolygon(i);\n\t      if (onePolygon.containsXY(x, y)) {\n\t        return true;\n\t      }\n\t    }\n\t\n\t    return false;\n\t  };\n\t\n\t  /**\n\t   * 获取标签显示的内点\n\t   * 注意：复合多边形，标签显示的位置，只显示在第一个图形上\n\t   * @returns {*}\n\t   */\n\t\n\t\n\t  MutilPolygon.prototype.getFlatInteriorPoint = function getFlatInteriorPoint() {\n\t    if (this._flatInteriorPointRevision !== this.revision) {\n\t      this._flatInteriorPointRevision = this.revision;\n\t\n\t      var polygons = this._polygons;\n\t      var flatCoordinates = [];\n\t      var endss = [];\n\t\n\t      var orderArray = [];\n\t\n\t      polygons.forEach(function (polygon) {\n\t        var outRings = polygon[0];\n\t        orderArray.push(outRings);\n\t      });\n\t\n\t      orderArray.sort(function (arr1, arr2) {\n\t        return arr1.length - arr2.length;\n\t      });\n\t\n\t      var lastLen = 0;\n\t      orderArray.forEach(function (arr) {\n\t        var currLen = arr.length * 2 + lastLen;\n\t        endss.push([currLen]);\n\t        lastLen = currLen;\n\t\n\t        arr.forEach(function (points) {\n\t          flatCoordinates.push(points[0], points[1]);\n\t        });\n\t      });\n\t\n\t      var flatCenters = (0, _interpolate.centerLinearRingss)(flatCoordinates, 0, endss, this.stride);\n\t      this._flatInteriorPoint = (0, _interpolate.linearRingss)(this.getOrientedFlatCoordinates(flatCoordinates, endss), 0, endss, this.stride, flatCenters);\n\t    }\n\t\n\t    return this._flatInteriorPoint;\n\t  };\n\t\n\t  /**\n\t   * 计算复合多边形顺时针坐标\n\t   * @param flatCoordinates\n\t   * @param endss\n\t   * @returns {*}\n\t   */\n\t\n\t\n\t  MutilPolygon.prototype.getOrientedFlatCoordinates = function getOrientedFlatCoordinates(flatCoordinates, endss) {\n\t    var orientedFlatCoordinates = void 0;\n\t\n\t    if ((0, _orient.linearRingssAreOriented)(flatCoordinates, 0, endss, this.stride)) {\n\t      orientedFlatCoordinates = flatCoordinates;\n\t    } else {\n\t      orientedFlatCoordinates = [].concat(_toConsumableArray(flatCoordinates));\n\t      orientedFlatCoordinates.length = (0, _orient.orientLinearRingss)(orientedFlatCoordinates, 0, endss, this.stride);\n\t    }\n\t\n\t    return orientedFlatCoordinates;\n\t  };\n\t\n\t  /**\n\t   * 根据坐标值计算复合多边形的点下标\n\t   *\n\t   * @method getCoordinateIndex\n\t   * @param coord 坐标值，[x, y]结构\n\t   * @returns {\n\t   *    {\n\t   *      polygonIndex: number 位于第几个多边形上 ,\n\t   *      ringIndex: number 位于多边形第几个环上,\n\t   *      index: number 位于环上第几个顶点上\n\t   *     }\n\t   *   }\n\t   */\n\t\n\t\n\t  MutilPolygon.prototype.getCoordinateIndex = function getCoordinateIndex(coord) {\n\t    var polygonCoods = this.getCoordinates();\n\t\n\t    for (var ii = 0, iiLen = polygonCoods.length; ii < iiLen; ii++) {\n\t      var coords = polygonCoods[ii];\n\t\n\t      for (var i = 0, len = coords.length; i < len; i++) {\n\t        var rings = coords[i];\n\t        for (var j = 0, jLen = rings.length; j < jLen; j++) {\n\t          var point = rings[j];\n\t          if (point[0] === coord[0] && point[1] === coord[1]) {\n\t            return {\n\t              polygonIndex: ii,\n\t              ringIndex: i,\n\t              index: j\n\t            };\n\t          }\n\t        }\n\t      }\n\t    }\n\t\n\t    return {\n\t      polygonIndex: -1,\n\t      ringIndex: -1,\n\t      index: -1\n\t    };\n\t  };\n\t\n\t  /**\n\t   * 克隆一个 Mutilpolygon\n\t   * @returns {MutilPolygon}\n\t   */\n\t\n\t\n\t  MutilPolygon.prototype.clone = function clone() {\n\t    var allCoords = [];\n\t\n\t    this._polygons.forEach(function (coords) {\n\t      var outRing = [];\n\t      var innerRing = [];\n\t      coords.forEach(function (rings) {\n\t        rings.forEach(function (points) {\n\t          innerRing.push([points[0], points[1]]);\n\t        });\n\t\n\t        outRing.push(innerRing);\n\t      });\n\t\n\t      allCoords.push(outRing);\n\t      outRing = [];\n\t    });\n\t\n\t    var newMutilPolygon = new MutilPolygon(allCoords);\n\t    return newMutilPolygon;\n\t  };\n\t\n\t  _createClass(MutilPolygon, [{\n\t    key: 'geometryType',\n\t    get: function get() {\n\t      return _geometry2.default.MULTI_POLYGON;\n\t    }\n\t\n\t    /**\n\t     * 计算复合多边形的最小外界矩形\n\t     * 注意：这里所求出来的是多个多边形的最小外界矩形，既一个能包裹所有\n\t     * 多边形的矩形\n\t     *\n\t     * @returns {Extent|null}\n\t     */\n\t\n\t  }, {\n\t    key: 'extent',\n\t    get: function get() {\n\t      if (this._extent === null) {\n\t        var allPolygonCoords = this.getCoordinates();\n\t\n\t        // 计算最小外界矩形，只考虑外围环\n\t        if (allPolygonCoords.length > 0) {\n\t          var xmin = Number.POSITIVE_INFINITY;\n\t          var ymin = Number.POSITIVE_INFINITY;\n\t          var xmax = Number.NEGATIVE_INFINITY;\n\t          var ymax = Number.NEGATIVE_INFINITY;\n\t\n\t          allPolygonCoords.forEach(function (polyCoods) {\n\t            var rings = polyCoods[0];\n\t            var _iteratorNormalCompletion = true;\n\t            var _didIteratorError = false;\n\t            var _iteratorError = undefined;\n\t\n\t            try {\n\t              for (var _iterator = rings[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t                var ring = _step.value;\n\t\n\t                xmin = Math.min(xmin, ring[0]);\n\t                ymin = Math.min(ymin, ring[1]);\n\t                xmax = Math.max(xmax, ring[0]);\n\t                ymax = Math.max(ymax, ring[1]);\n\t              }\n\t            } catch (err) {\n\t              _didIteratorError = true;\n\t              _iteratorError = err;\n\t            } finally {\n\t              try {\n\t                if (!_iteratorNormalCompletion && _iterator.return) {\n\t                  _iterator.return();\n\t                }\n\t              } finally {\n\t                if (_didIteratorError) {\n\t                  throw _iteratorError;\n\t                }\n\t              }\n\t            }\n\t          });\n\t\n\t          this._extent = new _extent2.default(xmin, ymin, xmax, ymax);\n\t        }\n\t      }\n\t\n\t      return this._extent;\n\t    }\n\t  }]);\n\t\n\t  return MutilPolygon;\n\t}(_geometry2.default);\n\t\n\texports.default = MutilPolygon;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 32 */\n/*!*********************************************!*\\\n  !*** ./src/geometry/support/interpolate.js ***!\n  \\*********************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.lineString = lineString;\n\texports.linearRings = linearRings;\n\texports.linearRingss = linearRingss;\n\texports.centerLinearRingss = centerLinearRingss;\n\t\n\tvar _array = __webpack_require__(/*! ../../utils/array */ 27);\n\t\n\tvar _geometryutil = __webpack_require__(/*! ../support/geometryutil */ 11);\n\t\n\tvar _math = __webpack_require__(/*! ../../utils/math */ 28);\n\t\n\tvar _extentutil = __webpack_require__(/*! ./extentutil */ 2);\n\t\n\t/**\n\t *\n\t * @param flatCoordinates\n\t * @param offset\n\t * @param end\n\t * @param stride\n\t * @param fraction\n\t * @param opt_dest\n\t * @returns {*}\n\t */\n\t/**\n\t * Created by zhangyong on 2017/6/14.\n\t */\n\t\n\tfunction lineString(flatCoordinates, offset, end, stride, fraction, opt_dest) {\n\t  var pointX = NaN;\n\t  var pointY = NaN;\n\t  var n = (end - offset) / stride;\n\t\n\t  if (n === 1) {\n\t    pointX = flatCoordinates[offset];\n\t    pointY = flatCoordinates[offset + 1];\n\t  } else if (n == 2) {\n\t    pointX = (1 - fraction) * flatCoordinates[offset] + fraction * flatCoordinates[offset + stride];\n\t    pointY = (1 - fraction) * flatCoordinates[offset + 1] + fraction * flatCoordinates[offset + stride + 1];\n\t  } else if (n !== 0) {\n\t    var x1 = flatCoordinates[offset];\n\t    var y1 = flatCoordinates[offset + 1];\n\t    var length = 0;\n\t    var cumulativeLengths = [0];\n\t    var i = void 0;\n\t    for (i = offset + stride; i < end; i += stride) {\n\t      var x2 = flatCoordinates[i];\n\t      var y2 = flatCoordinates[i + 1];\n\t      length += Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n\t      cumulativeLengths.push(length);\n\t      x1 = x2;\n\t      y1 = y2;\n\t    }\n\t\n\t    var target = fraction * length;\n\t    var index = (0, _array.binarySearch)(cumulativeLengths, target);\n\t\n\t    if (index < 0) {\n\t      var t = (target - cumulativeLengths[-index - 2]) / (cumulativeLengths[-index - 1] - cumulativeLengths[-index - 2]);\n\t      var o = offset + (-index - 2) * stride;\n\t      pointX = (0, _math.lerp)(flatCoordinates[o], flatCoordinates[o + stride], t);\n\t      pointY = (0, _math.lerp)(flatCoordinates[o + 1], flatCoordinates[o + stride + 1], t);\n\t    } else {\n\t      pointX = flatCoordinates[offset + index * stride];\n\t      pointY = flatCoordinates[offset + index * stride + 1];\n\t    }\n\t  }\n\t\n\t  if (opt_dest) {\n\t    opt_dest[0] = pointX;\n\t    opt_dest[1] = pointY;\n\t    return opt_dest;\n\t  } else {\n\t    return [pointX, pointY];\n\t  }\n\t}\n\t\n\t/**\n\t *\n\t * @param flatCoordinates\n\t * @param offset\n\t * @param ends\n\t * @param stride\n\t * @param flatCenters\n\t * @param flatCentersOffset\n\t * @param opt_dest\n\t * @returns {*}\n\t */\n\tfunction linearRings(flatCoordinates, offset, ends, stride, flatCenters, flatCentersOffset, opt_dest) {\n\t  var i = void 0,\n\t      ii = void 0,\n\t      x = void 0,\n\t      x1 = void 0,\n\t      x2 = void 0,\n\t      y1 = void 0,\n\t      y2 = void 0;\n\t  var y = flatCenters[flatCentersOffset + 1];\n\t  var intersections = [];\n\t  // Calculate intersections with the horizontal line\n\t  var end = ends[0];\n\t  x1 = flatCoordinates[end - stride];\n\t  y1 = flatCoordinates[end - stride + 1];\n\t\n\t  for (i = offset; i < end; i += stride) {\n\t    x2 = flatCoordinates[i];\n\t    y2 = flatCoordinates[i + 1];\n\t    if (y <= y1 && y2 <= y || y1 <= y && y <= y2) {\n\t      x = (y - y1) / (y2 - y1) * (x2 - x1) + x1;\n\t      intersections.push(x);\n\t    }\n\t    x1 = x2;\n\t    y1 = y2;\n\t  }\n\t\n\t  // Find the longest segment of the horizontal line that has its center point\n\t  // inside the linear ring.\n\t  var pointX = NaN;\n\t  var maxSegmentLength = -Infinity;\n\t  intersections.sort(_array.numberSafeCompareFunction);\n\t  x1 = intersections[0];\n\t  for (i = 1, ii = intersections.length; i < ii; ++i) {\n\t    x2 = intersections[i];\n\t    var segmentLength = Math.abs(x2 - x1);\n\t    if (segmentLength > maxSegmentLength) {\n\t      x = (x1 + x2) / 2;\n\t      if ((0, _geometryutil.linearRingsContainsXY)(flatCoordinates, offset, ends, stride, x, y)) {\n\t        pointX = x;\n\t        maxSegmentLength = segmentLength;\n\t      }\n\t    }\n\t    x1 = x2;\n\t  }\n\t\n\t  if (isNaN(pointX)) {\n\t    // There is no horizontal line that has its center point inside the linear\n\t    // ring.  Use the center of the the linear ring's extent.\n\t    pointX = flatCenters[flatCentersOffset];\n\t  }\n\t\n\t  if (opt_dest) {\n\t    opt_dest.push(pointX, y);\n\t    return opt_dest;\n\t  } else {\n\t    return [pointX, y];\n\t  }\n\t}\n\t\n\t/**\n\t *\n\t * @param flatCoordinates\n\t * @param offset\n\t * @param endss\n\t * @param stride\n\t * @param flatCenters\n\t * @returns {Array}\n\t */\n\tfunction linearRingss(flatCoordinates, offset, endss, stride, flatCenters) {\n\t  var interiorPoints = [];\n\t  var i = void 0,\n\t      ii = void 0;\n\t  for (i = 0, ii = endss.length; i < ii; ++i) {\n\t    var ends = endss[i];\n\t    interiorPoints = linearRings(flatCoordinates, offset, ends, stride, flatCenters, 2 * i, interiorPoints);\n\t    offset = ends[ends.length - 1];\n\t  }\n\t\n\t  return interiorPoints;\n\t}\n\t\n\t/**\n\t *\n\t * @param flatCoordinates\n\t * @param offset\n\t * @param endss\n\t * @param stride\n\t * @returns {Array}\n\t */\n\tfunction centerLinearRingss(flatCoordinates, offset, endss, stride) {\n\t  var flatCenters = [];\n\t  var i = void 0,\n\t      ii = void 0;\n\t  var extent = _extentutil.ExtentUtil.createEmpty();\n\t  for (i = 0, ii = endss.length; i < ii; ++i) {\n\t    var ends = endss[i];\n\t    extent = _extentutil.ExtentUtil.createOrUpdateFromFlatCoordinates(flatCoordinates, offset, ends[0], stride);\n\t    flatCenters.push((extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2);\n\t    offset = ends[ends.length - 1];\n\t  }\n\t  return flatCenters;\n\t}\n\n/***/ }),\n/* 33 */\n/*!****************************************!*\\\n  !*** ./src/geometry/support/orient.js ***!\n  \\****************************************/\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.orientLinearRingss = orientLinearRingss;\n\texports.orientLinearRings = orientLinearRings;\n\texports.linearRingssAreOriented = linearRingssAreOriented;\n\texports.linearRingsAreOriented = linearRingsAreOriented;\n\texports.linearRingIsClockwise = linearRingIsClockwise;\n\t/**\n\t * Created by zhangyong on 2017/6/14.\n\t */\n\t\n\t/**\n\t *\n\t * @param flatCoordinates\n\t * @param offset\n\t * @param endss\n\t * @param stride\n\t * @param opt_right\n\t * @returns {*}\n\t */\n\tfunction orientLinearRingss(flatCoordinates, offset, endss, stride, opt_right) {\n\t  var i = void 0,\n\t      ii = void 0;\n\t  for (i = 0, ii = endss.length; i < ii; ++i) {\n\t    offset = orientLinearRings(flatCoordinates, offset, endss[i], stride, opt_right);\n\t  }\n\t\n\t  return offset;\n\t}\n\t\n\t/**\n\t *\n\t * @param flatCoordinates\n\t * @param offset\n\t * @param ends\n\t * @param stride\n\t * @param opt_right\n\t * @returns {*}\n\t */\n\tfunction orientLinearRings(flatCoordinates, offset, ends, stride, opt_right) {\n\t  var right = opt_right !== undefined ? opt_right : false;\n\t  var i = void 0,\n\t      ii = void 0;\n\t\n\t  for (i = 0, ii = ends.length; i < ii; ++i) {\n\t    var end = ends[i];\n\t    var isClockwise = linearRingIsClockwise(flatCoordinates, offset, end, stride);\n\t\n\t    var reverse = i === 0 ? right && isClockwise || !right && !isClockwise : right && !isClockwise || !right && isClockwise;\n\t\n\t    if (reverse) {\n\t      // reverse(flatCoordinates, offset, end, stride)\n\t      // 反转\n\t      flatCoordinates = flatCoordinates.reverse();\n\t    }\n\t    offset = end;\n\t  }\n\t\n\t  return offset;\n\t}\n\t\n\t/**\n\t *\n\t * @param flatCoordinates\n\t * @param offset\n\t * @param endss\n\t * @param stride\n\t * @param opt_right\n\t * @returns {boolean}\n\t */\n\tfunction linearRingssAreOriented(flatCoordinates, offset, endss, stride, opt_right) {\n\t  var i = void 0,\n\t      ii = void 0;\n\t  for (i = 0, ii = endss.length; i < ii; ++i) {\n\t    if (!linearRingsAreOriented(flatCoordinates, offset, endss[i], stride, opt_right)) {\n\t      return false;\n\t    }\n\t  }\n\t  return true;\n\t}\n\t\n\t/**\n\t * 判断线串的方向\n\t * @param flatCoordinates\n\t * @param offset\n\t * @param ends\n\t * @param stride\n\t * @param opt_right\n\t * @returns {boolean}\n\t */\n\tfunction linearRingsAreOriented(flatCoordinates, offset, ends, stride, opt_right) {\n\t  var right = opt_right !== undefined ? opt_right : false;\n\t  var i = void 0,\n\t      ii = void 0;\n\t\n\t  for (i = 0, ii = ends.length; i < ii; ++i) {\n\t    var end = ends[i];\n\t    // 判断坐标串是否是顺时针\n\t    var isClockwise = linearRingIsClockwise(flatCoordinates, offset, end, stride);\n\t\n\t    if (i === 0) {\n\t      if (right && isClockwise || !right && !isClockwise) {\n\t        return false;\n\t      }\n\t    } else {\n\t      if (right && !isClockwise || !right && isClockwise) {\n\t        return false;\n\t      }\n\t    }\n\t\n\t    offset = end;\n\t  }\n\t\n\t  return true;\n\t}\n\t\n\t/**\n\t * 判断坐标串是否是顺时针方向\n\t * @param flatCoordinates\n\t * @param offset\n\t * @param end\n\t * @param stride\n\t * @returns {boolean}\n\t */\n\tfunction linearRingIsClockwise(flatCoordinates, offset, end, stride) {\n\t  // http://tinyurl.com/clockwise-method\n\t  // https://github.com/OSGeo/gdal/blob/trunk/gdal/ogr/ogrlinearring.cpp\n\t  var edge = 0;\n\t  var x1 = flatCoordinates[end - stride];\n\t  var y1 = flatCoordinates[end - stride + 1];\n\t\n\t  for (; offset < end; offset += stride) {\n\t    var x2 = flatCoordinates[offset];\n\t    var y2 = flatCoordinates[offset + 1];\n\t    edge += (x2 - x1) * (y2 + y1);\n\t    x1 = x2;\n\t    y1 = y2;\n\t  }\n\t\n\t  return edge > 0;\n\t}\n\n/***/ }),\n/* 34 */\n/*!****************************!*\\\n  !*** ./src/meek/config.js ***!\n  \\****************************/\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t/**\n\t * Created by zhangyong on 2017/3/20.\n\t */\n\t\n\t/**\n\t * Constants defined width the define tag connot be changed in application code,\n\t * but can be set at compile time.\n\t *\n\t * @type {{}}\n\t */\n\tvar Config = exports.Config = {};\n\t\n\t/**\n\t * Enable debug mode ,Default is 'true'\n\t *\n\t * 配置DEBUG\n\t *\n\t * @property DEBUG\n\t * @static\n\t * @type {Boolean}\n\t */\n\tConfig.DEBUG = true;\n\t\n\t/**\n\t * Default max zomm factor\n\t *\n\t * @property DEFAULT_ZOOM_FACTOR\n\t * @static\n\t * @type {Number}\n\t */\n\tConfig.DEFAULT_ZOOM_FACTOR = 2;\n\t\n\t/**\n\t * Default max zoom level for map view.\n\t * Defaylt is '10'\n\t *\n\t * @property DEFAULT_MAX_ZOOM\n\t * @static\n\t * @type {Number}\n\t */\n\tConfig.DEFAULT_MAX_ZOOM = 10;\n\t\n\t/**\n\t * Default min zoom level for map view.\n\t * Default is '0'\n\t *\n\t * @property DEFAULT_MIN_ZOOM\n\t * @static\n\t * @type {Number}\n\t */\n\tConfig.DEFAULT_MIN_ZOOM = 0;\n\t\n\t/**\n\t * Maxinum mouse wheel delta.\n\t *\n\t * @property MOUSE_WHEEL_ZOOM_MAXDELTA\n\t * @static\n\t * @type {Number}\n\t */\n\tConfig.MOUSE_WHEEL_ZOOM_MAXDELTA = 1;\n\t\n\t/**\n\t * Default tile size\n\t *\n\t * @property DEFAULT_TILE_SIZE\n\t * @static\n\t * @type {Number}\n\t */\n\tConfig.DEFAULT_TILE_SIZE = 256;\n\t\n\texports.default = {\n\t  Config: Config\n\t};\n\n/***/ }),\n/* 35 */\n/*!********************************!*\\\n  !*** ./src/style/basestyle.js ***!\n  \\********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _baseobject = __webpack_require__(/*! ../core/baseobject */ 3);\n\t\n\tvar _baseobject2 = _interopRequireDefault(_baseobject);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/6/13.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * 定义基础样式类，包括了一些基础的属性，如颜色、对象样式、透明度\n\t *\n\t * @class BaseStyle\n\t * @extends BaseObject\n\t * @module style\n\t */\n\tvar BaseStyle = function (_BaseObject) {\n\t  _inherits(BaseStyle, _BaseObject);\n\t\n\t  /**\n\t   *\n\t   * @constructor\n\t   * @param color {Array}\n\t   * @param style {Object}\n\t   * @param alpha {Number}\n\t   */\n\t  function BaseStyle(color, style) {\n\t    var alpha = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\t\n\t    _classCallCheck(this, BaseStyle);\n\t\n\t    /**\n\t     * The color to fill or stroke geometry\n\t     */\n\t    var _this = _possibleConstructorReturn(this, _BaseObject.call(this));\n\t\n\t    _this.color = color;\n\t\n\t    /**\n\t     * Which style to style geometry\n\t     */\n\t    _this.style = style;\n\t\n\t    /**\n\t     *\n\t     */\n\t    _this.alpha = alpha;\n\t\n\t    /**\n\t     * The text displayed with geometry\n\t     * @type {null}\n\t     */\n\t    _this.textStyle = null;\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * 颜色\n\t   *\n\t   * @property color\n\t   * @type {Array}\n\t   */\n\t\n\t\n\t  /**\n\t   * 克隆一个样式对象\n\t   *\n\t   * @method clone\n\t   * @abstract\n\t   */\n\t  BaseStyle.prototype.clone = function clone() {};\n\t\n\t  _createClass(BaseStyle, [{\n\t    key: 'color',\n\t    get: function get() {\n\t      return this._color;\n\t    },\n\t    set: function set(value) {\n\t      this._color = value;\n\t    }\n\t\n\t    /**\n\t     * 样式对象\n\t     *\n\t     * @property style\n\t     * @type {Datatang.Style}\n\t     */\n\t\n\t  }, {\n\t    key: 'style',\n\t    get: function get() {\n\t      return this._style;\n\t    },\n\t    set: function set(value) {\n\t      this._style = value;\n\t    }\n\t\n\t    /**\n\t     * 透明度\n\t     *\n\t     * @property alpha\n\t     * @default 1\n\t     * @type {Number}\n\t     */\n\t\n\t  }, {\n\t    key: 'alpha',\n\t    get: function get() {\n\t      return this._alpha;\n\t    },\n\t    set: function set(value) {\n\t      return this._alpha = value;\n\t    }\n\t\n\t    /**\n\t     * 文本样式对象\n\t     *\n\t     * @property textStyle\n\t     */\n\t\n\t  }, {\n\t    key: 'textStyle',\n\t    get: function get() {\n\t      return this._textStyle;\n\t    },\n\t    set: function set(value) {\n\t      this._textStyle = value;\n\t    }\n\t  }]);\n\t\n\t  return BaseStyle;\n\t}(_baseobject2.default);\n\t\n\texports.default = BaseStyle;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 36 */\n/*!******************************!*\\\n  !*** ./src/utils/counter.js ***!\n  \\******************************/\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.getUid = getUid;\n\t\n\tvar uid = 0;\n\t\n\tfunction getUid() {\n\t  return uid++;\n\t}\n\t\n\texports.default = {\n\t  getUid: getUid\n\t};\n\n/***/ }),\n/* 37 */\n/*!***********************************!*\\\n  !*** ./src/components/dragpan.js ***!\n  \\***********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _component = __webpack_require__(/*! ./component */ 8);\n\t\n\tvar _component2 = _interopRequireDefault(_component);\n\t\n\tvar _mousekey = __webpack_require__(/*! ../utils/mousekey */ 14);\n\t\n\tvar _coordinate = __webpack_require__(/*! ../utils/coordinate */ 55);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/6/2.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * 拖动事件基础类\n\t *\n\t * @class DragPan\n\t * @extends Component\n\t * @module component\n\t * @constructor\n\t */\n\tvar DragPan = function (_Component) {\n\t  _inherits(DragPan, _Component);\n\t\n\t  /**\n\t   * 构造函数\n\t   *\n\t   * @constructor\n\t   * @param options\n\t   */\n\t  function DragPan() {\n\t    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t    _classCallCheck(this, DragPan);\n\t\n\t    var _this = _possibleConstructorReturn(this, _Component.call(this));\n\t\n\t    _this.applyHandleEventOption({\n\t      handleDownEvent: _this._handleDownEvent,\n\t      handleDragEvent: _this._handleDragEvent\n\t    });\n\t\n\t    /**\n\t     * @property tragetPointers\n\t     * @type {Array}\n\t     */\n\t    _this.targetPointers = [];\n\t\n\t    /**\n\t     * @property lastCentroid\n\t     * @type {null}\n\t     */\n\t    _this.lastCentroid = null;\n\t\n\t    /**\n\t     * kinetic\n\t     * @private\n\t     * @type {ol.Kinetic|undefined}\n\t     */\n\t    _this._kinetic = options.kinetic;\n\t\n\t    /**\n\t     * @property lastCentroid\n\t     * @type {ol.Pixel}\n\t     */\n\t    _this.lastCentroid = null;\n\t\n\t    /**\n\t     * @property lastPointersCount\n\t     * @private\n\t     * @type {number}\n\t     */\n\t    _this._lastPointersCount = null;\n\t\n\t    /**\n\t     * @property conidtion\n\t     * @private\n\t     * @type {ol.EventsConditionType}\n\t     */\n\t    _this._condition = options.condition ? options.condition : _mousekey.noModifierKeys;\n\t\n\t    /**\n\t     * @property noKinetic\n\t     * @private\n\t     * @type {boolean}\n\t     */\n\t    _this._noKinetic = false;\n\t\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * 处理browserEvent\n\t   *\n\t   * @param browserEvent {BrowserPointerEvent} mapBrowserEvent Event.\n\t   * @return {boolean} Start drag sequence?\n\t   * @this {DragPan}\n\t   * @private\n\t   */\n\t\n\t\n\t  DragPan.prototype._handleDownEvent = function _handleDownEvent(browserEvent) {\n\t    if (this.targetPointers.length > 0 && this._condition(browserEvent)) {\n\t      this.lastCentroid = null;\n\t\n\t      if (this._kinetic) {\n\t        this._kinetic.begin();\n\t      }\n\t\n\t      // No kinetic as soon as more than one pointer on the screen is\n\t      // detected. This is to prevent nasty pans after pinch.\n\t      this._noKinetic = this.targetPointers.length > 1;\n\t      return true;\n\t    } else {\n\t      return false;\n\t    }\n\t  };\n\t\n\t  /**\n\t   * handleDragEvent\n\t   * @param browserEvent {browserEvent}\n\t   * @private\n\t   */\n\t\n\t\n\t  DragPan.prototype._handleDragEvent = function _handleDragEvent(browserEvent) {\n\t    var targetPointers = this.targetPointers;\n\t    var centroid = this.centroid(targetPointers);\n\t\n\t    if (targetPointers.length === this._lastPointersCount) {\n\t      if (this._kinetic) {\n\t        this._kinetic.update(centroid[0], centroid[1]);\n\t      }\n\t\n\t      if (this.lastCentroid) {\n\t        var deltaX = this.lastCentroid[0] - centroid[0];\n\t        var deltaY = this.lastCentroid[1] - centroid[1];\n\t        var map = browserEvent.map;\n\t        var view = map.view;\n\t        var viewState = view.getViewState();\n\t        var center = [deltaX, deltaY];\n\t        _coordinate.Coordinate.scale(center, viewState.resolution);\n\t        _coordinate.Coordinate.rotate(center, viewState.rotation);\n\t        _coordinate.Coordinate.add(center, viewState.center);\n\t        // center = view.constrainCenter(center)\n\t        view.center = center;\n\t      }\n\t    } else if (this._kinetic) {\n\t      this._kinetic.begin();\n\t    }\n\t\n\t    this.lastCentroid = centroid;\n\t    this._lastPointersCount = targetPointers.length;\n\t  };\n\t\n\t  /**\n\t   * 计算视图的中心点\n\t   *\n\t   * @method centroid\n\t   * @param pointerEvents {pointerEvents}\n\t   * @returns {[*,*]}\n\t   */\n\t\n\t\n\t  DragPan.prototype.centroid = function centroid(pointerEvents) {\n\t    var length = pointerEvents.length;\n\t    var clientX = 0;\n\t    var clientY = 0;\n\t\n\t    for (var i = 0; i < length; i++) {\n\t      clientX += pointerEvents[i].originalEvent.clientX;\n\t      clientY += pointerEvents[i].originalEvent.clientY;\n\t    }\n\t\n\t    return [clientX / length, clientY / length];\n\t  };\n\t\n\t  return DragPan;\n\t}(_component2.default);\n\t\n\texports.default = DragPan;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 38 */\n/*!*************************************!*\\\n  !*** ./src/components/drawevent.js ***!\n  \\*************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _baseevent = __webpack_require__(/*! ../core/baseevent */ 12);\n\t\n\tvar _baseevent2 = _interopRequireDefault(_baseevent);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/5/22.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * The DrawEvent will emitted while geometrys on drawing end.\n\t *\n\t * 绘制结束时，DrawEvent将会被派发\n\t *\n\t *\n\t * @class drawevent\n\t * @extends BaseObject\n\t * @module component\n\t *\n\t *\n\t */\n\tvar DrawEvent = function (_BaseEvent) {\n\t  _inherits(DrawEvent, _BaseEvent);\n\t\n\t  /**\n\t   * @constructor\n\t   * @param type\n\t   * @param feature\n\t   */\n\t  function DrawEvent(type, feature) {\n\t    _classCallCheck(this, DrawEvent);\n\t\n\t    /**\n\t     * The feature being drawn\n\t     */\n\t    var _this = _possibleConstructorReturn(this, _BaseEvent.call(this, type));\n\t\n\t    _this.feature = feature;\n\t    return _this;\n\t  }\n\t\n\t  return DrawEvent;\n\t}(_baseevent2.default);\n\t\n\t/**\n\t * 定义绘制工具的事件类型\n\t *\n\t * @type {{DRAW_START: string, DRAW_END: string}}\n\t */\n\t\n\t\n\texports.default = DrawEvent;\n\tDrawEvent.EventType = {\n\t  /**\n\t   * Triggered upon feature draw start\n\t   */\n\t  DRAW_START: 'drawstart',\n\t\n\t  /**\n\t   * Triggered upon feature draw end\n\t   */\n\t  DRAW_END: 'drawend'\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 39 */\n/*!***************************************!*\\\n  !*** ./src/components/modifyevent.js ***!\n  \\***************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _baseevent = __webpack_require__(/*! ../core/baseevent */ 12);\n\t\n\tvar _baseevent2 = _interopRequireDefault(_baseevent);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/6/9.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * 修改结束时，ModifyEvent将会被派发\n\t *\n\t * @class modifyevent\n\t * @extends BaseObject\n\t * @module component\n\t *\n\t */\n\t\n\t\n\tvar ModifyEvent = function (_BaseEvent) {\n\t  _inherits(ModifyEvent, _BaseEvent);\n\t\n\t  function ModifyEvent(type, features, event) {\n\t    _classCallCheck(this, ModifyEvent);\n\t\n\t    /**\n\t     * features being modified.\n\t     */\n\t    var _this = _possibleConstructorReturn(this, _BaseEvent.call(this, type));\n\t\n\t    _this.features = features;\n\t\n\t    /**\n\t     * BrowserEvent\n\t     */\n\t    _this.browserEvent = event;\n\t    return _this;\n\t  }\n\t\n\t  return ModifyEvent;\n\t}(_baseevent2.default);\n\t\n\texports.default = ModifyEvent;\n\t\n\t\n\tModifyEvent.EventType = {\n\t\n\t  /**\n\t   * Triggered on features modification start.\n\t   */\n\t  MODIFY_START: 'modifystart',\n\t\n\t  /**\n\t   * Triggered on features modification end\n\t   */\n\t  MODIFY_END: 'modifyend'\n\t\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 40 */\n/*!******************************************!*\\\n  !*** ./src/components/mousewheelzoom.js ***!\n  \\******************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _component = __webpack_require__(/*! ./component */ 8);\n\t\n\tvar _component2 = _interopRequireDefault(_component);\n\t\n\tvar _browserevent = __webpack_require__(/*! ../meek/browserevent */ 5);\n\t\n\tvar _browserevent2 = _interopRequireDefault(_browserevent);\n\t\n\tvar _config = __webpack_require__(/*! ../meek/config */ 34);\n\t\n\tvar _mousekey = __webpack_require__(/*! ../utils/mousekey */ 14);\n\t\n\tvar _math = __webpack_require__(/*! ../utils/math */ 28);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zypc on 2017/6/4.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * 鼠标滚轮缩放基类\n\t *\n\t *\n\t * @class MouseWheelZoom\n\t * @extends Component\n\t * @module component\n\t * @constructor\n\t */\n\tvar MouseWheelZoom = function (_Component) {\n\t  _inherits(MouseWheelZoom, _Component);\n\t\n\t  /**\n\t   * 构造函数\n\t   *\n\t   * @constructor\n\t   * @param options\n\t   */\n\t  function MouseWheelZoom() {\n\t    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t    _classCallCheck(this, MouseWheelZoom);\n\t\n\t    /**\n\t     * 私有属性Delta，默认为0\n\t     *\n\t     * @property delta\n\t     * @type {Number}\n\t     * @private\n\t     */\n\t    var _this = _possibleConstructorReturn(this, _Component.call(this));\n\t\n\t    _this._delta = 0;\n\t\n\t    /**\n\t     * 私有属性useAnchor\n\t     *\n\t     * @property useAnchor\n\t     * @type {Boolean}\n\t     * @private\n\t     */\n\t    _this._useAnchor = options.useAnchor !== undefined ? options.useAnchor : true;\n\t\n\t    /**\n\t     * 私有属性duration\n\t     *\n\t     * @property duration\n\t     * @type {Boolean}\n\t     * @private\n\t     */\n\t    _this._duration = options.duration !== undefined ? options.duration : 250;\n\t\n\t    /**\n\t     * 私有属性lastAnchor\n\t     *\n\t     * @property lastAnchor\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._lastAnchor = null;\n\t\n\t    /**\n\t     *\n\t     * @type {undefined}\n\t     * @private\n\t     */\n\t    _this._startTime = undefined;\n\t\n\t    /**\n\t     *\n\t     * @type {number}\n\t     * @private\n\t     */\n\t    _this._timeout = options.timeout !== undefined ? options.timeout : 80;\n\t\n\t    /**\n\t     *\n\t     * @type {undefined}\n\t     * @private\n\t     */\n\t    _this._timeoutId = undefined;\n\t\n\t    /**\n\t     *\n\t     * @type {undefined}\n\t     * @private\n\t     */\n\t    _this._mode = undefined;\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   *\n\t   * @param mapBrowserEvent\n\t   * @returns {boolean}\n\t   */\n\t\n\t\n\t  MouseWheelZoom.prototype.handleMouseEvent = function handleMouseEvent(mapBrowserEvent) {\n\t    var _this2 = this;\n\t\n\t    if (!(0, _mousekey.mouseWheel)(mapBrowserEvent)) {\n\t      return true;\n\t    }\n\t\n\t    mapBrowserEvent.preventDefault();\n\t\n\t    var map = mapBrowserEvent.map;\n\t    var wheelEvent = mapBrowserEvent.originalEvent;\n\t\n\t    if (this._useAnchor) {\n\t      this._lastAnchor = mapBrowserEvent.coordinate;\n\t    }\n\t\n\t    // Delta normalisation inspired by\n\t    // https://github.com/mapbox/mapbox-gl-js/blob/001c7b9/js/ui/handler/scroll_zoom.js\n\t    var delta = void 0;\n\t    if (mapBrowserEvent.type == _browserevent2.default.WHEEL) {\n\t      delta = wheelEvent.deltaY;\n\t    } else if (mapBrowserEvent.type == _browserevent2.default.MOUSE_WHEEL) {\n\t      delta = -wheelEvent.wheelDeltaY;\n\t    }\n\t\n\t    if (delta === 0) {\n\t      return false;\n\t    }\n\t\n\t    var now = Date.now();\n\t\n\t    if (this._startTime === undefined) {\n\t      this._startTime = now;\n\t    }\n\t\n\t    this._delta += delta;\n\t\n\t    var timeLeft = Math.max(this._timeout - (now - this._startTime), 0);\n\t\n\t    clearTimeout(this._timeoutId);\n\t    this._timeoutId = setTimeout(function () {\n\t      return _this2._handleWheelZoom(map);\n\t    }, timeLeft);\n\t\n\t    return false;\n\t  };\n\t\n\t  /**\n\t   * Zoom to the map\n\t   *\n\t   * handleWheelZoom\n\t   * @param map\n\t   * @private\n\t   */\n\t\n\t\n\t  MouseWheelZoom.prototype._handleWheelZoom = function _handleWheelZoom(map) {\n\t    var view = map.view;\n\t    // if (view.getAnimating()) {\n\t    //   view.cancelAnimations()\n\t    // }\n\t\n\t    var maxDelta = _config.Config.MOUSE_WHEEL_ZOOM_MAXDELTA;\n\t    var delta = (0, _math.clamp)(this._delta, -maxDelta, maxDelta);\n\t\n\t    this.zoomByDelta(view, -delta, this._lastAnchor, this._duration);\n\t\n\t    this._mode = undefined;\n\t    this._delta = 0;\n\t    this._lastAnchor = null;\n\t    this._startTime = undefined;\n\t    this._timeoutId = undefined;\n\t  };\n\t\n\t  return MouseWheelZoom;\n\t}(_component2.default);\n\t\n\texports.default = MouseWheelZoom;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 41 */\n/*!***************************************!*\\\n  !*** ./src/components/selectevent.js ***!\n  \\***************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _baseevent = __webpack_require__(/*! ../core/baseevent */ 12);\n\t\n\tvar _baseevent2 = _interopRequireDefault(_baseevent);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/5/25.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t/**\n\t * 选择结束时，SelectEvent将会被派发\n\t *\n\t * @class selectevent\n\t * @extends BaseObject\n\t * @module component\n\t *\n\t *\n\t */\n\t\n\tvar SelectEvent = function (_BaseEvent) {\n\t  _inherits(SelectEvent, _BaseEvent);\n\t\n\t  function SelectEvent(type, features, event) {\n\t    _classCallCheck(this, SelectEvent);\n\t\n\t    /**\n\t     * The feature being selected\n\t     */\n\t    var _this = _possibleConstructorReturn(this, _BaseEvent.call(this, type));\n\t\n\t    _this.selectedFeatures = features;\n\t\n\t    /**\n\t     *\n\t     */\n\t    _this.browserEvent = event;\n\t    return _this;\n\t  }\n\t\n\t  return SelectEvent;\n\t}(_baseevent2.default);\n\t\n\t/**\n\t * The select event\n\t * @type {{SELECT: string}}\n\t */\n\t\n\t\n\texports.default = SelectEvent;\n\tSelectEvent.EventType = {\n\t  /**\n\t   * Triggered upon features select\n\t   * @api stable\n\t   */\n\t  SELECT: 'select'\n\t\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 42 */\n/*!*****************************!*\\\n  !*** ./src/control/zoom.js ***!\n  \\*****************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _control = __webpack_require__(/*! ./control */ 20);\n\t\n\tvar _control2 = _interopRequireDefault(_control);\n\t\n\tvar _browserevent = __webpack_require__(/*! ../meek/browserevent */ 5);\n\t\n\tvar _browserevent2 = _interopRequireDefault(_browserevent);\n\t\n\tvar _eventmanager = __webpack_require__(/*! ../core/eventmanager */ 4);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/8/2.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar Zoom = function (_Control) {\n\t  _inherits(Zoom, _Control);\n\t\n\t  function Zoom() {\n\t    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t    _classCallCheck(this, Zoom);\n\t\n\t    var className = options.className !== undefined ? options.className : 'dt-zoom';\n\t\n\t    var delta = options.delta !== undefined ? options.delta : 1;\n\t\n\t    var zoomInLabel = options.zoomInLabel !== undefined ? options.zoomInLabel : '+';\n\t    var zoomOutLabel = options.zoomOutLabel !== undefined ? options.zoomOutLabel : '\\u2212';\n\t\n\t    var zoomInTipLabel = options.zoomInTipLabel !== undefined ? options.zoomInTipLabel : '放大';\n\t\n\t    var zoomOutTipLabel = options.zoomOutTipLabel !== undefined ? options.zoomOutTipLabel : '缩小';\n\t\n\t    var inElement = document.createElement('button');\n\t    inElement.className = className + '-in';\n\t    inElement.setAttribute('type', 'button');\n\t    inElement.title = zoomInTipLabel;\n\t    inElement.appendChild(typeof zoomInLabel === 'string' ? document.createTextNode(zoomInLabel) : zoomInLabel);\n\t\n\t    var outElement = document.createElement('button');\n\t    outElement.className = className + '-out';\n\t    outElement.setAttribute('type', 'button');\n\t    outElement.title = zoomOutTipLabel;\n\t    outElement.appendChild(typeof zoomOutLabel === 'string' ? document.createTextNode(zoomOutLabel) : zoomOutLabel);\n\t\n\t    var cssClasses = className + ' dt-unselectable dt-control';\n\t    var element = document.createElement('div');\n\t    element.className = cssClasses;\n\t    element.appendChild(inElement);\n\t    element.appendChild(outElement);\n\t\n\t    var _this = _possibleConstructorReturn(this, _Control.call(this, {\n\t      element: element,\n\t      target: options.target\n\t    }));\n\t\n\t    _this._delta = delta;\n\t\n\t    (0, _eventmanager.listen)(inElement, _browserevent2.default.CLICK, _this._handleClick, _this);\n\t    (0, _eventmanager.listen)(outElement, _browserevent2.default.CLICK, _this._handleClickIn, _this);\n\t    return _this;\n\t  }\n\t\n\t  Zoom.prototype._handleClickIn = function _handleClickIn(event) {\n\t    event.preventDefault();\n\t    this._zoomByDelta(-this._delta);\n\t  };\n\t\n\t  /**\n\t   * @param {number} delta Zoom delta.\n\t   * @param {Event} event The event to handle\n\t   * @private\n\t   */\n\t\n\t\n\t  Zoom.prototype._handleClick = function _handleClick(event) {\n\t    event.preventDefault();\n\t    this._zoomByDelta(this._delta);\n\t  };\n\t\n\t  /**\n\t   * @param {number} delta Zoom delta.\n\t   * @private\n\t   */\n\t\n\t\n\t  Zoom.prototype._zoomByDelta = function _zoomByDelta(delta) {\n\t    var map = this.map;\n\t    var view = map.view;\n\t    if (!view) {\n\t      return;\n\t    }\n\t\n\t    var currentResolution = view.resolution;\n\t    if (currentResolution) {\n\t      var newResolution = view.constrainResolution(currentResolution, delta);\n\t      view.resolution = newResolution;\n\t    }\n\t  };\n\t\n\t  return Zoom;\n\t}(_control2.default);\n\t\n\texports.default = Zoom;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 43 */\n/*!***************************!*\\\n  !*** ./src/core/event.js ***!\n  \\***************************/\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t/**\n\t * Created by zypc on 2016/11/13.\n\t */\n\t\n\t// The event processor for all subclasss, which can allow subclass\n\t// to handle event dispatching and listening.This is the top level class\n\t/**\n\t * 顶层事件处理器类,让子类具备事件的监听和派发\n\t *\n\t * @class Event\n\t * @module core\n\t * @constructor new Event()\n\t *\n\t */\n\tvar Event = function () {\n\t\n\t  /**\n\t   * Event's constructor\n\t   * @constructor constructor\n\t   */\n\t  function Event() {\n\t    _classCallCheck(this, Event);\n\t\n\t    this._pendingRemovals = {};\n\t\n\t    this._listeners = {};\n\t    this._dispatching = {};\n\t\n\t    this.nullFunction = function () {};\n\t  }\n\t\n\t  /**\n\t   * 根据事件标识获取对应标识的方法列表\n\t   *\n\t   * @method getListeners\n\t   * @param type {String} event type 事件标识\n\t   * @return {Array} 返回对应事件标示的函数数组\n\t   */\n\t\n\t\n\t  Event.prototype.getListeners = function getListeners(type) {\n\t    return this._listeners[type];\n\t  };\n\t\n\t  /**\n\t   * 判断是否含有对应事件标识的监听\n\t   *\n\t   * @method hasListener\n\t   * @param optType {Boolean}\n\t   * @returns {Boolean} ture if exsit ,false otherwise\n\t   */\n\t\n\t\n\t  Event.prototype.hasListener = function hasListener(optType) {\n\t    return optType ? Reflect.has(this._listeners, optType) : Object.keys(this._listeners).length > 0;\n\t  };\n\t\n\t  /**\n\t   * 移除事件监听\n\t   *\n\t   * @method removeEventListener\n\t   * @param type {String} event type\n\t   * @param listener {Array} listeners for event type\n\t   */\n\t\n\t\n\t  Event.prototype.removeEventListener = function removeEventListener(type, listener) {\n\t    var listeners = this._listeners[type];\n\t    if (listeners) {\n\t      var index = listeners.indexOf(listener);\n\t\n\t      if (Reflect.has(this._pendingRemovals, type)) {\n\t        listeners[index] = this.nullFunction;\n\t        ++this._pendingRemovals[type];\n\t      } else {\n\t        listeners.splice(index, 1);\n\t\n\t        if (listeners.length === 0) {\n\t          Reflect.deleteProperty(this._listeners, type);\n\t        }\n\t      }\n\t    }\n\t  };\n\t\n\t  /**\n\t   * 添加事件监听,需要指定事件标示和处理方法\n\t   *\n\t   * @example\n\t   *    map.addEventListener('singleclick', function(event) {})\n\t   *\n\t   * @method addEventListener\n\t   * @param type {String} event type\n\t   * @param listener {Array} listeners for event type\n\t   */\n\t\n\t\n\t  Event.prototype.addEventListener = function addEventListener(type, listener) {\n\t    var listeners = this._listeners[type];\n\t    if (!listeners) {\n\t      listeners = this._listeners[type] = [];\n\t    }\n\t\n\t    if (listeners.indexOf(listener) === -1) {\n\t      listeners.push(listener);\n\t    }\n\t  };\n\t\n\t  /**\n\t   * 事件派发\n\t   *\n\t   * @example\n\t   * this.dispatchEvent(EventType.CHANGE)\n\t   *\n\t   * @method dispatchEvent\n\t   * @param event {String} event type string\n\t   * @returns {Boolean} ture if success ,false otherwise.\n\t   */\n\t\n\t\n\t  Event.prototype.dispatchEvent = function dispatchEvent(event) {\n\t    var evt = typeof event === 'string' ? { type: event } : event;\n\t    var type = evt.type;\n\t    evt.target = this;\n\t    var listeners = this._listeners[type];\n\t    var propagate = void 0;\n\t\n\t    if (listeners) {\n\t      if (!Reflect.has(this._dispatching, type)) {\n\t        this._dispatching[type] = 0;\n\t        this._pendingRemovals[type] = 0;\n\t      }\n\t\n\t      ++this._dispatching[type];\n\t\n\t      for (var i = 0, ii = listeners.length; i < ii; ++i) {\n\t        if (listeners[i].call(this, evt) === false || evt.propagationStopped) {\n\t          propagate = false;\n\t          break;\n\t        }\n\t      }\n\t\n\t      --this._dispatching[type];\n\t\n\t      if (this._dispatching[type] === 0) {\n\t        var pendingRemovals = this._pendingRemovals[type];\n\t        Reflect.deleteProperty(this._pendingRemovals, type);\n\t\n\t        while (pendingRemovals--) {\n\t          this.removeEventListener(type, this.nullFunction);\n\t        }\n\t\n\t        Reflect.deleteProperty(this._dispatching, type);\n\t      }\n\t\n\t      return propagate;\n\t    }\n\t  };\n\t\n\t  return Event;\n\t}();\n\t\n\texports.default = Event;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 44 */\n/*!******************************!*\\\n  !*** ./src/lyr/baselayer.js ***!\n  \\******************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _baseobject = __webpack_require__(/*! ../core/baseobject */ 3);\n\t\n\tvar _baseobject2 = _interopRequireDefault(_baseobject);\n\t\n\tvar _eventmanager = __webpack_require__(/*! ../core/eventmanager */ 4);\n\t\n\tvar _eventtype = __webpack_require__(/*! ../meek/eventtype */ 6);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zypc on 2016/11/15.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * Layer基础类\n\t *\n\t * @class BaseLayer\n\t * @extends BaseObject\n\t * @module layer\n\t * @constructor\n\t */\n\tvar BaseLayer = function (_BaseObject) {\n\t  _inherits(BaseLayer, _BaseObject);\n\t\n\t  function BaseLayer(options) {\n\t    _classCallCheck(this, BaseLayer);\n\t\n\t    var _this = _possibleConstructorReturn(this, _BaseObject.call(this));\n\t\n\t    var baseOptions = Object.assign({}, options);\n\t\n\t    _this.name = baseOptions.name || '';\n\t    _this.visible = true;\n\t    _this.datasource = [];\n\t    _this.opacity = baseOptions.opacity !== undefined ? options.opacity : 1;\n\t    _this.dataExtent = null;\n\t    _this.maxResolution = 0;\n\t    _this.minResolution = 0;\n\t    _this.zIndex = baseOptions.zIndex || 0;\n\t\n\t    _this._mapRenderKey = null;\n\t\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * map读写器, 读取设置当前map\n\t   *\n\t   * @type {Function}\n\t   * @property map\n\t   * @param mapValue {Object} Datatang.map\n\t   */\n\t\n\t\n\t  /**\n\t   * 加载Feature\n\t   *\n\t   * @method loadFeature\n\t   * @returns {Object} features\n\t   */\n\t  BaseLayer.prototype.loadFeature = function loadFeature() {\n\t    return this.features;\n\t  };\n\t\n\t  _createClass(BaseLayer, [{\n\t    key: 'map',\n\t    get: function get() {\n\t      return this._map;\n\t    },\n\t    set: function set(value) {\n\t      if (this._mapRenderKey) {\n\t        (0, _eventmanager.unlistenByKey)(this._mapRenderKey);\n\t        this._mapRenderKey = null;\n\t      }\n\t\n\t      if (value) {\n\t        this._map = value;\n\t        this._mapRenderKey = (0, _eventmanager.listen)(this, _eventtype.EventType.CHANGE, value.render, value);\n\t        this.changed();\n\t      }\n\t    }\n\t\n\t    /**\n\t     * 设置图层是否显示(将会触发的重绘事件)\n\t     *\n\t     * @property visible\n\t     * @param value\n\t     */\n\t\n\t  }, {\n\t    key: 'visible',\n\t    get: function get() {\n\t      return this._visible;\n\t    },\n\t    set: function set(value) {\n\t      if (this._visible !== value) {\n\t        this._visible = value;\n\t      }\n\t    }\n\t\n\t    /**\n\t     * 设置图层的透明度(将会触发map的重绘事件)\n\t     *\n\t     * @property opacity\n\t     * @param value\n\t     */\n\t\n\t  }, {\n\t    key: 'opacity',\n\t    get: function get() {\n\t      return this._opacity;\n\t    },\n\t    set: function set(value) {\n\t      this._opacity = value;\n\t    }\n\t\n\t    /**\n\t     * 设置图层的最小分辨率\n\t     *\n\t     * @property minResolution\n\t     * @returns {*}\n\t     */\n\t\n\t  }, {\n\t    key: 'minResolution',\n\t    get: function get() {\n\t      return this._minResolution;\n\t    },\n\t    set: function set(value) {\n\t      this._minResolution = value;\n\t    }\n\t\n\t    /**\n\t     * 设置图层的最大分辨率\n\t     *\n\t     * @property maxResolution\n\t     * @returns {*}\n\t     */\n\t\n\t  }, {\n\t    key: 'maxResolution',\n\t    get: function get() {\n\t      return this._maxResolution;\n\t    },\n\t    set: function set(value) {\n\t      this._maxResolution = value;\n\t    }\n\t\n\t    /**\n\t     * dataExtent读取器\n\t     *\n\t     * @property dataExtent\n\t     * @returns {*}\n\t     */\n\t\n\t  }, {\n\t    key: 'dataExtent',\n\t    get: function get() {},\n\t    set: function set(value) {\n\t      this._dataExtent = value;\n\t    }\n\t\n\t    /**\n\t     * datasouce 读取器\n\t     *\n\t     * @property datasouce\n\t     * @returns {*}\n\t     */\n\t\n\t  }, {\n\t    key: 'datasouce',\n\t    get: function get() {\n\t      return this._datasource;\n\t    }\n\t  }, {\n\t    key: 'datasource',\n\t    set: function set(value) {\n\t      this._datasource = value;\n\t    }\n\t\n\t    /**\n\t     * zIndex读取器\n\t     *\n\t     * @property maxResolution\n\t     * @returns {*}\n\t     */\n\t\n\t  }, {\n\t    key: 'zIndex',\n\t    get: function get() {\n\t      return this._zIndex;\n\t    },\n\t    set: function set(value) {\n\t      if (this._zIndex !== value) {\n\t        this._zIndex = value;\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return BaseLayer;\n\t}(_baseobject2.default);\n\t\n\texports.default = BaseLayer;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 45 */\n/*!*************************************!*\\\n  !*** ./src/lyr/image/imageevent.js ***!\n  \\*************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _baseevent = __webpack_require__(/*! ../../core/baseevent */ 12);\n\t\n\tvar _baseevent2 = _interopRequireDefault(_baseevent);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/6/6.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar ImageEvent = function (_BaseEvent) {\n\t  _inherits(ImageEvent, _BaseEvent);\n\t\n\t  function ImageEvent(type, image) {\n\t    _classCallCheck(this, ImageEvent);\n\t\n\t    var _this = _possibleConstructorReturn(this, _BaseEvent.call(this, type));\n\t\n\t    _this.image = image;\n\t    return _this;\n\t  }\n\t\n\t  return ImageEvent;\n\t}(_baseevent2.default);\n\t\n\texports.default = ImageEvent;\n\t\n\t\n\tImageEvent.Type = {\n\t\n\t  /**\n\t   * Triggered when an image starts loading.\n\t   * @api\n\t   */\n\t  IMAGELOADSTART: 'imageloadstart',\n\t\n\t  /**\n\t   * Triggered when an image finishes loading.\n\t   * @api\n\t   */\n\t  IMAGELOADEND: 'imageloadend',\n\t\n\t  /**\n\t   * Triggered if image loading results in an error.\n\t   * @api\n\t   */\n\t  IMAGELOADERROR: 'imageloaderror'\n\t\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 46 */\n/*!**************************************!*\\\n  !*** ./src/lyr/image/singleimage.js ***!\n  \\**************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _baseimage = __webpack_require__(/*! ../../core/baseimage */ 68);\n\t\n\tvar _baseimage2 = _interopRequireDefault(_baseimage);\n\t\n\tvar _imagestate = __webpack_require__(/*! ./imagestate */ 23);\n\t\n\tvar _obj = __webpack_require__(/*! ../../utils/obj */ 15);\n\t\n\tvar _obj2 = _interopRequireDefault(_obj);\n\t\n\tvar _extentutil = __webpack_require__(/*! ../../geometry/support/extentutil */ 2);\n\t\n\tvar _eventtype = __webpack_require__(/*! ../../meek/eventtype */ 6);\n\t\n\tvar _eventmanager = __webpack_require__(/*! ../../core/eventmanager */ 4);\n\t\n\tvar _counter = __webpack_require__(/*! ../../utils/counter */ 36);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/6/6.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar SingleImage = function (_BaseImage) {\n\t  _inherits(SingleImage, _BaseImage);\n\t\n\t  function SingleImage(extent, resolution, pixelRatio, attributions, src, crossOrigin, imageLoadFunction) {\n\t    _classCallCheck(this, SingleImage);\n\t\n\t    /**\n\t     * @private\n\t     * @type {string}\n\t     */\n\t    var _this = _possibleConstructorReturn(this, _BaseImage.call(this, extent, resolution, pixelRatio, _imagestate.ImageState.IDLE, attributions));\n\t\n\t    _this._src = src;\n\t\n\t    /**\n\t     * @private\n\t     * @type {HTMLCanvasElement|Image|HTMLVideoElement}\n\t     */\n\t    _this.domImage = new Image();\n\t    if (crossOrigin !== null) {\n\t      _this.getDomImage().crossOrigin = crossOrigin;\n\t    }\n\t\n\t    /**\n\t     * @private\n\t     * @type {Object.<number, (HTMLCanvasElement|Image|HTMLVideoElement)>}\n\t     */\n\t    _this._imageByContext = {};\n\t\n\t    /**\n\t     * @private\n\t     * @type {Array.<EventsKey>}\n\t     */\n\t    _this._imageListenerKeys = null;\n\t\n\t    /**\n\t     * @protected\n\t     * @type {ImageState}\n\t     */\n\t    _this.state = _imagestate.ImageState.IDLE;\n\t\n\t    /**\n\t     * @private\n\t     * @type {ImageLoadFunctionType}\n\t     */\n\t    _this._imageLoadFunction = imageLoadFunction;\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * @inheritDoc\n\t   * @api\n\t   */\n\t\n\t\n\t  SingleImage.prototype.getDomImage = function getDomImage(opt_context) {\n\t    if (opt_context !== undefined) {\n\t      var image = void 0;\n\t      var key = (0, _counter.getUid)(opt_context);\n\t\n\t      if (key in this._imageByContext) {\n\t        return this._imageByContext[key];\n\t      } else if (_obj2.default.isEmpty(this._imageByContext)) {\n\t        image = this._domImage;\n\t      } else {\n\t        image = this._domImage.cloneNode(false);\n\t      }\n\t\n\t      this._imageByContext[key] = image;\n\t      return image;\n\t    } else {\n\t      return this._domImage;\n\t    }\n\t  };\n\t\n\t  /**\n\t   * Tracks loading or read errors.\n\t   *\n\t   * @private\n\t   */\n\t\n\t\n\t  SingleImage.prototype._handleImageError = function _handleImageError() {\n\t    this.state = _imagestate.ImageState.ERROR;\n\t    this._unlistenImage();\n\t    this.changed();\n\t  };\n\t\n\t  /**\n\t   * Tracks successful image load.\n\t   *\n\t   * @private\n\t   */\n\t\n\t\n\t  SingleImage.prototype._handleImageLoad = function _handleImageLoad() {\n\t    if (this.resolution === undefined) {\n\t      this.resolution = _extentutil.ExtentUtil.getHeight(this.extent) / this.getDomImage().height;\n\t    }\n\t\n\t    this.state = _imagestate.ImageState.LOADED;\n\t    this._unlistenImage();\n\t    this.changed();\n\t  };\n\t\n\t  /**\n\t   * Load the image or retry if loading previously failed.\n\t   * Loading is taken care of by the tile queue, and calling this method is\n\t   * only needed for preloading or for reloading in case of an error.\n\t   * @override\n\t   * @api\n\t   */\n\t\n\t\n\t  SingleImage.prototype.load = function load() {\n\t    if (this.state === _imagestate.ImageState.IDLE || this.state === _imagestate.ImageState.ERROR) {\n\t      this.state = _imagestate.ImageState.LOADING;\n\t      this.changed();\n\t      this._imageListenerKeys = [(0, _eventmanager.listenOnce)(this.getDomImage(), _eventtype.EventType.ERROR, this._handleImageError, this), (0, _eventmanager.listenOnce)(this.getDomImage(), _eventtype.EventType.LOAD, this._handleImageLoad, this)];\n\t\n\t      this._imageLoadFunction(this, this._src);\n\t    }\n\t  };\n\t\n\t  /**\n\t   * @param {HTMLCanvasElement|Image|HTMLVideoElement} image Image.\n\t   */\n\t\n\t\n\t  /**\n\t   * Discards event handlers which listen for load completion or errors.\n\t   *\n\t   * @private\n\t   */\n\t  SingleImage.prototype._unlistenImage = function _unlistenImage() {\n\t    this._imageListenerKeys.forEach(_eventmanager.unlistenByKey);\n\t    this._imageListenerKeys = null;\n\t  };\n\t\n\t  _createClass(SingleImage, [{\n\t    key: 'domImage',\n\t    set: function set(value) {\n\t      this._domImage = value;\n\t    }\n\t  }]);\n\t\n\t  return SingleImage;\n\t}(_baseimage2.default);\n\t\n\texports.default = SingleImage;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 47 */\n/*!*************************************!*\\\n  !*** ./src/lyr/singleimagelayer.js ***!\n  \\*************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _baselayer = __webpack_require__(/*! ./baselayer */ 44);\n\t\n\tvar _baselayer2 = _interopRequireDefault(_baselayer);\n\t\n\tvar _singleimage = __webpack_require__(/*! ../lyr/image/singleimage */ 46);\n\t\n\tvar _singleimage2 = _interopRequireDefault(_singleimage);\n\t\n\tvar _eventmanager = __webpack_require__(/*! ../core/eventmanager */ 4);\n\t\n\tvar _domutil = __webpack_require__(/*! ../utils/domutil */ 18);\n\t\n\tvar _imageevent = __webpack_require__(/*! ../lyr/image/imageevent */ 45);\n\t\n\tvar _imageevent2 = _interopRequireDefault(_imageevent);\n\t\n\tvar _eventtype = __webpack_require__(/*! ../meek/eventtype */ 6);\n\t\n\tvar _imagestate = __webpack_require__(/*! ../lyr/image/imagestate */ 23);\n\t\n\tvar _extentutil = __webpack_require__(/*! ../geometry/support/extentutil */ 2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zypc on 2016/11/15.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * SingleImageLayer\n\t *\n\t * @class SingleImageLayer\n\t * @extends BaseObject\n\t * @module layer\n\t * @constructor\n\t */\n\tvar SingleImageLayer = function (_BaseLayer) {\n\t  _inherits(SingleImageLayer, _BaseLayer);\n\t\n\t  /**\n\t   * @constructor\n\t   * @param options\n\t   */\n\t  function SingleImageLayer() {\n\t    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t    _classCallCheck(this, SingleImageLayer);\n\t\n\t    var _this = _possibleConstructorReturn(this, _BaseLayer.call(this, options));\n\t\n\t    var imageExtent = options.imageExtent;\n\t    _this.dataExtent = imageExtent;\n\t\n\t    var crossOrigin = options.crossOrigin !== undefined ? options.crossOrigin : null;\n\t\n\t    var imageLoadFunction = options.imageLoadFunction !== undefined ? options.imageLoadFunction : _this.defaultImageLoadFunction;\n\t\n\t    _this.attributions = options.attributions;\n\t\n\t    /**\n\t     * @private\n\t     */\n\t    _this._singleImage = new _singleimage2.default(imageExtent, undefined, 1, _this.attributions, options.url, crossOrigin, imageLoadFunction);\n\t\n\t    /**\n\t     * @private\n\t     * @type {ol.Size}\n\t     */\n\t    _this._imageSize = options.imageSize ? options.imageSize : null;\n\t\n\t    /**\n\t     * Listen the change event for SingleImage\n\t     */\n\t    (0, _eventmanager.listen)(_this.singleImage, _eventtype.EventType.CHANGE, _this.handleImageChange, _this);\n\t\n\t    /**\n\t     *\n\t     * @type {number}\n\t     */\n\t    _this.zIndex = 0;\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * 设置图片链接\n\t   *\n\t   * @method imageSrc\n\t   * @param url {String}\n\t   *\n\t   */\n\t\n\t\n\t  /**\n\t   *\n\t   * @param image\n\t   * @param src\n\t   */\n\t  SingleImageLayer.prototype.defaultImageLoadFunction = function defaultImageLoadFunction(image, src) {\n\t    image.getDomImage().src = src;\n\t  };\n\t\n\t  /**\n\t   * 获取图片的Dom\n\t   * @inheritDoc\n\t   */\n\t\n\t\n\t  SingleImageLayer.prototype.getImageInternal = function getImageInternal(extent) {\n\t    if (_extentutil.ExtentUtil.intersects(extent, this.singleImage.extent)) {\n\t      return this.singleImage;\n\t    }\n\t\n\t    return null;\n\t  };\n\t\n\t  /**\n\t   * Handle the image change event\n\t   * @param evt\n\t   */\n\t\n\t\n\t  SingleImageLayer.prototype.handleImageChange = function handleImageChange(evt) {\n\t    if (this.singleImage.state === _imagestate.ImageState.LOADED) {\n\t      var imageExtent = this.singleImage.extent;\n\t      var image = this.singleImage.getDomImage();\n\t      var imageWidth = void 0,\n\t          imageHeight = void 0;\n\t      if (this._imageSize) {\n\t        imageWidth = this._imageSize[0];\n\t        imageHeight = this._imageSize[1];\n\t      } else {\n\t        imageWidth = image.width;\n\t        imageHeight = image.height;\n\t      }\n\t\n\t      var resolution = _extentutil.ExtentUtil.getHeight(imageExtent) / imageHeight;\n\t      var targetWidth = Math.ceil(_extentutil.ExtentUtil.getWidth(imageExtent) / resolution);\n\t\n\t      if (targetWidth !== imageWidth) {\n\t        var context = (0, _domutil.createCanvasContext2D)(targetWidth, imageHeight);\n\t        var canvas = context.canvas;\n\t        context.drawImage(image, 0, 0, imageWidth, imageHeight, 0, 0, canvas.width, canvas.height);\n\t        // Pre-load image\n\t        this.singleImage.domImage = canvas;\n\t      }\n\t    }\n\t\n\t    this._dispatchImageEvent(evt);\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param event\n\t   * @private\n\t   */\n\t\n\t\n\t  SingleImageLayer.prototype._dispatchImageEvent = function _dispatchImageEvent(event) {\n\t    var image = event.target;\n\t    switch (image.state) {\n\t      case _imagestate.ImageState.LOADING:\n\t        this.dispatchEvent(new _imageevent2.default(_imageevent2.default.Type.IMAGELOADSTART, image));\n\t        break;\n\t      case _imagestate.ImageState.LOADED:\n\t        this.dispatchEvent(new _imageevent2.default(_imageevent2.default.Type.IMAGELOADEND, image));\n\t        break;\n\t      case _imagestate.ImageState.ERROR:\n\t        this.dispatchEvent(new _imageevent2.default(_imageevent2.default.Type.IMAGELOADERROR, image));\n\t        break;\n\t      default:\n\t      // pass\n\t    }\n\t  };\n\t\n\t  _createClass(SingleImageLayer, [{\n\t    key: 'imageSrc',\n\t    set: function set(url) {\n\t      this._singleImage._src = url;\n\t      this._singleImage.domImage = new Image();\n\t      this._singleImage.state = _imagestate.ImageState.IDLE;\n\t    }\n\t\n\t    /**\n\t     * 获取singleImage\n\t     *\n\t     * @property singleImage\n\t     * @returns {SingleImage}\n\t     */\n\t\n\t  }, {\n\t    key: 'singleImage',\n\t    get: function get() {\n\t      return this._singleImage;\n\t    }\n\t\n\t    /**\n\t     * 属性读写器\n\t     *\n\t     * @property attributions\n\t     * @param value\n\t     */\n\t\n\t  }, {\n\t    key: 'attributions',\n\t    set: function set(value) {\n\t      this._attributes = value;\n\t    },\n\t    get: function get() {\n\t      return this._attributes || null;\n\t    }\n\t  }]);\n\t\n\t  return SingleImageLayer;\n\t}(_baselayer2.default);\n\t\n\texports.default = SingleImageLayer;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 48 */\n/*!**********************************!*\\\n  !*** ./src/meek/featureevent.js ***!\n  \\**********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _baseevent = __webpack_require__(/*! ../core/baseevent */ 12);\n\t\n\tvar _baseevent2 = _interopRequireDefault(_baseevent);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/6/9.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * FeatureEvent类\n\t *\n\t * @class FeatureEvent\n\t * @extends baseevent\n\t * @module meek\n\t */\n\tvar FeatureEvent = function (_BaseEvent) {\n\t  _inherits(FeatureEvent, _BaseEvent);\n\t\n\t  function FeatureEvent(type, feature) {\n\t    _classCallCheck(this, FeatureEvent);\n\t\n\t    var _this = _possibleConstructorReturn(this, _BaseEvent.call(this, type));\n\t\n\t    _this.feature = feature;\n\t    return _this;\n\t  }\n\t\n\t  return FeatureEvent;\n\t}(_baseevent2.default);\n\t\n\t/**\n\t * Feature event definition\n\t * @type {{ADD_FEATURE: string, REMOVE_FEATURE: string, CLEAR: string}}\n\t */\n\t\n\t\n\texports.default = FeatureEvent;\n\tFeatureEvent.EventType = {\n\t\n\t  /**\n\t   * Triggered when a feature is added.\n\t   */\n\t  ADD_FEATURE: 'addfeature',\n\t\n\t  /**\n\t   * Triggered when a feature is removed.\n\t   */\n\t  REMOVE_FEATURE: 'removefeature',\n\t\n\t  /**\n\t   * Triggered when all features are removed.\n\t   */\n\t  CLEAR: 'clear',\n\t\n\t  /**\n\t   * Triggered when the feature collection has been changed.\n\t   */\n\t  FEATURE_COLLECTION_CHANGED: 'featurecollectionchanged'\n\t\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 49 */\n/*!**************************!*\\\n  !*** ./src/meek/view.js ***!\n  \\**************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _baseobject = __webpack_require__(/*! ../core/baseobject */ 3);\n\t\n\tvar _baseobject2 = _interopRequireDefault(_baseobject);\n\t\n\tvar _extentutil = __webpack_require__(/*! ../geometry/support/extentutil */ 2);\n\t\n\tvar _config = __webpack_require__(/*! ../meek/config */ 34);\n\t\n\tvar _array = __webpack_require__(/*! ../utils/array */ 27);\n\t\n\tvar _math = __webpack_require__(/*! ../utils/math */ 28);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/3/23.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * View 视图类\n\t *\n\t * @class View\n\t * @extends BaseObject\n\t * @module meek\n\t * @constructor\n\t */\n\tvar View = function (_BaseObject) {\n\t  _inherits(View, _BaseObject);\n\t\n\t  /**\n\t   * @constructor\n\t   * @param options\n\t   */\n\t  function View(options) {\n\t    _classCallCheck(this, View);\n\t\n\t    var _this = _possibleConstructorReturn(this, _BaseObject.call(this));\n\t\n\t    var _innerOptions = Object.assign({}, options);\n\t\n\t    _this._applyOptions(_innerOptions);\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * Parse options and apply to view\n\t   * @param options\n\t   * @private\n\t   */\n\t\n\t\n\t  View.prototype._applyOptions = function _applyOptions(options) {\n\t\n\t    var resolutionConstraint = this._createResolutionConstraint(options);\n\t\n\t    /**\n\t     * @private\n\t     * @type {number}\n\t     */\n\t    this._maxResolution = resolutionConstraint.maxResolution;\n\t\n\t    /**\n\t     * @private\n\t     * @type {number}\n\t     */\n\t    this._minResolution = resolutionConstraint.minResolution;\n\t\n\t    /**\n\t     * @private\n\t     * @type {number}\n\t     */\n\t    this._zoomFactor = resolutionConstraint.zoomFactor;\n\t\n\t    /**\n\t     * @private\n\t     * @type {Array.<number>|undefined}\n\t     */\n\t    this._resolutions = options.resolutions;\n\t\n\t    /**\n\t     * @private\n\t     * @type {number}\n\t     */\n\t    this._minZoom = resolutionConstraint.minZoom;\n\t\n\t    var centerConstraint = this._createCenterConstraint(options);\n\t    var constraint = resolutionConstraint.constraint;\n\t    var rotationConstraint = this._createRotationConstraint(options);\n\t\n\t    /**\n\t     * center、resolution、ratation\n\t     * @private\n\t     */\n\t    this._constraints = {\n\t      center: centerConstraint,\n\t      resolution: constraint,\n\t      rotation: rotationConstraint\n\t    };\n\t\n\t    this.center = options.center !== undefined ? options.center : this._calculateCenter();\n\t\n\t    this.resolution = options.resolution !== undefined ? options.resolution : this.constrainResolution(this._maxResolution, options.zoom - this._minZoom);\n\t\n\t    // 记录原始 view 参数\n\t    this._originalCenter = this.center;\n\t    this._originalResolution = this.resolution;\n\t\n\t    this.rotation = 0;\n\t\n\t    this.dataExtent = resolutionConstraint.extent;\n\t\n\t    this._options = options;\n\t  };\n\t\n\t  View.prototype._createRotationConstraint = function _createRotationConstraint() {\n\t    return 0;\n\t  };\n\t\n\t  /**\n\t   * 创建视图中心限制条件\n\t   *\n\t   * @method createCenterConstraint\n\t   * @param options\n\t   * @returns {Function}\n\t   * @private\n\t   */\n\t\n\t\n\t  View.prototype._createCenterConstraint = function _createCenterConstraint() {\n\t    return function (center) {\n\t      return center;\n\t    };\n\t  };\n\t\n\t  /**\n\t   * 创建分辨率限制条件\n\t   *\n\t   * @method createResolutionConstraint\n\t   * @param options\n\t   * @returns {{constraint: *, maxResolution: *, minResolution: *, minZoom: *, zoomFactor: number}}\n\t   * @private\n\t   */\n\t\n\t\n\t  View.prototype._createResolutionConstraint = function _createResolutionConstraint(options) {\n\t    var resolutionConstraint = void 0;\n\t    var maxResolution = void 0;\n\t    var minResolution = void 0;\n\t    var extent = void 0;\n\t\n\t    var defaultMaxZoom = _config.Config.DEFAULT_MAX_ZOOM;\n\t    var defaultZoomFactor = _config.Config.DEFAULT_ZOOM_FACTOR;\n\t    var defaultMinZoom = _config.Config.DEFAULT_MIN_ZOOM;\n\t    var defaultTileSize = _config.Config.DEFAULT_TILE_SIZE;\n\t\n\t    var minZoom = options.minZoom !== undefined ? options.minZoom : defaultMinZoom;\n\t\n\t    var maxZoom = options.maxZoom !== undefined ? options.maxZoom : defaultMaxZoom;\n\t\n\t    var zoomFactor = options.zoomFactor !== undefined ? options.zoomFactor : defaultZoomFactor;\n\t\n\t    var projection = options.projection;\n\t    extent = projection.extent;\n\t\n\t    if (options.resolutions !== undefined) {\n\t      var resolutions = options.resolutions;\n\t      maxResolution = resolutions[0];\n\t      minResolution = resolutions[resolutions.length - 1];\n\t      resolutionConstraint = this.createSnapToResolutions(resolutions);\n\t    } else {\n\t      // calculate the default min and max resolution\n\t      var size = Math.max(_extentutil.ExtentUtil.getWidth(extent), _extentutil.ExtentUtil.getHeight(extent));\n\t      var defaultMaxResolution = size / defaultTileSize / Math.pow(defaultZoomFactor, defaultMinZoom);\n\t\n\t      var defaultMinResolution = defaultMaxResolution / Math.pow(defaultZoomFactor, defaultMaxZoom - defaultMinZoom);\n\t\n\t      // user provided maxResolution takes precedence\n\t      maxResolution = options.maxResolution;\n\t      if (maxResolution !== undefined) {\n\t        minZoom = 0;\n\t      } else {\n\t        maxResolution = defaultMaxResolution / Math.pow(zoomFactor, minZoom);\n\t      }\n\t\n\t      // user provided minResolution takes precedence\n\t      minResolution = options.minResolution;\n\t      if (minResolution === undefined) {\n\t        if (options.maxZoom !== undefined) {\n\t          if (options.maxResolution !== undefined) {\n\t            minResolution = maxResolution / Math.pow(zoomFactor, maxZoom);\n\t          } else {\n\t            minResolution = defaultMaxResolution / Math.pow(zoomFactor, maxZoom);\n\t          }\n\t        } else {\n\t          minResolution = defaultMinResolution;\n\t        }\n\t      }\n\t\n\t      // given discrete zoom levels, minResolution may be different than provided\n\t      maxZoom = minZoom + Math.floor(Math.log(maxResolution / minResolution) / Math.log(zoomFactor));\n\t      minResolution = maxResolution / Math.pow(zoomFactor, maxZoom - minZoom);\n\t\n\t      resolutionConstraint = this.createSnapToPower(zoomFactor, maxResolution, maxZoom - minZoom);\n\t    }\n\t\n\t    return {\n\t      constraint: resolutionConstraint,\n\t      maxResolution: maxResolution,\n\t      minResolution: minResolution,\n\t      minZoom: minZoom,\n\t      zoomFactor: zoomFactor,\n\t      extent: extent\n\t    };\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param power\n\t   * @param maxResolution\n\t   * @param opt_maxLevel\n\t   * @returns {Function}\n\t   */\n\t\n\t\n\t  View.prototype.createSnapToPower = function createSnapToPower(power, maxResolution, opt_maxLevel) {\n\t    return function (resolution, delta, direction) {\n\t      if (resolution !== undefined) {\n\t        var offset = -direction / 2 + 0.5;\n\t        var oldLevel = Math.floor(Math.log(maxResolution / resolution) / Math.log(power) + offset);\n\t        var newLevel = Math.max(oldLevel + delta, 0);\n\t        if (opt_maxLevel !== undefined) {\n\t          newLevel = Math.min(newLevel, opt_maxLevel);\n\t        }\n\t\n\t        var reso = maxResolution / Math.pow(power, newLevel);\n\t        return reso;\n\t      } else {\n\t        return undefined;\n\t      }\n\t    };\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param resolutions\n\t   * @returns {Function}\n\t   */\n\t\n\t\n\t  View.prototype.createSnapToResolutions = function createSnapToResolutions(resolutions) {\n\t    return function (resolution, delta, direction) {\n\t      if (resolution !== undefined) {\n\t        var z = (0, _array.linearFindNearest)(resolutions, resolution, direction);\n\t        z = (0, _math.clamp)(z + delta, 0, resolutions.length - 1);\n\t        var index = Math.floor(z);\n\t        if (z != index && index < resolutions.length - 1) {\n\t          var power = resolutions[index] / resolutions[index + 1];\n\t          return resolutions[index] / Math.pow(power, z - index);\n\t        } else {\n\t          return resolutions[index];\n\t        }\n\t      } else {\n\t        return undefined;\n\t      }\n\t    };\n\t  };\n\t\n\t  View.prototype._calculateCenter = function _calculateCenter() {\n\t    return [500, 500];\n\t  };\n\t\n\t  /**\n\t   * 获取视图状态\n\t   *\n\t   * @method getViewState\n\t   * @returns {{center: (ArrayBuffer|*|Array.<T>|Blob|string), resolution: *, rotation: *}}\n\t   */\n\t\n\t\n\t  View.prototype.getViewState = function getViewState() {\n\t    var center = this.center;\n\t    var resolution = this.resolution;\n\t    var rotation = this.rotation;\n\t\n\t    return {\n\t      center: center.slice(),\n\t      resolution: resolution,\n\t      rotation: rotation\n\t    };\n\t  };\n\t\n\t  /**\n\t   * 分辨率限制\n\t   *\n\t   * @method constrainResolution\n\t   * @param resolution\n\t   * @param opt_delta\n\t   * @param opt_direction\n\t   * @returns {*}\n\t   */\n\t\n\t\n\t  View.prototype.constrainResolution = function constrainResolution(resolution, opt_delta, opt_direction) {\n\t    var delta = opt_delta || 0;\n\t    var direction = opt_direction || 0;\n\t    return this._constraints.resolution(resolution, delta, direction);\n\t  };\n\t\n\t  /**\n\t   * 计算缩放中心点\n\t   *\n\t   * @method calculateCenterZoom\n\t   * @param resolution {Number}\n\t   * @param anchor {Number}\n\t   * @returns {Array}\n\t   */\n\t\n\t\n\t  View.prototype.calculateCenterZoom = function calculateCenterZoom(resolution, anchor) {\n\t    var center = void 0;\n\t    var currentCenter = this.center;\n\t    var currentResolution = this.resolution;\n\t    if (currentCenter !== undefined && currentResolution !== undefined) {\n\t      var x = anchor[0] - resolution * (anchor[0] - currentCenter[0]) / currentResolution;\n\t      var y = anchor[1] - resolution * (anchor[1] - currentCenter[1]) / currentResolution;\n\t      center = [x, y];\n\t    }\n\t\n\t    return center;\n\t  };\n\t\n\t  /**\n\t   * 是否限制视图中心\n\t   *\n\t   * @method constrainCenter\n\t   * @param center\n\t   * @returns {Boolean}\n\t   */\n\t\n\t\n\t  View.prototype.constrainCenter = function constrainCenter(center) {\n\t    this._constraints.center = center;\n\t    this._center = center;\n\t    return true;\n\t  };\n\t\n\t  /**\n\t   * 视图中心点读写器\n\t   *\n\t   * @property center\n\t   * @return {*}\n\t   */\n\t\n\t\n\t  _createClass(View, [{\n\t    key: 'center',\n\t    get: function get() {\n\t      return this._center;\n\t    },\n\t    set: function set(value) {\n\t      this.constrainCenter(value);\n\t      this.changed();\n\t    }\n\t\n\t    /**\n\t     * 分辨率读写器\n\t     *\n\t     * @property resolution\n\t     * @return {*}\n\t     */\n\t\n\t  }, {\n\t    key: 'resolution',\n\t    get: function get() {\n\t      return this._resolution;\n\t    },\n\t    set: function set(value) {\n\t      this._resolution = value;\n\t\n\t      this.changed();\n\t    }\n\t\n\t    /**\n\t     * 旋转率读写器\n\t     *\n\t     * @property rotation\n\t     * @return {*}\n\t     */\n\t\n\t  }, {\n\t    key: 'rotation',\n\t    get: function get() {\n\t      return this._rotation;\n\t    },\n\t    set: function set(value) {\n\t      this._rotation = value;\n\t    }\n\t\n\t    /**\n\t     * dataExtent读写器\n\t     *\n\t     * @property dataExtent\n\t     * @return {*}\n\t     */\n\t\n\t  }, {\n\t    key: 'dataExtent',\n\t    get: function get() {\n\t      return this._dataExtent;\n\t    },\n\t    set: function set(value) {\n\t      this._dataExtent = value;\n\t    }\n\t\n\t    /**\n\t     * 获取最小分辨率\n\t     *\n\t     * @property minResolution\n\t     * @return {Number}\n\t     */\n\t\n\t  }, {\n\t    key: 'minResolution',\n\t    get: function get() {\n\t      return this._minResolution;\n\t    }\n\t\n\t    /**\n\t     * 获取最大分辨率\n\t     *\n\t     * @property maxResolution\n\t     * @returns {Number}\n\t     */\n\t\n\t  }, {\n\t    key: 'maxResolution',\n\t    get: function get() {\n\t      return this._maxResolution;\n\t    }\n\t\n\t    /**\n\t     * 获取初始设置的地图中心点\n\t     *\n\t     * @property originalCenter\n\t     * @type {Array}\n\t     */\n\t\n\t  }, {\n\t    key: 'originalCenter',\n\t    get: function get() {\n\t      return this._originalCenter;\n\t    }\n\t\n\t    /**\n\t     * 获取初始设置的地图级别\n\t     *\n\t     * @property originalResolution\n\t     * @type {Number}\n\t     */\n\t\n\t  }, {\n\t    key: 'originalResolution',\n\t    get: function get() {\n\t      return this._originalResolution;\n\t    }\n\t  }]);\n\t\n\t  return View;\n\t}(_baseobject2.default);\n\t\n\texports.default = View;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 50 */\n/*!**********************************************!*\\\n  !*** ./src/renderer/canvas/layerrenderer.js ***!\n  \\**********************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _baseobject = __webpack_require__(/*! ../../core/baseobject */ 3);\n\t\n\tvar _baseobject2 = _interopRequireDefault(_baseobject);\n\t\n\tvar _transform = __webpack_require__(/*! ../../data/matrix/transform */ 7);\n\t\n\tvar _extentutil = __webpack_require__(/*! ../../geometry/support/extentutil */ 2);\n\t\n\tvar _imagestate = __webpack_require__(/*! ../../lyr/image/imagestate */ 23);\n\t\n\tvar _eventtype = __webpack_require__(/*! ../../meek/eventtype */ 6);\n\t\n\tvar _canvas = __webpack_require__(/*! ../../utils/canvas */ 54);\n\t\n\tvar _eventmanager = __webpack_require__(/*! ../../core/eventmanager */ 4);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/3/20.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar LayerRenderer = function (_BaseObject) {\n\t  _inherits(LayerRenderer, _BaseObject);\n\t\n\t  function LayerRenderer(layer, context) {\n\t    _classCallCheck(this, LayerRenderer);\n\t\n\t    var _this = _possibleConstructorReturn(this, _BaseObject.call(this));\n\t\n\t    _this._context = context;\n\t    _this._layer = layer;\n\t\n\t    _this.renderedResolution = undefined;\n\t\n\t    _this._transform = _extentutil.ExtentUtil.createEmpty();\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   *\n\t   * @param frameState\n\t   * @param offsetX\n\t   * @returns {*|!Transform}\n\t   */\n\t\n\t\n\t  LayerRenderer.prototype.getTransform = function getTransform(frameState, offsetX) {\n\t    var viewState = frameState.viewState;\n\t    var pixelRatio = 1;\n\t    var dx1 = pixelRatio * frameState.size[0] / 2;\n\t    var dy1 = pixelRatio * frameState.size[1] / 2;\n\t    var sx = pixelRatio / viewState.resolution;\n\t    var sy = sx;\n\t    var angle = -viewState.rotation;\n\t    var dx2 = -viewState.center[0] + offsetX;\n\t    var dy2 = -viewState.center[1];\n\t    return _transform.Transform.compose(this._transform, dx1, dy1, sx, sy, angle, dx2, dy2);\n\t  };\n\t\n\t  /**\n\t   * Load the image\n\t   * @param image\n\t   * @returns {boolean}\n\t   */\n\t\n\t\n\t  LayerRenderer.prototype.loadImage = function loadImage(image) {\n\t    var imageState = image.state;\n\t    if (imageState !== _imagestate.ImageState.LOADED && imageState !== _imagestate.ImageState.ERROR) {\n\t      (0, _eventmanager.listen)(image, _eventtype.EventType.CHANGE, this._handleImageChange, this);\n\t    }\n\t\n\t    if (imageState === _imagestate.ImageState.IDLE) {\n\t      image.load();\n\t      imageState = image.state;\n\t    }\n\t\n\t    return imageState === _imagestate.ImageState.LOADED;\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param event\n\t   * @private\n\t   */\n\t\n\t\n\t  LayerRenderer.prototype._handleImageChange = function _handleImageChange(event) {\n\t    var image = event.target;\n\t    if (image.state === _imagestate.ImageState.LOADED) {\n\t      this.renderIfReadyAndVisible();\n\t    }\n\t  };\n\t\n\t  /**\n\t   *\n\t   */\n\t\n\t\n\t  LayerRenderer.prototype.renderIfReadyAndVisible = function renderIfReadyAndVisible() {\n\t    var layer = this.layer;\n\t    // if (layer.visible && layer.getSourceState() == State.READY) {\n\t    if (layer.visible) {\n\t      layer.changed();\n\t      // this.changed()\n\t    }\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param context\n\t   * @param frameState\n\t   * @param extent\n\t   */\n\t\n\t\n\t  LayerRenderer.prototype.clip = function clip(context, frameState, extent) {\n\t    var pixelRatio = frameState.pixelRatio;\n\t    var width = frameState.size[0] * pixelRatio;\n\t    var height = frameState.size[1] * pixelRatio;\n\t    var rotation = frameState.viewState.rotation;\n\t    var topLeft = _extentutil.ExtentUtil.getTopLeft(extent);\n\t    var topRight = _extentutil.ExtentUtil.getTopRight(extent);\n\t    var bottomRight = _extentutil.ExtentUtil.getBottomRight(extent);\n\t    var bottomLeft = _extentutil.ExtentUtil.getBottomLeft(extent);\n\t\n\t    _transform.Transform.apply(frameState.toPixelTransform, topLeft);\n\t    _transform.Transform.apply(frameState.toPixelTransform, topRight);\n\t    _transform.Transform.apply(frameState.toPixelTransform, bottomRight);\n\t    _transform.Transform.apply(frameState.toPixelTransform, bottomLeft);\n\t\n\t    context.save();\n\t    _canvas.Canvas.rotateAtOffset(context, -rotation, width / 2, height / 2);\n\t    context.beginPath();\n\t    context.moveTo(topLeft[0] * pixelRatio, topLeft[1] * pixelRatio);\n\t    context.lineTo(topRight[0] * pixelRatio, topRight[1] * pixelRatio);\n\t    context.lineTo(bottomRight[0] * pixelRatio, bottomRight[1] * pixelRatio);\n\t    context.lineTo(bottomLeft[0] * pixelRatio, bottomLeft[1] * pixelRatio);\n\t    context.clip();\n\t    _canvas.Canvas.rotateAtOffset(context, rotation, width / 2, height / 2);\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @returns {*}\n\t   */\n\t\n\t\n\t  /**\n\t   *\n\t   * @param frameStateOpt\n\t   */\n\t  LayerRenderer.prototype.prepareFrame = function prepareFrame(frameStateOpt) {}; // eslint-disable-line no-unused-vars\n\t\n\t  /**\n\t   *\n\t   * @param frameStateOpt\n\t   * @param context\n\t   */\n\t\n\t\n\t  LayerRenderer.prototype.composeFrame = function composeFrame(frameStateOpt, context) {}; // eslint-disable-line no-unused-vars\n\t\n\t  /**\n\t   *\n\t   * @param context\n\t   * @param frameState\n\t   * @param optTransform\n\t   */\n\t\n\t\n\t  LayerRenderer.prototype.postCompose = function postCompose(context, frameState, optTransform) {}; // eslint-disable-line no-unused-vars\n\t\n\t  /**\n\t   *\n\t   * @param context\n\t   * @param frameState\n\t   * @param optTransform\n\t   */\n\t\n\t\n\t  LayerRenderer.prototype.preCompose = function preCompose(context, frameState, optTransform) {}; // eslint-disable-line no-unused-vars\n\t\n\t\n\t  _createClass(LayerRenderer, [{\n\t    key: 'layer',\n\t    get: function get() {\n\t      return this._layer;\n\t    }\n\t  }, {\n\t    key: 'context',\n\t    get: function get() {\n\t      return this._context;\n\t    }\n\t  }]);\n\t\n\t  return LayerRenderer;\n\t}(_baseobject2.default);\n\t\n\texports.default = LayerRenderer;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 51 */\n/*!*****************************************!*\\\n  !*** ./src/renderer/rendereventtype.js ***!\n  \\*****************************************/\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t/**\n\t * Created by zhangyong on 2017/5/15.\n\t */\n\t\n\tvar RenderEventType = exports.RenderEventType = {};\n\t\n\t/**\n\t *\n\t * @type {string}\n\t */\n\tRenderEventType.PRERENDER = 'prerender';\n\t\n\t/**\n\t *\n\t * @type {string}\n\t */\n\tRenderEventType.POSTRENDER = 'postrender';\n\t\n\t/**\n\t *\n\t * @type {string}\n\t */\n\tRenderEventType.RENDER = 'render';\n\n/***/ }),\n/* 52 */\n/*!********************************!*\\\n  !*** ./src/style/fillstyle.js ***!\n  \\********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _basestyle = __webpack_require__(/*! ./basestyle */ 35);\n\t\n\tvar _basestyle2 = _interopRequireDefault(_basestyle);\n\t\n\tvar _textstyle = __webpack_require__(/*! ./textstyle */ 26);\n\t\n\tvar _textstyle2 = _interopRequireDefault(_textstyle);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zypc on 2016/11/15.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t *\n\t * 定义多边形样式，多边形样式包括<b>填充样式</b>和<b>边框样式</b>，\n\t * 需要分别设置\n\t *\n\t * @class FillStyle\n\t * @extends BaseStyle\n\t * @module style\n\t * @constructor\n\t * @example\n\t *\n\t *     var fillStyle = new Datatang.FillStyle([255,255,255],\n\t *         new Datatang.LineStyle([0,0,255],1,1.25),0.5)\n\t *\n\t */\n\tvar FillStyle = function (_BaseStyle) {\n\t  _inherits(FillStyle, _BaseStyle);\n\t\n\t  /**\n\t   * 构建一个面样式\n\t   * 面样式由填充样式和边框样式组成\n\t   *\n\t   * @constructor\n\t   * @param style 备有接口，以后扩充面的填充样式\n\t   * @param color 面的填充颜色\n\t   * @param alpha 免得填充透明度\n\t   * @param borderStyle LineStyle对象，指定面样式的边框对象属性\n\t   */\n\t  function FillStyle() {\n\t    var color = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [255, 255, 255];\n\t    var borderStyle = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\t    var alpha = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\t    var style = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : FillStyle.SOLID;\n\t\n\t    _classCallCheck(this, FillStyle);\n\t\n\t    var _this = _possibleConstructorReturn(this, _BaseStyle.call(this, color, style, alpha));\n\t\n\t    _this._borderStyle = borderStyle;\n\t    _this.textStyle = new _textstyle2.default();\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * 边框样式对象\n\t   *\n\t   * @property borderStyle\n\t   * @type {Datatang.LineStyle}\n\t   */\n\t\n\t\n\t  /**\n\t   * 克隆面样式\n\t   *\n\t   * @method clone\n\t   * @returns {FillStyle}\n\t   */\n\t  FillStyle.prototype.clone = function clone() {\n\t    var newStyle = new FillStyle(this.color, this.borderStyle.clone(), this.alpha, this.style);\n\t\n\t    if (this.textStyle) {\n\t      newStyle.textStyle = this.textStyle;\n\t    }\n\t\n\t    return newStyle;\n\t  };\n\t\n\t  _createClass(FillStyle, [{\n\t    key: 'borderStyle',\n\t    get: function get() {\n\t      return this._borderStyle;\n\t    },\n\t    set: function set(value) {\n\t      return this._borderStyle = value;\n\t    }\n\t  }]);\n\t\n\t  return FillStyle;\n\t}(_basestyle2.default);\n\t\n\t/**\n\t * 实体填充\n\t * @static\n\t * @final\n\t * @property SOLID\n\t * @type {string}\n\t */\n\t\n\t\n\texports.default = FillStyle;\n\tFillStyle.SOLID = 'solid';\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 53 */\n/*!*********************************!*\\\n  !*** ./src/style/pointstyle.js ***!\n  \\*********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _basestyle = __webpack_require__(/*! ./basestyle */ 35);\n\t\n\tvar _basestyle2 = _interopRequireDefault(_basestyle);\n\t\n\tvar _textstyle = __webpack_require__(/*! ./textstyle */ 26);\n\t\n\tvar _textstyle2 = _interopRequireDefault(_textstyle);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zypc on 2016/11/15.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * 定义一个点图形的样式\n\t *\n\t * @class PointStyle\n\t * @extends BaseStyle\n\t * @module style\n\t * @constructor\n\t * @example\n\t *\n\t *  // 定义一个点，包括外边框的样式\n\t *\n\t *  var pointStyle = new Datatang.PointStyle(10,[255, 255, 255],1,new Datatang.LineStyle([0, 0, 255],1,1))\n\t *\n\t */\n\tvar PointStyle = function (_BaseStyle) {\n\t  _inherits(PointStyle, _BaseStyle);\n\t\n\t  /**\n\t   * 构建一个点样式对象\n\t   *\n\t   * @constructor\n\t   * @param style 点样式，{circle|square|cross|x|triangle}其中的一种\n\t   * @param size 点的大小，默认15\n\t   * @param color\n\t   * @param alpha\n\t   * @param xoffset\n\t   * @param yoffset\n\t   * @param angle\n\t   */\n\t  function PointStyle() {\n\t    var size = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 15;\n\t    var color = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [255, 0, 0];\n\t    var alpha = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\t    var borderStyle = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n\t    var xoffset = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n\t    var yoffset = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 0;\n\t    var angle = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 0;\n\t    var style = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : PointStyle.CIRCLE;\n\t\n\t    _classCallCheck(this, PointStyle);\n\t\n\t    var _this = _possibleConstructorReturn(this, _BaseStyle.call(this, color, style, alpha));\n\t\n\t    _this._size = size;\n\t    _this._xoffset = xoffset;\n\t    _this._yoffset = yoffset;\n\t    _this._angle = angle;\n\t    _this._borderStyle = borderStyle;\n\t    _this.textStyle = new _textstyle2.default();\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * 克隆点的样式\n\t   *\n\t   * @method clone\n\t   * @returns {PointStyle}\n\t   */\n\t\n\t\n\t  PointStyle.prototype.clone = function clone() {\n\t    var newStyle = new PointStyle(this.size, this.color, this.alpha, this.borderStyle.clone(), this.xoffset, this.yoffset, this.angle, this.style);\n\t\n\t    if (this.textStyle) {\n\t      newStyle.textStyle = this.textStyle;\n\t    }\n\t\n\t    return newStyle;\n\t  };\n\t\n\t  /**\n\t   * 大小\n\t   *\n\t   * @property size\n\t   * @type {Number}\n\t   */\n\t\n\t\n\t  _createClass(PointStyle, [{\n\t    key: 'size',\n\t    get: function get() {\n\t      return this._size;\n\t    },\n\t    set: function set(value) {\n\t      this._size = value;\n\t    }\n\t\n\t    /**\n\t     * X 轴偏移量\n\t     *\n\t     * @property xoffset\n\t     * @type {Number}\n\t     */\n\t\n\t  }, {\n\t    key: 'xoffset',\n\t    get: function get() {\n\t      return this._xoffset;\n\t    },\n\t    set: function set(value) {\n\t      this._xoffset = value;\n\t    }\n\t\n\t    /**\n\t     * Y 轴偏移量\n\t     *\n\t     * @property yoffset\n\t     * @type {Number}\n\t     */\n\t\n\t  }, {\n\t    key: 'yoffset',\n\t    get: function get() {\n\t      return this._yoffset;\n\t    },\n\t    set: function set(value) {\n\t      this._yoffset = value;\n\t    }\n\t\n\t    /**\n\t     * 样式显示的角度\n\t     *\n\t     * @property angle\n\t     * @type {Number}\n\t     */\n\t\n\t  }, {\n\t    key: 'angle',\n\t    get: function get() {\n\t      return this._angle;\n\t    },\n\t    set: function set(value) {\n\t      this._angle = value;\n\t    }\n\t\n\t    /**\n\t     * 边框样式\n\t     *\n\t     * @property borderStyle\n\t     * @type {LineStyle}\n\t     */\n\t\n\t  }, {\n\t    key: 'borderStyle',\n\t    get: function get() {\n\t      return this._borderStyle;\n\t    },\n\t    set: function set(value) {\n\t      this._borderStyle = value;\n\t    }\n\t  }]);\n\t\n\t  return PointStyle;\n\t}(_basestyle2.default);\n\t\n\t/**\n\t * 圆形样式\n\t *\n\t * @static\n\t * @final\n\t * @property CIRCLE\n\t * @type {String}\n\t */\n\t\n\t\n\texports.default = PointStyle;\n\tPointStyle.CIRCLE = 'circle';\n\t\n\t/**\n\t * 方形样式\n\t *\n\t * @static\n\t * @final\n\t * @property SQUARE\n\t * @type {String}\n\t */\n\tPointStyle.SQUARE = 'square';\n\t\n\t/**\n\t * 十字样式\n\t *\n\t * @static\n\t * @final\n\t * @property CROSS\n\t * @type {string}\n\t */\n\tPointStyle.CROSS = 'cross';\n\t\n\t/**\n\t * X样式\n\t *\n\t * @static\n\t * @final\n\t * @property X\n\t * @type {string}\n\t */\n\tPointStyle.X = 'x';\n\t\n\t/**\n\t * 三角形样式\n\t *\n\t * @static\n\t * @final\n\t * @property TRIANGLE\n\t * @type {string}\n\t */\n\tPointStyle.TRIANGLE = 'triangle';\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 54 */\n/*!*****************************!*\\\n  !*** ./src/utils/canvas.js ***!\n  \\*****************************/\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t/**\n\t * Created by zhangyong on 2017/6/7.\n\t */\n\t\n\tvar Canvas = exports.Canvas = {};\n\t\n\t/**\n\t *\n\t * @param context\n\t * @param rotation\n\t * @param offsetX\n\t * @param offsetY\n\t */\n\tCanvas.rotateAtOffset = function (context, rotation, offsetX, offsetY) {\n\t  if (rotation !== 0) {\n\t    context.translate(offsetX, offsetY);\n\t    context.rotate(rotation);\n\t    context.translate(-offsetX, -offsetY);\n\t  }\n\t};\n\t\n\texports.default = {\n\t  Canvas: Canvas\n\t};\n\n/***/ }),\n/* 55 */\n/*!*********************************!*\\\n  !*** ./src/utils/coordinate.js ***!\n  \\*********************************/\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t/**\n\t * Created by zypc on 2017/6/4.\n\t */\n\tvar Coordinate = exports.Coordinate = {};\n\t\n\tCoordinate.add = function (coordinate, delta) {\n\t  coordinate[0] += delta[0];\n\t  coordinate[1] += delta[1];\n\t  return coordinate;\n\t};\n\t\n\tCoordinate.rotate = function (coordinate, angle) {\n\t  var cosAngle = Math.cos(angle);\n\t  var sinAngle = Math.sin(angle);\n\t  var x = coordinate[0] * cosAngle - coordinate[1] * sinAngle;\n\t  var y = coordinate[1] * cosAngle + coordinate[0] * sinAngle;\n\t  coordinate[0] = x;\n\t  coordinate[1] = y;\n\t  return coordinate;\n\t};\n\t\n\tCoordinate.scale = function (coordinate, scale) {\n\t  coordinate[0] *= scale;\n\t  coordinate[1] *= scale;\n\t  return coordinate;\n\t};\n\t\n\texports.default = {\n\t  Coordinate: Coordinate\n\t};\n\n/***/ }),\n/* 56 */\n/*!********************************!*\\\n  !*** ./src/utils/functions.js ***!\n  \\********************************/\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t/**\n\t * Created by zhangyong on 2017/8/30.\n\t */\n\t\n\tvar functions = exports.functions = {};\n\t\n\t/**\n\t * 默认条件函数执行\n\t * @returns {boolean}\n\t * @constructor\n\t */\n\tfunctions.TURE = function () {\n\t  return true;\n\t};\n\t\n\t/**\n\t * 默认条件函数不执行\n\t * @returns {boolean}\n\t * @constructor\n\t */\n\tfunctions.FALSE = function () {\n\t  return false;\n\t};\n\t\n\texports.default = {\n\t  functions: functions\n\t};\n\n/***/ }),\n/* 57 */\n/*!*********************************************!*\\\n  !*** ./src/components/componentdefaults.js ***!\n  \\*********************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.componentsDefaults = componentsDefaults;\n\t\n\tvar _kinetic = __webpack_require__(/*! ./kinetic */ 62);\n\t\n\tvar _kinetic2 = _interopRequireDefault(_kinetic);\n\t\n\tvar _dragpan = __webpack_require__(/*! ./dragpan */ 37);\n\t\n\tvar _dragpan2 = _interopRequireDefault(_dragpan);\n\t\n\tvar _mousewheelzoom = __webpack_require__(/*! ./mousewheelzoom */ 40);\n\t\n\tvar _mousewheelzoom2 = _interopRequireDefault(_mousewheelzoom);\n\t\n\tvar _keyboardhome = __webpack_require__(/*! ./keyboardhome */ 59);\n\t\n\tvar _keyboardhome2 = _interopRequireDefault(_keyboardhome);\n\t\n\tvar _keyboardzoom = __webpack_require__(/*! ./keyboardzoom */ 61);\n\t\n\tvar _keyboardzoom2 = _interopRequireDefault(_keyboardzoom);\n\t\n\tvar _keyboardpan = __webpack_require__(/*! ./keyboardpan */ 60);\n\t\n\tvar _keyboardpan2 = _interopRequireDefault(_keyboardpan);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t *\n\t * @param options\n\t * @returns {Set}\n\t */\n\t/**\n\t * Created by zhangyong on 2017/6/15.\n\t */\n\t\n\tfunction componentsDefaults() {\n\t  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t  var components = new Set();\n\t\n\t  var kinetic = new _kinetic2.default(-0.005, 0.05, 100);\n\t\n\t  var dragPan = options.dragPan !== undefined ? options.dragPan : true;\n\t  if (dragPan) {\n\t    components.add(new _dragpan2.default({\n\t      kinetic: kinetic\n\t    }));\n\t  }\n\t\n\t  var mouseWheelZoom = options.mouseWheelZoom !== undefined ? options.mouseWheelZoom : true;\n\t  if (mouseWheelZoom) {\n\t    components.add(new _mousewheelzoom2.default({\n\t      constrainResolution: options.constrainResolution,\n\t      duration: options.zoomDuration\n\t    }));\n\t  }\n\t\n\t  var keyboard = options.keyboard !== undefined ? options.keyborad : true;\n\t  if (keyboard) {\n\t    components.add(new _keyboardhome2.default(options));\n\t    components.add(new _keyboardpan2.default(options));\n\t    components.add(new _keyboardzoom2.default({\n\t      delta: options.zoomDelta\n\t    }));\n\t  }\n\t\n\t  return components;\n\t}\n\t\n\texports.default = {\n\t  componentsDefaults: componentsDefaults\n\t};\n\n/***/ }),\n/* 58 */\n/*!********************************!*\\\n  !*** ./src/components/draw.js ***!\n  \\********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _component = __webpack_require__(/*! ./component */ 8);\n\t\n\tvar _component2 = _interopRequireDefault(_component);\n\t\n\tvar _style = __webpack_require__(/*! ../style/style */ 17);\n\t\n\tvar _featurelayer = __webpack_require__(/*! ../lyr/featurelayer */ 13);\n\t\n\tvar _featurelayer2 = _interopRequireDefault(_featurelayer);\n\t\n\tvar _feature = __webpack_require__(/*! ../meek/feature */ 24);\n\t\n\tvar _feature2 = _interopRequireDefault(_feature);\n\t\n\tvar _geometry = __webpack_require__(/*! ../geometry/geometry */ 1);\n\t\n\tvar _geometry2 = _interopRequireDefault(_geometry);\n\t\n\tvar _point = __webpack_require__(/*! ../geometry/point */ 22);\n\t\n\tvar _point2 = _interopRequireDefault(_point);\n\t\n\tvar _line = __webpack_require__(/*! ../geometry/line */ 30);\n\t\n\tvar _line2 = _interopRequireDefault(_line);\n\t\n\tvar _polygon = __webpack_require__(/*! ../geometry/polygon */ 10);\n\t\n\tvar _polygon2 = _interopRequireDefault(_polygon);\n\t\n\tvar _mutilpolygon = __webpack_require__(/*! ../geometry/mutilpolygon */ 31);\n\t\n\tvar _mutilpolygon2 = _interopRequireDefault(_mutilpolygon);\n\t\n\tvar _extent = __webpack_require__(/*! ../geometry/extent */ 9);\n\t\n\tvar _extent2 = _interopRequireDefault(_extent);\n\t\n\tvar _extentutil = __webpack_require__(/*! ../geometry/support/extentutil */ 2);\n\t\n\tvar _geometryutil = __webpack_require__(/*! ../geometry/support/geometryutil */ 11);\n\t\n\tvar _eventmanager = __webpack_require__(/*! ../core/eventmanager */ 4);\n\t\n\tvar _browserevent = __webpack_require__(/*! ../meek/browserevent */ 5);\n\t\n\tvar _browserevent2 = _interopRequireDefault(_browserevent);\n\t\n\tvar _drawevent = __webpack_require__(/*! ./drawevent */ 38);\n\t\n\tvar _drawevent2 = _interopRequireDefault(_drawevent);\n\t\n\tvar _parallelogram = __webpack_require__(/*! ../geometry/parallelogram */ 21);\n\t\n\tvar _parallelogram2 = _interopRequireDefault(_parallelogram);\n\t\n\tvar _functions = __webpack_require__(/*! ../utils/functions */ 56);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zypc on 2016/11/15.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * 图形绘制工具基础类\n\t *\n\t * @class Draw\n\t * @extends Component\n\t * @module component\n\t * @constructor\n\t * @example\n\t *\n\t *      // 实例化绘图工具\n\t *      var drawTool = new Datatang.Draw({\n\t *        type: 'point',\n\t *        drawLayer: new Datatang.FeatureLayer()\n\t *      })\n\t *\n\t */\n\tvar Draw = function (_Component) {\n\t  _inherits(Draw, _Component);\n\t\n\t  /**\n\t   * 构造函数\n\t   *\n\t   * @constructor constructor\n\t   * @param options\n\t   */\n\t  function Draw() {\n\t    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t    _classCallCheck(this, Draw);\n\t\n\t    var _this = _possibleConstructorReturn(this, _Component.call(this));\n\t\n\t    _this.applyHandleEventOption({\n\t      handleDownEvent: _this._handleDownEvent,\n\t      handleMouseEvent: _this.handleMouseEvent,\n\t      handleUpEvent: _this._handleUpEvent\n\t    });\n\t\n\t    /**\n\t     * mapRenderKey\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._mapRenderKey = null;\n\t\n\t    /**\n\t     * 绘制作用图层;\n\t     * 需要给绘制工具一个绘制的图层\n\t     *\n\t     * @property drawLayer\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._drawLayer = options.drawLayer ? options.drawLayer : null;\n\t\n\t    /**\n\t     * 鼠标按下时的坐标点\n\t     *\n\t     * @property downPointPx\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._downPointPx = null;\n\t\n\t    /**\n\t     * 图形绘制结束条件\n\t     *\n\t     * @property finishCoordinate\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._finishCoordinate = null;\n\t\n\t    /**\n\t     * 当前的绘图模式(点、线、多边形、矩形)\n\t     *\n\t     * @property drawMode\n\t     * @type {*}\n\t     */\n\t    _this.drawMode = Draw.getDrawMode(options.type);\n\t\n\t    /**\n\t     * 绘制多边形、线段时的临时坐标数据\n\t     *\n\t     * @property sketchCoords\n\t     * @type\n\t     * @private\n\t     */\n\t    _this._sketchCoords = null;\n\t\n\t    /**\n\t     * 绘制多边的临时线段\n\t     *\n\t     * @property sketchLine\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._sketchLine = null;\n\t\n\t    /**\n\t     * 绘制完成时的结束条件\n\t     *\n\t     * @property finishCondition\n\t     * @type {null}\n\t     * @private\n\t     *\n\t     */\n\t    _this._finishCondition = options.finishCondition ? options.finishCondition : _functions.functions.TURE;\n\t\n\t    /**\n\t     * 撤销条件\n\t     *\n\t     * @property undoCondition\n\t     * @type {Function}\n\t     * @private\n\t     */\n\t    _this._undoCondition = options.undoCondition !== undefined ? options.undoCondition : _functions.functions.TURE;\n\t\n\t    /**\n\t     * 设置默认回退的顶点数，默认1\n\t     * @TODO 需要完善\n\t     * @type {number}\n\t     * @private\n\t     */\n\t    _this._undoStep = options.freehandUndoStep ? options.freehandUndoStep : 2;\n\t\n\t    // add keyboard events\n\t    if (options.undoCondition || options.finishCondition) {\n\t      (0, _eventmanager.listen)(document, 'keyup', _this._handleKeyboardEvent, _this);\n\t    }\n\t\n\t    /**\n\t     * 初始化草稿图层，用于临时显示绘制的图形\n\t     *\n\t     * @property sketchLayer\n\t     * @type {Object} featurelayer\n\t     * @private\n\t     */\n\t    _this._sketchLayer = new _featurelayer2.default({ name: 'sketch layer for draw component' });\n\t\n\t    /**\n\t     * 获取默认绘制渲染样式\n\t     *\n\t     * @property sketchLayer\n\t     * @private\n\t     * @type {Function}\n\t     */\n\t    _this._sketchLayer.style = _this.getDefaultStyleFunction();\n\t\n\t    /**\n\t     * 临时点\n\t     *\n\t     * @property sketchPoint\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._sketchPoint = null;\n\t\n\t    /**\n\t     * 绘制时，是否允许鼠标参考点\n\t     * @type {boolean}\n\t     * @private\n\t     */\n\t    _this._enableSketchPoint = options.enableSketchPoint ? options.enableSketchPoint : false;\n\t\n\t    /**\n\t     * 临时Feature\n\t     *\n\t     * @property sketchFeature\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._sketchFeature = null;\n\t\n\t    /**\n\t     * 通过geometry的类型去构建一个geometry\n\t     *\n\t     * @property eometryFunction\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    // The function that can build a geometry by the passed geometry type.\n\t    _this._geometryFunction = null;\n\t\n\t    /**\n\t     * 临时的线段坐标数据\n\t     *\n\t     * @property sketchLineCoords\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._sketchLineCoords = null;\n\t\n\t    /**\n\t     * freehand drawing\n\t     * @type {Boolean}\n\t     * @private\n\t     */\n\t    _this._freehand = options.freehand ? options.freehand : false;\n\t\n\t    /**\n\t     * 公差像素距离\n\t     *\n\t     * @property snapTolerance\n\t     * @type {Number}\n\t     * @private\n\t     */\n\t    _this._snapTolerance = options.snapTolerance ? options.snapTolerance : 2;\n\t\n\t    /**\n\t     * 绘制线段时的最多点限制，默认没有限制\n\t     *\n\t     * @property maxLinePoints\n\t     * @type {Number}\n\t     * @private\n\t     */\n\t    _this._maxLinePoints = options.maxLinePoints ? options.maxLinePoints : Infinity;\n\t\n\t    /**\n\t     * 绘制多边形时的顶点限制，默认没有限制\n\t     *\n\t     * @property maxPolygonPoints\n\t     * @type {Number}\n\t     * @private\n\t     */\n\t    _this._maxPolygonPoints = options.maxPolygonPoints ? options.maxPolygonPoints : Infinity;\n\t\n\t    /**\n\t     * 绘制线段的最少点为2，多边形为3\n\t     *\n\t     * @property minPoints\n\t     * @type {Number}\n\t     * @private\n\t     */\n\t    _this._minPoints = options.minPoints ? options.minPoints : _this.drawMode === Draw.DrawMode.POLYGON ? 3 : 2;\n\t\n\t    /**\n\t     *\n\t     * @type {condition}\n\t     * @private\n\t     */\n\t    _this._condition = options.condition ? options.condition : _functions.functions.TURE;\n\t\n\t    /**\n\t     *\n\t     * @type {boolean}\n\t     * @private\n\t     */\n\t    _this._shouldHandle = false;\n\t\n\t    /**\n\t     *\n\t     * @type {number}\n\t     * @private\n\t     */\n\t    _this._squaredClickTolerance = options.clickUpTolerance ? options.clickUpTolerance * options.clickUpTolerance : 36;\n\t\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * 处理绘制结束事件\n\t   *\n\t   * handleKeyboardEvent\n\t   * @type {Function}\n\t   * @param event {event}\n\t   * @private\n\t   */\n\t\n\t\n\t  Draw.prototype._handleKeyboardEvent = function _handleKeyboardEvent(event) {\n\t    // If finish drawing\n\t    if (this._finishCondition(event)) {\n\t      // 判断多边形的顶点是否小于4个（正常多边形3个顶点，首尾相接多一个顶点），小于4个不是多边形，return\n\t      if (this.drawMode === Draw.DrawMode.POLYGON) {\n\t        if (this._sketchFeature === null) {\n\t          return;\n\t        }\n\t\n\t        var pcoordinates = this._sketchFeature.geometry.getCoordinates();\n\t        if (pcoordinates[0].length < 4) {\n\t          return;\n\t        }\n\t      }\n\t\n\t      // 判断线的顶点是否小于2个，小于2个不是线段，return\n\t      if (this.drawMode === Draw.DrawMode.LINE) {\n\t        if (this._sketchFeature === null) {\n\t          return;\n\t        }\n\t\n\t        var _pcoordinates = this._sketchFeature.geometry.getCoordinates();\n\t        if (_pcoordinates.length <= 2) {\n\t          return;\n\t        }\n\t      }\n\t\n\t      this._finishDrawing();\n\t    }\n\t\n\t    // If undo drawing\n\t    if (this._undoCondition) {\n\t      if (this._undoCondition(event)) {\n\t        this._undoDrawing();\n\t      }\n\t    }\n\t  };\n\t\n\t  /**\n\t   * 获取图形创建、修改的工厂方法\n\t   *\n\t   * @property geometryFunction\n\t   * @type {Function}\n\t   * @retruns geometryFunction {Function}\n\t   */\n\t\n\t\n\t  /**\n\t   * 判断传入的绘制类型是否在绘制列表中\n\t   *\n\t   * @method existInDrawMode\n\t   * @param value {String}\n\t   * @returns {Boolean}\n\t   * @private\n\t   */\n\t  Draw.prototype._existInDrawMode = function _existInDrawMode(value) {\n\t    if (typeof value === 'string' && value.constructor === String) {\n\t      var drawMode = Draw.DrawMode;\n\t      var modeValue = value.toUpperCase();\n\t\n\t      if (modeValue === Draw.DrawMode.UNDEFINED.toUpperCase()) {\n\t        return false;\n\t      }\n\t\n\t      for (var val in drawMode) {\n\t        if (modeValue === drawMode[val].toUpperCase()) {\n\t          return true;\n\t        }\n\t      }\n\t    }\n\t\n\t    return false;\n\t  };\n\t\n\t  /**\n\t   * 图形生产工厂方法\n\t   *\n\t   * @method geometryFactory\n\t   * @returns {Object} 返回一个geometry对象\n\t   * @private\n\t   */\n\t\n\t\n\t  Draw.prototype._geometryFactory = function _geometryFactory() {\n\t    var Constructor = void 0;\n\t    var mode = this.drawMode;\n\t\n\t    if (mode === Draw.DrawMode.POINT) {\n\t      Constructor = _point2.default;\n\t    } else if (mode === Draw.DrawMode.LINE) {\n\t      Constructor = _line2.default;\n\t    } else if (mode === Draw.DrawMode.POLYGON) {\n\t      Constructor = _polygon2.default;\n\t    } else if (mode === Draw.DrawMode.EXTENT) {\n\t      Constructor = _extent2.default;\n\t    } else if (mode === Draw.DrawMode.PARALLELOGRAM) {\n\t      Constructor = _parallelogram2.default;\n\t    }\n\t\n\t    return Constructor;\n\t  };\n\t\n\t  /**\n\t   * 设置缺省 geometryfunction\n\t   *\n\t   * @method initGeometryFunction\n\t   * @returns {Function} Geometry\n\t   * @private\n\t   */\n\t\n\t\n\t  Draw.prototype._initGeometryFunction = function _initGeometryFunction() {\n\t    var _this2 = this;\n\t\n\t    var geometryFunction = function geometryFunction(coordinates, opt_geometry) {\n\t      var mode = _this2.drawMode;\n\t      var geometry = opt_geometry;\n\t\n\t      if (geometry) {\n\t        if (mode === Draw.DrawMode.POLYGON || mode === Draw.DrawMode.PARALLELOGRAM || mode === Draw.DrawMode.LINE) {\n\t          geometry.setCoordinates(coordinates);\n\t        } else if (mode === Draw.DrawMode.EXTENT) {\n\t          geometry.setCoordinates(_extentutil.ExtentUtil.boundingExtent(coordinates));\n\t        }\n\t      } else {\n\t        var Constructor = _this2._geometryFactory();\n\t        geometry = new Constructor(coordinates[0], coordinates[1]);\n\t      }\n\t\n\t      return geometry;\n\t    };\n\t\n\t    return geometryFunction;\n\t  };\n\t\n\t  /**\n\t   * 或者 freehand draw 的执行条件\n\t   *\n\t   * @param event\n\t   * @returns {boolean|*}\n\t   * @private\n\t   */\n\t\n\t\n\t  Draw.prototype._freehandEnable = function _freehandEnable() {\n\t    var drawMode = this.drawMode;\n\t    return (drawMode === Draw.DrawMode.POLYGON || drawMode === Draw.DrawMode.LINE) && this._freehand;\n\t  };\n\t\n\t  /**\n\t   * 处理鼠标事件\n\t   *\n\t   * handleMouseEvent\n\t   * @param event {event}\n\t   * @returns {*|Boolean}\n\t   */\n\t\n\t\n\t  Draw.prototype.handleMouseEvent = function handleMouseEvent(event) {\n\t    // 排除右键\n\t    var buttons = event.originalEvent.buttons;\n\t    if (buttons === 2) {\n\t      return false;\n\t    }\n\t\n\t    // 越界限制\n\t    event.coordinate = this.coordinateBeyond(event.coordinate);\n\t\n\t    var freehand = this._freehandEnable();\n\t    // this._freehand = this._freehandEnable()\n\t    // let pass = !this._freehand\n\t    var pass = true;\n\t    var eventType = event.type;\n\t    if (freehand && eventType === _browserevent2.default.MOUSE_DRAG && this._sketchFeature !== null) {\n\t      this._addToDrawing(event);\n\t      // pass = false\n\t    } else if (eventType === _browserevent2.default.MOUSE_MOVE) {\n\t      pass = this._handleMove(event);\n\t    } else if (eventType === _browserevent2.default.DBLCLICK) {\n\t      pass = false;\n\t    }\n\t\n\t    return _Component.prototype.handleMouseEvent.call(this, event) && pass;\n\t  };\n\t\n\t  /**\n\t   * 处理移动事件\n\t   *\n\t   * handleMove\n\t   * @param {BrowserEvent} event A move event.\n\t   * @return {boolean} Pass the event to other compoments.\n\t   * @private\n\t   */\n\t\n\t\n\t  Draw.prototype._handleMove = function _handleMove(event) {\n\t    if (this._downPointPx && (!this._freehand && this._shouldHandle || this._freehand && !this._shouldHandle)) {\n\t      var downPx = this._downPointPx;\n\t      var clickPx = event.pixel;\n\t      var dx = downPx[0] - clickPx[0];\n\t      var dy = downPx[1] - clickPx[1];\n\t      var squaredDistance = dx * dx + dy * dy;\n\t      this._shouldHandle = this._freehand ? squaredDistance > this._squaredClickTolerance : squaredDistance <= this._squaredClickTolerance;\n\t    }\n\t\n\t    if (this._finishCoordinate) {\n\t      this._modifyDrawing(event);\n\t      // this._autoPan(event)\n\t    } else {\n\t      this._updateSketchPoint(event);\n\t    }\n\t\n\t    return true;\n\t  };\n\t\n\t  /**\n\t   * 鼠标按下时，获取当前坐标点\n\t   *\n\t   * handleDownEvent\n\t   * @param event {BrowserEvent} event A up event.\n\t   * @returns {Boolean}\n\t   * @private\n\t   */\n\t\n\t\n\t  Draw.prototype._handleDownEvent = function _handleDownEvent(event) {\n\t    this._shouldHandle = !this._freehand;\n\t\n\t    if (this._freehand) {\n\t      this._downPointPx = event.pixel;\n\t      if (!this._finishCoordinate) {\n\t        this._startDrawing(event);\n\t      }\n\t\n\t      return false;\n\t    } else if (this._condition(event)) {\n\t      this._downPointPx = event.pixel;\n\t      return true;\n\t    } else {\n\t      return false;\n\t    }\n\t  };\n\t\n\t  /**\n\t   * 处理鼠标弹起事件\n\t   *\n\t   * handleUpEvent\n\t   * @param event {BrowserEvent} event\n\t   * @private\n\t   */\n\t\n\t\n\t  Draw.prototype._handleUpEvent = function _handleUpEvent(event) {\n\t    if (this.drawMode === Draw.DrawMode.UNDEFINED) {\n\t      return;\n\t    }\n\t\n\t    var pass = true;\n\t    var mode = this.drawMode;\n\t\n\t    this._handleMove(event);\n\t\n\t    if (this._shouldHandle) {\n\t      if (!this._finishCoordinate) {\n\t        this._startDrawing(event);\n\t\n\t        // 点绘制在up的时候结束\n\t        if (this.drawMode === Draw.DrawMode.POINT) {\n\t          this._finishDrawing();\n\t        }\n\t      } else if (mode === Draw.DrawMode.CIRCLE) {\n\t        //\n\t        //\n\t      } else if (mode === Draw.DrawMode.EXTENT) {\n\t        this._finishDrawing();\n\t      } else if (this._atFinish(event)) {\n\t        if (this._finishCondition(event)) {\n\t          this._finishDrawing();\n\t        }\n\t      } else {\n\t        this._addToDrawing(event);\n\t      }\n\t    } else if (this._freehand && !this._finishCondition) {\n\t      this._finishCoordinate = null;\n\t      this._abortDrawing();\n\t    }\n\t\n\t    return pass;\n\t  };\n\t\n\t  /**\n\t   * 启动绘制，生成feature\n\t   *\n\t   * @method startDrawing\n\t   * @param event {Event}\n\t   * @private\n\t   */\n\t\n\t\n\t  Draw.prototype._startDrawing = function _startDrawing(event) {\n\t    var startPoint = event.coordinate;\n\t    this._finishCoordinate = startPoint;\n\t\n\t    var _drawMode = this.drawMode;\n\t\n\t    // 构造geometry数据\n\t    if (_drawMode === Draw.DrawMode.POINT) {\n\t      this._sketchCoords = startPoint.slice(); // 缓存up的点\n\t    } else if (_drawMode === Draw.DrawMode.POLYGON) {\n\t      this._sketchCoords = [[startPoint.slice(), startPoint.slice()]];\n\t      this._sketchLineCoords = this._sketchCoords[0]; // temp line\n\t    } else if (_drawMode === Draw.DrawMode.PARALLELOGRAM) {\n\t      // 平行四边形\n\t      this._sketchCoords = [[startPoint.slice(), startPoint.slice()]];\n\t      this._sketchLineCoords = this._sketchCoords[0]; // temp line\n\t    } else {\n\t      this._sketchCoords = [startPoint.slice(), startPoint.slice()]; // 缓存up的点，最后一个值，用于move的替换\n\t\n\t      if (_drawMode === Draw.DrawMode.EXTENT) {\n\t        this._sketchLineCoords = this._sketchCoords;\n\t      }\n\t    }\n\t\n\t    if (this._sketchLineCoords) {\n\t      this._sketchLine = new _feature2.default(new _line2.default(this._sketchLineCoords));\n\t    }\n\t\n\t    // Build a geometry uesed sketchCorrdds\n\t    var geometry = this.geometryFunction(this._sketchCoords);\n\t\n\t    this._sketchFeature = new _feature2.default();\n\t    this._sketchFeature.geometry = geometry;\n\t\n\t    // Redraw the sketch features\n\t    this._updateSketchFeatures();\n\t\n\t    // 派发绘制开始事件\n\t    // Trigger the draw-strat event\n\t    this.dispatchEvent(new _drawevent2.default(_drawevent2.default.EventType.DRAW_START, this._sketchFeature));\n\t  };\n\t\n\t  /**\n\t   * Modify the drawing\n\t   *\n\t   * @param event {Event}\n\t   * @private\n\t   */\n\t\n\t\n\t  Draw.prototype._modifyDrawing = function _modifyDrawing(event) {\n\t    var coordinate = event.coordinate;\n\t    var geometry = this._sketchFeature.geometry;\n\t    var coordinates = null,\n\t        last = null;\n\t    var mode = this.drawMode;\n\t\n\t    if (mode === Draw.DrawMode.POINT) {\n\t      last = this._sketchCoords;\n\t\n\t      last[0] = coordinate[0];\n\t      last[1] = coordinate[1];\n\t    } else if (mode === Draw.DrawMode.POLYGON) {\n\t      coordinates = this._sketchCoords[0];\n\t      last = coordinates[coordinates.length - 1];\n\t      if (this._atFinish(event)) {\n\t        coordinate = this._finishCoordinate.slice();\n\t      }\n\t\n\t      // 在鼠标移动的时候，将最后一个点替换成当前的鼠标点\n\t      last[0] = coordinate[0];\n\t      last[1] = coordinate[1];\n\t    } else if (mode === Draw.DrawMode.PARALLELOGRAM) {\n\t      coordinates = this._sketchCoords[0];\n\t      last = coordinates[coordinates.length - 1];\n\t\n\t      // 需要清理，第三个点应该为鼠标点\n\t      if (coordinates.length > 3) {\n\t        coordinates = coordinates.slice(0, 2);\n\t        coordinates.push(coordinate);\n\t      } else {\n\t        last[0] = coordinate[0];\n\t        last[1] = coordinate[1];\n\t      }\n\t\n\t      var lastSecondPoint = coordinates[coordinates.length - 2];\n\t\n\t      // 平行四边形，如果有3个点，则直接生成平行四边形\n\t      if (lastSecondPoint[0] !== last[0] && lastSecondPoint[1] !== last[1] && coordinates.length === 3) {\n\t        var lstPoint = _parallelogram2.default.getTheLastPoint(coordinates);\n\t        coordinates.push(lstPoint, coordinates[0]);\n\t        this._sketchCoords = [coordinates];\n\t\n\t        // 辅助效果线\n\t        this._sketchLineCoords = coordinates;\n\t      }\n\t    } else {\n\t      coordinates = this._sketchCoords; // 获取up的点\n\t      last = coordinates[coordinates.length - 1]; // 替换为当前MOve的点，形成一条path\n\t\n\t      last[0] = coordinate[0];\n\t      last[1] = coordinate[1];\n\t    }\n\t\n\t    if (this._freehand) {\n\t      var tempLastRing = this._sketchCoords[0];\n\t      if (tempLastRing.length > 2) {\n\t        var lastPoint = tempLastRing[tempLastRing.length - 1];\n\t        var lastPoint2 = tempLastRing[tempLastRing.length - 2];\n\t\n\t        if (lastPoint[0] === lastPoint2[0] && lastPoint[1] === lastPoint2[1]) {\n\t          tempLastRing.pop();\n\t        }\n\t      }\n\t    }\n\t\n\t    // 给 geometry 赋值\n\t    this.geometryFunction(this._sketchCoords, geometry);\n\t\n\t    // 更新点坐标\n\t    if (this._sketchPoint) {\n\t      var sketchPointGeom = this._sketchPoint.geometry;\n\t      sketchPointGeom.update(coordinate[0], coordinate[1]);\n\t    }\n\t\n\t    var sketchLineGeom = void 0;\n\t    if (mode === Draw.DrawMode.EXTENT) {\n\t      if (!this._sketchLine) {\n\t        this._sketchLine = new _feature2.default(new _line2.default(null));\n\t      }\n\t\n\t      var rings = geometry.getCoordinates();\n\t      sketchLineGeom = this._sketchLine.geometry;\n\t      sketchLineGeom.path = rings;\n\t    } else if (this._sketchLineCoords) {\n\t      sketchLineGeom = this._sketchLine.geometry;\n\t      sketchLineGeom.path = this._sketchLineCoords;\n\t    }\n\t\n\t    this._updateSketchFeatures();\n\t  };\n\t\n\t  /**\n\t   * Add a new coordinate to the drawing\n\t   *\n\t   * @param event\n\t   * @private\n\t   */\n\t\n\t\n\t  Draw.prototype._addToDrawing = function _addToDrawing(event) {\n\t    var coordinate = event.coordinate;\n\t    var geometry = this._sketchFeature.geometry;\n\t    var coordinates = void 0,\n\t        done = void 0;\n\t    var mode = this.drawMode;\n\t\n\t    if (mode === Draw.DrawMode.LINE) {\n\t      this._finishCoordinate = coordinate.slice();\n\t      coordinates = this._sketchCoords;\n\t\n\t      if (coordinates.length > this._maxLinePoints) {\n\t        if (this._freehand) {\n\t          coordinates.pop();\n\t        } else {\n\t          done = true;\n\t        }\n\t      }\n\t\n\t      if (this._freehand) {\n\t        if (coordinates.length > 1) {\n\t          var lastPoint = coordinates[coordinates.length - 1];\n\t          if (lastPoint[0] === coordinate[0] && lastPoint[1] === coordinate[1]) {\n\t            coordinates.pop();\n\t          }\n\t        }\n\t      }\n\t\n\t      coordinates.push(coordinate.slice());\n\t      this.geometryFunction(coordinates, geometry);\n\t    } else if (mode === Draw.DrawMode.POLYGON) {\n\t      coordinates = this._sketchCoords[0];\n\t\n\t      if (coordinates.length > this._maxPolygonPoints) {\n\t        if (this._freehand) {\n\t          coordinates.pop();\n\t        } else {\n\t          done = true;\n\t        }\n\t      }\n\t\n\t      coordinates.push(coordinate.slice());\n\t\n\t      if (done) {\n\t        this._finishCoordinate = coordinates[0];\n\t      }\n\t\n\t      this.geometryFunction(this._sketchCoords, geometry);\n\t    } else if (mode === Draw.DrawMode.PARALLELOGRAM) {\n\t      coordinates = this._sketchCoords[0];\n\t\n\t      // 当前坐标数组添加新点数组\n\t      coordinates.push(coordinate.slice());\n\t      done = coordinates.length > this._maxPolygonPoints;\n\t\n\t      if (done) {\n\t        this._finishCoordinate = coordinates[0];\n\t      }\n\t\n\t      this.geometryFunction(this._sketchCoords, geometry);\n\t    }\n\t\n\t    this._updateSketchFeatures();\n\t\n\t    if (done) {\n\t      this._finishDrawing();\n\t    }\n\t  };\n\t\n\t  /**\n\t   * 终止绘制，不会添加临时feature\n\t   *\n\t   * @method abortDrawing\n\t   * @returns {Feature|null|_Feature2.default}\n\t   * @private\n\t   */\n\t\n\t\n\t  Draw.prototype._abortDrawing = function _abortDrawing() {\n\t    this._finishCoordinate = null;\n\t    var sketchFeature = this._sketchFeature;\n\t    if (sketchFeature) {\n\t      this._sketchFeature = null;\n\t      this._sketchPoint = null;\n\t      this._sketchLine = null;\n\t      this._sketchLayer.clear();\n\t    }\n\t\n\t    return sketchFeature;\n\t  };\n\t\n\t  /**\n\t   * 绘制完成，形成正式feature\n\t   *\n\t   * @method finishDrawing\n\t   * @private\n\t   */\n\t\n\t\n\t  Draw.prototype._finishDrawing = function _finishDrawing() {\n\t    if (this._sketchFeature === null) {\n\t      this.dispatchEvent(new _drawevent2.default(_drawevent2.default.EventType.DRAW_END));\n\t      return;\n\t    }\n\t\n\t    var sketchFeature = this._abortDrawing(); // 中止绘制，\n\t    var coordinates = this._sketchCoords;\n\t    var geometry = sketchFeature.geometry;\n\t\n\t    var drawMode = this.drawMode;\n\t\n\t    if (drawMode === Draw.DrawMode.LINE) {\n\t      // remove the redundant last point\n\t      coordinates.pop();\n\t      this.geometryFunction(coordinates, geometry);\n\t    } else if (drawMode === Draw.DrawMode.POLYGON) {\n\t      // When we finish drawing a polygon on the last point,\n\t      // the last coordinate is duplicated as for LineString\n\t      // we force the replacement by the first point\n\t      coordinates[0].pop();\n\t      coordinates[0].push(coordinates[0][0]);\n\t      this.geometryFunction(coordinates, geometry);\n\t    }\n\t\n\t    // 处理复合图形\n\t    if (drawMode === _geometry2.default.MULTI_POINT) {\n\t      // sketchFeature.geometry = new MultiPoint([coordinates]))\n\t    } else if (drawMode === _geometry2.default.MULTI_LINE) {\n\t      // sketchFeature.geometry = new MultiLineString([coordinates])\n\t    } else if (drawMode === _geometry2.default.MULTI_POLYGON) {\n\t      sketchFeature.geometry = new _mutilpolygon2.default([coordinates]);\n\t    }\n\t\n\t    if (this._freehand) {\n\t      (0, _geometryutil.simplify)(sketchFeature.geometry);\n\t    }\n\t\n\t    // 最终放到shource中，形成正式feature\n\t    if (this._drawLayer) {\n\t      sketchFeature.style = undefined;\n\t      this._drawLayer.addFeatures([sketchFeature]);\n\t    }\n\t\n\t    // First dispatch event to allow full set up of feature\n\t    this.dispatchEvent(new _drawevent2.default(_drawevent2.default.EventType.DRAW_END, sketchFeature));\n\t  };\n\t\n\t  /**\n\t   * Determine if an event is within the snapping tolerance of the start coord.\n\t   *\n\t   * @param event\n\t   * @returns {Boolean}\n\t   * @private\n\t   */\n\t\n\t\n\t  Draw.prototype._atFinish = function _atFinish(event) {\n\t    var at = false;\n\t    if (this._sketchFeature) {\n\t\n\t      if (this._freehand && this._finishCondition) {\n\t        return false;\n\t      }\n\t\n\t      var potentiallyDone = false;\n\t      var potentiallyFinishCoordinates = [this._finishCoordinate];\n\t\n\t      var drawMode = this.drawMode;\n\t      if (drawMode === Draw.DrawMode.LINE) {\n\t        potentiallyDone = this._sketchCoords.length > this._minPoints;\n\t      } else if (drawMode === Draw.DrawMode.POLYGON) {\n\t        potentiallyDone = this._sketchCoords[0].length > this._minPoints;\n\t        potentiallyFinishCoordinates = [this._sketchCoords[0][0], this._sketchCoords[0][this._sketchCoords[0].length - 2]];\n\t      } else if (drawMode === Draw.DrawMode.PARALLELOGRAM) {\n\t        at = this._sketchCoords[0].length === 5 ? true : false;\n\t      }\n\t\n\t      if (potentiallyDone) {\n\t        var map = event.map;\n\t        for (var i = 0, ii = potentiallyFinishCoordinates.length; i < ii; i++) {\n\t          var finishCoordinate = potentiallyFinishCoordinates[i];\n\t          var finishPixel = map.getPixelFromCoordinate(finishCoordinate);\n\t          var pixel = event.pixel;\n\t          var dx = pixel[0] - finishPixel[0];\n\t          var dy = pixel[1] - finishPixel[1];\n\t          var freehand = this._freehand;\n\t          var snapTolerance = freehand ? 1 : this._snapTolerance;\n\t          at = Math.sqrt(dx * dx + dy * dy) <= snapTolerance;\n\t          if (at) {\n\t            this._finishCoordinate = finishCoordinate;\n\t            break;\n\t          }\n\t        }\n\t      }\n\t    }\n\t\n\t    return at;\n\t  };\n\t\n\t  /**\n\t   * Create or update the sketch point\n\t   *\n\t   * updateSketchPoint\n\t   * @param event {BrowserEvent} event\n\t   * @private\n\t   */\n\t\n\t\n\t  Draw.prototype._updateSketchPoint = function _updateSketchPoint(event) {\n\t    var coordinates = event.coordinate;\n\t\n\t    if (!this._enableSketchPoint) {\n\t      return;\n\t    }\n\t\n\t    if (this._sketchPoint === null) {\n\t      var geom = new _point2.default(coordinates[0], coordinates[1]);\n\t      this._sketchPoint = new _feature2.default(geom);\n\t      this._updateSketchFeatures();\n\t    } else {\n\t      var sketchPointgeom = this._sketchPoint.geometry;\n\t      sketchPointgeom.setCoordinates(coordinates);\n\t    }\n\t  };\n\t\n\t  Draw.prototype._autoPan = function _autoPan(event) {\n\t    var pixel = event.pixel;\n\t    var size = this.map.size;\n\t    var x = pixel[0];\n\t    var y = pixel[1];\n\t\n\t    if (x <= 2 || y <= 2) {\n\t      // console.log('出界')\n\t      return;\n\t    }\n\t\n\t    if (x >= size[0] - 5 || y >= size[1] - 5) {\n\t      // console.log('出界')\n\t      return;\n\t    }\n\t  };\n\t\n\t  /**\n\t   * Redraw the sketch featrues.\n\t   * updateSketchFeatures\n\t   * @private\n\t   */\n\t\n\t\n\t  Draw.prototype._updateSketchFeatures = function _updateSketchFeatures() {\n\t    var features = [];\n\t\n\t    if (this._sketchFeature) {\n\t      features.push(this._sketchFeature);\n\t    }\n\t\n\t    if (this._sketchLine) {\n\t      features.push(this._sketchLine);\n\t    }\n\t\n\t    if (this._sketchPoint) {\n\t      features.push(this._sketchPoint);\n\t    }\n\t\n\t    // 出发map的render\n\t    this._sketchLayer.clear();\n\t    this._sketchLayer.addFeatures(features);\n\t  };\n\t\n\t  /**\n\t   * 执行撤销\n\t   *\n\t   * @method undoDrawing\n\t   * @private\n\t   */\n\t\n\t\n\t  Draw.prototype._undoDrawing = function _undoDrawing() {\n\t    var drawMode = this.drawMode;\n\t    var undoStep = 1;\n\t    var polygonDeleteStep = 2;\n\t    if (this._freehand) {\n\t      undoStep = this._undoStep;\n\t      polygonDeleteStep = 3;\n\t    }\n\t\n\t    if (drawMode === Draw.DrawMode.LINE) {\n\t      if (this._sketchFeature) {\n\t        var coordinates = this._sketchFeature.geometry.getCoordinates();\n\t        if (coordinates.length + undoStep > 2) {\n\t          coordinates.splice(coordinates.length - 2, undoStep);\n\t          this._sketchFeature.changed();\n\t        }\n\t      }\n\t    } else if (drawMode === Draw.DrawMode.POLYGON) {\n\t      if (this._sketchFeature) {\n\t        var pcoordinates = this._sketchFeature.geometry.getCoordinates()[0];\n\t\n\t        if (pcoordinates.length + undoStep > polygonDeleteStep) {\n\t          pcoordinates.splice(pcoordinates.length - polygonDeleteStep, undoStep);\n\t          this._sketchFeature.changed();\n\t        } else {\n\t          this._abortDrawing();\n\t          this._finishDrawing();\n\t        }\n\t      }\n\t    }\n\t  };\n\t\n\t  /**\n\t   * map读写器, 读取设置当前map\n\t   *\n\t   * @type {Function}\n\t   * @property map\n\t   * @param mapValue {Object} Datatang.map\n\t   */\n\t\n\t\n\t  /**\n\t   * 更新绘制状态\n\t   *\n\t   * @method updateState\n\t   * @private\n\t   */\n\t  Draw.prototype._updateState = function _updateState() {\n\t    var map = this.map;\n\t    var active = this.active;\n\t    if (!map || !active) {\n\t      this._abortDrawing();\n\t    }\n\t\n\t    this._sketchLayer.map = map;\n\t  };\n\t\n\t  /**\n\t   * 获取默认绘制样式\n\t   *\n\t   * @method getDefaultStyleFunction\n\t   * @returns {Function}\n\t   */\n\t\n\t\n\t  Draw.prototype.getDefaultStyleFunction = function getDefaultStyleFunction() {\n\t    var styles = _style.Style.createDefaultEditing();\n\t    return function (feature) {\n\t      return styles[feature.geometry.geometryType];\n\t    };\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @returns {boolean}\n\t   */\n\t\n\t\n\t  Draw.prototype.shouldStopEvent = function shouldStopEvent() {\n\t    if (this._freehand) {\n\t      return true;\n\t    }\n\t\n\t    return false;\n\t  };\n\t\n\t  /**\n\t   * 获取当前的Layer\n\t   *\n\t   * @method drawLayer\n\t   * @return {null}\n\t   */\n\t\n\t\n\t  _createClass(Draw, [{\n\t    key: 'geometryFunction',\n\t    get: function get() {\n\t      if (!this._geometryFunction) {\n\t        this._geometryFunction = this._initGeometryFunction();\n\t      }\n\t\n\t      return this._geometryFunction;\n\t    }\n\t\n\t    /**\n\t     * drawMode读写器，\n\t     * 设置当前绘图的模式，重新赋值将会启动新图形类型的绘制\n\t     *\n\t     * @type {Function}\n\t     * @property drawMode\n\t     * @type {Datatang.Draw.DrawMode}\n\t     */\n\t\n\t  }, {\n\t    key: 'drawMode',\n\t    get: function get() {\n\t      return this._drawMode;\n\t    },\n\t    set: function set(value) {\n\t      var isIn = this._existInDrawMode(value);\n\t\n\t      this.active = isIn ? true : false;\n\t      this._drawMode = isIn ? value : Draw.DrawMode.UNDEFINED;\n\t\n\t      this._sketchLineCoords = null;\n\t      this._abortDrawing();\n\t\n\t      this._minPoints = this._drawMode === Draw.DrawMode.POLYGON ? 3 : 2;\n\t    }\n\t  }, {\n\t    key: 'map',\n\t    get: function get() {\n\t      return this._map;\n\t    },\n\t    set: function set(mapValue) {\n\t      if (this._mapRenderKey) {\n\t        (0, _eventmanager.unlistenByKey)(this._mapRenderKey);\n\t        this._mapRenderKey = null;\n\t      }\n\t\n\t      if (mapValue) {\n\t        this._map = mapValue;\n\t        // this._mapRenderKey = listen(this, EventType.CHANGE, mapValue.render, mapValue)\n\t\n\t        mapValue.addLayer(this._sketchLayer);\n\t      }\n\t\n\t      this._updateState();\n\t    }\n\t  }, {\n\t    key: 'drawLayer',\n\t    get: function get() {\n\t      return this._drawLayer;\n\t    }\n\t\n\t    /**\n\t     * 设置当前自由、绘制模式\n\t     * @property freehand\n\t     * @type {Boolean}\n\t     */\n\t\n\t  }, {\n\t    key: 'freehand',\n\t    get: function get() {\n\t      return this._freehand;\n\t    },\n\t    set: function set(value) {\n\t      this._freehand = value;\n\t    }\n\t\n\t    /**\n\t     * active读写器, 读取设置当前active非自由\n\t     *\n\t     * @type {Function}\n\t     * @property active\n\t     * @type {Boolean}\n\t     */\n\t\n\t  }, {\n\t    key: 'active',\n\t    get: function get() {\n\t      return this._active;\n\t    },\n\t    set: function set(value) {\n\t      this._active = value;\n\t      if (this._active === false) {\n\t        if (this._sketchLayer) {\n\t          this._sketchLayer.clear();\n\t        }\n\t\n\t        this._sketchPoint = null;\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return Draw;\n\t}(_component2.default);\n\t\n\t/**\n\t * 获取当前绘制模式的静态方法\n\t *\n\t * @method getDrawMode\n\t * @param type {String}\n\t * @returns {Object}\n\t */\n\t\n\t\n\texports.default = Draw;\n\tDraw.getDrawMode = function (type) {\n\t  var drawMode = Draw.DrawMode.UNDEFINED;\n\t\n\t  switch (type) {\n\t    case _geometry2.default.POINT:\n\t    case _geometry2.default.MULTI_POINT:\n\t      drawMode = Draw.DrawMode.POINT;\n\t      break;\n\t    case _geometry2.default.LINE:\n\t    case _geometry2.default.MULTI_LINE:\n\t      drawMode = Draw.DrawMode.LINE;\n\t      break;\n\t    case _geometry2.default.POLYGON:\n\t    case _geometry2.default.MULTI_POLYGON:\n\t      drawMode = Draw.DrawMode.POLYGON;\n\t      break;\n\t    case _geometry2.default.EXTENT:\n\t      drawMode = Draw.DrawMode.EXTENT;\n\t      break;\n\t    case _geometry2.default.PARALLELOGRAM:\n\t      drawMode = Draw.DrawMode.PARALLELOGRAM;\n\t      break;\n\t  }\n\t\n\t  return drawMode;\n\t};\n\t\n\t/**\n\t * Draw mode.  This collapses multi-part geometry types with their single-part\n\t * cousins.\n\t *\n\t * 绘制模式：点、线、面、矩形(circle暂时不支持)\n\t * @enum {string}\n\t */\n\tDraw.DrawMode = {\n\t  POINT: 'Point',\n\t  LINE: 'Line',\n\t  POLYGON: 'Polygon',\n\t  CIRCLE: 'Circle',\n\t  EXTENT: 'Extent',\n\t  PARALLELOGRAM: 'Parallelogram',\n\t  UNDEFINED: 'undefined'\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 59 */\n/*!****************************************!*\\\n  !*** ./src/components/keyboardhome.js ***!\n  \\****************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _component = __webpack_require__(/*! ./component */ 8);\n\t\n\tvar _component2 = _interopRequireDefault(_component);\n\t\n\tvar _mousekey = __webpack_require__(/*! ../utils/mousekey */ 14);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/8/3.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t *\n\t */\n\tvar KeyboardHome = function (_Component) {\n\t  _inherits(KeyboardHome, _Component);\n\t\n\t  function KeyboardHome() {\n\t    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t    _classCallCheck(this, KeyboardHome);\n\t\n\t    var _this = _possibleConstructorReturn(this, _Component.call(this));\n\t\n\t    _this._defaultCondition = function (mapBrowserEvent) {\n\t      var keyCode = mapBrowserEvent.originalEvent.keyCode;\n\t      return (0, _mousekey.noModifierKeys)(mapBrowserEvent) && (0, _mousekey.targetNotEditable)(mapBrowserEvent) && keyCode === 36;\n\t    };\n\t\n\t    /**\n\t     * @private\n\t     * @type {ol.EventsConditionType}\n\t     */\n\t    _this._condition = options.condition ? options.condition : _this._defaultCondition;\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   *\n\t   * @param mapBrowserEvent\n\t   */\n\t\n\t\n\t  KeyboardHome.prototype.handleMouseEvent = function handleMouseEvent(mapBrowserEvent) {\n\t    var stopEvent = false;\n\t    if (this._condition(mapBrowserEvent)) {\n\t      this._goToHome();\n\t    }\n\t\n\t    return !stopEvent;\n\t  };\n\t\n\t  /**\n\t   * 将视图还原到最初\n\t   * @private\n\t   */\n\t\n\t\n\t  KeyboardHome.prototype._goToHome = function _goToHome() {\n\t    var view = this.map.view;\n\t    if (view) {\n\t      var orignalCenter = view.originalCenter;\n\t      var originalResolution = view.originalResolution;\n\t\n\t      view.center = orignalCenter;\n\t      view.resolution = originalResolution;\n\t    }\n\t  };\n\t\n\t  return KeyboardHome;\n\t}(_component2.default);\n\t\n\texports.default = KeyboardHome;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 60 */\n/*!***************************************!*\\\n  !*** ./src/components/keyboardpan.js ***!\n  \\***************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _component = __webpack_require__(/*! ./component */ 8);\n\t\n\tvar _component2 = _interopRequireDefault(_component);\n\t\n\tvar _browserevent = __webpack_require__(/*! ../meek/browserevent */ 5);\n\t\n\tvar _browserevent2 = _interopRequireDefault(_browserevent);\n\t\n\tvar _mousekey = __webpack_require__(/*! ../utils/mousekey */ 14);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/8/2.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar KeyboardPan = function (_Component) {\n\t  _inherits(KeyboardPan, _Component);\n\t\n\t  function KeyboardPan() {\n\t    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t    _classCallCheck(this, KeyboardPan);\n\t\n\t    var _this = _possibleConstructorReturn(this, _Component.call(this));\n\t\n\t    _this._defaultCondition = function (mapBrowserEvent) {\n\t      var keyCode = mapBrowserEvent.originalEvent.keyCode;\n\t      return (0, _mousekey.noModifierKeys)(mapBrowserEvent) && (0, _mousekey.targetNotEditable)(mapBrowserEvent) && (keyCode === 40 || keyCode === 37 || keyCode === 39 || keyCode === 38);\n\t    };\n\t\n\t    /**\n\t     * @private\n\t     */\n\t    _this._condition = options.condition !== undefined ? options.condition : _this._defaultCondition;\n\t\n\t    /**\n\t     * @private\n\t     * @type {number}\n\t     */\n\t    _this._duration = options.duration !== undefined ? options.duration : 100;\n\t\n\t    /**\n\t     * @private\n\t     * @type {number}\n\t     */\n\t    _this._pixelDelta = options.pixelDelta !== undefined ? options.pixelDelta : 128;\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * \n\t   * @param event\n\t   * @returns {boolean}\n\t   */\n\t\n\t\n\t  KeyboardPan.prototype.handleMouseEvent = function handleMouseEvent(mapBrowserEvent) {\n\t    var stopEvent = false;\n\t    if (mapBrowserEvent.type === _browserevent2.default.KEYDOWN) {\n\t      var keyEvent = mapBrowserEvent.originalEvent;\n\t      var keyCode = keyEvent.keyCode;\n\t      if (this._condition(mapBrowserEvent)) {\n\t        var map = mapBrowserEvent.map;\n\t        var view = map.view;\n\t        var mapUnitsDelta = view.resolution * this._pixelDelta;\n\t        var deltaX = 0,\n\t            deltaY = 0;\n\t\n\t        if (keyCode === 40) {\n\t          deltaY = mapUnitsDelta;\n\t        } else if (keyCode === 37) {\n\t          deltaX = -mapUnitsDelta;\n\t        } else if (keyCode === 39) {\n\t          deltaX = mapUnitsDelta;\n\t        } else {\n\t          deltaY = -mapUnitsDelta;\n\t        }\n\t\n\t        var delta = [deltaX, deltaY];\n\t        _Component.prototype.pan.call(this, view, delta, null);\n\t        mapBrowserEvent.preventDefault();\n\t        stopEvent = true;\n\t      }\n\t    }\n\t    return !stopEvent;\n\t  };\n\t\n\t  return KeyboardPan;\n\t}(_component2.default);\n\t\n\texports.default = KeyboardPan;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 61 */\n/*!****************************************!*\\\n  !*** ./src/components/keyboardzoom.js ***!\n  \\****************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _component = __webpack_require__(/*! ./component */ 8);\n\t\n\tvar _component2 = _interopRequireDefault(_component);\n\t\n\tvar _browserevent = __webpack_require__(/*! ../meek/browserevent */ 5);\n\t\n\tvar _browserevent2 = _interopRequireDefault(_browserevent);\n\t\n\tvar _mousekey = __webpack_require__(/*! ../utils/mousekey */ 14);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/8/2.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar KeyboardZoom = function (_Component) {\n\t  _inherits(KeyboardZoom, _Component);\n\t\n\t  function KeyboardZoom() {\n\t    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t    _classCallCheck(this, KeyboardZoom);\n\t\n\t    /**\n\t     * @private\n\t     */\n\t    var _this = _possibleConstructorReturn(this, _Component.call(this));\n\t\n\t    _this._condition = options.condition ? options.condition : _mousekey.targetNotEditable;\n\t\n\t    /**\n\t     * @private\n\t     * @type {number}\n\t     */\n\t    _this._delta = options.delta ? options.delta : 1;\n\t\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   *\n\t   * @param mapBrowserEvent\n\t   * @returns {boolean}\n\t   */\n\t\n\t\n\t  KeyboardZoom.prototype.handleMouseEvent = function handleMouseEvent(mapBrowserEvent) {\n\t    var stopEvent = false;\n\t    if (mapBrowserEvent.type == _browserevent2.default.KEYDOWN || mapBrowserEvent.type == _browserevent2.default.KEYPRESS) {\n\t      var keyEvent = mapBrowserEvent.originalEvent;\n\t      var charCode = keyEvent.charCode;\n\t      if (this._condition(mapBrowserEvent) && (charCode == '+'.charCodeAt(0) || charCode == '-'.charCodeAt(0))) {\n\t        var map = mapBrowserEvent.map;\n\t        var delta = charCode == '+'.charCodeAt(0) ? this._delta : -this._delta;\n\t        var view = map.view;\n\t        _Component.prototype.zoomByDelta.call(this, view, delta, undefined, null);\n\t        mapBrowserEvent.preventDefault();\n\t        stopEvent = true;\n\t      }\n\t    }\n\t\n\t    return !stopEvent;\n\t  };\n\t\n\t  return KeyboardZoom;\n\t}(_component2.default);\n\t\n\texports.default = KeyboardZoom;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 62 */\n/*!***********************************!*\\\n  !*** ./src/components/kinetic.js ***!\n  \\***********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _baseobject = __webpack_require__(/*! ../core/baseobject */ 3);\n\t\n\tvar _baseobject2 = _interopRequireDefault(_baseobject);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Kinetic = function (_BaseObject) {\n\t  _inherits(Kinetic, _BaseObject);\n\t\n\t  function Kinetic(decay, minVelocity, delay) {\n\t    _classCallCheck(this, Kinetic);\n\t\n\t    /**\n\t     * @private\n\t     * @type {number}\n\t     */\n\t    var _this = _possibleConstructorReturn(this, _BaseObject.call(this));\n\t\n\t    _this._decay = decay;\n\t\n\t    /**\n\t     * @private\n\t     * @type {number}\n\t     */\n\t    _this._minVelocity = minVelocity;\n\t\n\t    /**\n\t     * @private\n\t     * @type {number}\n\t     */\n\t    _this._delay = delay;\n\t\n\t    /**\n\t     * @private\n\t     * @type {Array.<number>}\n\t     */\n\t    _this._points = [];\n\t\n\t    /**\n\t     * @private\n\t     * @type {number}\n\t     */\n\t    _this._angle = 0;\n\t\n\t    /**\n\t     * @private\n\t     * @type {number}\n\t     */\n\t    _this._initialVelocity = 0;\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   */\n\t\n\t\n\t  Kinetic.prototype.begin = function begin() {\n\t    this._points.length = 0;\n\t    this._angle = 0;\n\t    this._initialVelocity = 0;\n\t  };\n\t\n\t  /**\n\t   * @param {number} x X.\n\t   * @param {number} y Y.\n\t   */\n\t\n\t\n\t  Kinetic.prototype.update = function update(x, y) {\n\t    this._points.push(x, y, Date.now());\n\t  };\n\t\n\t  /**\n\t   * @return {boolean} Whether we should do kinetic animation.\n\t   */\n\t\n\t\n\t  Kinetic.prototype.end = function end() {\n\t    if (this._points.length < 6) {\n\t      // at least 2 points are required (i.e. there must be at least 6 elements\n\t      // in the array)\n\t      return false;\n\t    }\n\t    var delay = Date.now() - this._delay;\n\t    var lastIndex = this._points.length - 3;\n\t    if (this._points[lastIndex + 2] < delay) {\n\t      // the last tracked point is too old, which means that the user stopped\n\t      // panning before releasing the map\n\t      return false;\n\t    }\n\t\n\t    // get the first point which still falls into the delay time\n\t    var firstIndex = lastIndex - 3;\n\t    while (firstIndex > 0 && this._points[firstIndex + 2] > delay) {\n\t      firstIndex -= 3;\n\t    }\n\t\n\t    var duration = this._points[lastIndex + 2] - this._points[firstIndex + 2];\n\t    var dx = this._points[lastIndex] - this._points[firstIndex];\n\t    var dy = this._points[lastIndex + 1] - this._points[firstIndex + 1];\n\t    this._angle = Math.atan2(dy, dx);\n\t    this._initialVelocity = Math.sqrt(dx * dx + dy * dy) / duration;\n\t    return this._initialVelocity > this._minVelocity;\n\t  };\n\t\n\t  /**\n\t   * @return {number} Total distance travelled (pixels).\n\t   */\n\t\n\t\n\t  Kinetic.prototype.getDistance = function getDistance() {\n\t    return (this._minVelocity - this._initialVelocity) / this._decay;\n\t  };\n\t\n\t  /**\n\t   * @return {number} Angle of the kinetic panning animation (radians).\n\t   */\n\t\n\t\n\t  Kinetic.prototype.angle = function angle() {\n\t    return this._angle;\n\t  };\n\t\n\t  return Kinetic;\n\t}(_baseobject2.default);\n\t\n\texports.default = Kinetic;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 63 */\n/*!**********************************!*\\\n  !*** ./src/components/modify.js ***!\n  \\**********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _component = __webpack_require__(/*! ./component */ 8);\n\t\n\tvar _component2 = _interopRequireDefault(_component);\n\t\n\tvar _browserevent = __webpack_require__(/*! ../meek/browserevent */ 5);\n\t\n\tvar _browserevent2 = _interopRequireDefault(_browserevent);\n\t\n\tvar _geometry = __webpack_require__(/*! ../geometry/geometry */ 1);\n\t\n\tvar _geometry2 = _interopRequireDefault(_geometry);\n\t\n\tvar _point = __webpack_require__(/*! ../geometry/point */ 22);\n\t\n\tvar _point2 = _interopRequireDefault(_point);\n\t\n\tvar _parallelogram = __webpack_require__(/*! ../geometry/parallelogram */ 21);\n\t\n\tvar _parallelogram2 = _interopRequireDefault(_parallelogram);\n\t\n\tvar _eventmanager = __webpack_require__(/*! ../core/eventmanager */ 4);\n\t\n\tvar _eventtype = __webpack_require__(/*! ../meek/eventtype */ 6);\n\t\n\tvar _modifyevent = __webpack_require__(/*! ./modifyevent */ 39);\n\t\n\tvar _modifyevent2 = _interopRequireDefault(_modifyevent);\n\t\n\tvar _feature = __webpack_require__(/*! ../meek/feature */ 24);\n\t\n\tvar _feature2 = _interopRequireDefault(_feature);\n\t\n\tvar _featurelayer = __webpack_require__(/*! ../lyr/featurelayer */ 13);\n\t\n\tvar _featurelayer2 = _interopRequireDefault(_featurelayer);\n\t\n\tvar _style = __webpack_require__(/*! ../style/style */ 17);\n\t\n\tvar _extentutil = __webpack_require__(/*! ../geometry/support/extentutil */ 2);\n\t\n\tvar _geometryutil = __webpack_require__(/*! ../geometry/support/geometryutil */ 11);\n\t\n\tvar _mousekey = __webpack_require__(/*! ../utils/mousekey */ 14);\n\t\n\tvar _functions = __webpack_require__(/*! ../utils/functions */ 56);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/5/25.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * 编辑模式，启动后可以编辑图形\n\t *\n\t * @class Modify\n\t * @extends Component\n\t * @module component\n\t * @constructor\n\t * @example\n\t *\n\t *      // 实例化编辑工具\n\t *      var modifyTool = new Datatang.Modify({\n\t *        features: selectedFeaturs\n\t *      })\n\t */\n\tvar Modify = function (_Component) {\n\t  _inherits(Modify, _Component);\n\t\n\t  /**\n\t   * 构造函数\n\t   *\n\t   * @constructor constructor\n\t   * @param options\n\t   */\n\t  function Modify() {\n\t    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t    _classCallCheck(this, Modify);\n\t\n\t    var _this = _possibleConstructorReturn(this, _Component.call(this, options));\n\t\n\t    _this.applyHandleEventOption({\n\t      handleDownEvent: _this._handleDownEvent,\n\t      handleDragEvent: _this._handleDragEvent,\n\t      handleUpEvent: _this._handleUpEvent\n\t    });\n\t\n\t    /**\n\t     * 可以编辑的feature集合\n\t     *\n\t     * @property features\n\t     * @type {Array}\n\t     * @private\n\t     */\n\t    _this._features = [];\n\t\n\t    /**\n\t     * 当前鼠标点与图形之间的公差距离，小于该值后立即捕捉标注数据\n\t     *\n\t     * @property pixelTolerance\n\t     * @type {number}\n\t     * @private\n\t     */\n\t    _this._pixelTolerance = options.pixelTolerance ? options.pixelTolerance : 10;\n\t\n\t    /**\n\t     * 可以整体移动图形，矩形默认可以整体移动\n\t     *\n\t     * @property movableGeometrys\n\t     * @type {[*]}\n\t     * @private\n\t     */\n\t    _this._movableGeometrys = options.movableGeometrys ? options.movableGeometrys : ['extent'];\n\t\n\t    /**\n\t     *\n\t     * hasMoveableGeometrys\n\t     * @type {boolean}\n\t     * @private\n\t     */\n\t    _this._hasMoveableGeometrys = true;\n\t\n\t    var movableGeometrys = _this._movableGeometrys;\n\t    if (movableGeometrys === null || movableGeometrys === undefined) {\n\t      _this._hasMoveableGeometrys = false;\n\t    }\n\t\n\t    if (Array.isArray(movableGeometrys)) {\n\t      if (movableGeometrys.length === 0) {\n\t        _this._hasMoveableGeometrys = false;\n\t      }\n\t    }\n\t\n\t    /**\n\t     *\n\t     * @type {Set}\n\t     * @private\n\t     */\n\t    _this.movableGeometrySet;\n\t\n\t    if (_this._hasMoveableGeometrys) {\n\t      _this.movableGeometrySet = new Set(_this._movableGeometrys);\n\t    }\n\t\n\t    /**\n\t     * @private\n\t     */\n\t    _this._deleteCondition = options.deleteCondition ? options.deleteCondition : _this._defaultDeleteCondition;\n\t\n\t    /**\n\t     * 允许顶点编辑的条件方法，默认可编辑\n\t     * @private\n\t     */\n\t    _this._vertexEditableCondition = options.vertexEditableCondition ? options.vertexEditableCondition : _functions.functions.TURE;\n\t\n\t    /**\n\t     * 允许边编辑的条件方法，默认可编辑\n\t     * @private\n\t     */\n\t    _this._edgeEditableCondition = options.edgeEditableCondition ? options.edgeEditableCondition : _functions.functions.TURE;\n\t\n\t    /**\n\t     * Determine if should snap to vertexs of gemetry\n\t     *\n\t     * snappedToVertex\n\t     * @type {boolean}\n\t     * @private\n\t     */\n\t    _this._snappedToVertex = false;\n\t\n\t    /**\n\t     * @snapSegments\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._snapSegments = null;\n\t\n\t    /**\n\t     * @vertexFeature\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._vertexFeature = null;\n\t\n\t    /**\n\t     * The editable features\n\t     *\n\t     * 设置需要编辑图形的集合，\n\t     * 如果图形不允许编辑，请从该集合移除\n\t     *\n\t     * @property features\n\t     * @type {[]}\n\t     */\n\t    _this.features = options.features || [];\n\t\n\t    /**\n\t     *\n\t     * @type {[*]}\n\t     * @private\n\t     */\n\t    _this._lastPixel = [0, 0];\n\t\n\t    /**\n\t     * 初始化草稿图层，用于临时高亮显示编辑的图形\n\t     *\n\t     * @property overLayer\n\t     * @type {FeatureLayer}\n\t     * @private\n\t     */\n\t    _this._overLayer = new _featurelayer2.default({\n\t      style: options.style ? options.style : _this.getDefaultStyleFunction(),\n\t      zIndex: 1000\n\t    });\n\t\n\t    _this.active = true;\n\t\n\t    _this._dragSegments = [];\n\t\n\t    /**\n\t     * 图形是否修改过，默认为false\n\t     *\n\t     * modified\n\t     * @type {boolean}\n\t     * @private\n\t     */\n\t    _this._modified = false;\n\t\n\t    /**\n\t     * changingFeature\n\t     * @type {boolean}\n\t     * @private\n\t     */\n\t    _this._changingFeature = true;\n\t\n\t    /**\n\t     * Tracks if the next `singleclick` event should be ignored to prevent\n\t     * accidental deletion right after vertex creation.\n\t     *\n\t     * ignoreNextSingleClick\n\t     * @type {boolean}\n\t     * @private\n\t     */\n\t    _this._ignoreNextSingleClick = false;\n\t\n\t    /**\n\t     * shouldAddToVertexs\n\t     * @type {boolean}\n\t     * @private\n\t     */\n\t    _this._shouldAddToVertexs = false;\n\t\n\t    /**\n\t     * insertVertices\n\t     * @type {Array}\n\t     * @private\n\t     */\n\t    _this._insertVertices = [];\n\t\n\t    /**\n\t     * Keep the mouse-down point\n\t     *\n\t     * downPoint\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._downPoint = null;\n\t\n\t    /**\n\t     * Keep the current moved geometry\n\t     *\n\t     * currentMovedGeometry\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._currentMovedGeometry = null;\n\t\n\t    /**\n\t     * 记录上一次被编辑的点\n\t     * 一般指的是在边上的捕捉点或者顶点本身\n\t     * 只是用于平行四边形的编辑使用\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._oldEditedVertex = null;\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * feature的读写器，读取设置当前的feature\n\t   *\n\t   * @property features\n\t   * @returns {Object} feature\n\t   */\n\t\n\t\n\t  /**\n\t   * Handle the mouse events emitted from map.\n\t   *\n\t   * 处理鼠标事件\n\t   *\n\t   * handleMouseEvent\n\t   * @param browserEvent\n\t   * @returns {boolean}\n\t   */\n\t  Modify.prototype.handleMouseEvent = function handleMouseEvent(browserEvent) {\n\t    if (!(browserEvent instanceof _browserevent2.default)) {\n\t      return true;\n\t    }\n\t\n\t    browserEvent.coordinate = this.coordinateBeyond(browserEvent.coordinate);\n\t\n\t    this.lastPointerEvent_ = browserEvent;\n\t\n\t    var handled = void 0;\n\t    if (browserEvent.type == _browserevent2.default.MOUSE_MOVE && !this.handlingDownUpSequence) {\n\t      this._handlePointerMove(browserEvent);\n\t    }\n\t    if (this._vertexFeature && this._deleteCondition(browserEvent)) {\n\t      if (browserEvent.type !== _browserevent2.default.SINGLE_CLICK || !this._ignoreNextSingleClick) {\n\t        handled = this.removePoint();\n\t      } else {\n\t        handled = true;\n\t      }\n\t    }\n\t\n\t    if (browserEvent.type == _browserevent2.default.SINGLE_CLICK) {\n\t      this._ignoreNextSingleClick = false;\n\t    }\n\t\n\t    return _Component.prototype.handleMouseEvent.call(this, browserEvent) && !handled;\n\t  };\n\t\n\t  /**\n\t   * Removes the vertex currently being pointed.\n\t   *\n\t   *\n\t   * removePoint\n\t   * @return {boolean} True when a vertex was removed.\n\t   * @api\n\t   */\n\t\n\t\n\t  Modify.prototype.removePoint = function removePoint() {\n\t    if (this._lastPointerEvent && this._lastPointerEvent.type != _browserevent2.default.MOUSE_DRAG) {\n\t      var evt = this.lastPointerEvent_;\n\t      this.willModifyFeatures_(evt);\n\t      this._removeVertex();\n\t\n\t      this.dispatchEvent(new _modifyevent2.default(_modifyevent2.default.EventType.MODIFY_END, this.features, evt));\n\t      this._modified = false;\n\t      return true;\n\t    }\n\t\n\t    return false;\n\t  };\n\t\n\t  /**\n\t   * compareIndexes\n\t   * @param a\n\t   * @param b\n\t   * @returns {number}\n\t   * @private\n\t   */\n\t\n\t\n\t  Modify.prototype._compareIndexes = function _compareIndexes(a, b) {\n\t    return a.index - b.index;\n\t  };\n\t\n\t  /**\n\t   * willModifyFeatures\n\t   * @param event\n\t   * @private\n\t   */\n\t\n\t\n\t  Modify.prototype._willModifyFeatures = function _willModifyFeatures(event) {\n\t    if (!this._modified) {\n\t      this._modified = true;\n\t      this.dispatchEvent(new _modifyevent2.default(_modifyevent2.default.EventType.MODIFY_START, this.features, event));\n\t    }\n\t  };\n\t\n\t  /**\n\t   * Handle poiner mouse down event\n\t   *\n\t   * handleDownEvent\n\t   * @param evt {Event}\n\t   * @private\n\t   */\n\t\n\t\n\t  Modify.prototype._handleDownEvent = function _handleDownEvent(evt) {\n\t    var _this2 = this;\n\t\n\t    this._downPoint = evt.coordinate;\n\t    this._dragSegments.length = 0;\n\t    this._modified = false;\n\t    var coordinate = evt.coordinate;\n\t    var vertexFeature = this._vertexFeature;\n\t\n\t    if (vertexFeature) {\n\t      var insertVertices = [this._snapSegments];\n\t      if (insertVertices.length) {\n\t        this._willModifyFeatures(evt);\n\t      }\n\t\n\t      this._shouldAddToVertexs = true;\n\t      this._insertVertices = insertVertices;\n\t\n\t      return !!this._vertexFeature;\n\t    }\n\t    // Move the selected geometry\n\t    else {\n\t        if (!this._hasMoveableGeometrys) {\n\t          return;\n\t        }\n\t\n\t        var filters = this.features.filter(function (feature) {\n\t          var geometry = feature.geometry;\n\t          return _this2.movableGeometrySet.has(geometry.geometryType) && geometry.containsXY(coordinate[0], coordinate[1]);\n\t        });\n\t\n\t        // We get the first filter geometry to move\n\t        // Otherwise, you should reselect\n\t        if (filters.length > 0) {\n\t          this._currentMovedGeometry = filters[0];\n\t          return true;\n\t        }\n\t\n\t        return false;\n\t      }\n\t  };\n\t\n\t  /**\n\t   * Handle pointer move event\n\t   *\n\t   * 处理点移动事件\n\t   *\n\t   * handlePointerMove\n\t   * @param evt {Event}\n\t   * @private\n\t   */\n\t\n\t\n\t  Modify.prototype._handlePointerMove = function _handlePointerMove(evt) {\n\t    this._lastPixel = evt.pixel;\n\t    this._handlePointerAtPixel(evt.pixel, evt.map);\n\t  };\n\t\n\t  /**\n\t   * @param pixel {Array}\n\t   * @param map {map}\n\t   * @private\n\t   */\n\t\n\t\n\t  Modify.prototype._handlePointerAtPixel = function _handlePointerAtPixel(pixel, map) {\n\t    var _this3 = this;\n\t\n\t    var pixelCoordinate = map.getCoordinateFromPixel(pixel);\n\t\n\t    var sortByDistance = function sortByDistance(s1, s2) {\n\t      var d1 = _this3._pointDistanceToSegment(pixelCoordinate, s1);\n\t      var d2 = _this3._pointDistanceToSegment(pixelCoordinate, s2);\n\t      return d1 - d2;\n\t    };\n\t\n\t    this._snapSegments = null;\n\t\n\t    if (this.features.length === 0) {\n\t      return;\n\t    }\n\t\n\t    // 与当前屏幕内图形做碰撞检测\n\t    var nodes = this._getInExtent(this.features, pixelCoordinate, this._pixelTolerance);\n\t    if (nodes.length > 0) {\n\t      nodes.sort(sortByDistance);\n\t      var node = nodes[0];\n\t      var geometry = node.geometry;\n\t      var geometryType = geometry.geometryType;\n\t      var closestSegment = node.segment;\n\t      var vertex = this._closestOnSegment(pixelCoordinate, node); // 计算鼠标点在线段上的投影点\n\t      var vertexPixel = map.getPixelFromCoordinate(vertex);\n\t\n\t      // 判断当前是否选中了边\n\t      var dist = (0, _geometryutil.distance)(pixel, vertexPixel);\n\t      if (dist <= this._pixelTolerance) {\n\t        /**\n\t         *  已经选中了边\n\t         */\n\t        this._snapSegments = node;\n\t\n\t        var vertexEditable = false;\n\t\n\t        if (geometryType === _geometry2.default.CIRCLE && node.index === Modify.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX) {\n\t          this._snappedToVertex = true;\n\t        } else {\n\t\n\t          /**\n\t           * 再计算是否选中了线段的两个顶点\n\t           */\n\t\n\t          // 判断是否允许顶点可编辑\n\t          if (this._vertexEditableCondition(node)) {\n\t            var pixel1 = map.getPixelFromCoordinate(closestSegment[0]);\n\t            var pixel2 = map.getPixelFromCoordinate(closestSegment[1]);\n\t            var squaredDist1 = (0, _geometryutil.squaredDistance)(vertexPixel[0], vertexPixel[1], pixel1[0], pixel1[1]);\n\t            var squaredDist2 = (0, _geometryutil.squaredDistance)(vertexPixel[0], vertexPixel[1], pixel2[0], pixel2[1]);\n\t            dist = Math.sqrt(Math.min(squaredDist1, squaredDist2));\n\t\n\t            // 判断当前是否选中了顶点\n\t            this._snappedToVertex = dist <= this._pixelTolerance;\n\t            if (this._snappedToVertex) {\n\t              vertex = squaredDist1 > squaredDist2 ? closestSegment[1] : closestSegment[0];\n\t\n\t              var coordinateIndex = geometry.getCoordinateIndex(vertex);\n\t              if (geometryType === _geometry2.default.POLYGON || geometryType === _geometry2.default.PARALLELOGRAM) {\n\t                this._snapSegments.index = coordinateIndex.index;\n\t                this._snapSegments.ringIndex = coordinateIndex.ringIndex;\n\t              } else if (geometryType === _geometry2.default.MULTI_POLYGON) {\n\t                this._snapSegments.index = coordinateIndex.index;\n\t                this._snapSegments.ringIndex = coordinateIndex.ringIndex;\n\t                this._snapSegments.polygonIndex = coordinateIndex.polygonIndex;\n\t              } else {\n\t                this._snapSegments.index = coordinateIndex;\n\t              }\n\t\n\t              this._snapSegments.isVertex = true;\n\t              vertexEditable = true;\n\t            }\n\t          }\n\t\n\t          if (geometryType === _geometry2.default.PARALLELOGRAM) {\n\t            this._snapSegments.index = node.index;\n\t            this._snapSegments.ringIndex = node.ringIndex;\n\t          }\n\t        }\n\t\n\t        // 边可编辑，或者顶点可编辑\n\t        if (this._edgeEditableCondition(node) || vertexEditable) {\n\t          // draw the snapping point\n\t          this._createOrUpdateVertexFeature(vertex);\n\t        } else {\n\t          this._snapSegments = null;\n\t        }\n\t\n\t        return;\n\t      }\n\t    }\n\t\n\t    if (this._vertexFeature) {\n\t      this._overLayer.removeFeature(this._vertexFeature);\n\t      this._vertexFeature = null;\n\t    }\n\t  };\n\t\n\t  /**\n\t   * Handle mouse drag event.\n\t   *\n\t   * handleDragEvent\n\t   * @param evt {Event}\n\t   * @private\n\t   */\n\t\n\t\n\t  Modify.prototype._handleDragEvent = function _handleDragEvent(evt) {\n\t    this._ignoreNextSingleClick = false;\n\t    var vertex = evt.coordinate;\n\t\n\t    if (this._shouldAddToVertexs) {\n\t      var vertexFeature = this._vertexFeature;\n\t      var _vertex = vertexFeature.geometry.getCoordinates();\n\t\n\t      var insertVertices = this._insertVertices;\n\t      for (var j = insertVertices.length - 1; j >= 0; --j) {\n\t        this._insertVertex(insertVertices[j], _vertex);\n\t      }\n\t\n\t      this._shouldAddToVertexs = false;\n\t    }\n\t\n\t    var dragSegments = this._dragSegments;\n\t    var len = dragSegments.length;\n\t\n\t    // move the edge of selected geometry\n\t    if (len !== 0) {\n\t      this._willModifyFeatures(evt);\n\t\n\t      for (var i = 0; i < len; ++i) {\n\t        var dragSegment = dragSegments[i];\n\t        var segmentData = dragSegment[0];\n\t        var depth = segmentData.depth;\n\t        var geometry = segmentData.geometry;\n\t        var coordinates = null;\n\t        var segment = segmentData.segment;\n\t        var index = dragSegment.index;\n\t\n\t        switch (geometry.geometryType) {\n\t          case _geometry2.default.POINT:\n\t            coordinates = vertex;\n\t            segment[0] = segment[1] = vertex;\n\t            break;\n\t          case _geometry2.default.MULTI_POINT:\n\t            coordinates = geometry.getCoordinates();\n\t            coordinates[segmentData.index] = vertex;\n\t            segment[0] = segment[1] = vertex;\n\t            break;\n\t          case _geometry2.default.LINE:\n\t            coordinates = geometry.getCoordinates();\n\t            coordinates[segmentData.index] = vertex;\n\t            // segment[index] = vertex\n\t            break;\n\t          case _geometry2.default.MULTI_LINE:\n\t            coordinates = geometry.getCoordinates();\n\t            coordinates[depth[0]][segmentData.index + index] = vertex;\n\t            segment[index] = vertex;\n\t            break;\n\t          case _geometry2.default.POLYGON:\n\t            coordinates = geometry.getCoordinates();\n\t            coordinates[segmentData.ringIndex][segmentData.index] = vertex;\n\t            if (segmentData.index === 0) {\n\t              coordinates[segmentData.ringIndex][coordinates[segmentData.ringIndex].length - 1] = vertex;\n\t            }\n\t            break;\n\t          case _geometry2.default.PARALLELOGRAM:\n\t            // 重新计算平行四边的各个顶点\n\t            coordinates = _parallelogram2.default.updateCoordinatesForModification(geometry, vertex, this._oldEditedVertex, dragSegment);\n\t            this._oldEditedVertex = vertex;\n\t            break;\n\t          case _geometry2.default.EXTENT:\n\t            coordinates = _extentutil.ExtentUtil.updateExtent(geometry, vertex, dragSegment);\n\t            break;\n\t          case _geometry2.default.MULTI_POLYGON:\n\t            coordinates = geometry.getCoordinates();\n\t            coordinates[segmentData.polygonIndex][segmentData.ringIndex][segmentData.index] = vertex;\n\t            if (segmentData.index === 0) {\n\t              coordinates[segmentData.polygonIndex][segmentData.ringIndex][coordinates[segmentData.polygonIndex][segmentData.ringIndex].length - 1] = vertex;\n\t            }\n\t            break;\n\t          case _geometry2.default.CIRCLE:\n\t            segment[0] = segment[1] = vertex;\n\t            if (segmentData.index === Modify.MODIFY_SEGMENT_CIRCLE_CENTER_INDEX) {\n\t              this._changingFeature = true;\n\t              geometry.setCenter(vertex);\n\t              this._changingFeature = false;\n\t            } else {\n\t              // We're dragging the circle's circumference:\n\t              this._changingFeature = true;\n\t              geometry.setRadius((0, _geometryutil.distance)(geometry.getCenter(), vertex));\n\t              this._changingFeature = false;\n\t            }\n\t            break;\n\t          default:\n\t          // pass\n\t        }\n\t\n\t        if (coordinates) {\n\t          this._setGeometryCoordinates(geometry, coordinates);\n\t        }\n\t      }\n\t\n\t      this._createOrUpdateVertexFeature(vertex);\n\t    }\n\t    // move the whole selected geometry\n\t    else if (this._currentMovedGeometry) {\n\t        var downPoint = this._downPoint;\n\t        var dx = vertex[0] - downPoint[0];\n\t        var dy = vertex[1] - downPoint[1];\n\t\n\t        this._currentMovedGeometry.geometry.move(dx, dy, {\n\t          beyond: {\n\t            xmin: 0,\n\t            ymin: 0,\n\t            xmax: this.map.view.dataExtent[2],\n\t            ymax: this.map.view.dataExtent[3]\n\t          }\n\t        });\n\t\n\t        this.changed();\n\t        this._downPoint = vertex;\n\t      }\n\t  };\n\t\n\t  /**\n\t   * handleUpEvent\n\t   * @param evt {Event}\n\t   * @returns {boolean}\n\t   * @private\n\t   */\n\t\n\t\n\t  Modify.prototype._handleUpEvent = function _handleUpEvent(evt) {\n\t    this._dragSegments.length = 0;\n\t    this._shouldAddToVertexs = false;\n\t    this._insertVertices = [];\n\t\n\t    if (this._vertexFeature) {\n\t      this._overLayer.removeFeature(this._vertexFeature);\n\t      this._vertexFeature = null;\n\t    }\n\t\n\t    this._oldEditedVertex = null;\n\t\n\t    this._downPoint = null;\n\t    this._currentMovedGeometry = null;\n\t\n\t    if (this._modified) {\n\t      this.dispatchEvent(new _modifyevent2.default(_modifyevent2.default.EventType.MODIFY_END, this.features, evt));\n\t      this._modified = false;\n\t    }\n\t\n\t    return false;\n\t  };\n\t\n\t  /**\n\t   *\n\t   * segmentData\n\t   * @param vertex\n\t   * @private\n\t   */\n\t\n\t\n\t  Modify.prototype._insertVertex = function _insertVertex(segmentData, vertex) {\n\t    var segment = segmentData.segment;\n\t    var feature = segmentData.feature;\n\t    var geometry = segmentData.geometry;\n\t    var depth = segmentData.depth;\n\t    var isVertex = segmentData.isVertex;\n\t    var index = segmentData.index;\n\t    var coordinates = void 0;\n\t\n\t    switch (geometry.geometryType) {\n\t      case _geometry2.default.MULTI_LINE:\n\t        coordinates = geometry.getCoordinates();\n\t        coordinates[depth[0]].splice(index + 1, 0, vertex);\n\t        break;\n\t      case _geometry2.default.POLYGON:\n\t        coordinates = geometry.getCoordinates();\n\t        if (!isVertex) {\n\t          coordinates[segmentData.ringIndex].splice(index + 1, 0, vertex);\n\t          index = index + 1;\n\t        } else {\n\t          // dragIndex = index\n\t        }\n\t        break;\n\t      case _geometry2.default.MULTI_POLYGON:\n\t        coordinates = geometry.getCoordinates();\n\t        if (!isVertex) {\n\t          coordinates[segmentData.polygonIndex][segmentData.ringIndex].splice(index + 1, 0, vertex);\n\t          index = index + 1;\n\t        } else {\n\t          // dragIndex = index\n\t        }\n\t        break;\n\t      case _geometry2.default.LINE:\n\t        coordinates = geometry.getCoordinates();\n\t        if (!isVertex) {\n\t          coordinates.splice(index + 1, 0, vertex);\n\t          index = index + 1;\n\t        } else {\n\t          // dragIndex = index\n\t        }\n\t        break;\n\t      case _geometry2.default.POINT:\n\t        coordinates = geometry.getCoordinates();\n\t        coordinates = vertex;\n\t        break;\n\t      case _geometry2.default.EXTENT:\n\t        coordinates = geometry.getCoordinates();\n\t        break;\n\t      case _geometry2.default.PARALLELOGRAM:\n\t        break;\n\t      default:\n\t        return;\n\t    }\n\t\n\t    this._setGeometryCoordinates(geometry, coordinates);\n\t\n\t    var newSegmentData = {\n\t      segment: [segment[0], vertex],\n\t      feature: feature,\n\t      geometry: geometry,\n\t      depth: depth,\n\t      index: index,\n\t      ringIndex: segmentData.ringIndex,\n\t      polygonIndex: segmentData.polygonIndex,\n\t      isVertex: isVertex\n\t    };\n\t\n\t    this._dragSegments.push([newSegmentData, 1]);\n\t    this._ignoreNextSingleClick = true;\n\t  };\n\t\n\t  /**\n\t   * Calcalute geometrys within the current extent\n\t   * TODO 将来需要优化计算视图范围内的图形\n\t   *\n\t   * getInExtent\n\t   * @param geometry {Array}\n\t   * @param pixelCoordinate {Array}\n\t   * @param tolarance {Number}\n\t   * @returns {Array}\n\t   * @private\n\t   */\n\t\n\t\n\t  Modify.prototype._getInExtent = function _getInExtent(features, pixelCoordinate, tolarance) {\n\t    var result = [];\n\t    var _ExtentUtil = _extentutil.ExtentUtil;\n\t\n\t    // loop the passed features\n\t    features.forEach(function (feature) {\n\t      var geometry = feature.geometry;\n\t\n\t      // build an extent from the passed geometry with tolarance\n\t      var gometryExtent = geometry.extent;\n\t      var bufferExtent = _ExtentUtil.buffer([gometryExtent.xmin, gometryExtent.ymin, gometryExtent.xmax, gometryExtent.ymax], tolarance);\n\t\n\t      // Exclude the moved point\n\t      if (_ExtentUtil.containsPoint(bufferExtent, pixelCoordinate)) {\n\t\n\t        // Calculte if the moved point has insected a geometry\n\t        var geometryType = geometry.geometryType;\n\t\n\t        if (geometryType === _geometry2.default.POINT) {\n\t          var points = geometry.getCoordinates();\n\t          var dist = (0, _geometryutil.distance)(points, pixelCoordinate);\n\t          if (dist <= tolarance) {\n\t            result.push({\n\t              geometry: geometry,\n\t              segment: [points, points],\n\t              index: 0\n\t            });\n\t          }\n\t        } else if (geometryType === _geometry2.default.POLYGON || geometryType === _geometry2.default.PARALLELOGRAM) {\n\t          // @todo 这一块需要重构\n\t          var coords = geometry.getCoordinates();\n\t          coords.forEach(function (coordinates, ringIndex) {\n\t            for (var j = 0, jj = coordinates.length - 1; j < jj; j++) {\n\t              var _points = coordinates[j];\n\t              var nextPoints = coordinates[j + 1];\n\t\n\t              var pathExtent = _ExtentUtil.boundingExtentFromTwoPoints(_points, nextPoints);\n\t              var pathBufferExtent = _ExtentUtil.buffer(pathExtent, tolarance);\n\t\n\t              if (_extentutil.ExtentUtil.containsPoint(pathBufferExtent, pixelCoordinate)) {\n\t                var segment = [_points, nextPoints];\n\t                result.push({\n\t                  geometry: geometry,\n\t                  segment: segment,\n\t                  index: j,\n\t                  ringIndex: ringIndex\n\t                });\n\t              }\n\t            }\n\t          });\n\t        } else if (geometryType === _geometry2.default.MULTI_POLYGON) {\n\t          var allCoords = geometry.getCoordinates();\n\t          allCoords.forEach(function (coords, polygonIndex) {\n\t            coords.forEach(function (coordinates, ringIndex) {\n\t              for (var j = 0, jj = coordinates.length - 1; j < jj; j++) {\n\t                var _points2 = coordinates[j];\n\t                var nextPoints = coordinates[j + 1];\n\t\n\t                var pathExtent = _ExtentUtil.boundingExtentFromTwoPoints(_points2, nextPoints);\n\t                var pathBufferExtent = _ExtentUtil.buffer(pathExtent, tolarance);\n\t\n\t                if (_extentutil.ExtentUtil.containsPoint(pathBufferExtent, pixelCoordinate)) {\n\t                  var segment = [_points2, nextPoints];\n\t                  result.push({\n\t                    geometry: geometry,\n\t                    segment: segment,\n\t                    polygonIndex: polygonIndex,\n\t                    index: j,\n\t                    ringIndex: ringIndex\n\t                  });\n\t                }\n\t              }\n\t            });\n\t          });\n\t        } else if (geometryType === _geometry2.default.EXTENT || geometryType === _geometry2.default.LINE) {\n\t          var coordinates = geometry.getCoordinates();\n\t\n\t          for (var j = 0, jj = coordinates.length - 1; j < jj; j++) {\n\t            var _points3 = coordinates[j];\n\t            var nextPoints = coordinates[j + 1];\n\t\n\t            var pathExtent = _ExtentUtil.boundingExtentFromTwoPoints(_points3, nextPoints);\n\t            var pathBufferExtent = _ExtentUtil.buffer(pathExtent, tolarance);\n\t\n\t            if (_extentutil.ExtentUtil.containsPoint(pathBufferExtent, pixelCoordinate)) {\n\t              var segment = [_points3, nextPoints];\n\t              result.push({\n\t                geometry: geometry,\n\t                segment: segment,\n\t                index: j\n\t              });\n\t            }\n\t          }\n\t        }\n\t      }\n\t    });\n\t\n\t    return result;\n\t  };\n\t\n\t  /**\n\t   * 设置Ceometry的坐标数据\n\t   *\n\t   * @method setGeometryCoordinates\n\t   * @param geometry {Object}\n\t   * @param coordinates {Array}\n\t   * @private\n\t   */\n\t\n\t\n\t  Modify.prototype._setGeometryCoordinates = function _setGeometryCoordinates(geometry, coordinates) {\n\t    if (coordinates) {\n\t      this._changingFeature = true;\n\t      geometry.setCoordinates(coordinates);\n\t      this._changingFeature = false;\n\t    }\n\t  };\n\t\n\t  /**\n\t   * @method pointDistanceToSegment\n\t   *\n\t   * coordinates {Array}\n\t   * @param segmentData\n\t   * @returns {number}\n\t   * @private\n\t   */\n\t\n\t\n\t  Modify.prototype._pointDistanceToSegment = function _pointDistanceToSegment(coordinates, segmentData) {\n\t    var geometry = segmentData.geometry;\n\t\n\t    if (geometry.geometryType === _geometry2.default.CIRCLE) {\n\t      var circleGeometry = geometry;\n\t\n\t      if (segmentData.index === Modify.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX) {\n\t        var distanceToCenterSquared = (0, _geometryutil.squaredDistance)(circleGeometry.getCenter(), coordinates);\n\t        var distanceToCircumference = Math.sqrt(distanceToCenterSquared) - circleGeometry.getRadius();\n\t        return distanceToCircumference * distanceToCircumference;\n\t      }\n\t    }\n\t\n\t    return (0, _geometryutil.squaredDistanceToSegment)(coordinates, segmentData.segment);\n\t  };\n\t\n\t  /**\n\t   * closestOnSegment\n\t   * @param coordinate\n\t   * @param segmentData\n\t   * @returns {*}\n\t   * @private\n\t   */\n\t\n\t\n\t  Modify.prototype._closestOnSegment = function _closestOnSegment(coordinate, segmentData) {\n\t    return (0, _geometryutil.closestOnSegment)(coordinate, segmentData.segment);\n\t  };\n\t\n\t  /**\n\t   * Create or update the vertex feature while snapping a point\n\t   * on the edge of geometry\n\t   *\n\t   * createOrUpdateVertexFeature\n\t   * @param point {Array}\n\t   * @private\n\t   */\n\t\n\t\n\t  Modify.prototype._createOrUpdateVertexFeature = function _createOrUpdateVertexFeature(point) {\n\t    var vertexFeature = this._vertexFeature;\n\t    if (!vertexFeature) {\n\t      vertexFeature = new _feature2.default(new _point2.default(point[0], point[1]));\n\t      this._vertexFeature = vertexFeature;\n\t      this._overLayer.addFeature(vertexFeature);\n\t    } else {\n\t      var geom = vertexFeature.geometry;\n\t      geom.update(point[0], point[1]);\n\t      this._overLayer.changed();\n\t    }\n\t  };\n\t\n\t  /**\n\t   * 获取默认的图形编辑样式\n\t   *\n\t   * @method getDefaultStyleFunction\n\t   * @returns {Function}\n\t   */\n\t\n\t\n\t  Modify.prototype.getDefaultStyleFunction = function getDefaultStyleFunction() {\n\t    var style = _style.Style.createDefaultEditing();\n\t    return function () {\n\t      return style[_geometry2.default.POINT];\n\t    };\n\t  };\n\t\n\t  /**\n\t   *\n\t   * mapBrowserEvent\n\t   * @returns {*}\n\t   * @private\n\t   */\n\t\n\t\n\t  Modify.prototype._defaultDeleteCondition = function _defaultDeleteCondition(mapBrowserEvent) {\n\t    return (0, _mousekey.noModifierKeys)(mapBrowserEvent) && (0, _mousekey.singleClick)(mapBrowserEvent);\n\t  };\n\t\n\t  /**\n\t   * active读写器，读取设置当前的active状态\n\t   *\n\t   * @property active\n\t   * @type {Function}\n\t   * @returns {*}\n\t   */\n\t\n\t\n\t  _createClass(Modify, [{\n\t    key: 'features',\n\t    get: function get() {\n\t      return this._features;\n\t    },\n\t    set: function set() {\n\t      var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\t\n\t      this._features = value;\n\t      this._snapSegments = null;\n\t\n\t      if (this._vertexFeature) {\n\t        this._overLayer.removeFeature(this._vertexFeature);\n\t        this._vertexFeature = null;\n\t      }\n\t\n\t      this._hasMoveableGeometrys = value.length === 0 ? false : true;\n\t\n\t      this._dragSegments = [];\n\t      this._snappedToVertex = false;\n\t    }\n\t  }, {\n\t    key: 'active',\n\t    get: function get() {\n\t      return this._active;\n\t    },\n\t    set: function set(isActive) {\n\t      if (this._vertexFeature && !isActive) {\n\t        this._overLayer.removeFeature(this._vertexFeature);\n\t        this._vertexFeature = null;\n\t      }\n\t\n\t      this._active = isActive;\n\t    }\n\t\n\t    /**\n\t     * map读写器, 读取设置当前map\n\t     *\n\t     * @type {Function}\n\t     * @property map\n\t     * @param map {Object} Datatang.map\n\t     */\n\t\n\t  }, {\n\t    key: 'map',\n\t    get: function get() {\n\t      return this._map;\n\t    },\n\t    set: function set(map) {\n\t      if (this._mapRenderKey) {\n\t        (0, _eventmanager.unlistenByKey)(this._mapRenderKey);\n\t        this._mapRenderKey = null;\n\t      }\n\t\n\t      if (map) {\n\t        this._map = map;\n\t        this._mapRenderKey = (0, _eventmanager.listen)(this, _eventtype.EventType.CHANGE, map.render, map);\n\t\n\t        map.addLayer(this._overLayer);\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return Modify;\n\t}(_component2.default);\n\t\n\t/**\n\t *\n\t * @type {number}\n\t */\n\t\n\t\n\texports.default = Modify;\n\tModify.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX = 1;\n\t\n\t/**\n\t *\n\t * @type {number}\n\t */\n\tModify.MODIFY_SEGMENT_CIRCLE_CENTER_INDEX = 0;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 64 */\n/*!**********************************!*\\\n  !*** ./src/components/select.js ***!\n  \\**********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _component = __webpack_require__(/*! ./component */ 8);\n\t\n\tvar _component2 = _interopRequireDefault(_component);\n\t\n\tvar _browserevent = __webpack_require__(/*! ../meek/browserevent */ 5);\n\t\n\tvar _browserevent2 = _interopRequireDefault(_browserevent);\n\t\n\tvar _featurelayer = __webpack_require__(/*! ../lyr/featurelayer */ 13);\n\t\n\tvar _featurelayer2 = _interopRequireDefault(_featurelayer);\n\t\n\tvar _eventmanager = __webpack_require__(/*! ../core/eventmanager */ 4);\n\t\n\tvar _eventtype = __webpack_require__(/*! ../meek/eventtype */ 6);\n\t\n\tvar _style = __webpack_require__(/*! ../style/style */ 17);\n\t\n\tvar _selectevent = __webpack_require__(/*! ../components/selectevent */ 41);\n\t\n\tvar _selectevent2 = _interopRequireDefault(_selectevent);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/5/23.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar hasMutilSelectedSymbol = Symbol('hasmutilselected');\n\t\n\t/**\n\t * 图形选择模式\n\t *\n\t * @class Select\n\t * @extends Component\n\t * @module component\n\t * @constructor\n\t * @example\n\t *\n\t *      // 实例化选择工具\n\t *      selectTool = new Datatang.Select({\n\t *       selectMode: Datatang.BrowserEvent.CLICK,\n\t *       selectMultiMode: selectMultiMode\n\t *      });\n\t *\n\t *\n\t */\n\t\n\tvar Select = function (_Component) {\n\t  _inherits(Select, _Component);\n\t\n\t  /**\n\t   * 构造函数\n\t   *\n\t   * @constructor constructor\n\t   * @param options\n\t   */\n\t\n\t  function Select() {\n\t    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t    _classCallCheck(this, Select);\n\t\n\t    /**\n\t     * 当前鼠标点与图形之间的公差距离，小于该值则可已选中图形\n\t     *\n\t     * @property hitTolerance\n\t     * @type {number}\n\t     * @private\n\t     */\n\t    var _this = _possibleConstructorReturn(this, _Component.call(this));\n\t\n\t    _this._hitTolerance = options.hitTolerance ? options.hitTolerance : 6;\n\t\n\t    /**\n\t     * 选择图层是否配置了样式\n\t     *\n\t     * @type {boolean}\n\t     * @private\n\t       */\n\t    _this._hasSelectedStyle = false;\n\t\n\t    /**\n\t     * 多选模式，默认为false\n\t     *\n\t     * @property multiSelectMode\n\t     * @type {boolean}\n\t     * @private\n\t     */\n\t    _this._multiSelectMode = false;\n\t\n\t    /**\n\t     * 初始化草稿图层，用于临时高亮显示选中的图形\n\t     *\n\t     * @property selectLayer\n\t     * @type {FeatureLayer}\n\t     * @private\n\t     */\n\t    _this._selectLayer = new _featurelayer2.default();\n\t\n\t    if (options.style) {\n\t      _this._selectLayer.style = options.style;\n\t      _this._hasSelectedStyle = true;\n\t    } else {\n\t      _this._hasSelectedStyle = false;\n\t    }\n\t    /**\n\t     * 选中图形的feature集合\n\t     *\n\t     * @property selectFeatures\n\t     * @type {Array}\n\t     * @private\n\t     */\n\t    _this._selectFeatures = [];\n\t\n\t    /**\n\t     * 选中的模式，默认为单击选中\n\t     *\n\t     * @property selectMode\n\t     * @type {string}\n\t     */\n\t    _this.selectMode = options.selectMode ? options.selectMode : _browserevent2.default.CLICK;\n\t\n\t    _this._selectMultiMode = options.selectMultiMode ? options.selectMultiMode : function () {\n\t      return true;\n\t    };\n\t\n\t    /**\n\t     * listen Ctrl key envet\n\t     */\n\t    if (options.selectMultiMode) {\n\t      (0, _eventmanager.listen)(document, 'keydown', _this._handleCtrlKeyDwon, _this);\n\t    }\n\t    if (options.selectMultiMode) {\n\t      (0, _eventmanager.listen)(document, 'keyup', _this._handleCtrlKeyUp, _this);\n\t    }\n\t\n\t    return _this;\n\t  }\n\t\n\t  Select.prototype._condition = function _condition(event) {\n\t    return this.selectMode === event.type;\n\t  };\n\t\n\t  Select.prototype._keyPress = function _keyPress() {};\n\t\n\t  /**\n\t   * handle Ctrl key down event\n\t   *\n\t   * 处理Ctrt键按下事件\n\t   *\n\t   * handleCtrlKeyDwon\n\t   * @param event\n\t   * @private\n\t   */\n\t\n\t\n\t  Select.prototype._handleCtrlKeyDwon = function _handleCtrlKeyDwon(event) {\n\t    if (this._selectMultiMode(event)) {\n\t      this._multiSelectMode = true;\n\t    }\n\t  };\n\t\n\t  /**\n\t   * handle Ctrl key up event\n\t   *\n\t   * 处理Ctrl键弹起事件\n\t   *\n\t   * @param event\n\t   * @private\n\t   */\n\t\n\t\n\t  Select.prototype._handleCtrlKeyUp = function _handleCtrlKeyUp(event) {\n\t    // Ctrl button down\n\t    if (this._selectMultiMode(event)) {\n\t      this._multiSelectMode = false;\n\t    }\n\t  };\n\t\n\t  /**\n\t   * Handler mouse event\n\t   *\n\t   * 处理鼠标事件\n\t   * handleMouseEvent\n\t   * @method\n\t   * @param browserEvent {browserEvent}\n\t   */\n\t\n\t\n\t  Select.prototype.handleMouseEvent = function handleMouseEvent(browserEvent) {\n\t    var _this2 = this;\n\t\n\t    if (!this._condition(browserEvent)) {\n\t      return true;\n\t    }\n\t\n\t    var map = browserEvent.map;\n\t    var pixel = browserEvent.pixel;\n\t    var hitTolerance = this._hitTolerance;\n\t\n\t    if (!this._multiSelectMode) {\n\t      this.clear();\n\t    }\n\t\n\t    map.forEachFeatureAtPiexl(pixel, function (features) {\n\t      if (features.length > 0) {\n\t        // 赋值并填充到selectFeatures中\n\t        _this2.selectFeatures = features;\n\t      }\n\t    }, hitTolerance);\n\t\n\t    if (this.selectFeatures.length > 0) {\n\t      this._forEachStyle();\n\t      this._selectLayer.addFeatures(this.selectFeatures);\n\t    }\n\t\n\t    // 派发要素的选择事件\n\t    this.dispatchEvent(new _selectevent2.default(_selectevent2.default.EventType.SELECT, this.selectFeatures, browserEvent));\n\t  };\n\t\n\t  /**\n\t   * 清空选择的集合\n\t   *\n\t   * @method clear\n\t   */\n\t\n\t\n\t  Select.prototype.clear = function clear() {\n\t    this._selectLayer.clear();\n\t\n\t    this.selectFeatures.forEach(function (feature) {\n\t      feature.styleHighLight = false;\n\t      feature.delete(hasMutilSelectedSymbol);\n\t    });\n\t\n\t    this.selectFeatures = [];\n\t  };\n\t\n\t  /**\n\t   * 当前选中feature的集合的读写器\n\t   *\n\t   * @property selectFeatures\n\t   * @type {Array}\n\t   */\n\t\n\t\n\t  /**\n\t   * 判断当前选中的集合中是否包含指定的feature\n\t   *\n\t   * @param feature\n\t   * @returns {Boolean}\n\t   * @private\n\t   */\n\t  Select.prototype._isInSelectFeatures = function _isInSelectFeatures(feature) {\n\t    var features = this.selectFeatures;\n\t    var result = features.find(function (f) {\n\t      return f.id === feature.id;\n\t    });\n\t\n\t    return result === undefined ? false : true;\n\t  };\n\t\n\t  /**\n\t   * Update the drawing state for aborting drawing if active is false\n\t   *\n\t   * updateState\n\t   * @private\n\t   */\n\t\n\t\n\t  Select.prototype._updateState = function _updateState() {\n\t    var map = this.map;\n\t    var active = this.active;\n\t    if (!map || !active) {\n\t      // this._abortDrawing()\n\t    }\n\t\n\t    map.addLayer(this._selectLayer);\n\t  };\n\t\n\t  /**\n\t   * 高亮显示选中图形\n\t   *\n\t   * @method forEachStyle\n\t   * @private\n\t   */\n\t\n\t\n\t  Select.prototype._forEachStyle = function _forEachStyle() {\n\t    if (this._hasSelectedStyle) {\n\t      return;\n\t    }\n\t\n\t    var features = this.selectFeatures;\n\t    features.forEach(function (feature) {\n\t      if (!feature.get(hasMutilSelectedSymbol)) {\n\t        feature.styleHighLight = true;\n\t        feature.set(hasMutilSelectedSymbol, true);\n\t      }\n\t    });\n\t  };\n\t\n\t  /**\n\t   * map读写器, 读取设置当前map\n\t   *\n\t   * @type {Function}\n\t   * @property map\n\t   * @param map {Object} Datatang.map\n\t   */\n\t\n\t\n\t  /**\n\t   * 获取默认编辑样式\n\t   *\n\t   * @method getDefaultStyleFunction\n\t   * @returns {Function}\n\t   */\n\t  Select.prototype.getDefaultStyleFunction = function getDefaultStyleFunction() {\n\t    var styles = _style.Style.createDefaultEditing();\n\t    return function (feature) {\n\t      return styles[feature.geometry.geometryType];\n\t    };\n\t  };\n\t\n\t  _createClass(Select, [{\n\t    key: 'selectFeatures',\n\t    get: function get() {\n\t      return this._selectFeatures;\n\t    },\n\t    set: function set(features) {\n\t      var _this3 = this;\n\t\n\t      if (features.length === 0) {\n\t        this._selectFeatures = [];\n\t      } else {\n\t        features.forEach(function (feature) {\n\t          // 去掉重复的\n\t          if (!_this3._isInSelectFeatures(feature)) {\n\t            _this3._selectFeatures.push(feature);\n\t          }\n\t        });\n\t      }\n\t    }\n\t  }, {\n\t    key: 'map',\n\t    get: function get() {\n\t      return this._map;\n\t    },\n\t    set: function set(map) {\n\t      if (this._mapRenderKey) {\n\t        (0, _eventmanager.unlistenByKey)(this._mapRenderKey);\n\t        this._mapRenderKey = null;\n\t      }\n\t\n\t      if (map) {\n\t        this._map = map;\n\t        this._mapRenderKey = (0, _eventmanager.listen)(this, _eventtype.EventType.CHANGE, map.render, map);\n\t      }\n\t\n\t      this._updateState();\n\t    }\n\t\n\t    /**\n\t     * 选择方式读写器\n\t     *\n\t     * @property selectMode\n\t     * @type {Object} Datatang.BrowserEvent.CLICK\n\t     * @return {*}\n\t     */\n\t\n\t  }, {\n\t    key: 'selectMode',\n\t    get: function get() {\n\t      return this._selectMode;\n\t    },\n\t    set: function set(value) {\n\t      if (this._selectMode !== value) {\n\t        this._selectMode = value;\n\t        this.clear();\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return Select;\n\t}(_component2.default);\n\t\n\texports.default = Select;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 65 */\n/*!****************************************!*\\\n  !*** ./src/control/controldefaults.js ***!\n  \\****************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.controlDefaults = controlDefaults;\n\t\n\tvar _zoom = __webpack_require__(/*! ./zoom */ 42);\n\t\n\tvar _zoom2 = _interopRequireDefault(_zoom);\n\t\n\tvar _home = __webpack_require__(/*! ./home */ 66);\n\t\n\tvar _home2 = _interopRequireDefault(_home);\n\t\n\tvar _zoompercentage = __webpack_require__(/*! ./zoompercentage */ 67);\n\t\n\tvar _zoompercentage2 = _interopRequireDefault(_zoompercentage);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction controlDefaults() {\n\t  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t\n\t  var controls = [];\n\t\n\t  var zoomControl = options.zoom !== undefined ? options.zoom : true;\n\t  if (zoomControl) {\n\t    controls.push(new _zoom2.default(options.zoomOptions));\n\t  }\n\t\n\t  var homeControl = options.home !== undefined ? options.home : true;\n\t  if (homeControl) {\n\t    controls.push(new _home2.default(options.homeOptions));\n\t  }\n\t\n\t  var zoomPercentageControl = options.zoomPercentage !== undefined ? options.zoomPercentage : true;\n\t  if (zoomPercentageControl) {\n\t    controls.push(new _zoompercentage2.default(options.zoomPercentageOptions));\n\t  }\n\t\n\t  return controls;\n\t} /**\n\t   * Created by zhangyong on 2017/8/2.\n\t   */\n\t\n\texports.default = {\n\t  controlDefaults: controlDefaults\n\t};\n\n/***/ }),\n/* 66 */\n/*!*****************************!*\\\n  !*** ./src/control/home.js ***!\n  \\*****************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _control = __webpack_require__(/*! ./control */ 20);\n\t\n\tvar _control2 = _interopRequireDefault(_control);\n\t\n\tvar _browserevent = __webpack_require__(/*! ../meek/browserevent */ 5);\n\t\n\tvar _browserevent2 = _interopRequireDefault(_browserevent);\n\t\n\tvar _eventmanager = __webpack_require__(/*! ../core/eventmanager */ 4);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/8/3.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t *\n\t */\n\tvar Home = function (_Control) {\n\t  _inherits(Home, _Control);\n\t\n\t  function Home() {\n\t    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t    _classCallCheck(this, Home);\n\t\n\t    var className = options.className ? options.className : 'dt-zoom-extent';\n\t    var homeLabel = options.homeLabel ? options.homeLabel : 'H';\n\t    var homeLabelTip = options.homeLabelTip ? options.homeLabelTip : '全图';\n\t\n\t    var homeElement = document.createElement('button');\n\t    homeElement.setAttribute('type', 'button');\n\t    homeElement.title = homeLabelTip;\n\t    homeElement.appendChild(typeof homeLabel === 'string' ? document.createTextNode(homeLabel) : homeLabel);\n\t\n\t    var cssClasses = className + ' dt-unselectable dt-control';\n\t    var element = document.createElement('div');\n\t    element.className = cssClasses;\n\t    element.appendChild(homeElement);\n\t\n\t    var _this = _possibleConstructorReturn(this, _Control.call(this, {\n\t      element: element,\n\t      target: options.target\n\t    }));\n\t\n\t    (0, _eventmanager.listen)(homeElement, _browserevent2.default.CLICK, _this._handleClick, _this);\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * 处理按钮点击事件\n\t   * @param event\n\t   * @private\n\t   */\n\t\n\t\n\t  Home.prototype._handleClick = function _handleClick(event) {\n\t    event.preventDefault();\n\t    this._goToHome();\n\t  };\n\t\n\t  /**\n\t   * 将视图还原到最初\n\t   * @private\n\t   */\n\t\n\t\n\t  Home.prototype._goToHome = function _goToHome() {\n\t    var view = this.map.view;\n\t    if (view) {\n\t      var orignalCenter = view.originalCenter;\n\t      var originalResolution = view.originalResolution;\n\t\n\t      view.center = orignalCenter;\n\t      view.resolution = originalResolution;\n\t    }\n\t  };\n\t\n\t  return Home;\n\t}(_control2.default);\n\t\n\texports.default = Home;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 67 */\n/*!***************************************!*\\\n  !*** ./src/control/zoompercentage.js ***!\n  \\***************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _control = __webpack_require__(/*! ./control */ 20);\n\t\n\tvar _control2 = _interopRequireDefault(_control);\n\t\n\tvar _domutil = __webpack_require__(/*! ../utils/domutil */ 18);\n\t\n\tvar _eventmanager = __webpack_require__(/*! ../core/eventmanager */ 4);\n\t\n\tvar _eventtype = __webpack_require__(/*! ../meek/eventtype */ 6);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/8/3.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar ZoomPercentage = function (_Control) {\n\t  _inherits(ZoomPercentage, _Control);\n\t\n\t  function ZoomPercentage() {\n\t    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t    _classCallCheck(this, ZoomPercentage);\n\t\n\t    var _this = _possibleConstructorReturn(this, _Control.call(this));\n\t\n\t    _this._map = undefined;\n\t\n\t    var className = options.className ? options.className : 'dt-scale-line';\n\t\n\t    _this._innerElement = document.createElement('DIV');\n\t    _this._innerElement.className = className + '-inner';\n\t\n\t    _this._element = document.createElement('DIV');\n\t    _this._element.className = className + ' dt-unselectable';\n\t    _this._element.appendChild(_this._innerElement);\n\t    return _this;\n\t  }\n\t\n\t  ZoomPercentage.prototype.render = function render() {\n\t    var view = this.map.view;\n\t    var resolution = (1 / view.resolution).toFixed(2);\n\t    var html = '&#8195;\\u7F29\\u653E\\u6BD4' + resolution * 100 + '% &#8195;';\n\t    this._innerElement.innerHTML = html;\n\t  };\n\t\n\t  _createClass(ZoomPercentage, [{\n\t    key: 'map',\n\t    get: function get() {\n\t      return this._map;\n\t    },\n\t    set: function set(value) {\n\t      if (this.map) {\n\t        (0, _domutil.removeNode)(this._element);\n\t      }\n\t\n\t      this._listenerKeys.forEach(function (listener) {\n\t        return (0, _eventmanager.unlistenByKey)(listener);\n\t      });\n\t\n\t      this._listenerKeys.length = 0;\n\t      this._map = value;\n\t\n\t      if (this._map) {\n\t        var target = this._target ? this._target : value.overlayContainerStopEvent;\n\t        target.appendChild(this._element);\n\t\n\t        this._listenerKeys.push((0, _eventmanager.listen)(value, _eventtype.EventType.VIEW_CHANGED, this.render, this));\n\t\n\t        this.render();\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return ZoomPercentage;\n\t}(_control2.default);\n\t\n\texports.default = ZoomPercentage;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 68 */\n/*!*******************************!*\\\n  !*** ./src/core/baseimage.js ***!\n  \\*******************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _baseobject = __webpack_require__(/*! ../core/baseobject */ 3);\n\t\n\tvar _baseobject2 = _interopRequireDefault(_baseobject);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/6/6.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * The base class to represent a generic layer image,it has some basic properties.\n\t * such as extent,resolution,state<br/>\n\t *\n\t * 基础图片图层类，定义了一些用于加载图片的必要信息\n\t *\n\t * @class BaseImage\n\t * @extends BaseObject\n\t * @module core\n\t * @constructor\n\t */\n\tvar BaseImage = function (_BaseObject) {\n\t  _inherits(BaseImage, _BaseObject);\n\t\n\t  /**\n\t   * Create a BaseImage\n\t   * @param extent the extent of layer\n\t   * @param resolution the resolution of layer\n\t   * @param pixelRatio the pixel ratio\n\t   * @param state the image loading status\n\t   * @param attributions\n\t   */\n\t  function BaseImage(extent, resolution, pixelRatio, state, attributions) {\n\t    _classCallCheck(this, BaseImage);\n\t\n\t    /**\n\t     * @type {Object}\n\t     * @private\n\t     */\n\t    var _this = _possibleConstructorReturn(this, _BaseObject.call(this));\n\t\n\t    _this._attributions = attributions;\n\t\n\t    /**\n\t     * @type {Object}\n\t     * @private\n\t     */\n\t    _this._extent = extent;\n\t\n\t    /**\n\t     * @type {Number}\n\t     * @private\n\t     */\n\t    _this._pixelRatio = pixelRatio;\n\t\n\t    /**\n\t     * @type {Number}\n\t     * @private\n\t     */\n\t    _this._resolution = resolution;\n\t\n\t    /**\n\t     * @type {Number}\n\t     * @private\n\t     */\n\t    _this._state = state;\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * return the attributions of layer <br/>\n\t   * 返回图层的属性\n\t   * @property attributions\n\t   * @type Object\n\t   */\n\t\n\t\n\t  /**\n\t   * return the DOM image<br/>\n\t   * 返回DOM对象\n\t   * @param optContext options\n\t   * @method getDomImage\n\t   * @abstract\n\t   */\n\t  BaseImage.prototype.getDomImage = function getDomImage(optContext) {\n\t    return optContext;\n\t  };\n\t\n\t  /**\n\t   * return the pixel ratio<br/>\n\t   * 返回像素因数\n\t   * @property pixelRatio\n\t   * @type Number\n\t   */\n\t\n\t\n\t  /**\n\t   * Load not yet loaded URI. <br/>\n\t   * 抽象方法，下载图片\n\t   * @abstract\n\t   * @method load\n\t   */\n\t  BaseImage.prototype.load = function load() {};\n\t\n\t  _createClass(BaseImage, [{\n\t    key: 'attributions',\n\t    get: function get() {\n\t      return this._attributions;\n\t    }\n\t\n\t    /**\n\t     * return the extent of layer<br/>\n\t     * 返回图层的视图范围\n\t     * @property extent\n\t     * @type Object\n\t     */\n\t\n\t  }, {\n\t    key: 'extent',\n\t    get: function get() {\n\t      return this._extent;\n\t    }\n\t  }, {\n\t    key: 'pixelRatio',\n\t    get: function get() {\n\t      return this._pixelRatio;\n\t    }\n\t\n\t    /**\n\t     * return the resolution of layer<br/>\n\t     * 返回图层的分辨率\n\t     * @property resolution\n\t     * @type Number\n\t     */\n\t\n\t  }, {\n\t    key: 'resolution',\n\t    get: function get() {\n\t      return this._resolution;\n\t    },\n\t    set: function set(value) {\n\t      if (this._resolution !== value) {\n\t        this._resolution = value;\n\t      }\n\t    }\n\t\n\t    /**\n\t     * return the state of layer loading <br/>\n\t     * 获取图片下载状态\n\t     * @property state\n\t     * @type Number\n\t     */\n\t\n\t  }, {\n\t    key: 'state',\n\t    get: function get() {\n\t      return this._state;\n\t    },\n\t    set: function set(value) {\n\t      if (this.state !== value) {\n\t        this._state = value;\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return BaseImage;\n\t}(_baseobject2.default);\n\t\n\texports.default = BaseImage;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 69 */\n/*!**********************************!*\\\n  !*** ./src/data/json/geojson.js ***!\n  \\**********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _geometry = __webpack_require__(/*! ../../geometry/geometry */ 1);\n\t\n\tvar _geometry2 = _interopRequireDefault(_geometry);\n\t\n\tvar _point = __webpack_require__(/*! ../../geometry/point */ 22);\n\t\n\tvar _point2 = _interopRequireDefault(_point);\n\t\n\tvar _polygon = __webpack_require__(/*! ../../geometry/polygon */ 10);\n\t\n\tvar _polygon2 = _interopRequireDefault(_polygon);\n\t\n\tvar _mutilpolygon = __webpack_require__(/*! ../../geometry/mutilpolygon */ 31);\n\t\n\tvar _mutilpolygon2 = _interopRequireDefault(_mutilpolygon);\n\t\n\tvar _line = __webpack_require__(/*! ../../geometry/line */ 30);\n\t\n\tvar _line2 = _interopRequireDefault(_line);\n\t\n\tvar _extent = __webpack_require__(/*! ../../geometry/extent */ 9);\n\t\n\tvar _extent2 = _interopRequireDefault(_extent);\n\t\n\tvar _parallelogram = __webpack_require__(/*! ../../geometry/parallelogram */ 21);\n\t\n\tvar _parallelogram2 = _interopRequireDefault(_parallelogram);\n\t\n\tvar _feature = __webpack_require__(/*! ../../meek/feature */ 24);\n\t\n\tvar _feature2 = _interopRequireDefault(_feature);\n\t\n\tvar _obj = __webpack_require__(/*! ../../utils/obj */ 15);\n\t\n\tvar _obj2 = _interopRequireDefault(_obj);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } } /**\n\t                                                                                                                                                           * Created by zhangyong on 2017/7/12.\n\t                                                                                                                                                           */\n\t\n\t/**\n\t *\n\t */\n\tvar GeoJSON = function () {\n\t  function GeoJSON() {\n\t    _classCallCheck(this, GeoJSON);\n\t  }\n\t\n\t  /**\n\t   * 解析 GeoJSON 并返回 Feature 的集合\n\t   *\n\t   * @static\n\t   * @method read\n\t   * @param json geojson格式的数据\n\t   * @returns {Array} 返回 features 的集合\n\t   */\n\t  GeoJSON.read = function read(json) {\n\t    var features = [];\n\t\n\t    if (!json) {\n\t      return;\n\t    }\n\t    var featuresObj = json.features;\n\t    featuresObj.forEach(function (featureObj) {\n\t      if (featureObj.type === 'Feature') {\n\t        if (featureObj.geometry) {\n\t          var _constructor = undefined;\n\t          var geometryObj = featureObj.geometry;\n\t          var geometryType = geometryObj.type;\n\t          if (geometryType === 'Point') {\n\t            _constructor = _point2.default;\n\t          } else if (geometryType === 'LineString') {\n\t            _constructor = _line2.default;\n\t          } else if (geometryType === 'Polygon') {\n\t            _constructor = _polygon2.default;\n\t          } else if (geometryType === 'ExtentPolygon') {\n\t            _constructor = _extent2.default;\n\t          } else if (geometryType === 'MutilPolygon') {\n\t            _constructor = _mutilpolygon2.default;\n\t          } else if (geometryType === 'ParallelogramPolygon') {\n\t            _constructor = _parallelogram2.default;\n\t          }\n\t\n\t          if (_constructor === undefined) {\n\t            throw new Error('包含未定义的 Geometry 类型');\n\t          } else {\n\t            var coordinates = geometryObj.coordinates;\n\t            var geometry = new _constructor();\n\t            geometry.setCoordinates(coordinates);\n\t\n\t            var propertiesObj = void 0;\n\t            if (featureObj.properties) {\n\t              propertiesObj = featureObj.properties;\n\t            }\n\t\n\t            var title = featureObj.title;\n\t            var feature = new _feature2.default(geometry, propertiesObj, title);\n\t            features.push(feature);\n\t          }\n\t        }\n\t      }\n\t    });\n\t\n\t    return features;\n\t  };\n\t\n\t  /**\n\t   *\n\t   * 将 Feature 集合写入到 GeoJSON 的格式对象中\n\t   *\n\t   * @static\n\t   * @method write\n\t   * @param features Feature 集合\n\t   * @returns {Object} 返回 GeoJSON 格式的数据\n\t   */\n\t\n\t\n\t  GeoJSON.write = function write(features) {\n\t    var featuresArr = [];\n\t\n\t    features.forEach(function (feature) {\n\t      featuresArr.push({\n\t        type: 'Feature',\n\t        geometry: {\n\t          type: GeoJSON.getGeoJSONGeometryType(feature.geometry),\n\t          coordinates: feature.geometry.getCoordinates()\n\t        },\n\t        properties: _obj2.default.mapToObject(feature._attributesMap),\n\t\n\t        title: feature.displayText\n\t      });\n\t    });\n\t\n\t    return {\n\t      type: 'FeatureCollection',\n\t      features: featuresArr\n\t    };\n\t  };\n\t\n\t  /**\n\t   * 获取Geometry的类型\n\t   *\n\t   * @static\n\t   * @method getGeoJSONGeometryType\n\t   * @param geometry\n\t   * @returns {*}\n\t   */\n\t\n\t\n\t  GeoJSON.getGeoJSONGeometryType = function getGeoJSONGeometryType(geometry) {\n\t    var type = geometry.geometryType;\n\t    var jsonType = void 0;\n\t    switch (type) {\n\t      case _geometry2.default.POINT:\n\t        jsonType = 'Point';\n\t        break;\n\t      case _geometry2.default.LINE:\n\t        jsonType = 'LineString';\n\t        break;\n\t      case _geometry2.default.POLYGON:\n\t        jsonType = 'Polygon';\n\t        break;\n\t      case _geometry2.default.MULTI_POLYGON:\n\t        jsonType = 'MutilPolygon';\n\t        break;\n\t      case _geometry2.default.EXTENT:\n\t        jsonType = 'ExtentPolygon';\n\t        break;\n\t      case _geometry2.default.PARALLELOGRAM:\n\t        jsonType = 'ParallelogramPolygon';\n\t    }\n\t\n\t    return jsonType;\n\t  };\n\t\n\t  return GeoJSON;\n\t}();\n\t\n\texports.default = GeoJSON;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 70 */\n/*!*********************************************!*\\\n  !*** ./src/geometry/analysis/intersects.js ***!\n  \\*********************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = intersects;\n\t\n\tvar _geometry = __webpack_require__(/*! ../../geometry/geometry */ 1);\n\t\n\tvar _geometry2 = _interopRequireDefault(_geometry);\n\t\n\tvar _extentutil = __webpack_require__(/*! ../support/extentutil */ 2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * 判断任意图形是否相交\n\t * @TODO 还需要解决带洞多边形带来的问题\n\t *\n\t * @method intersects\n\t * @param geometry1\n\t * @param geometry2\n\t * @returns {Boolean}\n\t */\n\t/**\n\t * Created by zhangyong on 2017/7/13.\n\t */\n\t\n\tfunction intersects(geometry1, geometry2) {\n\t  if (geometry1 === null || geometry1 === undefined || geometry2 === null || geometry2 === undefined) {\n\t    return false;\n\t  }\n\t\n\t  var extent1 = geometry1.extent;\n\t  var extent2 = geometry2.extent;\n\t  var ext1Arr = [extent1.xmin, extent1.ymin, extent1.xmax, extent1.ymax];\n\t  var ext2Arr = [extent2.xmin, extent2.ymin, extent2.xmax, extent2.ymax];\n\t\n\t  // 如果两个图形的外界矩形不相交，则跳出判断\n\t  if (!_extentutil.ExtentUtil.intersects(ext1Arr, ext2Arr)) {\n\t    return false;\n\t  }\n\t\n\t  var geometryType = geometry1.geometryType;\n\t\n\t  var result = false;\n\t  switch (geometryType) {\n\t    case _geometry2.default.POINT:\n\t      result = pointIntersectsGeometry(geometry1, geometry2);\n\t      break;\n\t    case _geometry2.default.LINE:\n\t      result = lineIntersectsGeometry(geometry1, geometry2);\n\t      break;\n\t    case _geometry2.default.POLYGON:\n\t    case _geometry2.default.EXTENT:\n\t      result = polygonIntersectsGeometry(geometry1, geometry2);\n\t  }\n\t\n\t  return result;\n\t}\n\t\n\t/**\n\t * 点和图形相交判断\n\t * @param point\n\t * @param geometry\n\t * @returns {*}\n\t */\n\tvar pointIntersectsGeometry = function pointIntersectsGeometry(point, geometry) {\n\t  var geometryType = geometry.geometryType;\n\t\n\t  switch (geometryType) {\n\t    case _geometry2.default.POINT:\n\t    case _geometry2.default.LINE:\n\t    case _geometry2.default.POLYGON:\n\t    case _geometry2.default.EXTENT:\n\t      return geometry.containsXY(point.x, point.y);\n\t  }\n\t\n\t  return false;\n\t};\n\t\n\t/**\n\t * 线和图形相交判断\n\t * @param line\n\t * @param geometry\n\t * @returns {Boolean|boolean|*}\n\t */\n\tvar lineIntersectsGeometry = function lineIntersectsGeometry(line, geometry) {\n\t  var geometryType = geometry.geometryType;\n\t  switch (geometryType) {\n\t    case _geometry2.default.POINT:\n\t      return line.containsXY(geometry.x, geometry.y);\n\t    case _geometry2.default.LINE:\n\t      return lineIntersectsLine(line, geometry);\n\t    case _geometry2.default.POLYGON:\n\t    case _geometry2.default.EXTENT:\n\t      return lineIntersectsPolygon(line, geometry);\n\t  }\n\t};\n\t\n\t/**\n\t * 线与线相交判断\n\t * @param line1\n\t * @param line2\n\t */\n\tvar lineIntersectsLine = function lineIntersectsLine(line1, line2) {\n\t  var lineLinearRings1 = line1.getCoordinates();\n\t  var lineLinearRings2 = line2.getCoordinates();\n\t\n\t  return intersectsByLinearRings(lineLinearRings1, lineLinearRings2);\n\t};\n\t\n\t/**\n\t * 多边形和图形相交判断\n\t * @param poly\n\t * @param geometry\n\t * @returns {Boolean|boolean|*}\n\t */\n\tvar polygonIntersectsGeometry = function polygonIntersectsGeometry(poly, geometry) {\n\t  var geometryType = geometry.geometryType;\n\t  switch (geometryType) {\n\t    case _geometry2.default.POINT:\n\t      return poly.containsXY(geometry.x, geometry.y);\n\t    case _geometry2.default.LINE:\n\t      return lineIntersectsPolygon(geometry, poly);\n\t    case _geometry2.default.POLYGON:\n\t    case _geometry2.default.EXTENT:\n\t      return polygonIntersectsPolygon(poly, geometry);\n\t  }\n\t};\n\t\n\t/**\n\t * 线和多边形相交判断\n\t * @param line\n\t * @param polygon\n\t */\n\tvar lineIntersectsPolygon = function lineIntersectsPolygon(line, polygon) {\n\t  var lineLinearRings = line.getCoordinates();\n\t  var polygon2LinearRings = polygon.getCoordinates();\n\t\n\t  if (polygon.geometryType === _geometry2.default.POLYGON || polygon.geometry === _geometry2.default.MULTI_POLYGON) {\n\t    polygon2LinearRings = polygon2LinearRings[0]; // 只获得外环\n\t  }\n\t\n\t  var intersect = intersectsByLinearRings(lineLinearRings, polygon2LinearRings);\n\t\n\t  if (!intersect) {\n\t    // check if this poly contains points of the ring/linestring\n\t    for (var i = 0, len = lineLinearRings.length; i < len; ++i) {\n\t      var point = lineLinearRings[i];\n\t      intersect = polygon.containsXY(point[0], point[1]);\n\t      if (intersect) {\n\t        break;\n\t      }\n\t    }\n\t  }\n\t\n\t  return intersect;\n\t};\n\t\n\t/**\n\t * 多边形和多边形相交判断\n\t * @param poly\n\t * @param polygon\n\t */\n\tvar polygonIntersectsPolygon = function polygonIntersectsPolygon(poly, polygon) {\n\t  var lineLinearRings = poly.getCoordinates();\n\t  var polygon2LinearRings = polygon.getCoordinates(); // 只获得外环\n\t\n\t  if (poly.geometryType === _geometry2.default.POLYGON) {\n\t    lineLinearRings = lineLinearRings[0];\n\t  }\n\t\n\t  if (polygon.geometryType === _geometry2.default.POLYGON) {\n\t    polygon2LinearRings = polygon2LinearRings[0];\n\t  }\n\t\n\t  var intersect = intersectsByLinearRings(lineLinearRings, polygon2LinearRings);\n\t\n\t  // 两个多边形要做相互内含关系的判断\n\t\n\t  // 正向检查\n\t  if (!intersect) {\n\t    for (var i = 0, len = lineLinearRings.length; i < len; ++i) {\n\t      var point = lineLinearRings[i];\n\t      intersect = polygon.containsXY(point[0], point[1]);\n\t      if (intersect) {\n\t        break;\n\t      }\n\t    }\n\t  }\n\t\n\t  // 反向检查\n\t  if (!intersect) {\n\t    for (var _i = 0, _len = polygon2LinearRings.length; _i < _len; ++_i) {\n\t      var _point = polygon2LinearRings[_i];\n\t      intersect = poly.containsXY(_point[0], _point[1]);\n\t      if (intersect) {\n\t        break;\n\t      }\n\t    }\n\t  }\n\t\n\t  return intersect;\n\t};\n\t\n\tvar intersectsByLinearRings = function intersectsByLinearRings(LinearRing1, LinearRings2) {\n\t  var intersect = false;\n\t  var segs1 = getSortedSegments(LinearRing1);\n\t  var segs2 = getSortedSegments(LinearRings2);\n\t\n\t  var seg1 = void 0,\n\t      seg1x1 = void 0,\n\t      seg1x2 = void 0,\n\t      seg1y1 = void 0,\n\t      seg1y2 = void 0,\n\t      seg2 = void 0,\n\t      seg2y1 = void 0,\n\t      seg2y2 = void 0;\n\t\n\t  // sweep right\n\t  for (var i = 0, len = segs1.length; i < len; ++i) {\n\t    seg1 = segs1[i];\n\t    seg1x1 = seg1.x1;\n\t    seg1x2 = seg1.x2;\n\t    seg1y1 = seg1.y1;\n\t    seg1y2 = seg1.y2;\n\t\n\t    for (var j = 0, jlen = segs2.length; j < jlen; ++j) {\n\t      seg2 = segs2[j];\n\t      if (seg2.x1 > seg1x2) {\n\t        // seg1 still left of seg2\n\t        break;\n\t      }\n\t\n\t      if (seg2.x2 < seg1x1) {\n\t        // seg2 still left of seg1\n\t        continue;\n\t      }\n\t\n\t      seg2y1 = seg2.y1;\n\t      seg2y2 = seg2.y2;\n\t      if (Math.min(seg2y1, seg2y2) > Math.max(seg1y1, seg1y2)) {\n\t        // seg2 above seg1\n\t        continue;\n\t      }\n\t\n\t      if (Math.max(seg2y1, seg2y2) < Math.min(seg1y1, seg1y2)) {\n\t        // seg2 below seg1\n\t        continue;\n\t      }\n\t\n\t      if (segmentsIntersect(seg1, seg2)) {\n\t        intersect = true;\n\t        break;\n\t      }\n\t    }\n\t  }\n\t\n\t  return intersect;\n\t};\n\t\n\tvar getSortedSegments = function getSortedSegments(points) {\n\t  var numSeg = points.length - 1;\n\t  var segments = new Array(numSeg),\n\t      point1 = void 0,\n\t      point2 = void 0;\n\t\n\t  for (var i = 0; i < numSeg; ++i) {\n\t    point1 = points[i];\n\t    point2 = points[i + 1];\n\t\n\t    if (point1[0] < point2[0]) {\n\t      segments[i] = {\n\t        x1: point1[0],\n\t        y1: point1[1],\n\t        x2: point2[0],\n\t        y2: point2[1]\n\t      };\n\t    } else {\n\t      segments[i] = {\n\t        x1: point2[0],\n\t        y1: point2[1],\n\t        x2: point1[0],\n\t        y2: point1[1]\n\t      };\n\t    }\n\t  }\n\t\n\t  // more efficient to define this somewhere static\n\t  function byX1(seg1, seg2) {\n\t    return seg1.x1 - seg2.x1;\n\t  }\n\t\n\t  return segments.sort(byX1);\n\t};\n\t\n\tvar segmentsIntersect = function segmentsIntersect(seg1, seg2, options) {\n\t  var point = options && options.point;\n\t  var tolerance = options && options.tolerance;\n\t  var intersection = false;\n\t  var x11_21 = seg1.x1 - seg2.x1;\n\t  var y11_21 = seg1.y1 - seg2.y1;\n\t  var x12_11 = seg1.x2 - seg1.x1;\n\t  var y12_11 = seg1.y2 - seg1.y1;\n\t  var y22_21 = seg2.y2 - seg2.y1;\n\t  var x22_21 = seg2.x2 - seg2.x1;\n\t  var d = y22_21 * x12_11 - x22_21 * y12_11;\n\t  var n1 = x22_21 * y11_21 - y22_21 * x11_21;\n\t  var n2 = x12_11 * y11_21 - y12_11 * x11_21;\n\t\n\t  if (d == 0) {\n\t    // parallel\n\t    if (n1 == 0 && n2 == 0) {\n\t      // coincident\n\t      intersection = true;\n\t    }\n\t  } else {\n\t    var along1 = n1 / d;\n\t    var along2 = n2 / d;\n\t    if (along1 >= 0 && along1 <= 1 && along2 >= 0 && along2 <= 1) {\n\t      // intersect\n\t      if (!point) {\n\t        intersection = true;\n\t      } else {\n\t        // calculate the intersection point\n\t        var x = seg1.x1 + along1 * x12_11;\n\t        var y = seg1.y1 + along1 * y12_11;\n\t        intersection = { 'x': x, 'y': y };\n\t      }\n\t    }\n\t  }\n\t\n\t  if (tolerance) {\n\t    var dist = void 0;\n\t    if (intersection) {\n\t      if (point) {\n\t        var segs = [seg1, seg2];\n\t        var seg = void 0,\n\t            _x = void 0,\n\t            _y = void 0;\n\t        // check segment endpoints for proximity to intersection\n\t        // set intersection to first endpoint within the tolerance\n\t        for (var i = 0; i < 2; ++i) {\n\t          seg = segs[i];\n\t          for (var j = 1; j < 3; ++j) {\n\t            _x = seg['x' + j];\n\t            _y = seg['y' + j];\n\t\n\t            dist = Math.sqrt(Math.pow(_x - intersection.x, 2) + Math.pow(_y - intersection.y, 2));\n\t\n\t            if (dist < tolerance) {\n\t              intersection.x = _x;\n\t              intersection.y = _y;\n\t              break;\n\t            }\n\t          }\n\t        }\n\t      }\n\t    } else {\n\t      // no calculated intersection, but segments could be within\n\t      // the tolerance of one another\n\t      var _segs = [seg1, seg2];\n\t      var source = void 0,\n\t          target = void 0,\n\t          p = void 0,\n\t          result = void 0;\n\t      // check segment endpoints for proximity to intersection\n\t      // set intersection to first endpoint within the tolerance\n\t      for (var _i2 = 0; _i2 < 2; ++_i2) {\n\t        source = _segs[_i2];\n\t        target = _segs[(_i2 + 1) % 2];\n\t        for (var _j = 1; _j < 3; ++_j) {\n\t          p = { x: source['x' + _j], y: source['y' + _j] };\n\t          result = distanceToSegment(p, target);\n\t          if (result.distance < tolerance) {\n\t            if (point) {\n\t              intersection = { 'x': p.x, 'y': p.y };\n\t            } else {\n\t              intersection = true;\n\t            }\n\t\n\t            break;\n\t          }\n\t        }\n\t      }\n\t    }\n\t  }\n\t  return intersection;\n\t};\n\t\n\tvar distanceToSegment = function distanceToSegment(point, segment) {\n\t  var result = distanceSquaredToSegment(point, segment);\n\t  result.distance = Math.sqrt(result.distance);\n\t  return result;\n\t};\n\t\n\tvar distanceSquaredToSegment = function distanceSquaredToSegment(point, segment) {\n\t  var x0 = point.x;\n\t  var y0 = point.y;\n\t  var x1 = segment.x1;\n\t  var y1 = segment.y1;\n\t  var x2 = segment.x2;\n\t  var y2 = segment.y2;\n\t  var dx = x2 - x1;\n\t  var dy = y2 - y1;\n\t  var along = (dx * (x0 - x1) + dy * (y0 - y1)) / (Math.pow(dx, 2) + Math.pow(dy, 2));\n\t  var x = void 0,\n\t      y = void 0;\n\t\n\t  if (along <= 0.0) {\n\t    x = x1;\n\t    y = y1;\n\t  } else if (along >= 1.0) {\n\t    x = x2;\n\t    y = y2;\n\t  } else {\n\t    x = x1 + along * dx;\n\t    y = y1 + along * dy;\n\t  }\n\t\n\t  return {\n\t    distance: Math.pow(x - x0, 2) + Math.pow(y - y0, 2),\n\t    x: x,\n\t    y: y,\n\t    along: along\n\t  };\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 71 */\n/*!**************************************************!*\\\n  !*** ./src/geometry/analysis/polygonwithhole.js ***!\n  \\**************************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = polygonWithHoles;\n\t\n\tvar _geometry = __webpack_require__(/*! ../../geometry/geometry */ 1);\n\t\n\tvar _geometry2 = _interopRequireDefault(_geometry);\n\t\n\tvar _orient = __webpack_require__(/*! ../support/orient */ 33);\n\t\n\tvar _contains = __webpack_require__(/*! ./contains */ 29);\n\t\n\tvar _contains2 = _interopRequireDefault(_contains);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t *\n\t * @param polygon\n\t * @param holePolygon\n\t * @returns {*}\n\t */\n\tfunction polygonWithHoles(polygon1, polygon2) {\n\t\n\t  var polygon = polygon1.clone();\n\t  var holePolygon = polygon2.clone();\n\t\n\t  var resultPolygon = polygon;\n\t  var holeCoordinates = holePolygon.getCoordinates();\n\t  var polygonCoordinates = polygon.getCoordinates();\n\t\n\t  var type = polygon.geometryType;\n\t  // if (type === Geometry.POLYGON || type === Geometry.MULTI_POLYGON ) {\n\t  if (type === _geometry2.default.POLYGON) {\n\t    // 必须要被包含在多边形内\n\t    if ((0, _contains2.default)(polygon, holePolygon)) {\n\t      var holeOutRings = holeCoordinates[0];\n\t      var polygonOutRings = polygonCoordinates[0];\n\t\n\t      var tempHoleOutRings = [];\n\t      var tempPolygonOutRings = [];\n\t\n\t      holeOutRings.forEach(function (ring) {\n\t        tempHoleOutRings.push(ring[0], ring[1]);\n\t      });\n\t\n\t      polygonOutRings.forEach(function (ring) {\n\t        tempPolygonOutRings.push(ring[0], ring[1]);\n\t      });\n\t\n\t      var holeOriented = (0, _orient.linearRingIsClockwise)(tempHoleOutRings, 0, tempHoleOutRings.length, 2);\n\t      var polygonOutRingOriented = (0, _orient.linearRingIsClockwise)(tempPolygonOutRings, 0, tempPolygonOutRings.length, 2);\n\t\n\t      // 带洞多边形\n\t      if (polygonCoordinates.length > 1) {\n\t        // 如果有带洞多边形，需要处理的更多\n\t        // 这里只是简单的存储进去\n\t\n\t        // 不同向\n\t        if (holeOriented !== polygonOutRingOriented) {\n\t          polygonCoordinates.push(holeOutRings.slice());\n\t        } else {\n\t          polygonCoordinates.push(holeOutRings.slice().reverse());\n\t        }\n\t      } else {\n\t        // 不同向\n\t        if (holeOriented !== polygonOutRingOriented) {\n\t          polygonCoordinates.push(holeOutRings.slice());\n\t        } else {\n\t          polygonCoordinates.push(holeOutRings.slice().reverse());\n\t        }\n\t      }\n\t    }\n\t  }\n\t\n\t  return resultPolygon;\n\t} /**\n\t   * Created by zhangyong on 2017/8/4.\n\t   */\n\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 72 */\n/*!***********************************************!*\\\n  !*** ./src/geometry/analysis/splitpolygon.js ***!\n  \\***********************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = splitPolygonByPolyline;\n\t\n\tvar _contains = __webpack_require__(/*! ./contains */ 29);\n\t\n\tvar _contains2 = _interopRequireDefault(_contains);\n\t\n\tvar _extentutil = __webpack_require__(/*! ../../geometry/support/extentutil */ 2);\n\t\n\tvar _polygon = __webpack_require__(/*! ../../geometry/polygon */ 10);\n\t\n\tvar _polygon2 = _interopRequireDefault(_polygon);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar isDividedPointSymbol = Symbol('isDividedPoint'); /**\n\t                                                      * Created by zhangyong on 2017/7/17.\n\t                                                      */\n\t\n\tvar alreadyUsedSymbol = Symbol('alreadyUsed');\n\tvar dividePointSymbol = Symbol('dividePoint');\n\t\n\t/**\n\t * 使用直线来切割多边形,\n\t * 暂时只支持不带洞的多边形的分割\n\t *\n\t * @method splitPolygonByLine\n\t * @param polygon {Geometry} 被切割多边形\n\t * @param line {Geometry} 切割直线\n\t * @returns {Array}\n\t */\n\tfunction splitPolygonByPolyline(targetPolygon, splitLine) {\n\t\n\t  // 不再原对象上处理\n\t  var polygon = targetPolygon.clone();\n\t  var line = splitLine.clone();\n\t\n\t  var polygonCoordinates = polygon.getCoordinates()[0];\n\t  var lineCoordinates = line.getCoordinates();\n\t\n\t  // 找到直线和面的相交点\n\t  var dividedPointList = findIntersectionPoints(polygonCoordinates, lineCoordinates);\n\t\n\t  // 0交点或者交点为奇数，则认为非法输入\n\t  if (dividedPointList.length === 0 || dividedPointList.length % 2 === 1) {\n\t    return [];\n\t  }\n\t\n\t  // 参入到原来分割线中\n\t  var afterInsertLineCoords = insertDiveidePointsToSplitLineCoords(dividedPointList, lineCoordinates);\n\t\n\t  var allPartsScliedFromLineCoords = sliceDividedPointFromLine(dividedPointList, afterInsertLineCoords);\n\t\n\t  // 按照顺序插入分割点到分割多边形顶多序列中\n\t  var vertexListAfterDivide = insertDividePointsToCoordinates(dividedPointList, polygonCoordinates);\n\t\n\t  // 重塑多边形\n\t  var results = renewal(vertexListAfterDivide, allPartsScliedFromLineCoords);\n\t\n\t  var featureCollection = [];\n\t  results.forEach(function (r) {\n\t    var coords = [];\n\t    r.forEach(function (arrs) {\n\t      coords.push([arrs[0], arrs[1]]);\n\t    });\n\t    var polygon = new _polygon2.default();\n\t    polygon.setCoordinates([coords]);\n\t    featureCollection.push(polygon);\n\t  });\n\t\n\t  // 处理带洞多边形\n\t  handleHolesForPolygon(polygon, featureCollection, line);\n\t\n\t  return featureCollection;\n\t}\n\t\n\tvar renewal = function renewal(vertexListAfterDivide, allPartsScliedFromLineCoords) {\n\t\n\t  var i = 0;\n\t  var len = vertexListAfterDivide.length;\n\t\n\t  var isInArray = function isInArray(point, singlePolygonCoords) {\n\t    return singlePolygonCoords.find(function (item) {\n\t      return item[0] === point[0] && item[1] === point[1];\n\t    });\n\t  };\n\t\n\t  // 找到分割点在同一分割边上的其他点\n\t  var findPartners = function findPartners(point) {\n\t    for (var j = 0, jLen = allPartsScliedFromLineCoords.length; j < jLen; j++) {\n\t      var parts = allPartsScliedFromLineCoords[j];\n\t      var fp = parts[0];\n\t      var ep = parts[parts.length - 1];\n\t\n\t      // 如果是首点\n\t      if (fp[0] === point[0] && fp[1] === point[1]) {\n\t        return parts;\n\t      }\n\t\n\t      if (ep[0] === point[0] && ep[1] === point[1]) {\n\t        var newParts = [].concat(parts);\n\t        return newParts.reverse();\n\t      }\n\t    }\n\t  };\n\t\n\t  // 寻找点在多边形序列的下一点\n\t  var findNextPoint = function findNextPoint(point) {\n\t    for (var m = 0, mlen = vertexListAfterDivide.length; m < mlen; m++) {\n\t      var item = vertexListAfterDivide[m];\n\t      if (item[0] === point[0] && item[1] === point[1]) {\n\t        if (m === vertexListAfterDivide.length - 1) {\n\t          return item;\n\t        } else {\n\t          return vertexListAfterDivide[m + 1];\n\t        }\n\t      }\n\t    }\n\t  };\n\t\n\t  var singlePolygonCoords = [];\n\t  var allPolygonCoords = [];\n\t\n\t  // 递归分割\n\t  var goThrough = function goThrough(ePoint, singlePolygonCoords) {\n\t    if (singlePolygonCoords.length > 1) {\n\t      var firstPoint = singlePolygonCoords[0];\n\t      if (firstPoint[0] === ePoint[0] && firstPoint[1] === ePoint[1]) {\n\t        singlePolygonCoords.push(ePoint);\n\t        return true;\n\t      }\n\t    }\n\t\n\t    // 找到分割点，就需要添加它的伙伴（不管顺逆方向）\n\t    if (ePoint.length >= 3 && ePoint[2] === isDividedPointSymbol) {\n\t      var parts = findPartners(ePoint);\n\t      parts.forEach(function (p) {\n\t        singlePolygonCoords.push(p);\n\t      });\n\t\n\t      // 判断此时是否已经完成绘制\n\t      var ffpoint = singlePolygonCoords[0];\n\t      var eepoint = singlePolygonCoords[singlePolygonCoords.length - 1];\n\t      if (ffpoint[0] === eepoint[0] && ffpoint[1] === eepoint[1]) {\n\t        return true;\n\t      }\n\t\n\t      var endPoint = parts[parts.length - 1];\n\t      var nextPoint = findNextPoint(endPoint);\n\t      goThrough(nextPoint, singlePolygonCoords);\n\t    } else if (ePoint.length === 2) {\n\t      singlePolygonCoords.push(ePoint);\n\t\n\t      var _nextPoint = findNextPoint(ePoint);\n\t      goThrough(_nextPoint, singlePolygonCoords);\n\t    }\n\t  };\n\t\n\t  // 更新多边形顶点的状态\n\t  var updataStatus = function updataStatus(singlePolygonCoords, vertexListAfterDivide) {\n\t    vertexListAfterDivide.forEach(function (vertex) {\n\t      if (isInArray(vertex, singlePolygonCoords)) {\n\t        // 如果是原多边形顶点，则设置为alreadyUsedSymbol\n\t        if (vertex.length === 2) {\n\t          vertex.push(alreadyUsedSymbol);\n\t        }\n\t        // 如果是分割点，则只能使用2次\n\t        else if (vertex.length === 3 && vertex[2] === isDividedPointSymbol) {\n\t            vertex.push('1');\n\t          }\n\t          //\n\t          else if (vertex.length === 4) {\n\t              if (vertex[3] === '1') {\n\t                vertex[3] = '2';\n\t              }\n\t            }\n\t      }\n\t    });\n\t  };\n\t\n\t  // 检测这两个点是否是切割边\n\t  var isInOneSegment = function isInOneSegment(onePoint, otherPoint) {\n\t    var allPartsScliedFromLineCoordsTemp = allPartsScliedFromLineCoords;\n\t    var findCount = 0;\n\t\n\t    for (var _i = 0, _len = allPartsScliedFromLineCoordsTemp.length; _i < _len; _i++) {\n\t      var group = allPartsScliedFromLineCoordsTemp[_i];\n\t      findCount = 0;\n\t\n\t      for (var j = 0, jjlen = group.length; j < jjlen; j++) {\n\t        var item = group[j];\n\t        if (item[0] === onePoint[0] && item[1] === onePoint[1]) {\n\t          findCount++;\n\t        }\n\t\n\t        if (item[0] === otherPoint[0] && item[1] === otherPoint[1]) {\n\t          findCount++;\n\t        }\n\t\n\t        if (findCount === 2) {\n\t          return true;\n\t        }\n\t      }\n\t    }\n\t\n\t    return false;\n\t  };\n\t\n\t  for (; i < len - 1; i++) {\n\t    var fPoint = vertexListAfterDivide[i];\n\t    // 如果是普通点\n\t    if (fPoint.length === 2) {\n\t      if (!isInArray(fPoint, singlePolygonCoords)) {\n\t        singlePolygonCoords.push(fPoint);\n\t      }\n\t\n\t      var ePoint = vertexListAfterDivide[i + 1];\n\t      goThrough(ePoint, singlePolygonCoords);\n\t\n\t      updataStatus(singlePolygonCoords, vertexListAfterDivide);\n\t\n\t      allPolygonCoords.push(singlePolygonCoords);\n\t      singlePolygonCoords = [];\n\t    }\n\t    // 如果是分割点\n\t    else if (fPoint.length === 3 && fPoint[2] === isDividedPointSymbol) {\n\t        if (!isInArray(fPoint, singlePolygonCoords)) {\n\t          singlePolygonCoords.push(fPoint);\n\t        }\n\t\n\t        var _ePoint = vertexListAfterDivide[i + 1];\n\t        goThrough(_ePoint, singlePolygonCoords);\n\t\n\t        updataStatus(singlePolygonCoords, vertexListAfterDivide);\n\t\n\t        allPolygonCoords.push(singlePolygonCoords);\n\t        singlePolygonCoords = [];\n\t      } else if (fPoint.length === 4 && fPoint[3] === '1') {\n\t        var _ePoint2 = vertexListAfterDivide[i + 1];\n\t\n\t        // 分割点，必须是构成同一边，不能是异边\n\t        if (_ePoint2.length >= 3 && _ePoint2[2] === isDividedPointSymbol && isInOneSegment(fPoint, _ePoint2)) {\n\t          _ePoint2 = fPoint;\n\t        }\n\t        // 异边，则重新启动分割流程\n\t        else {\n\t            if (!isInArray(fPoint, singlePolygonCoords)) {\n\t              singlePolygonCoords.push(fPoint);\n\t            }\n\t          }\n\t\n\t        goThrough(_ePoint2, singlePolygonCoords);\n\t        updataStatus(singlePolygonCoords, vertexListAfterDivide);\n\t\n\t        var fp = singlePolygonCoords[0];\n\t        var tp = singlePolygonCoords[singlePolygonCoords.length - 1];\n\t        if (fp[0] !== tp[0] || fp[1] !== tp[1]) {\n\t          singlePolygonCoords.push(fp);\n\t        }\n\t\n\t        allPolygonCoords.push(singlePolygonCoords);\n\t        singlePolygonCoords = [];\n\t      }\n\t  }\n\t\n\t  return allPolygonCoords;\n\t};\n\t\n\tvar sliceDividedPointFromLine = function sliceDividedPointFromLine(dividedPointList, afterInsertLineCoords) {\n\t  var allParts = [];\n\t  var singleParts = [];\n\t  var isDividePointStart = false;\n\t\n\t  for (var i = 0, len = afterInsertLineCoords.length; i < len; i++) {\n\t    var item = afterInsertLineCoords[i];\n\t\n\t    if (isDividePointStart === false && item.length === 3) {\n\t      singleParts.push([item[0], item[1]]);\n\t      isDividePointStart = true;\n\t\n\t      continue;\n\t    }\n\t\n\t    if (isDividePointStart) {\n\t      if (item.length === 2) {\n\t        singleParts.push(item);\n\t\n\t        continue;\n\t      }\n\t    }\n\t\n\t    if (isDividePointStart && item.length === 3) {\n\t      singleParts.push([item[0], item[1]]);\n\t      isDividePointStart = false;\n\t\n\t      allParts.push(singleParts);\n\t      singleParts = [];\n\t    }\n\t  }\n\t\n\t  return allParts;\n\t};\n\t\n\tvar insertDiveidePointsToSplitLineCoords = function insertDiveidePointsToSplitLineCoords(dividedPointList, lineCoordinates) {\n\t\n\t  var getDividePoints = function getDividePoints(fP, eP) {\n\t    return dividedPointList.filter(function (dp) {\n\t      var dfPoint = dp.intersectFrom.fromPoint;\n\t      var dePoint = dp.intersectFrom.endPoint;\n\t\n\t      return dfPoint[0] === fP[0] && dfPoint[1] === fP[1] && dePoint[0] === eP[0] && dePoint[1] === eP[1];\n\t    });\n\t  };\n\t\n\t  var isInArray = function isInArray(point) {\n\t    return afterArr.find(function (item) {\n\t      return item[0] === point[0] && item[1] === point[1];\n\t    });\n\t  };\n\t\n\t  var len = lineCoordinates.length;\n\t  var i = 0;\n\t  var afterArr = [];\n\t  for (; i < len - 1; i++) {\n\t    var fPoint = lineCoordinates[i];\n\t    var ePoint = lineCoordinates[i + 1];\n\t\n\t    if (!isInArray(fPoint)) {\n\t      afterArr.push(fPoint);\n\t    }\n\t\n\t    var dividePoints = getDividePoints(fPoint, ePoint);\n\t    if (dividePoints.length !== 0) {\n\t      // 插入分割点\n\t      if (dividePoints.length === 1) {\n\t        afterArr.push([dividePoints[0].point.x, dividePoints[0].point.y, dividePointSymbol]);\n\t      } else {\n\t        (function () {\n\t          // 多个分割点需要排序\n\t\n\t          var firstPointXY = {\n\t            x: fPoint[0],\n\t            y: fPoint[1]\n\t          };\n\t\n\t          dividePoints.sort(function (item1, item2) {\n\t            return distance(item1.point, firstPointXY) - distance(item2.point, firstPointXY);\n\t          });\n\t\n\t          dividePoints.forEach(function (item) {\n\t            afterArr.push([item.point.x, item.point.y, dividePointSymbol]);\n\t          });\n\t        })();\n\t      }\n\t    }\n\t\n\t    if (!isInArray(ePoint)) {\n\t      afterArr.push(ePoint);\n\t    }\n\t  }\n\t\n\t  return afterArr;\n\t};\n\t\n\tvar distance = function distance(p1, p2) {\n\t  return Math.sqrt((p1.x - p2.x) * (p1.x - p2.x) + (p1.y - p2.y) * (p1.y - p2.y));\n\t};\n\t\n\tvar insertDividePointsToCoordinates = function insertDividePointsToCoordinates(dividedPointList, polygonCoordinates) {\n\t  var afterInserted = [];\n\t\n\t  var isInDividedPointList = function isInDividedPointList(firstPoint, endPoint) {\n\t    return dividedPointList.filter(function (item) {\n\t      var orialPoint = item.originPoint;\n\t      var ofPoint = orialPoint.fromPoint;\n\t      var oePoint = orialPoint.toPoint;\n\t\n\t      return firstPoint[0] === ofPoint[0] && firstPoint[1] === ofPoint[1] && endPoint[0] === oePoint[0] && endPoint[1] === oePoint[1];\n\t    });\n\t  };\n\t\n\t  var len = polygonCoordinates.length;\n\t  var i = 0;\n\t\n\t  for (; i < len - 1; i++) {\n\t    var fPoint = polygonCoordinates[i];\n\t    var ePoint = polygonCoordinates[i + 1];\n\t\n\t    afterInserted.push(fPoint);\n\t    var itemDividedPoint = isInDividedPointList(fPoint, ePoint);\n\t\n\t    if (itemDividedPoint.length > 0) {\n\t      if (itemDividedPoint.length > 1) {\n\t        (function () {\n\t          var firstPointXY = {\n\t            x: fPoint[0],\n\t            y: fPoint[1]\n\t          };\n\t\n\t          itemDividedPoint.sort(function (item1, item2) {\n\t            return distance(item1.point, firstPointXY) - distance(item2.point, firstPointXY);\n\t          });\n\t        })();\n\t      }\n\t\n\t      itemDividedPoint.forEach(function (item) {\n\t        var point = item.point;\n\t        afterInserted.push([point.x, point.y, isDividedPointSymbol]);\n\t      });\n\t    }\n\t  }\n\t\n\t  afterInserted.push(afterInserted[0]);\n\t  return afterInserted;\n\t};\n\t\n\tvar findOneIntersectionPoints = function findOneIntersectionPoints(polygonCoordinates, lineCoordinates) {\n\t  var _ExtentUtil = _extentutil.ExtentUtil;\n\t  var lineCoordinatesExtent = _ExtentUtil.boundingExtentFromTwoPoints(lineCoordinates[0], lineCoordinates[1]);\n\t  var lineCoordinatesExtentBuffer = _ExtentUtil.buffer(lineCoordinatesExtent, 4);\n\t\n\t  var seg2 = {\n\t    x1: lineCoordinates[0][0],\n\t    y1: lineCoordinates[0][1],\n\t    x2: lineCoordinates[1][0],\n\t    y2: lineCoordinates[1][1]\n\t  };\n\t\n\t  var ntersectionPoints = [];\n\t\n\t  for (var j = 0, jj = polygonCoordinates.length - 1; j < jj; j++) {\n\t    var points = polygonCoordinates[j];\n\t    var nextPoints = polygonCoordinates[j + 1];\n\t\n\t    var pathExtent = _ExtentUtil.boundingExtentFromTwoPoints(points, nextPoints);\n\t    // 如果两边的extent相交，则判断他们是否相交\n\t    if (_ExtentUtil.intersects(pathExtent, lineCoordinatesExtentBuffer)) {\n\t\n\t      var seg1 = {\n\t        x1: points[0],\n\t        y1: points[1],\n\t        x2: nextPoints[0],\n\t        y2: nextPoints[1]\n\t      };\n\t\n\t      var intersectPoint = segmentsIntersect(seg1, seg2, { point: true });\n\t      if (intersectPoint instanceof Object) {\n\t        ntersectionPoints.push({\n\t          point: intersectPoint,\n\t          originPoint: {\n\t            fromPoint: points,\n\t            toPoint: nextPoints\n\t          },\n\t          index: j\n\t        });\n\t      }\n\t    }\n\t  }\n\t\n\t  return ntersectionPoints;\n\t};\n\t\n\tvar findIntersectionPoints = function findIntersectionPoints(polygonCoordinates, lineCoordinates) {\n\t  var _findOneIntersectionPoints = findOneIntersectionPoints;\n\t  var ntersectionPoints = [];\n\t\n\t  var _loop = function _loop(i, len) {\n\t    var firstPoint = lineCoordinates[i];\n\t    var endPoint = lineCoordinates[i + 1];\n\t\n\t    var intersectionPoints = _findOneIntersectionPoints(polygonCoordinates, [firstPoint, endPoint]);\n\t    intersectionPoints.forEach(function (ntp) {\n\t      ntp.intersectIndex = i;\n\t      ntp.intersectFrom = {\n\t        fromPoint: firstPoint,\n\t        endPoint: endPoint\n\t      };\n\t    });\n\t\n\t    ntersectionPoints = ntersectionPoints.concat(intersectionPoints);\n\t  };\n\t\n\t  for (var i = 0, len = lineCoordinates.length - 1; i < len; i++) {\n\t    _loop(i, len);\n\t  }\n\t\n\t  return ntersectionPoints;\n\t};\n\t\n\tvar segmentsIntersect = function segmentsIntersect(seg1, seg2, options) {\n\t  var point = options && options.point;\n\t  var tolerance = options && options.tolerance;\n\t  var intersection = false;\n\t  var x11_21 = seg1.x1 - seg2.x1;\n\t  var y11_21 = seg1.y1 - seg2.y1;\n\t  var x12_11 = seg1.x2 - seg1.x1;\n\t  var y12_11 = seg1.y2 - seg1.y1;\n\t  var y22_21 = seg2.y2 - seg2.y1;\n\t  var x22_21 = seg2.x2 - seg2.x1;\n\t  var d = y22_21 * x12_11 - x22_21 * y12_11;\n\t  var n1 = x22_21 * y11_21 - y22_21 * x11_21;\n\t  var n2 = x12_11 * y11_21 - y12_11 * x11_21;\n\t\n\t  if (d == 0) {\n\t    // parallel\n\t    if (n1 == 0 && n2 == 0) {\n\t      // coincident\n\t      intersection = true;\n\t    }\n\t  } else {\n\t    var along1 = n1 / d;\n\t    var along2 = n2 / d;\n\t    if (along1 >= 0 && along1 <= 1 && along2 >= 0 && along2 <= 1) {\n\t      // intersect\n\t      if (!point) {\n\t        intersection = true;\n\t      } else {\n\t        // calculate the intersection point\n\t        var x = seg1.x1 + along1 * x12_11;\n\t        var y = seg1.y1 + along1 * y12_11;\n\t        intersection = { 'x': x, 'y': y };\n\t      }\n\t    }\n\t  }\n\t\n\t  if (tolerance) {\n\t    var dist = void 0;\n\t    if (intersection) {\n\t      if (point) {\n\t        var segs = [seg1, seg2];\n\t        var seg = void 0,\n\t            _x = void 0,\n\t            _y = void 0;\n\t        // check segment endpoints for proximity to intersection\n\t        // set intersection to first endpoint within the tolerance\n\t        for (var i = 0; i < 2; ++i) {\n\t          seg = segs[i];\n\t          for (var j = 1; j < 3; ++j) {\n\t            _x = seg['x' + j];\n\t            _y = seg['y' + j];\n\t\n\t            dist = Math.sqrt(Math.pow(_x - intersection.x, 2) + Math.pow(_y - intersection.y, 2));\n\t\n\t            if (dist < tolerance) {\n\t              intersection.x = _x;\n\t              intersection.y = _y;\n\t              break;\n\t            }\n\t          }\n\t        }\n\t      }\n\t    } else {\n\t      // no calculated intersection, but segments could be within\n\t      // the tolerance of one another\n\t      var _segs = [seg1, seg2];\n\t      var source = void 0,\n\t          target = void 0,\n\t          p = void 0,\n\t          result = void 0;\n\t      // check segment endpoints for proximity to intersection\n\t      // set intersection to first endpoint within the tolerance\n\t      for (var _i2 = 0; _i2 < 2; ++_i2) {\n\t        source = _segs[_i2];\n\t        target = _segs[(_i2 + 1) % 2];\n\t        for (var _j = 1; _j < 3; ++_j) {\n\t          p = { x: source['x' + _j], y: source['y' + _j] };\n\t          result = distanceToSegment(p, target);\n\t          if (result.distance < tolerance) {\n\t            if (point) {\n\t              intersection = { 'x': p.x, 'y': p.y };\n\t            } else {\n\t              intersection = true;\n\t            }\n\t\n\t            break;\n\t          }\n\t        }\n\t      }\n\t    }\n\t  }\n\t  return intersection;\n\t};\n\t\n\tvar distanceToSegment = function distanceToSegment(point, segment) {\n\t  var result = distanceSquaredToSegment(point, segment);\n\t  result.distance = Math.sqrt(result.distance);\n\t  return result;\n\t};\n\t\n\tvar distanceSquaredToSegment = function distanceSquaredToSegment(point, segment) {\n\t  var x0 = point.x;\n\t  var y0 = point.y;\n\t  var x1 = segment.x1;\n\t  var y1 = segment.y1;\n\t  var x2 = segment.x2;\n\t  var y2 = segment.y2;\n\t  var dx = x2 - x1;\n\t  var dy = y2 - y1;\n\t  var along = (dx * (x0 - x1) + dy * (y0 - y1)) / (Math.pow(dx, 2) + Math.pow(dy, 2));\n\t  var x = void 0,\n\t      y = void 0;\n\t\n\t  if (along <= 0.0) {\n\t    x = x1;\n\t    y = y1;\n\t  } else if (along >= 1.0) {\n\t    x = x2;\n\t    y = y2;\n\t  } else {\n\t    x = x1 + along * dx;\n\t    y = y1 + along * dy;\n\t  }\n\t\n\t  return {\n\t    distance: Math.pow(x - x0, 2) + Math.pow(y - y0, 2),\n\t    x: x, y: y,\n\t    along: along\n\t  };\n\t};\n\t\n\t/**\n\t * 处理带洞多边形\n\t * @param polygon\n\t * @param geometryCollection\n\t * @param splitLine\n\t */\n\tvar handleHolesForPolygon = function handleHolesForPolygon(polygon, geometryCollection, splitLine) {\n\t  if (!polygon.hasHoles()) {\n\t    return;\n\t  }\n\t\n\t  var addHoleToPolygon = function addHoleToPolygon(polyCoods, geometryCollection) {\n\t    var poly = new _polygon2.default([polyCoods]);\n\t    var needPoly = geometryCollection.find(function (polygon) {\n\t      return (0, _contains2.default)(polygon, poly);\n\t    });\n\t\n\t    if (needPoly) {\n\t      needPoly.getCoordinates().push(polyCoods);\n\t    }\n\t  };\n\t\n\t  // 判断洞是否与切割线相交\n\t  var coords = polygon.getCoordinates();\n\t  var lineCoords = splitLine;\n\t\n\t  for (var i = 1, len = coords.length; i < len; i++) {\n\t    var dividedPoints = findIntersectionPoints(coords[i], lineCoords);\n\t\n\t    // 如果分割线和洞不相交，需要判断洞的归属\n\t    if (dividedPoints.length === 0) {\n\t      // console.log('Find one need to appended to collection.')\n\t      addHoleToPolygon(coords[i], geometryCollection);\n\t    }\n\t  }\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 73 */\n/*!*****************************************!*\\\n  !*** ./src/meek/browsereventhandler.js ***!\n  \\*****************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _baseobject = __webpack_require__(/*! ../core/baseobject */ 3);\n\t\n\tvar _baseobject2 = _interopRequireDefault(_baseobject);\n\t\n\tvar _eventmanager = __webpack_require__(/*! ../core/eventmanager */ 4);\n\t\n\tvar _browserevent = __webpack_require__(/*! ./browserevent */ 5);\n\t\n\tvar _browserevent2 = _interopRequireDefault(_browserevent);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zypc on 2016/11/21.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar BrowserEventHandler = function (_BaseObject) {\n\t  _inherits(BrowserEventHandler, _BaseObject);\n\t\n\t  function BrowserEventHandler(map, element) {\n\t    _classCallCheck(this, BrowserEventHandler);\n\t\n\t    var _this = _possibleConstructorReturn(this, _BaseObject.call(this));\n\t\n\t    _this.map = map;\n\t\n\t    /**\n\t     *\n\t     * @private\n\t     */\n\t    _this._element = element;\n\t\n\t    /**\n\t     *\n\t     * @type {boolean}\n\t     * @private\n\t     */\n\t    _this._dragging = false;\n\t\n\t    /**\n\t     * The most recent \"down\" type event (or null if none have occurred).\n\t     * @private\n\t     */\n\t    _this._down = null;\n\t\n\t    /**\n\t     *\n\t     * @type {Array}\n\t     * @private\n\t     */\n\t    _this._dragListenerKeys = [];\n\t\n\t    /**\n\t     *\n\t     * @type {number}\n\t     * @private\n\t     */\n\t    _this._clickTimeoutId = 0;\n\t\n\t    // 事件和对应的处理方法\n\t    // 映射关系\n\t    _this._mapping = {\n\t      'mousedown': _this._mousedown,\n\t      'mousemove': _this._mousemove,\n\t      'mouseup': _this._mouseup,\n\t      'mouseover': _this._mouseover,\n\t      'mouseout': _this._mouseout\n\t    };\n\t\n\t    _this._registerSource();\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   *\n\t   * @private\n\t   */\n\t\n\t\n\t  BrowserEventHandler.prototype._registerSource = function _registerSource() {\n\t    var _this2 = this;\n\t\n\t    // console.log('注册鼠标事件')\n\t    var events = this.getEvents();\n\t    events.forEach(function (eventName) {\n\t      return (0, _eventmanager.listen)(_this2._element, eventName, _this2._mapping[eventName], _this2);\n\t    });\n\t  };\n\t\n\t  /**\n\t   * 得到事件\n\t   *\n\t   * @method getEvents\n\t   * @return {Array}\n\t   */\n\t\n\t\n\t  BrowserEventHandler.prototype.getEvents = function getEvents() {\n\t    return Object.keys(this._mapping);\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param e\n\t   * @private\n\t   */\n\t\n\t\n\t  BrowserEventHandler.prototype._mousedown = function _mousedown(e) {\n\t    var event = new _browserevent2.default(this.map, e, _browserevent2.default.MOUSE_DOWN);\n\t    this.dispatchEvent(event);\n\t\n\t    this._dragging = false;\n\t    this._down = e;\n\t\n\t    if (this._dragListenerKeys.length === 0) {\n\t      var documentDom = document;\n\t\n\t      this._dragListenerKeys.push((0, _eventmanager.listen)(documentDom, _browserevent2.default.MOUSE_MOVE, this._mousemove, this), (0, _eventmanager.listen)(documentDom, _browserevent2.default.MOUSE_UP, this._mouseup, this));\n\t    }\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param e\n\t   * @private\n\t   */\n\t\n\t\n\t  BrowserEventHandler.prototype._mousemove = function _mousemove(e) {\n\t\n\t    var event = new _browserevent2.default(this.map, e, _browserevent2.default.MOUSE_MOVE);\n\t\n\t    if (event.coordinate === null) {\n\t      return;\n\t    }\n\t\n\t    this.dispatchEvent(event);\n\t\n\t    if (this._isMoving(e)) {\n\t      this._dragging = true;\n\t\n\t      var newEvent = new _browserevent2.default(this.map, e, _browserevent2.default.MOUSE_DRAG, this._dragging);\n\t      this.dispatchEvent(newEvent);\n\t    }\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param e\n\t   * @private\n\t   */\n\t\n\t\n\t  BrowserEventHandler.prototype._mouseup = function _mouseup(e) {\n\t    var event = new _browserevent2.default(this.map, e, _browserevent2.default.MOUSE_UP);\n\t    this.dispatchEvent(event);\n\t\n\t    if (!this._dragging && this._down) {\n\t      this._emulateClick(this._down);\n\t    }\n\t\n\t    this._dragListenerKeys.forEach(_eventmanager.unlistenByKey);\n\t    this._dragListenerKeys.length = 0;\n\t    this._dragging = false;\n\t    this._down = null;\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param e\n\t   * @private\n\t   */\n\t\n\t\n\t  BrowserEventHandler.prototype._mouseover = function _mouseover(e) {\n\t    var event = new _browserevent2.default(this.map, e, _browserevent2.default.MOUSE_OVER);\n\t    this.dispatchEvent(event);\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param e\n\t   * @private\n\t   */\n\t\n\t\n\t  BrowserEventHandler.prototype._mouseout = function _mouseout(e) {\n\t    var event = new _browserevent2.default(this.map, e, _browserevent2.default.MOUSE_OUT);\n\t    this.dispatchEvent(event);\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param event\n\t   * @private\n\t   */\n\t\n\t\n\t  BrowserEventHandler.prototype._emulateClick = function _emulateClick(event) {\n\t    var newEvent = new _browserevent2.default(this.map, event, _browserevent2.default.CLICK);\n\t    this.dispatchEvent(newEvent);\n\t\n\t    // double click\n\t    if (this._clickTimeoutId !== 0) {\n\t      clearTimeout(this._clickTimeoutId);\n\t      this._clickTimeoutId = 0;\n\t      newEvent = new _browserevent2.default(this.map, event, _browserevent2.default.DBLCLICK);\n\t      this.dispatchEvent(newEvent);\n\t    } else {\n\t      // single click\n\t      this._clickTimeoutId = setTimeout(function () {\n\t        this._clickTimeoutId = 0;\n\t        var newEvent = new _browserevent2.default(this.map, event, _browserevent2.default.SINGLE_CLICK);\n\t        this.dispatchEvent(newEvent);\n\t      }.bind(this), 250);\n\t    }\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param event\n\t   * @return {boolean}\n\t   * @private\n\t   */\n\t\n\t\n\t  BrowserEventHandler.prototype._isMoving = function _isMoving(event) {\n\t    if (this._down === null) {\n\t      return false;\n\t    }\n\t\n\t    return event.clientX !== this._down.clientX || event.clientY !== this._down.clientY;\n\t  };\n\t\n\t  return BrowserEventHandler;\n\t}(_baseobject2.default);\n\t\n\texports.default = BrowserEventHandler;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 74 */\n/*!*************************!*\\\n  !*** ./src/meek/map.js ***!\n  \\*************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _baseobject = __webpack_require__(/*! ../core/baseobject */ 3);\n\t\n\tvar _baseobject2 = _interopRequireDefault(_baseobject);\n\t\n\tvar _canvasrenderer = __webpack_require__(/*! ../renderer/canvas/canvasrenderer */ 76);\n\t\n\tvar _canvasrenderer2 = _interopRequireDefault(_canvasrenderer);\n\t\n\tvar _browsereventhandler = __webpack_require__(/*! ./browsereventhandler */ 73);\n\t\n\tvar _browsereventhandler2 = _interopRequireDefault(_browsereventhandler);\n\t\n\tvar _browserevent = __webpack_require__(/*! ./browserevent */ 5);\n\t\n\tvar _browserevent2 = _interopRequireDefault(_browserevent);\n\t\n\tvar _view = __webpack_require__(/*! ./view */ 49);\n\t\n\tvar _view2 = _interopRequireDefault(_view);\n\t\n\tvar _featurelayer = __webpack_require__(/*! ../lyr/featurelayer */ 13);\n\t\n\tvar _featurelayer2 = _interopRequireDefault(_featurelayer);\n\t\n\tvar _eventmanager = __webpack_require__(/*! ../core/eventmanager */ 4);\n\t\n\tvar _transform = __webpack_require__(/*! ../data/matrix/transform */ 7);\n\t\n\tvar _eventtype = __webpack_require__(/*! ../meek/eventtype */ 6);\n\t\n\tvar _extentutil = __webpack_require__(/*! ../geometry/support/extentutil */ 2);\n\t\n\tvar _componentdefaults = __webpack_require__(/*! ../components/componentdefaults */ 57);\n\t\n\tvar _controldefaults = __webpack_require__(/*! ../control/controldefaults */ 65);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zypc on 2016/11/15.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * Map类\n\t *\n\t * @class Map\n\t * @extends BaseObject\n\t * @module meek\n\t * @constructor\n\t */\n\tvar Map = function (_BaseObject) {\n\t  _inherits(Map, _BaseObject);\n\t\n\t  /**\n\t   * @constructor\n\t   *\n\t   * @param options\n\t   */\n\t  function Map(options) {\n\t    _classCallCheck(this, Map);\n\t\n\t    var _this = _possibleConstructorReturn(this, _BaseObject.call(this));\n\t\n\t    _this._frameState = null;\n\t\n\t    /**\n\t     * 添加到map中的layers集合\n\t     * @private\n\t     */\n\t    _this._layers = [];\n\t\n\t    /**\n\t     * 初始化矩阵转换器\n\t     * @type {*}\n\t     * @private\n\t     */\n\t    _this._toPixelTransform = _transform.Transform.create();\n\t    _this._toCoordinateTransform = _transform.Transform.create();\n\t\n\t    /**\n\t     *\n\t     * @private\n\t     */\n\t    _this._animationDelayKey = undefined;\n\t\n\t    /**\n\t     * The collection of components\n\t     * @private\n\t     */\n\t    _this._components = [];\n\t\n\t    /**\n\t     * The collection of controls\n\t     * @type {Array}\n\t     * @private\n\t     */\n\t    _this._controls = [];\n\t\n\t    // Create the viewport for map container\n\t    _this._createViewport();\n\t\n\t    _this._overlayContainer = document.createElement('DIV');\n\t    _this._overlayContainer.className = 'dt-overlaycontainer';\n\t    _this.viewport.appendChild(_this._overlayContainer);\n\t\n\t    _this._overlayContainerStopEvent = document.createElement('DIV');\n\t    _this._overlayContainerStopEvent.className = 'dt-overlaycontainer-stopevent';\n\t\n\t    // prevent event propagation from overlay\n\t    var overlayEvents = [_browserevent2.default.CLICK, _browserevent2.default.DBLCLICK, _browserevent2.default.MOUSE_DOWN, _browserevent2.default.MOUSE_UP, _browserevent2.default.MOUSE_WHEEL, _browserevent2.default.WHEEL];\n\t    overlayEvents.forEach(function (overlayEvent) {\n\t      (0, _eventmanager.listen)(_this._overlayContainerStopEvent, overlayEvent, function (evt) {\n\t        evt.stopPropagation();\n\t      });\n\t    });\n\t\n\t    _this.viewport.appendChild(_this._overlayContainerStopEvent);\n\t\n\t    // Get the options inner\n\t    var optionsInner = Map.parseOptionsInner(options);\n\t\n\t    // 是否允许图片坐标超出图片范围\n\t    _this.allowCoordinatesBeyondImage = options.allowCoordinatesBeyondImage || false;\n\t\n\t    // Create the renderer\n\t    _this._renderer = new optionsInner.rendererClass(_this.viewport, _this);\n\t\n\t    // Create the browser events handler\n\t    _this._createBrowserEventHandler();\n\t\n\t    _this._animationDelay = function () {\n\t      _this._animationDelayKey = undefined;\n\t      _this._renderFrame(Date.now());\n\t    };\n\t\n\t    // Set up the properties for map\n\t    _this.layers = optionsInner.values['layers'];\n\t    _this.target = optionsInner.values['target'];\n\t    _this.view = optionsInner.values['view'];\n\t\n\t    // add default components to map\n\t    optionsInner.components.forEach(function (component) {\n\t      return _this.addComponents(component);\n\t    });\n\t\n\t    // add default controls to map\n\t    optionsInner.controls.forEach(function (control) {\n\t      return _this.addControl(control);\n\t    });\n\t\n\t    _this._overlayIdIndex = {};\n\t    _this._overlays = optionsInner.overlays;\n\t    _this._overlays.forEach(function (overlay) {\n\t      return _this._addOverlayInternal(overlay);\n\t    });\n\t\n\t    //\n\t    (0, _eventmanager.listen)(_this.view, _eventtype.EventType.CHANGE, _this._handleViewChange, _this);\n\t\n\t    // add mouse wheel events listener\n\t    (0, _eventmanager.listen)(_this.viewport, _browserevent2.default.MOUSE_WHEEL, _this._handleMouseWheelEvent, _this);\n\t    (0, _eventmanager.listen)(_this.viewport, _browserevent2.default.WHEEL, _this._handleMouseWheelEvent, _this);\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * 设置map的父容器,\n\t   * 所有的图层对象、组件对象的父容器\n\t   *\n\t   * @method createViewport\n\t   * @private\n\t   */\n\t\n\t\n\t  Map.prototype._createViewport = function _createViewport() {\n\t    var viewport = document.createElement('DIV');\n\t    viewport.className = 'dt-viewport';\n\t    viewport.style.position = 'relative';\n\t    viewport.style.overflow = 'hidden';\n\t    viewport.style.width = '100%';\n\t    viewport.style.height = '100%';\n\t\n\t    this._viewport = viewport;\n\t  };\n\t\n\t  /**\n\t   * 获取overlay的容器\n\t   *\n\t   * @property overlayContainer\n\t   * @returns {Element|*}\n\t   */\n\t\n\t\n\t  /**\n\t   * 地图渲染器对象;默认渲染方式为canvas方式\n\t   *\n\t   * @method createRenderer\n\t   * @private\n\t   */\n\t  Map.prototype._createRenderer = function _createRenderer() {\n\t    this._renderer = new _canvasrenderer2.default(this.viewport, this);\n\t  };\n\t\n\t  /**\n\t   * 创建浏览器事件的监听器\n\t   *\n\t   * 浏览器事件包括{mousedown|mousemove|mouseup|mouseover|mouseup}\n\t   *\n\t   * @method createBrowserEventHandler\n\t   * @private\n\t   */\n\t\n\t\n\t  Map.prototype._createBrowserEventHandler = function _createBrowserEventHandler() {\n\t    this._browserEventHandler = new _browsereventhandler2.default(this, this.viewport);\n\t\n\t    /**\n\t     * 监听浏览器上的鼠标事件 mousemove,mouseup,mousedown\n\t     * 并处理浏览器事件\n\t     */\n\t    for (var key in _browserevent2.default) {\n\t      (0, _eventmanager.listen)(this._browserEventHandler, _browserevent2.default[key], this._handleBrowserEvent, this);\n\t    }\n\t  };\n\t\n\t  /**\n\t   * Handle the mouse wheel event\n\t   * @param wheelEvent\n\t   * @private\n\t   */\n\t\n\t\n\t  Map.prototype._handleMouseWheelEvent = function _handleMouseWheelEvent(wheelEvent) {\n\t    var type = wheelEvent.type;\n\t    var browserEvent = new _browserevent2.default(this, wheelEvent, type);\n\t    this._handleBrowserEvent(browserEvent);\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param keyboardEvent\n\t   * @private\n\t   */\n\t\n\t\n\t  Map.prototype._handleKeyboardEvent = function _handleKeyboardEvent(keyboardEvent) {\n\t    var type = keyboardEvent.type;\n\t    var browserEvent = new _browserevent2.default(this, keyboardEvent, type);\n\t    this._handleBrowserEvent(browserEvent);\n\t  };\n\t\n\t  /**\n\t   * Handle browser events\n\t   * @param browserEvent\n\t   * @private\n\t   */\n\t\n\t\n\t  Map.prototype._handleBrowserEvent = function _handleBrowserEvent(browserEvent) {\n\t    var cpts = this.components;\n\t    var i = void 0;\n\t\n\t    if (this.dispatchEvent(browserEvent) !== false) {\n\t      for (i = cpts.length - 1; i >= 0; i--) {\n\t        var cpt = cpts[i];\n\t\n\t        if (!cpt.active) {\n\t          continue;\n\t        }\n\t\n\t        var cont = cpt.handleMouseEvent(browserEvent);\n\t        if (!cont) {\n\t          break;\n\t        }\n\t      }\n\t    }\n\t  };\n\t\n\t  /**\n\t   * 渲染map\n\t   *\n\t   * @method renderFrame\n\t   * @private\n\t   */\n\t\n\t\n\t  Map.prototype._renderFrame = function _renderFrame() {\n\t    var size = this.size;\n\t    var view = this.view;\n\t    var frameState = null;\n\t\n\t    var extent = _extentutil.ExtentUtil.createEmpty();\n\t    var viewState = view.getViewState();\n\t    frameState = {\n\t      size: size,\n\t      viewState: viewState,\n\t      pixelRatio: 1,\n\t      extent: extent,\n\t      toPixelTransform: this._toPixelTransform,\n\t      toCoordinateTransform: this._toCoordinateTransform\n\t    };\n\t\n\t    if (frameState) {\n\t      frameState.extent = _extentutil.ExtentUtil.getForViewAndSize(viewState.center, viewState.resolution, viewState.rotation, frameState.size, extent);\n\t    }\n\t\n\t    this._frameState = frameState;\n\t    this._renderer.renderFrame(frameState);\n\t  };\n\t\n\t  /**\n\t   * 执行渲染\n\t   *\n\t   * @method render\n\t   */\n\t\n\t\n\t  Map.prototype.render = function render() {\n\t    if (this._animationDelayKey === undefined) {\n\t      this._animationDelayKey = window.requestAnimationFrame(this._animationDelay);\n\t    }\n\t  };\n\t\n\t  /**\n\t   * Render map while the view has been changed\n\t   * @private\n\t   */\n\t\n\t\n\t  Map.prototype._handleViewChange = function _handleViewChange() {\n\t    this.render();\n\t    this.dispatchEvent(_eventtype.EventType.VIEW_CHANGED);\n\t  };\n\t\n\t  /**\n\t   * 是否渲染\n\t   *\n\t   * @method isRendered\n\t   * @returns {Boolean}\n\t   */\n\t\n\t\n\t  Map.prototype.isRendered = function isRendered() {\n\t    return !!this._frameState;\n\t  };\n\t\n\t  /**\n\t   * Size读写器,当前地图的大小\n\t   *\n\t   * @property size\n\t   * @returns {Number}\n\t   */\n\t\n\t\n\t  /**\n\t   * 用于添加一个Component的方法接口\n\t   *\n\t   * @method addComponents\n\t   * @param cpt {Component} Componnet的一个子类\n\t   */\n\t  Map.prototype.addComponents = function addComponents(cpt) {\n\t    this.components.push(cpt);\n\t    cpt.map = this;\n\t  };\n\t\n\t  /**\n\t   * 添加一个控件到地图中\n\t   * @method addControl\n\t   * @param control\n\t   */\n\t\n\t\n\t  Map.prototype.addControl = function addControl(control) {\n\t    this.controls.push(control);\n\t    control.map = this;\n\t  };\n\t\n\t  /**\n\t   * 添加layer\n\t   *\n\t   * @method addLayer\n\t   * @param layer\n\t   */\n\t\n\t\n\t  Map.prototype.addLayer = function addLayer(layer) {\n\t    this.layers.push(layer);\n\t    layer.map = this;\n\t  };\n\t\n\t  /**\n\t   * 获取当前地图中的矢量图层\n\t   *\n\t   * @method getFeaturesLayer\n\t   * @return {Array}\n\t   */\n\t\n\t\n\t  Map.prototype.getFeaturesLayer = function getFeaturesLayer() {\n\t    return this.layers.filter(function (layer) {\n\t      return layer instanceof _featurelayer2.default;\n\t    });\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param overlay\n\t   * @private\n\t   */\n\t\n\t\n\t  Map.prototype._addOverlayInternal = function _addOverlayInternal(overlay) {\n\t    var id = overlay.overlayId;\n\t    if (id !== undefined) {\n\t      this._overlayIdIndex[id.toString()] = overlay;\n\t    }\n\t\n\t    overlay.map = this;\n\t  };\n\t\n\t  /**\n\t   *\n\t   * getTargetElement\n\t   * @returns {Object}\n\t   */\n\t\n\t\n\t  Map.prototype.getTargetElement = function getTargetElement() {\n\t    var target = this.target;\n\t    if (target !== undefined) {\n\t      return typeof target === 'string' ? document.getElementById(target) : target;\n\t    } else {\n\t      return null;\n\t    }\n\t  };\n\t\n\t  /**\n\t   * 遍历鼠标点位置的所有feature\n\t   *\n\t   * @method forEachFeatureAtPiexl\n\t   * @param piexl {Array}\n\t   * @param callback\n\t   * @param tolerance\n\t   * @returns {eature}\n\t   */\n\t\n\t\n\t  Map.prototype.forEachFeatureAtPiexl = function forEachFeatureAtPiexl(piexl, callback, tolerance) {\n\t    if (!this._frameState) {\n\t      return;\n\t    }\n\t\n\t    var coordinate = this.getCoordinateFromPixel(piexl);\n\t    var hitTolerance = tolerance;\n\t\n\t    var layers = this.getFeaturesLayer();\n\t    var result = null;\n\t    for (var i = 0, ii = layers.length; i < ii; i++) {\n\t      var layer = layers[i];\n\t      if (layer.visible) {\n\t        result = layer.forEachFeatureAtPiexl(this._frameState, coordinate, callback, hitTolerance);\n\t        if (result) {\n\t          return callback(result, layer);\n\t        }\n\t      }\n\t    }\n\t\n\t    return result;\n\t  };\n\t\n\t  /**\n\t   * 更新map viewport的大小\n\t   *\n\t   * @method updateSize\n\t   */\n\t\n\t\n\t  Map.prototype.updateSize = function updateSize() {\n\t    var targetElement = this.getTargetElement();\n\t    if (!targetElement) {\n\t      this.size = undefined;\n\t    } else {\n\t      var computedStyle = getComputedStyle(targetElement);\n\t      this.size = [targetElement.offsetWidth - Number.parseFloat(computedStyle['borderLeftWidth']) - Number.parseFloat(computedStyle['paddingLeft']) - Number.parseFloat(computedStyle['paddingRight']) - Number.parseFloat(computedStyle['borderRightWidth']), targetElement.offsetHeight - Number.parseFloat(computedStyle['borderTopWidth']) - Number.parseFloat(computedStyle['paddingTop']) - Number.parseFloat(computedStyle['paddingBottom']) - Number.parseFloat(computedStyle['borderBottomWidth'])];\n\t    }\n\t  };\n\t\n\t  /**\n\t   * 获取当前视图鼠标的坐标\n\t   *\n\t   * @method getEventPixel\n\t   * @param {Event} event Event.\n\t   * @return {Array}\n\t   * @api stable\n\t   */\n\t\n\t\n\t  Map.prototype.getEventPixel = function getEventPixel(event) {\n\t    // 获取viewport元素在浏览器视图窗口总的位置(left,top,bottom,right)\n\t    var viewportPosition = this.viewport.getBoundingClientRect();\n\t    // const eventPosition = event.changedTouches ? event.changedTouches[0] : event\n\t    var eventPosition = event;\n\t    return [eventPosition.clientX - viewportPosition.left, eventPosition.clientY - viewportPosition.top];\n\t  };\n\t\n\t  /**\n\t   * 把坐标数据转换到标准坐标系中\n\t   *\n\t   * @method getCoordinateFromPixel\n\t   * @param pixelPoint {Array}\n\t   * @returns {Array}\n\t   */\n\t\n\t\n\t  Map.prototype.getCoordinateFromPixel = function getCoordinateFromPixel(pixelPoint) {\n\t    // console.log('转换到标准坐标')\n\t    var frameState = this._frameState;\n\t    if (!frameState) {\n\t      return null;\n\t    } else {\n\t      return _transform.Transform.apply(frameState.toCoordinateTransform, pixelPoint.slice());\n\t    }\n\t  };\n\t\n\t  /**\n\t   * Get the pixel for a coordinate.  This takes a coordinate in the map view\n\t   * projection and returns the corresponding pixel.\n\t   *\n\t   * getPixelFromCoordinate\n\t   * @param coordinate\n\t   * @returns {Array}\n\t   */\n\t\n\t\n\t  Map.prototype.getPixelFromCoordinate = function getPixelFromCoordinate(coordinate) {\n\t    var frameState = this._frameState;\n\t    if (!frameState) {\n\t      return null;\n\t    } else {\n\t      return _transform.Transform.apply(frameState.toPixelTransform, coordinate.slice(0, 2));\n\t    }\n\t  };\n\t\n\t  /**\n\t   * Parse the options passed inner\n\t   * parseOptionsInner\n\t   * @param options\n\t   * @static\n\t   * @returns {{rendererClass: CanvasRenderer, components: *, values: Map}}\n\t   */\n\t\n\t\n\t  Map.parseOptionsInner = function parseOptionsInner() {\n\t    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t\n\t    var rendererClass = _canvasrenderer2.default;\n\t\n\t    var values = {};\n\t\n\t    values['view'] = options.view !== undefined ? options.view : new _view2.default();\n\t    values['target'] = options.target;\n\t    values['layers'] = options.layers !== undefined ? options.layers : [];\n\t\n\t    var components = void 0;\n\t    if (options.components) {\n\t      components = options.components;\n\t    } else {\n\t      components = (0, _componentdefaults.componentsDefaults)();\n\t    }\n\t\n\t    var controls = void 0;\n\t    if (options.controls) {\n\t      controls = options.controls;\n\t    } else {\n\t      controls = (0, _controldefaults.controlDefaults)();\n\t    }\n\t\n\t    var overlays = void 0;\n\t    if (options.overlays !== undefined) {\n\t      if (Array.isArray(options.overlays)) {\n\t        overlays = [].concat(_toConsumableArray(options.overlays));\n\t      }\n\t    } else {\n\t      overlays = [];\n\t    }\n\t\n\t    return {\n\t      rendererClass: rendererClass,\n\t      components: components,\n\t      controls: controls,\n\t      values: values,\n\t      overlays: overlays\n\t    };\n\t  };\n\t\n\t  _createClass(Map, [{\n\t    key: 'overlayContainer',\n\t    get: function get() {\n\t      return this._overlayContainer;\n\t    }\n\t\n\t    /**\n\t     * 获取overlay容器的结束事件\n\t     *\n\t     * @property overlayContainerStopEvent\n\t     * @returns {Element|*}\n\t     */\n\t\n\t  }, {\n\t    key: 'overlayContainerStopEvent',\n\t    get: function get() {\n\t      return this._overlayContainerStopEvent;\n\t    }\n\t\n\t    /**\n\t     * 获取viewport\n\t     *\n\t     * @property viewport\n\t     * @returns {Element|*}\n\t     */\n\t\n\t  }, {\n\t    key: 'viewport',\n\t    get: function get() {\n\t      return this._viewport;\n\t    }\n\t  }, {\n\t    key: 'size',\n\t    get: function get() {\n\t      return this._size;\n\t    },\n\t    set: function set(value) {\n\t      this._size = value;\n\t    }\n\t\n\t    /**\n\t     * 获取组件\n\t     *\n\t     * @method components\n\t     * @returns {Array}\n\t     */\n\t\n\t  }, {\n\t    key: 'components',\n\t    get: function get() {\n\t      return this._components;\n\t    }\n\t\n\t    /**\n\t     * map中控件集合\n\t     * @property controls\n\t     * @type {[]}\n\t     */\n\t\n\t  }, {\n\t    key: 'controls',\n\t    get: function get() {\n\t      return this._controls;\n\t    }\n\t\n\t    /**\n\t     * 当前存储在Map中的图层集合\n\t     *\n\t     * @property layers\n\t     * @type {Array}\n\t     */\n\t\n\t  }, {\n\t    key: 'layers',\n\t    get: function get() {\n\t      return this._layers;\n\t    },\n\t    set: function set(value) {\n\t      var _this2 = this;\n\t\n\t      if (Array.isArray(value)) {\n\t        value.forEach(function (layer) {\n\t          _this2.addLayer(layer);\n\t        });\n\t      }\n\t    }\n\t\n\t    /**\n\t     * target 读写器\n\t     *\n\t     * @property target\n\t     * @type\n\t     */\n\t\n\t  }, {\n\t    key: 'target',\n\t    get: function get() {\n\t      return this._target;\n\t    },\n\t    set: function set(value) {\n\t      this._target = value;\n\t      var targetElement = document.getElementById(this._target);\n\t      targetElement.appendChild(this.viewport);\n\t\n\t      // 监听键盘点击和抬起事件\n\t      (0, _eventmanager.listen)(document, _browserevent2.default.KEYDOWN, this._handleKeyboardEvent, this), (0, _eventmanager.listen)(document, _browserevent2.default.KEYPRESS, this._handleKeyboardEvent, this);\n\t\n\t      // 监听浏览器窗口变化，并做自适应\n\t      var handleRize = this.updateSize.bind(this);\n\t      window.addEventListener(_eventtype.EventType.RESIZE, handleRize, false);\n\t\n\t      this.updateSize();\n\t      this.render();\n\t    }\n\t  }]);\n\t\n\t  return Map;\n\t}(_baseobject2.default);\n\t\n\texports.default = Map;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 75 */\n/*!*****************************!*\\\n  !*** ./src/meek/overlay.js ***!\n  \\*****************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _baseobject = __webpack_require__(/*! ../core/baseobject */ 3);\n\t\n\tvar _baseobject2 = _interopRequireDefault(_baseobject);\n\t\n\tvar _eventmanager = __webpack_require__(/*! ../core/eventmanager */ 4);\n\t\n\tvar _rendereventtype = __webpack_require__(/*! ../renderer/rendereventtype */ 51);\n\t\n\tvar _extentutil = __webpack_require__(/*! ../geometry/support/extentutil */ 2);\n\t\n\tvar _domutil = __webpack_require__(/*! ../utils/domutil */ 18);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/6/26.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * Overlay类提供一个可以漂浮在map上的容器，\n\t * 凡是需要有和地图交互的表单，必须使用该容器承载\n\t *\n\t * @class Overlay\n\t * @extends BaseObject\n\t * @module meek\n\t * @constructor\n\t */\n\tvar Overlay = function (_BaseObject) {\n\t  _inherits(Overlay, _BaseObject);\n\t\n\t  /**\n\t   * @constructor\n\t   * @param options\n\t   */\n\t  function Overlay() {\n\t    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t    _classCallCheck(this, Overlay);\n\t\n\t    /**\n\t     *\n\t     * @type {undefined}\n\t     * @private\n\t     */\n\t    var _this = _possibleConstructorReturn(this, _BaseObject.call(this));\n\t\n\t    _this._element = undefined;\n\t\n\t    /**\n\t     *\n\t     * @type {undefined}\n\t     * @private\n\t     */\n\t    _this._map = undefined;\n\t\n\t    /**\n\t     *\n\t     * @type {undefined}\n\t     * @private\n\t     */\n\t    _this._offset = undefined;\n\t\n\t    /**\n\t     *\n\t     * @type {undefined}\n\t     * @private\n\t     */\n\t    _this._position = undefined;\n\t\n\t    /**\n\t     *\n\t     * @type {undefined}\n\t     * @private\n\t     */\n\t    _this._positioning = undefined;\n\t\n\t    /**\n\t     * @private\n\t     * @type {number|string|undefined}\n\t     */\n\t    _this._overlay = options.id;\n\t\n\t    /**\n\t     * @private\n\t     * @type {boolean}\n\t     */\n\t    _this._insertFirst = options.insertFirst !== undefined ? options.insertFirst : true;\n\t\n\t    /**\n\t     * @private\n\t     * @type {boolean}\n\t     */\n\t    _this._stopEvent = options.stopEvent !== undefined ? options.stopEvent : true;\n\t\n\t    /**\n\t     * @private\n\t     * @type {Element}\n\t     */\n\t    _this._element = document.createElement('DIV');\n\t    _this._element.className = 'dt-overlay-container dt-selectable';\n\t    _this._element.style.position = 'absolute';\n\t\n\t    /**\n\t     * @protected\n\t     * @type {boolean}\n\t     */\n\t    _this.autoPan = options.autoPan !== undefined ? options.autoPan : false;\n\t\n\t    /**\n\t     * @private\n\t     */\n\t    _this._autoPanAnimation = options.autoPanAnimation || {};\n\t\n\t    /**\n\t     * @private\n\t     * @type {number}\n\t     */\n\t    _this._autoPanMargin = options.autoPanMargin !== undefined ? options.autoPanMargin : 20;\n\t\n\t    /**\n\t     * @private\n\t     * @type {{bottom_: string,\n\t    *         left_: string,\n\t    *         right_: string,\n\t    *         top_: string,\n\t    *         visible: boolean}}\n\t     */\n\t    _this._rendered = {\n\t      _bottom: '',\n\t      _left: '',\n\t      _right: '',\n\t      _top: '',\n\t      _visible: true\n\t\n\t      /**\n\t       * @private\n\t       * @type {EventsKey}\n\t       */\n\t    };_this._mapPostrenderListenerKey = null;\n\t\n\t    if (options.element !== undefined) {\n\t      _this.popupEelement = options.element;\n\t    }\n\t\n\t    _this.offset = options.offset !== undefined ? options.offset : [0, 0];\n\t\n\t    _this.positioning = options.positioning !== undefined ? options.positioning : OverlayPositioning.TOP_LEFT;\n\t\n\t    if (options.position !== undefined) {\n\t      _this.position = options.position;\n\t    }\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * 执行渲染\n\t   *\n\t   * @method render\n\t   */\n\t\n\t\n\t  Overlay.prototype.render = function render() {\n\t    this.updatePixelPosition();\n\t  };\n\t\n\t  /**\n\t   * 更新鼠标点的位置信息\n\t   *\n\t   * @method updatePixelPosition\n\t   */\n\t\n\t\n\t  Overlay.prototype.updatePixelPosition = function updatePixelPosition() {\n\t    var map = this.map;\n\t    if (map) {\n\t      var position = this.position;\n\t      if (!map || !map.isRendered() || !position) {\n\t        this.setVisible(false);\n\t        return;\n\t      }\n\t\n\t      var pixel = map.getPixelFromCoordinate(position);\n\t      var mapSize = map.size;\n\t      this.updateRenderedPosition(pixel, mapSize);\n\t    }\n\t  };\n\t\n\t  /**\n\t   * 更新渲染视图位置\n\t   *\n\t   * @param pixel {Array}\n\t   * @param mapSize {Number}\n\t   */\n\t\n\t\n\t  Overlay.prototype.updateRenderedPosition = function updateRenderedPosition(pixel, mapSize) {\n\t    var style = this._element.style;\n\t    var offset = this.offset;\n\t    var positioning = this.positioning;\n\t\n\t    this.setVisible(true);\n\t\n\t    var offsetX = offset[0];\n\t    var offsetY = offset[1];\n\t    if (positioning == OverlayPositioning.BOTTOM_RIGHT || positioning == OverlayPositioning.CENTER_RIGHT || positioning == OverlayPositioning.TOP_RIGHT) {\n\t      if (this._rendered.left_ !== '') {\n\t        this._rendered.left_ = style.left = '';\n\t      }\n\t\n\t      var right = Math.round(mapSize[0] - pixel[0] - offsetX) + 'px';\n\t      if (this._rendered.right_ != right) {\n\t        this._rendered.right_ = style.right = right;\n\t      }\n\t    } else {\n\t      if (this._rendered.right_ !== '') {\n\t        this._rendered.right_ = style.right = '';\n\t      }\n\t\n\t      if (positioning == OverlayPositioning.BOTTOM_CENTER || positioning == OverlayPositioning.CENTER_CENTER || positioning == OverlayPositioning.TOP_CENTER) {\n\t        offsetX -= this._element.offsetWidth / 2;\n\t      }\n\t\n\t      var left = Math.round(pixel[0] + offsetX) + 'px';\n\t      if (this._rendered.left_ != left) {\n\t        this._rendered.left_ = style.left = left;\n\t      }\n\t    }\n\t    if (positioning == OverlayPositioning.BOTTOM_LEFT || positioning == OverlayPositioning.BOTTOM_CENTER || positioning == OverlayPositioning.BOTTOM_RIGHT) {\n\t      if (this._rendered.top_ !== '') {\n\t        this._rendered.top_ = style.top = '';\n\t      }\n\t\n\t      var bottom = Math.round(mapSize[1] - pixel[1] - offsetY) + 'px';\n\t      if (this._rendered.bottom_ != bottom) {\n\t        this._rendered.bottom_ = style.bottom = bottom;\n\t      }\n\t    } else {\n\t      if (this._rendered.bottom_ !== '') {\n\t        this._rendered.bottom_ = style.bottom = '';\n\t      }\n\t\n\t      if (positioning == OverlayPositioning.CENTER_LEFT || positioning == OverlayPositioning.CENTER_CENTER || positioning == OverlayPositioning.CENTER_RIGHT) {\n\t        offsetY -= this._element.offsetHeight / 2;\n\t      }\n\t\n\t      var top = Math.round(pixel[1] + offsetY) + 'px';\n\t      if (this._rendered.top_ != top) {\n\t        this._rendered.top_ = style.top = top;\n\t      }\n\t    }\n\t  };\n\t\n\t  /**\n\t   * 设置浮云框是否可见\n\t   *\n\t   * @method setVisible\n\t   * @param visible\n\t   */\n\t\n\t\n\t  Overlay.prototype.setVisible = function setVisible(visible) {\n\t    if (this._rendered.visible !== visible) {\n\t      this._element.style.display = visible ? '' : 'none';\n\t      this._rendered.visible = visible;\n\t    }\n\t  };\n\t\n\t  /**\n\t   * 表单自动适应视图范围\n\t   * 如果当前表单出现的位置不全在地图中，则会平移至地图\n\t   * 可视范围内\n\t   *\n\t   * @private\n\t   */\n\t\n\t\n\t  Overlay.prototype._panIntoView = function _panIntoView() {\n\t    var map = this.map;\n\t\n\t    if (!map || !map.getTargetElement()) {\n\t      return;\n\t    }\n\t\n\t    var mapRect = this._getRect(map.getTargetElement(), map.size);\n\t    var element = this.popupEelement;\n\t\n\t    if (element.clientHeight === 0 && element.clientWidth === 0) {\n\t      return;\n\t    }\n\t    var overlayRect = this._getRect(element, [(0, _domutil.outerWidth)(element), (0, _domutil.outerHeight)(element)]);\n\t\n\t    var margin = this._autoPanMargin;\n\t    if (!_extentutil.ExtentUtil.containsExtent(mapRect, overlayRect)) {\n\t      // the overlay is not completely inside the viewport, so pan the map\n\t      var offsetLeft = overlayRect[0] - mapRect[0];\n\t      var offsetRight = mapRect[2] - overlayRect[2];\n\t      var offsetTop = overlayRect[1] - mapRect[1];\n\t      var offsetBottom = mapRect[3] - overlayRect[3];\n\t\n\t      var delta = [0, 0];\n\t      if (offsetLeft < 0) {\n\t        // move map to the left\n\t        delta[0] = offsetLeft - margin;\n\t      } else if (offsetRight < 0) {\n\t        // move map to the right\n\t        delta[0] = Math.abs(offsetRight) + margin;\n\t      }\n\t\n\t      if (offsetTop < 0) {\n\t        // move map up\n\t        delta[1] = offsetTop - margin;\n\t      } else if (offsetBottom < 0) {\n\t        // move map down\n\t        delta[1] = Math.abs(offsetBottom) + margin;\n\t      }\n\t\n\t      if (delta[0] !== 0 || delta[1] !== 0) {\n\t        var center = map.view.center;\n\t        var centerPx = map.getPixelFromCoordinate(center);\n\t        var newCenterPx = [centerPx[0] + delta[0], centerPx[1] + delta[1]];\n\t\n\t        map.view.center = map.getCoordinateFromPixel(newCenterPx);\n\t      }\n\t    }\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param element\n\t   * @param size\n\t   * @return {*[]}\n\t   * @private\n\t   */\n\t\n\t\n\t  Overlay.prototype._getRect = function _getRect(element, size) {\n\t    var box = element.getBoundingClientRect();\n\t    var offsetX = box.left + window.pageXOffset;\n\t    var offsetY = box.top + window.pageYOffset;\n\t    return [offsetX, offsetY, offsetX + size[0], offsetY + size[1]];\n\t  };\n\t\n\t  /**\n\t   * 获取当前浮云框对象的 ID\n\t   *\n\t   * @property overlayId\n\t   * @type {number|string|undefined}\n\t   */\n\t\n\t\n\t  /**\n\t   *\n\t   * @private\n\t   */\n\t  Overlay.prototype._setElement = function _setElement() {\n\t    (0, _domutil.removeChildren)(this._element);\n\t    var pelement = this.popupEelement;\n\t    if (pelement) {\n\t      this._element.appendChild(pelement);\n\t    }\n\t  };\n\t\n\t  /**\n\t   * map读写器, 读取设置当前map\n\t   *\n\t   * @property map\n\t   * @type {Datatang.map}\n\t   */\n\t\n\t\n\t  _createClass(Overlay, [{\n\t    key: 'overlayId',\n\t    get: function get() {\n\t      return this._overlayId;\n\t    }\n\t\n\t    /**\n\t     * 获取表单元素\n\t     *\n\t     * @property popupEelement\n\t     * @type {DOM}\n\t     */\n\t\n\t  }, {\n\t    key: 'popupEelement',\n\t    get: function get() {\n\t      return this._popupEelement;\n\t    },\n\t    set: function set(value) {\n\t      this._popupEelement = value;\n\t\n\t      this._setElement();\n\t    }\n\t  }, {\n\t    key: 'map',\n\t    get: function get() {\n\t      return this._map;\n\t    },\n\t    set: function set(value) {\n\t      this._map = value;\n\t      if (this._map) {\n\t        var map = this._map;\n\t        this._mapPostrenderListenerKey = (0, _eventmanager.listen)(map, _rendereventtype.RenderEventType.POSTRENDER, this.render, this);\n\t        this.updatePixelPosition();\n\t        var container = this._stopEvent ? map.overlayContainerStopEvent : map.overlayContainer;\n\t        if (this._insertFirst) {\n\t          container.insertBefore(this._element, container.childNodes[0] || null);\n\t        } else {\n\t          container.appendChild(this._element);\n\t        }\n\t      }\n\t    }\n\t\n\t    /**\n\t     * 偏移量读写器\n\t     *\n\t     * @property offset\n\t     * @return {*|undefined}\n\t     */\n\t\n\t  }, {\n\t    key: 'offset',\n\t    get: function get() {\n\t      return this._offset;\n\t    },\n\t    set: function set(value) {\n\t      this._offset = value;\n\t      this.updatePixelPosition();\n\t    }\n\t\n\t    /**\n\t     * 鼠标点位置读写器\n\t     *\n\t     * @property position\n\t     * @return {undefined|*}\n\t     */\n\t\n\t  }, {\n\t    key: 'position',\n\t    get: function get() {\n\t      return this._position;\n\t    },\n\t    set: function set(value) {\n\t      this._position = value;\n\t\n\t      this.updatePixelPosition();\n\t\n\t      if (this._position && this.autoPan) {\n\t        this._panIntoView();\n\t      }\n\t    }\n\t\n\t    /**\n\t     *\n\t     *\n\t     * positioning\n\t     * @return {undefined|*}\n\t     */\n\t\n\t  }, {\n\t    key: 'positioning',\n\t    get: function get() {\n\t      return this._positioning;\n\t    },\n\t    set: function set(value) {\n\t      this._positioning = value;\n\t      this.updatePixelPosition();\n\t    }\n\t  }]);\n\t\n\t  return Overlay;\n\t}(_baseobject2.default);\n\t\n\texports.default = Overlay;\n\t\n\t\n\tvar OverlayPositioning = {\n\t  BOTTOM_LEFT: 'bottom-left',\n\t  BOTTOM_CENTER: 'bottom-center',\n\t  BOTTOM_RIGHT: 'bottom-right',\n\t  CENTER_LEFT: 'center-left',\n\t  CENTER_CENTER: 'center-center',\n\t  CENTER_RIGHT: 'center-right',\n\t  TOP_LEFT: 'top-left',\n\t  TOP_CENTER: 'top-center',\n\t  TOP_RIGHT: 'top-right'\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 76 */\n/*!***********************************************!*\\\n  !*** ./src/renderer/canvas/canvasrenderer.js ***!\n  \\***********************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _singleimagelayer = __webpack_require__(/*! ../../lyr/singleimagelayer */ 47);\n\t\n\tvar _singleimagelayer2 = _interopRequireDefault(_singleimagelayer);\n\t\n\tvar _featurelayer = __webpack_require__(/*! ../../lyr/featurelayer */ 13);\n\t\n\tvar _featurelayer2 = _interopRequireDefault(_featurelayer);\n\t\n\tvar _renderer = __webpack_require__(/*! ../renderer */ 83);\n\t\n\tvar _renderer2 = _interopRequireDefault(_renderer);\n\t\n\tvar _featurelayerrenderer = __webpack_require__(/*! ../canvas/featurelayerrenderer */ 77);\n\t\n\tvar _featurelayerrenderer2 = _interopRequireDefault(_featurelayerrenderer);\n\t\n\tvar _imagelayerrenderer = __webpack_require__(/*! ../canvas/imagelayerrenderer */ 78);\n\t\n\tvar _imagelayerrenderer2 = _interopRequireDefault(_imagelayerrenderer);\n\t\n\tvar _domutil = __webpack_require__(/*! ../../utils/domutil */ 18);\n\t\n\tvar _transform = __webpack_require__(/*! ../../data/matrix/transform */ 7);\n\t\n\tvar _rendereventtype = __webpack_require__(/*! ../rendereventtype */ 51);\n\t\n\tvar _array = __webpack_require__(/*! ../../utils/array */ 27);\n\t\n\tvar _renderevent = __webpack_require__(/*! ../renderevent */ 84);\n\t\n\tvar _renderevent2 = _interopRequireDefault(_renderevent);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t/**\n\t * 图形渲染调度器\n\t *\n\t */\n\tvar CanvasRenderer = function (_Renderer) {\n\t  _inherits(CanvasRenderer, _Renderer);\n\t\n\t  function CanvasRenderer(container, map) {\n\t    _classCallCheck(this, CanvasRenderer);\n\t\n\t    var _this = _possibleConstructorReturn(this, _Renderer.call(this, container, map));\n\t\n\t    _this._context = null;\n\t    _this._canvas = null;\n\t\n\t    _this._rendererVisible = true;\n\t    _this._layerRenderers = [];\n\t    _this._transform = _transform.Transform.create();\n\t\n\t    _this._addToContainer(container);\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * Add the canvas dom to the container\n\t   * @param container\n\t   * @private\n\t   */\n\t\n\t\n\t  CanvasRenderer.prototype._addToContainer = function _addToContainer(container) {\n\t    /**\n\t     * 创建CANVAS元素，并将其添加到container中\n\t     * 该canvas层作为图形绘制层\n\t     */\n\t    var _context = this.context;\n\t    this._canvas = _context.canvas;\n\t    this._canvas.style.width = '100%';\n\t    this._canvas.style.height = '100%';\n\t    this._canvas.className = 'dt-unselectable';\n\t    container.insertBefore(this._canvas, container.childNodes[0] || null);\n\t  };\n\t\n\t  /**\n\t   * Render frame\n\t   * @param frameState\n\t   */\n\t\n\t\n\t  CanvasRenderer.prototype.renderFrame = function renderFrame(frameState) {\n\t    var _this2 = this;\n\t\n\t    if (this.map === null) {\n\t      return;\n\t    }\n\t\n\t    if (!frameState) {\n\t      if (this._rendererVisible) {\n\t        this._canvas.style.display = 'none';\n\t        this._rendererVisible = false;\n\t\n\t        return;\n\t      }\n\t    }\n\t\n\t    var context = this.context;\n\t\n\t    var canvasWidth = frameState.size[0];\n\t    var canvasHeight = frameState.size[1];\n\t\n\t    if (this._canvas.width !== canvasWidth || this._canvas.height !== canvasHeight) {\n\t      this._canvas.width = canvasWidth;\n\t      this._canvas.height = canvasHeight;\n\t    } else {\n\t      context.clearRect(0, 0, canvasWidth, canvasHeight);\n\t    }\n\t\n\t    var layers = this.map.layers;\n\t\n\t    // layers rendered in order\n\t    (0, _array.stableSort)(layers, this.sortByZIndex);\n\t\n\t    // 更新转化运算矩阵\n\t    this.updateTransform(frameState);\n\t\n\t    this._dispatchComposeEvent(_rendereventtype.RenderEventType.PRERENDER, frameState);\n\t\n\t    layers.forEach(function (layer) {\n\t      if (layer.visible) {\n\t        var layerRender = _this2.getLayerRenderer(layer);\n\t\n\t        if (layerRender.prepareFrame(frameState)) {\n\t          layerRender.composeFrame(frameState, context);\n\t        }\n\t      }\n\t    });\n\t\n\t    this._dispatchComposeEvent(_rendereventtype.RenderEventType.POSTRENDER, frameState);\n\t  };\n\t\n\t  /**\n\t   * Get the layer renderer by the params layer object\n\t   * @param layer\n\t   * @returns {*}\n\t   */\n\t\n\t\n\t  CanvasRenderer.prototype.getLayerRenderer = function getLayerRenderer(layer) {\n\t    var layerKey = layer.id.toString();\n\t    // 应用层缓存\n\t    if (layerKey in this._layerRenderers) {\n\t      return this._layerRenderers[layerKey];\n\t    } else {\n\t      var layerRenderer = this.createLayerRenderer(layer);\n\t      this._layerRenderers[layerKey] = layerRenderer;\n\t      return layerRenderer;\n\t    }\n\t  };\n\t\n\t  /**\n\t   * Create the layer renderer\n\t   * @param layer\n\t   * @returns {*}\n\t   */\n\t\n\t\n\t  CanvasRenderer.prototype.createLayerRenderer = function createLayerRenderer(layer) {\n\t    if (layer instanceof _singleimagelayer2.default) {\n\t      return new _imagelayerrenderer2.default(layer, this.context);\n\t    } else if (layer instanceof _featurelayer2.default) {\n\t      return new _featurelayerrenderer2.default(layer, this.context);\n\t    } else {\n\t      return null;\n\t    }\n\t  };\n\t\n\t  /**\n\t   * Update the transform\n\t   * @param frameState\n\t   */\n\t\n\t\n\t  CanvasRenderer.prototype.updateTransform = function updateTransform(frameState) {\n\t    var viewState = frameState.viewState;\n\t    var coordinateToPixelTransform = frameState.toPixelTransform;\n\t    var pixelToCoordinateTransform = frameState.toCoordinateTransform;\n\t    var size = frameState.size;\n\t    var resolution = viewState.resolution;\n\t    var center = viewState.center;\n\t    var rotation = viewState.rotation;\n\t\n\t    _transform.Transform.compose(coordinateToPixelTransform, size[0] / 2, size[1] / 2, 1 / resolution, 1 / resolution, -rotation, -center[0], -center[1]);\n\t\n\t    _transform.Transform.invert(_transform.Transform.setFromArray(pixelToCoordinateTransform, coordinateToPixelTransform));\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param state1\n\t   * @param state2\n\t   * @returns {number}\n\t   */\n\t\n\t\n\t  CanvasRenderer.prototype.sortByZIndex = function sortByZIndex(state1, state2) {\n\t    return state1.zIndex - state2.zIndex;\n\t  };\n\t\n\t  /**\n\t   * \n\t   * @private\n\t   */\n\t  CanvasRenderer.prototype._dispatchComposeEvent = function _dispatchComposeEvent(type, frameState) {\n\t    var map = this.map;\n\t    var context = this.context;\n\t    if (map.hasListener(type)) {\n\t\n\t      // const transform = this.getTransform(frameState)\n\t\n\t      var composeEvent = new _renderevent2.default(type, frameState, context, null);\n\t\n\t      map.dispatchEvent(composeEvent);\n\t    }\n\t  };\n\t\n\t  _createClass(CanvasRenderer, [{\n\t    key: 'canvas',\n\t    get: function get() {\n\t      return this._canvas;\n\t    }\n\t  }, {\n\t    key: 'context',\n\t    get: function get() {\n\t      if (!this._context) {\n\t        this._context = (0, _domutil.createCanvasContext2D)();\n\t      }\n\t\n\t      return this._context;\n\t    }\n\t  }]);\n\t\n\t  return CanvasRenderer;\n\t}(_renderer2.default);\n\t\n\texports.default = CanvasRenderer;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 77 */\n/*!*****************************************************!*\\\n  !*** ./src/renderer/canvas/featurelayerrenderer.js ***!\n  \\*****************************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _layerrenderer = __webpack_require__(/*! ../../renderer/canvas/layerrenderer */ 50);\n\t\n\tvar _layerrenderer2 = _interopRequireDefault(_layerrenderer);\n\t\n\tvar _pointrender = __webpack_require__(/*! ../render/pointrender */ 80);\n\t\n\tvar _pointrender2 = _interopRequireDefault(_pointrender);\n\t\n\tvar _linerender = __webpack_require__(/*! ../render/linerender */ 79);\n\t\n\tvar _linerender2 = _interopRequireDefault(_linerender);\n\t\n\tvar _polygonrender = __webpack_require__(/*! ../render/polygonrender */ 81);\n\t\n\tvar _polygonrender2 = _interopRequireDefault(_polygonrender);\n\t\n\tvar _textrender = __webpack_require__(/*! ../render/textrender */ 82);\n\t\n\tvar _textrender2 = _interopRequireDefault(_textrender);\n\t\n\tvar _transform = __webpack_require__(/*! ../../data/matrix/transform */ 7);\n\t\n\tvar _extentutil = __webpack_require__(/*! ../../geometry/support/extentutil */ 2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/3/20.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar FeatureLayerRenderer = function (_LayerRenderer) {\n\t  _inherits(FeatureLayerRenderer, _LayerRenderer);\n\t\n\t  function FeatureLayerRenderer(layer, context) {\n\t    _classCallCheck(this, FeatureLayerRenderer);\n\t\n\t    /**\n\t     *\n\t     * @type {Map}\n\t     * @private\n\t     */\n\t    var _this = _possibleConstructorReturn(this, _LayerRenderer.call(this, layer, context));\n\t\n\t    _this._geometryRenderGroup = new Map();\n\t\n\t    /**\n\t     *\n\t     * @type {TextRender}\n\t     * @private\n\t     */\n\t    _this._textRender = new _textrender2.default(_this.context);\n\t\n\t    /**\n\t     *\n\t     * @type {null}\n\t     * @private\n\t     */\n\t    _this._maxExtent = null;\n\t\n\t    /**\n\t     *\n\t     * @type {Array}\n\t     * @private\n\t     */\n\t    _this._renderFeatures = [];\n\t\n\t    /**\n\t     *\n\t     * @type {NaN}\n\t     * @private\n\t     */\n\t    _this._renderResolution = Number.NaN;\n\t\n\t    /**\n\t     *\n\t     * @type {[*]}\n\t     * @private\n\t     */\n\t    _this._renderExtent = [Infinity, Infinity, -Infinity, -Infinity];\n\t\n\t    /**\n\t     *\n\t     * @type {NaN}\n\t     * @private\n\t     */\n\t    _this._renderRevision = NaN;\n\t\n\t    /**\n\t     *\n\t     * @type {boolean}\n\t     * @private\n\t     */\n\t    _this._cacheableThisTime = true;\n\t\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   *  Get a renderer by geometry type\n\t   * @param geometry\n\t   * @returns {*}\n\t   * @private\n\t   */\n\t\n\t\n\t  FeatureLayerRenderer.prototype._getGeometryRender = function _getGeometryRender(geometry) {\n\t    var type = geometry.geometryType;\n\t\n\t    if (!this._geometryRenderGroup.has(type)) {\n\t      this._geometryRenderGroup.set(type, new FeatureLayerRenderer.GeometryRender[type](this.context));\n\t    }\n\t\n\t    return this._geometryRenderGroup.get(type);\n\t  };\n\t\n\t  FeatureLayerRenderer.prototype._renderFeaturesInOrder = function _renderFeaturesInOrder(features) {\n\t    if (features === null || features === undefined) {\n\t      return features;\n\t    }\n\t\n\t    if (features.length === 0) {\n\t      return features;\n\t    }\n\t  };\n\t\n\t  /**\n\t   * 1、对渲染对象需要做切割 （当前范围内）\n\t   */\n\t\n\t\n\t  FeatureLayerRenderer.prototype.prepareFrame = function prepareFrame(frameState) {\n\t    var layer = this.layer;\n\t    var frameExtent = frameState.extent;\n\t    var viewState = frameState.viewState;\n\t    var resolution = viewState.resolution;\n\t    var layerRevision = layer.revision;\n\t    var featureLayerRenderBuffer = layer.renderBuffer;\n\t\n\t    var renderExtent = _extentutil.ExtentUtil.buffer(frameExtent, featureLayerRenderBuffer * resolution);\n\t\n\t    if (this._renderResolution === resolution && this._renderRevision === layerRevision && _extentutil.ExtentUtil.containsExtent(this._renderExtent, renderExtent)) {\n\t      this._cacheableThisTime = true;\n\t\n\t      // return true\n\t    }\n\t\n\t    // 加载当前屏的图形\n\t    var features = this.layer.loadFeature(renderExtent);\n\t\n\t    this._cacheableThisTime = false;\n\t    this._renderFeatures = features;\n\t    this._maxExtent = renderExtent;\n\t    this._renderResolution = resolution;\n\t    this._renderExtent = renderExtent;\n\t    this._renderRevision = layerRevision;\n\t\n\t    if (features.length === 0) {\n\t      return false;\n\t    }\n\t\n\t    return true;\n\t  };\n\t\n\t  /**\n\t   *\n\t   */\n\t\n\t\n\t  FeatureLayerRenderer.prototype.composeFrame = function composeFrame(frameStateOpt, context) {\n\t    var _this2 = this;\n\t\n\t    var frameState = frameStateOpt;\n\t    var viewState = frameState.viewState;\n\t    var layer = this.layer;\n\t    var features = this._renderFeatures;\n\t    var resolution = viewState.resolution;\n\t\n\t    var transform = this.getTransform(frameState, 0);\n\t\n\t    this.preCompose(context, frameState, transform);\n\t\n\t    // Clip the current extent so that the parts of geometries\n\t    // will not be rendered\n\t    this._clipExtent(transform, context);\n\t\n\t    features.forEach(function (feature) {\n\t      var renderStyle = void 0;\n\t\n\t      if (feature.style) {\n\t        renderStyle = feature.style;\n\t      } else {\n\t        var styleFunction = layer.styleFunction;\n\t        if (styleFunction) {\n\t          renderStyle = styleFunction(feature, resolution);\n\t\n\t          // 应用图层样式\n\t          feature.style = _this2._cloneRenderStyle(renderStyle);\n\t        }\n\t      }\n\t\n\t      var geomertyRender = _this2._getGeometryRender(feature.geometry);\n\t      _this2._resetRender(geomertyRender);\n\t      geomertyRender.render(feature, renderStyle, transform);\n\t\n\t      /**\n\t       * Render text\n\t       */\n\t      if (feature.textDisplay) {\n\t        _this2._textRender.render(feature, renderStyle, transform);\n\t      }\n\t    });\n\t\n\t    context.restore();\n\t\n\t    this.postCompose(context, frameState, transform);\n\t\n\t    return true;\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param renderStyle\n\t   * @returns {*}\n\t   * @private\n\t   */\n\t\n\t\n\t  FeatureLayerRenderer.prototype._cloneRenderStyle = function _cloneRenderStyle(renderStyle) {\n\t    if (renderStyle) {\n\t      var newStyle = [];\n\t      renderStyle.forEach(function (rs) {\n\t        newStyle.push(rs.clone());\n\t      });\n\t\n\t      return newStyle;\n\t    }\n\t\n\t    return null;\n\t  };\n\t\n\t  /**\n\t   * Clip the context\n\t   * @param transform\n\t   * @private\n\t   */\n\t\n\t\n\t  FeatureLayerRenderer.prototype._clipExtent = function _clipExtent(transform, context) {\n\t    var flatClipCoords = this.getClipCoords(transform);\n\t\n\t    context.save();\n\t    context.beginPath();\n\t    context.moveTo(flatClipCoords[0], flatClipCoords[1]);\n\t    context.lineTo(flatClipCoords[2], flatClipCoords[3]);\n\t    context.lineTo(flatClipCoords[4], flatClipCoords[5]);\n\t    context.lineTo(flatClipCoords[6], flatClipCoords[7]);\n\t    context.clip();\n\t  };\n\t\n\t  /**\n\t   * Get clip coordinates\n\t   * @param transform\n\t   * @returns {[*,*,*,*,*,*,*,*]}\n\t   */\n\t\n\t\n\t  FeatureLayerRenderer.prototype.getClipCoords = function getClipCoords(transform) {\n\t    var maxExtent = this._maxExtent;\n\t    var minX = maxExtent[0];\n\t    var minY = maxExtent[1];\n\t    var maxX = maxExtent[2];\n\t    var maxY = maxExtent[3];\n\t    var flatClipCoords = [minX, minY, minX, maxY, maxX, maxY, maxX, minY];\n\t    _transform.Transform.transform2D(flatClipCoords, 0, 8, 2, transform, flatClipCoords);\n\t    return flatClipCoords;\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param geomertyRender\n\t   * @private\n\t   */\n\t\n\t\n\t  FeatureLayerRenderer.prototype._resetRender = function _resetRender(geomertyRender) {\n\t    if (!this._cacheableThisTime) {\n\t      geomertyRender.resetRenderOption();\n\t    }\n\t  };\n\t\n\t  FeatureLayerRenderer.prototype.preCompose = function preCompose() {};\n\t\n\t  FeatureLayerRenderer.prototype.postCompose = function postCompose() {};\n\t\n\t  return FeatureLayerRenderer;\n\t}(_layerrenderer2.default);\n\t\n\texports.default = FeatureLayerRenderer;\n\t\n\t\n\tFeatureLayerRenderer.GeometryRender = {};\n\t\n\tFeatureLayerRenderer.GeometryRender['point'] = _pointrender2.default;\n\tFeatureLayerRenderer.GeometryRender['line'] = _linerender2.default;\n\tFeatureLayerRenderer.GeometryRender['polygon'] = _polygonrender2.default;\n\tFeatureLayerRenderer.GeometryRender['multi_polygon'] = _polygonrender2.default;\n\tFeatureLayerRenderer.GeometryRender['extent'] = _polygonrender2.default;\n\tFeatureLayerRenderer.GeometryRender['parallelogram'] = _polygonrender2.default;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 78 */\n/*!***************************************************!*\\\n  !*** ./src/renderer/canvas/imagelayerrenderer.js ***!\n  \\***************************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _layerrenderer = __webpack_require__(/*! ../../renderer/canvas/layerrenderer */ 50);\n\t\n\tvar _layerrenderer2 = _interopRequireDefault(_layerrenderer);\n\t\n\tvar _transform = __webpack_require__(/*! ../../data/matrix/transform */ 7);\n\t\n\tvar _extentutil = __webpack_require__(/*! ../../geometry/support/extentutil */ 2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/3/20.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar ImageLayerRenderer = function (_LayerRenderer) {\n\t  _inherits(ImageLayerRenderer, _LayerRenderer);\n\t\n\t  function ImageLayerRenderer(layer) {\n\t    _classCallCheck(this, ImageLayerRenderer);\n\t\n\t    var _this = _possibleConstructorReturn(this, _LayerRenderer.call(this, layer));\n\t\n\t    _this._image = null;\n\t\n\t    _this._imageTransform = _transform.Transform.create();\n\t\n\t    _this.coordinateToCanvasPixelTransform = _transform.Transform.create();\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * @inheritDoc\n\t   */\n\t\n\t\n\t  /**\n\t   *\n\t   * @param frameState\n\t   * @param layerState\n\t   * @returns {boolean}\n\t   */\n\t  ImageLayerRenderer.prototype.prepareFrame = function prepareFrame(frameState) {\n\t    var pixelRatio = frameState.pixelRatio;\n\t    var size = frameState.size;\n\t    var viewState = frameState.viewState;\n\t    var viewCenter = viewState.center;\n\t    var viewResolution = viewState.resolution;\n\t\n\t    var image = void 0;\n\t    var imageLayer = this.layer;\n\t    var renderedExtent = frameState.extent;\n\t\n\t    if (!_extentutil.ExtentUtil.isEmpty(renderedExtent)) {\n\t      var projection = viewState.projection;\n\t\n\t      image = imageLayer.getImageInternal(renderedExtent, viewResolution, pixelRatio, projection);\n\t\n\t      // Load the image\n\t      if (image) {\n\t        var loaded = this.loadImage(image);\n\t        if (loaded) {\n\t          this._image = image;\n\t        }\n\t      }\n\t    }\n\t\n\t    if (this._image) {\n\t      image = this._image;\n\t      var imageExtent = image.extent;\n\t      var imageResolution = image.resolution;\n\t      var imagePixelRatio = image.pixelRatio;\n\t      var scale = pixelRatio * imageResolution / (viewResolution * imagePixelRatio);\n\t\n\t      var transform = _transform.Transform.compose(this.imageTransform, pixelRatio * size[0] / 2, pixelRatio * size[1] / 2, scale, -scale, 0, imagePixelRatio * (imageExtent[0] - viewCenter[0]) / imageResolution, imagePixelRatio * (viewCenter[1] - imageExtent[3]) / imageResolution);\n\t\n\t      _transform.Transform.compose(this.coordinateToCanvasPixelTransform, pixelRatio * size[0] / 2 - transform[4], pixelRatio * size[1] / 2 - transform[5], pixelRatio / viewResolution, -pixelRatio / viewResolution, 0, -viewCenter[0], -viewCenter[1]);\n\t    }\n\t\n\t    return !!this.image;\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param frameState\n\t   * @param layerState\n\t   * @param context\n\t   */\n\t\n\t\n\t  ImageLayerRenderer.prototype.composeFrame = function composeFrame(frameState, context) {\n\t    this.preCompose(context, frameState);\n\t    var image = this.image;\n\t    if (image) {\n\t      // clipped rendering if layer extent is set\n\t      var extent = undefined;\n\t      var clipped = extent !== undefined && !_extentutil.ExtentUtil.containsExtent(extent, frameState.extent) && _extentutil.ExtentUtil.intersects(extent, frameState.extent);\n\t\n\t      if (clipped) {\n\t        this.clip(context, frameState, extent);\n\t      }\n\t\n\t      var imageLayer = this.layer;\n\t      var imageTransform = this.imageTransform;\n\t      var alpha = context.globalAlpha;\n\t      context.globalAlpha = imageLayer.opacity;\n\t\n\t      var dx = imageTransform[4];\n\t      var dy = imageTransform[5];\n\t      var dw = image.width * imageTransform[0];\n\t      var dh = image.height * imageTransform[3];\n\t      context.imageSmoothingEnabled = false;\n\t      context.drawImage(image, 0, 0, +image.width, +image.height, Math.round(dx), Math.round(dy), Math.round(dw), Math.round(dh));\n\t\n\t      context.globalAlpha = alpha;\n\t\n\t      if (clipped) {\n\t        context.restore();\n\t      }\n\t    }\n\t\n\t    this.postCompose(context, frameState);\n\t  };\n\t\n\t  _createClass(ImageLayerRenderer, [{\n\t    key: 'image',\n\t    get: function get() {\n\t      return !this._image ? null : this._image.getDomImage();\n\t    }\n\t\n\t    /**\n\t     * @inheritDoc\n\t     */\n\t\n\t  }, {\n\t    key: 'imageTransform',\n\t    get: function get() {\n\t      return this._imageTransform;\n\t    }\n\t  }]);\n\t\n\t  return ImageLayerRenderer;\n\t}(_layerrenderer2.default);\n\t\n\texports.default = ImageLayerRenderer;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 79 */\n/*!*******************************************!*\\\n  !*** ./src/renderer/render/linerender.js ***!\n  \\*******************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _geomertyrender = __webpack_require__(/*! ../render/geomertyrender */ 25);\n\t\n\tvar _geomertyrender2 = _interopRequireDefault(_geomertyrender);\n\t\n\tvar _linestyle = __webpack_require__(/*! ../../style/linestyle */ 16);\n\t\n\tvar _linestyle2 = _interopRequireDefault(_linestyle);\n\t\n\tvar _helpers = __webpack_require__(/*! ../../utils/helpers */ 19);\n\t\n\tvar _transform = __webpack_require__(/*! ../../data/matrix/transform */ 7);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/3/20.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t\n\tvar LineRender = function (_GeometryRender) {\n\t  _inherits(LineRender, _GeometryRender);\n\t\n\t  function LineRender(context) {\n\t    _classCallCheck(this, LineRender);\n\t\n\t    return _possibleConstructorReturn(this, _GeometryRender.call(this, context));\n\t  }\n\t\n\t  /**\n\t   *\n\t   * @param feature\n\t   * @param renderStyle\n\t   * @param transform\n\t   */\n\t\n\t\n\t  LineRender.prototype.render = function render(feature, renderStyle, transform) {\n\t    if (!feature) {\n\t      return;\n\t    }\n\t\n\t    var ctx = this.context;\n\t    var styleArray = renderStyle;\n\t    var geometry = feature.geometry;\n\t\n\t    var transform2D = _transform.Transform.transform2D;\n\t    var coordinates = [];\n\t    // TODO find a way to cache the rendered data\n\t    if (this._pixelCoordinates && this.equalsTransform(transform, this.renderedTransform)) {\n\t      coordinates = this._pixelCoordinates;\n\t      // console.log('get the rendered data from chche for line')\n\t    } else {\n\t      var geometryCoordinates = geometry.getCoordinates();\n\t\n\t      geometryCoordinates.forEach(function (points) {\n\t        var coordinate = transform2D(points, 0, points.length, 2, transform);\n\t\n\t        coordinate[0] = coordinate[0] + 0.5 | 0;\n\t        coordinate[1] = coordinate[1] + 0.5 | 0;\n\t\n\t        coordinates.push(coordinate);\n\t      });\n\t\n\t      this._pixelCoordinates = coordinates;\n\t      _transform.Transform.setFromArray(this.renderedTransform, transform);\n\t      // console.log('caclulate the rendered data for line')\n\t    }\n\t\n\t    var len = styleArray.length;\n\t    for (var i = 0; i < len; i++) {\n\t      var styleObj = styleArray[i];\n\t\n\t      var renderOptions = {\n\t        coordinates: coordinates,\n\t        width: styleObj.width,\n\t        strokeStyle: (0, _helpers.colorToString)(styleObj.color, styleObj.alpha),\n\t        lineCap: styleObj.lineCap,\n\t        lineJion: styleObj.lineJion,\n\t        miterLimit: styleObj.miterLimit,\n\t        hasDash: styleObj.style === _linestyle2.default.DASH ? true : false\n\t      };\n\t\n\t      this.drawLine(ctx, renderOptions);\n\t    }\n\t  };\n\t\n\t  LineRender.prototype.drawLine = function drawLine(ctx, renderOpt) {\n\t    ctx.save();\n\t    ctx.strokeStyle = renderOpt.strokeStyle;\n\t    ctx.lineWidth = renderOpt.width;\n\t\n\t    ctx.lineCap = renderOpt.lineCap;\n\t    ctx.lineJoin = renderOpt.lineJion;\n\t    ctx.miterLimit = renderOpt.miterLimit;\n\t\n\t    ctx.beginPath();\n\t    var coordinates = renderOpt.coordinates;\n\t    for (var i = 0, ii = coordinates.length; i < ii - 1; i++) {\n\t      ctx.moveTo(coordinates[i][0], coordinates[i][1]);\n\t      ctx.lineTo(coordinates[i + 1][0], coordinates[i + 1][1]);\n\t    }\n\t\n\t    if (renderOpt.hasDash) {\n\t      ctx.setLineDash([5, 5]);\n\t    }\n\t\n\t    ctx.stroke();\n\t\n\t    ctx.closePath();\n\t    ctx.restore();\n\t  };\n\t\n\t  return LineRender;\n\t}(_geomertyrender2.default);\n\t\n\texports.default = LineRender;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 80 */\n/*!********************************************!*\\\n  !*** ./src/renderer/render/pointrender.js ***!\n  \\********************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _geomertyrender = __webpack_require__(/*! ../render/geomertyrender */ 25);\n\t\n\tvar _geomertyrender2 = _interopRequireDefault(_geomertyrender);\n\t\n\tvar _helpers = __webpack_require__(/*! ../../utils/helpers */ 19);\n\t\n\tvar _transform = __webpack_require__(/*! ../../data/matrix/transform */ 7);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/3/20.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t\n\tvar PointRender = function (_GeometryRender) {\n\t  _inherits(PointRender, _GeometryRender);\n\t\n\t  function PointRender(context) {\n\t    _classCallCheck(this, PointRender);\n\t\n\t    var _this = _possibleConstructorReturn(this, _GeometryRender.call(this, context));\n\t\n\t    _this._pixelCoordinates = [];\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * Render a point\n\t   * @param feature\n\t   * @param transform\n\t   */\n\t\n\t\n\t  PointRender.prototype.render = function render(feature, renderStyle, transform) {\n\t    if (!feature) {\n\t      return;\n\t    }\n\t\n\t    var ctx = this.context;\n\t    var styleArray = renderStyle;\n\t    var geomerty = feature.geometry;\n\t\n\t    var coordinates = [geomerty.x, geomerty.y];\n\t\n\t    // TODO  Should be cached\n\t    var pixelCoordinates = _transform.Transform.transform2D(coordinates, 0, coordinates.length, 2, transform, this._pixelCoordinates);\n\t\n\t    var x = pixelCoordinates[0];\n\t    var y = pixelCoordinates[1];\n\t\n\t    var len = styleArray.length;\n\t    for (var i = 0; i < len; i++) {\n\t      var styleObj = styleArray[i];\n\t\n\t      var renderOptions = {\n\t        centerX: x + 0.5 | 0,\n\t        centerY: y + 0.5 | 0,\n\t        radius: styleObj.size / 2 || styleObj.borderStyle.width / 2,\n\t        fillStyle: (0, _helpers.colorToString)(styleObj.color, styleObj.alpha),\n\t        borderStyle: styleObj.borderStyle\n\t      };\n\t\n\t      this.drawCircle(ctx, renderOptions);\n\t    }\n\t  };\n\t\n\t  PointRender.prototype.drawCircle = function drawCircle(ctx, renderOptions) {\n\t    // console.log('类型为圆，开始绘制圆')\n\t    ctx.save();\n\t    ctx.beginPath();\n\t    ctx.arc(renderOptions.centerX, renderOptions.centerY, renderOptions.radius, 0, 2 * Math.PI, true);\n\t\n\t    if (renderOptions.fillStyle) {\n\t      ctx.fillStyle = renderOptions.fillStyle;\n\t      ctx.fill();\n\t    }\n\t\n\t    var borderStyle = renderOptions.borderStyle;\n\t    if (borderStyle) {\n\t      ctx.strokeStyle = (0, _helpers.colorToString)(borderStyle.color, borderStyle.alpha);\n\t      ctx.lineWidth = borderStyle.width;\n\t\n\t      if (borderStyle.lineDash) {\n\t        ctx.setLineDash(borderStyle.lineDash);\n\t      }\n\t\n\t      ctx.stroke();\n\t    }\n\t\n\t    ctx.closePath();\n\t    ctx.restore();\n\t  };\n\t\n\t  return PointRender;\n\t}(_geomertyrender2.default);\n\t\n\texports.default = PointRender;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 81 */\n/*!**********************************************!*\\\n  !*** ./src/renderer/render/polygonrender.js ***!\n  \\**********************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _geometry = __webpack_require__(/*! ../../geometry/geometry */ 1);\n\t\n\tvar _geometry2 = _interopRequireDefault(_geometry);\n\t\n\tvar _geomertyrender = __webpack_require__(/*! ../render/geomertyrender */ 25);\n\t\n\tvar _geomertyrender2 = _interopRequireDefault(_geomertyrender);\n\t\n\tvar _linestyle = __webpack_require__(/*! ../../style/linestyle */ 16);\n\t\n\tvar _linestyle2 = _interopRequireDefault(_linestyle);\n\t\n\tvar _transform = __webpack_require__(/*! ../../data/matrix/transform */ 7);\n\t\n\tvar _helpers = __webpack_require__(/*! ../../utils/helpers */ 19);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/3/20.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t\n\tvar PolygonRender = function (_GeometryRender) {\n\t  _inherits(PolygonRender, _GeometryRender);\n\t\n\t  function PolygonRender(context) {\n\t    _classCallCheck(this, PolygonRender);\n\t\n\t    return _possibleConstructorReturn(this, _GeometryRender.call(this, context));\n\t  }\n\t\n\t  /**\n\t   * Render a polygon\n\t   * @param feature\n\t   * @param transform\n\t   * @returns {boolean}\n\t   */\n\t\n\t\n\t  PolygonRender.prototype.render = function render(feature, renderStyle, transform) {\n\t    if (!feature) {\n\t      return;\n\t    }\n\t\n\t    var ctx = this.context;\n\t    var styleArray = renderStyle;\n\t    var geometry = feature.geometry;\n\t\n\t    var transform2D = _transform.Transform.transform2D;\n\t    var geometryCoordinages = geometry.getCoordinates();\n\t    if (geometry.geometryType === _geometry2.default.EXTENT) {\n\t      geometryCoordinages = [geometryCoordinages];\n\t    }\n\t\n\t    if (!geometryCoordinages) {\n\t      return false;\n\t    }\n\t\n\t    if (geometryCoordinages.length === 0) {\n\t      return false;\n\t    }\n\t\n\t    // TODO find a way to cache the rendered data\n\t    var coordinates = [];\n\t    var renderCoords = [];\n\t\n\t    if (this._pixelCoordinates && this.equalsTransform(transform, this.renderedTransform)) {\n\t      renderCoords = this._pixelCoordinates;\n\t    } else {\n\t      if (geometry.geometryType === _geometry2.default.MULTI_POLYGON) {\n\t        var polygonCoords = [];\n\t        // 遍历各个多边形\n\t        geometryCoordinages.forEach(function (polygon) {\n\t          polygon.forEach(function (rings) {\n\t            rings.forEach(function (points) {\n\t              var coordinate = transform2D(points, 0, points.length, 2, transform);\n\t\n\t              coordinate[0] = coordinate[0] + 0.5 | 0;\n\t              coordinate[1] = coordinate[1] + 0.5 | 0;\n\t\n\t              coordinates.push(coordinate);\n\t            });\n\t\n\t            polygonCoords.push(coordinates);\n\t            coordinates = [];\n\t          });\n\t\n\t          renderCoords.push(polygonCoords);\n\t          polygonCoords = [];\n\t        });\n\t\n\t        this.renderMutilPolygon(ctx, styleArray, renderCoords);\n\t      } else {\n\t        // 遍历多边形各个环\n\t        geometryCoordinages.forEach(function (rings) {\n\t          rings.forEach(function (points) {\n\t            var coordinate = transform2D(points, 0, points.length, 2, transform);\n\t\n\t            coordinate[0] = coordinate[0] + 0.5 | 0;\n\t            coordinate[1] = coordinate[1] + 0.5 | 0;\n\t\n\t            coordinates.push(coordinate);\n\t          });\n\t\n\t          renderCoords.push(coordinates);\n\t          coordinates = [];\n\t        });\n\t      }\n\t\n\t      this.renderPolygon(ctx, styleArray, renderCoords);\n\t    }\n\t\n\t    this._pixelCoordinates = renderCoords;\n\t    _transform.Transform.setFromArray(this.renderedTransform, transform);\n\t\n\t    return true;\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param ctx\n\t   * @param styleArray\n\t   * @param renderCoords\n\t   */\n\t\n\t\n\t  PolygonRender.prototype.renderMutilPolygon = function renderMutilPolygon(ctx, styleArray, renderCoords) {\n\t    var _this2 = this;\n\t\n\t    renderCoords.forEach(function (polygon) {\n\t      _this2.renderPolygon(ctx, styleArray, polygon);\n\t    });\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param ctx\n\t   * @param styleArray\n\t   * @param renderCoords\n\t   */\n\t\n\t\n\t  PolygonRender.prototype.renderPolygon = function renderPolygon(ctx, styleArray, renderCoords) {\n\t    var len = styleArray.length;\n\t    for (var i = 0; i < len; i++) {\n\t      var styleObj = styleArray[i];\n\t\n\t      var renderOptions = {\n\t        coordinates: renderCoords,\n\t        fillStyle: (0, _helpers.colorToString)(styleObj.color, styleObj.alpha),\n\t        borderStyle: styleObj.borderStyle\n\t      };\n\t\n\t      this.drawStylePolygon(ctx, renderOptions);\n\t    }\n\t  };\n\t\n\t  /**\n\t   * 绘制多边形，需要注意多边形各个环的绘制\n\t   * @param ctx\n\t   * @param renderOpt\n\t   */\n\t\n\t\n\t  PolygonRender.prototype.drawStylePolygon = function drawStylePolygon(ctx, renderOpt) {\n\t    ctx.save();\n\t\n\t    if (renderOpt.fillStyle) {\n\t      ctx.fillStyle = renderOpt.fillStyle;\n\t    }\n\t\n\t    var borderStyle = renderOpt.borderStyle;\n\t    if (borderStyle) {\n\t      ctx.strokeStyle = (0, _helpers.colorToString)(borderStyle.color, borderStyle.alpha);\n\t      ctx.lineWidth = borderStyle.width;\n\t\n\t      if (borderStyle.style === _linestyle2.default.DASH) {\n\t        ctx.setLineDash([5, 5]);\n\t      }\n\t    }\n\t\n\t    var coords = renderOpt.coordinates;\n\t    coords.forEach(function (coordinates, index) {\n\t      if (index === 0) {\n\t        ctx.beginPath();\n\t      }\n\t\n\t      ctx.moveTo(coordinates[0][0], coordinates[0][1]);\n\t      for (var k = 1, kk = coordinates.length; k < kk; k++) {\n\t        var cd = coordinates[k];\n\t        ctx.lineTo(cd[0], cd[1]);\n\t      }\n\t\n\t      ctx.closePath();\n\t    });\n\t\n\t    ctx.fill();\n\t    ctx.stroke();\n\t    ctx.restore();\n\t  };\n\t\n\t  return PolygonRender;\n\t}(_geomertyrender2.default);\n\t\n\texports.default = PolygonRender;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 82 */\n/*!*******************************************!*\\\n  !*** ./src/renderer/render/textrender.js ***!\n  \\*******************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _geomertyrender = __webpack_require__(/*! ./geomertyrender */ 25);\n\t\n\tvar _geomertyrender2 = _interopRequireDefault(_geomertyrender);\n\t\n\tvar _transform = __webpack_require__(/*! ../../data/matrix/transform */ 7);\n\t\n\tvar _helpers = __webpack_require__(/*! ../../utils/helpers */ 19);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/3/24.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t// import TextStyle from '../../style/textstyle'\n\t// import LineStyle from '../../style/linestyle'\n\t\n\tvar TextRender = function (_GeometryRender) {\n\t  _inherits(TextRender, _GeometryRender);\n\t\n\t  function TextRender(context) {\n\t    _classCallCheck(this, TextRender);\n\t\n\t    var _this = _possibleConstructorReturn(this, _GeometryRender.call(this, context));\n\t\n\t    _this._pixelCoordinates = [];\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   *\n\t   * @param feature\n\t   * @param transform\n\t   */\n\t\n\t\n\t  TextRender.prototype.render = function render(feature, renderStyle, transform) {\n\t    var textStyle = renderStyle[0].textStyle;\n\t    if (!feature.displayText || !textStyle) {\n\t      return;\n\t    }\n\t\n\t    var displayText = String(feature.displayText);\n\t    textStyle.text = displayText;\n\t\n\t    var ctx = this.context;\n\t    ctx.save();\n\t\n\t    var geometry = feature.geometry;\n\t    var coordinates = geometry.getFlatInteriorPoint();\n\t\n\t    this._pixelCoordinates = [];\n\t    var pixelCoordinates = _transform.Transform.transform2D(coordinates, 0, coordinates.length, 2, transform, this._pixelCoordinates);\n\t\n\t    for (var i = 0, len = pixelCoordinates.length; i < len; i += 2) {\n\t      var xValue = pixelCoordinates[i];\n\t      var yValue = pixelCoordinates[i + 1];\n\t\n\t      // set the context text style\n\t      this._setTextStyle(ctx, textStyle);\n\t\n\t      var offsetX = textStyle.offsetX - 10;\n\t      var offsetY = textStyle.offsetY - 10;\n\t      var stroke = textStyle.stroke ? true : false;\n\t      var fill = textStyle.fill ? true : false;\n\t      var text = textStyle.text;\n\t\n\t      var x = xValue + offsetX;\n\t      var y = yValue + offsetY;\n\t\n\t      var lines = text.split('\\n');\n\t      var numLines = lines.length;\n\t      var fontSize = void 0,\n\t          lineY = void 0;\n\t      if (numLines > 1) {\n\t        fontSize = Math.round(ctx.measureText('M').width * 1.5);\n\t        lineY = y - (numLines - 1) / 2 * fontSize;\n\t      } else {\n\t        fontSize = 0;\n\t        lineY = y;\n\t      }\n\t\n\t      for (var lineIndex = 0; lineIndex < numLines; lineIndex++) {\n\t        var lineText = lines[lineIndex];\n\t        if (stroke) {\n\t          ctx.strokeText(lineText, x, lineY);\n\t        }\n\t        if (fill) {\n\t          ctx.fillText(lineText, x, lineY);\n\t        }\n\t\n\t        lineY = lineY + fontSize;\n\t      }\n\t    }\n\t\n\t    ctx.restore();\n\t  };\n\t\n\t  /**\n\t   *\n\t   * @param ctx\n\t   * @param textStyle\n\t   * @private\n\t   */\n\t\n\t\n\t  TextRender.prototype._setTextStyle = function _setTextStyle(ctx, textStyle) {\n\t    var borderStyle = textStyle.stroke;\n\t\n\t    ctx.font = textStyle.font;\n\t    ctx.strokeStyle = (0, _helpers.colorToString)(borderStyle.color, 1);\n\t    ctx.fillStyle = (0, _helpers.colorToString)(textStyle.fill, 1);\n\t    ctx.textBaseline = textStyle.textBaseline;\n\t    ctx.textAlign = textStyle.textAlign;\n\t    ctx.lineWidth = borderStyle.width;\n\t    ctx.lineCap = borderStyle.lineCap;\n\t    ctx.lineJoin = borderStyle.lineJion;\n\t  };\n\t\n\t  return TextRender;\n\t}(_geomertyrender2.default);\n\t\n\texports.default = TextRender;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 83 */\n/*!**********************************!*\\\n  !*** ./src/renderer/renderer.js ***!\n  \\**********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _baseobject = __webpack_require__(/*! ../core/baseobject */ 3);\n\t\n\tvar _baseobject2 = _interopRequireDefault(_baseobject);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zypc on 2016/11/15.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * 地图渲染器基类，\n\t * @class Renderer\n\t * @extends BaseObject\n\t * @module renderer\n\t */\n\tvar Renderer = function (_BaseObject) {\n\t  _inherits(Renderer, _BaseObject);\n\t\n\t  function Renderer(contianer, map) {\n\t    _classCallCheck(this, Renderer);\n\t\n\t    var _this = _possibleConstructorReturn(this, _BaseObject.call(this));\n\t\n\t    _this._map = map;\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * @property map\n\t   * @type {Datatang.Map}\n\t   */\n\t\n\t\n\t  /**\n\t   *\n\t   * @method renderFrame\n\t   * @abstract\n\t   * @param frameState {Object}\n\t   */\n\t  Renderer.prototype.renderFrame = function renderFrame(frameState) {}; // eslint-disable-line no-unused-vars\n\t\n\t  /**\n\t   * @method clear\n\t   * @abstract\n\t   */\n\t\n\t\n\t  Renderer.prototype.clear = function clear() {};\n\t\n\t  _createClass(Renderer, [{\n\t    key: 'map',\n\t    get: function get() {\n\t      return this._map;\n\t    }\n\t  }]);\n\t\n\t  return Renderer;\n\t}(_baseobject2.default);\n\t\n\texports.default = Renderer;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 84 */\n/*!*************************************!*\\\n  !*** ./src/renderer/renderevent.js ***!\n  \\*************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _baseevent = __webpack_require__(/*! ../core/baseevent */ 12);\n\t\n\tvar _baseevent2 = _interopRequireDefault(_baseevent);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zhangyong on 2017/6/27.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t/**\n\t * @class RenderEvent\n\t * @extends BaseEvent\n\t * @module renderer\n\t * @constructor\n\t */\n\tvar RenderEvent = function (_BaseEvent) {\n\t  _inherits(RenderEvent, _BaseEvent);\n\t\n\t  function RenderEvent(type, frameState, context, trasform) {\n\t    _classCallCheck(this, RenderEvent);\n\t\n\t    /**\n\t     * @property frameState\n\t     * @type {Object}\n\t     */\n\t    var _this = _possibleConstructorReturn(this, _BaseEvent.call(this, type));\n\t\n\t    _this.frameState = frameState;\n\t\n\t    /**\n\t     * @property trasform\n\t     * @type {Object}\n\t     */\n\t    _this.trasform = trasform;\n\t\n\t    /**\n\t     *@property context\n\t     *@type {HTML5.}\n\t     */\n\t    _this.context = context;\n\t    return _this;\n\t  }\n\t\n\t  return RenderEvent;\n\t}(_baseevent2.default);\n\t\n\texports.default = RenderEvent;\n\tmodule.exports = exports['default'];\n\n/***/ })\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// meek.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"<%=baseUrl%>/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f9e9c03819448e440bcb","/**\n * Created by zypc on 2016/11/28.\n */\n\nimport {Config} from 'meek/config'\nimport Counter from 'utils/counter'\nimport Helpers from 'utils/helpers'\nimport Obj from 'utils/obj'\nimport {Math} from 'utils/math'\nimport {Coordinate} from 'utils/coordinate'\nimport {Canvas} from 'utils/canvas'\n\nimport GeometryUtil from 'geometry/support/geometryutil'\nimport {ExtentUtil} from 'geometry/support/extentutil'\nimport {EventType} from 'meek/eventtype'\nimport {Style} from 'style/style'\n\nimport Event from 'core/event'\nimport EventManager from 'core/eventmanager'\n\nimport Geometry from 'geometry/geometry'\nimport Extent from 'geometry/extent'\nimport Point from 'geometry/point'\nimport Line from 'geometry/line'\nimport Polygon from 'geometry/polygon'\nimport MutilPolygon from 'geometry/mutilpolygon'\nimport Parallelogram from 'geometry/parallelogram'\n\nimport {ImageState} from 'lyr/image/imagestate'\nimport {ImageEvent} from 'lyr/image/imageevent'\nimport SingleImage from 'lyr/image/singleimage'\n\nimport PointStyle from 'style/pointstyle'\nimport LineStyle from 'style/linestyle'\nimport FillStyle from 'style/fillstyle'\nimport TextStyle from 'style/textstyle'\n\nimport FeatureLayer from 'lyr/featurelayer'\nimport SingleImageLayer from 'lyr/singleimagelayer'\nimport Draw from 'components/draw'\nimport DrawEvent from 'components/drawevent'\nimport Select from 'components/select'\nimport Modify from 'components/modify'\nimport DragPan from 'components/dragpan'\nimport MouseWheelZoom from 'components/mousewheelzoom'\n\nimport BrowserEvent from 'meek/browserevent'\nimport SelectEvent from 'components/selectevent'\nimport FeatureEvent from 'meek/featureevent'\nimport ModifyEvent from 'components/modifyevent'\n\nimport Control from 'control/control'\nimport Zoom from 'control/zoom'\n\nimport Feature from 'meek/feature'\nimport Map from 'meek/map'\nimport View from 'meek/view'\nimport Overlay from 'meek/overlay'\n\nimport GeoJSON from 'data/json/geojson'\n\nimport intersects from 'geometry/analysis/intersects'\nimport splitPolygonByPolyline from 'geometry/analysis/splitpolygon'\nimport contains from 'geometry/analysis/contains'\nimport polygonWithHole from 'geometry/analysis/polygonwithhole'\n\nconst version = VERSION\n\nexport default {\n  Config,\n  Coordinate,\n  Canvas,\n  Event,\n  SelectEvent,\n  FeatureEvent,\n  ModifyEvent,\n  EventManager,\n  Counter,\n  Helpers,\n  ImageState,\n  ImageEvent,\n  SingleImage,\n  Geometry,\n  Extent,\n  Point,\n  Line,\n  Polygon,\n  MutilPolygon,\n  Parallelogram,\n  Style,\n  PointStyle,\n  LineStyle,\n  FillStyle,\n  TextStyle,\n  FeatureLayer,\n  SingleImageLayer,\n  Draw,\n  DrawEvent,\n  BrowserEvent,\n  EventType,\n  Feature,\n  Map,\n  View,\n  Overlay,\n  GeometryUtil,\n  ExtentUtil,\n  Select,\n  Modify,\n  DragPan,\n  Control,\n  Zoom,\n  Obj,\n  Math,\n  MouseWheelZoom,\n  GeoJSON,\n  version,\n  intersects,\n  splitPolygonByPolyline,\n  contains,\n  polygonWithHole\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","/**\n * Created by zypc on 2016/11/13.\n */\nimport BaseObject from '../core/baseobject'\nimport {ExtentUtil} from './support/extentutil'\n\n/**\n * 图形基础类，不能直接实例化改类，只能继承和扩展，并实现该类定义的接口\n *\n * @class Geometry\n * @extends BaseObject\n * @module geometry\n * @constructor\n */\nexport default class Geometry extends BaseObject {\n\n  /**\n   * @constructor\n   */\n  constructor () {\n    super()\n    \n    this._extent = null\n  \n    /**\n     * @type {number}\n     */\n    this.stride = 2\n  }\n\n  /**\n   * 获取图形的类型\n   *\n   * @property geometryType\n   * @type {String}\n   */\n  get geometryType () {return Geometry.UNDEFINED}\n\n  /**\n   * 获取图形的最小外接矩形(MBR-Minimum Bounding Rectangle)\n   * 除去点意外，任何图形都有最小外接矩形\n   *\n   * @property extent\n   * @type {Datatang.Extent}\n   */\n  get extent () { return this._extent }\n  \n  /**\n   * 获取图形是否是逆时针\n   *\n   * @property anticlockwise\n   * @type {Boolean}\n   */\n  get anticlockwise () {\n    const geometryType = this.geometryType\n    const coordinates = this.getCoordinates()\n  \n    let fp, sp, f1, f2, f3\n    \n    if (geometryType === Geometry.LINE ) {\n      f1 = [0, 0]\n      f2 = coordinates[0]\n      f3 = coordinates[1]\n    } else if ( geometryType === Geometry.POLYGON ||\n                geometryType === Geometry.EXTENT ) {\n      f1 = coordinates[0]\n      f2 = coordinates[1]\n      f3 = coordinates[2]\n    }\n  \n    fp = [f2[0] - f1[0], f2[1] - f1[1]]\n    sp = [f3[0] - f2[0], f3[1] - f2[1]]\n    \n    return fp[0] * sp[1] - sp[0] * fp[1] < 0\n  }\n  \n  /**\n   * 判断传入的点坐标是否在图形内\n   *\n   * @method pointInExtent\n   * @param coordinate {Array} 包含x, y的点数组\n   * @return {Boolean} ture returned if success, false otherwise.\n   */\n  pointInExtent (coordinate) {\n    return ExtentUtil.containsPoint(this.extent, coordinate)\n  }\n  \n  /**\n   * 判断是否相交\n   *\n   * intersect\n   * @param geomtry {Geometry}\n   * @returns {Boolean}\n   */\n  intersect (geomtry) { // eslint-disable-line no-unused-vars\n    return false\n  }\n  \n  /**\n   * 获取图形的坐标信息\n   * @abstract\n   * @method getCoordinates\n   * @return {Array} 返回坐标数组\n   */\n  getCoordinates () { return [] }\n\n  /**\n   * 计算表单显示的坐标\n   *\n   *  @method getFormShowPosition\n   *  @param {Number} offsetX 表单显示的 x 偏移量, 默认为 0\n   *  @param {Number} offsetY 表单显示的 y 偏移量, 默认为 0\n   *  @return {Array} 返回点坐标的数组表达方式\n   *  @example\n   *\n   *      var point = geometry.getFormShowPosition(10, 10)\n   *      Form.position = point\n   */\n  getFormShowPosition (offsetX = 0, offsetY = 0) { return [] } // eslint-disable-line no-unused-vars\n  \n  /**\n   * 计算线的平面内点\n   *\n   * @method getFlatInteriorPoint\n   * @returns {Array}\n   */\n  getFlatInteriorPoint () { return [] }\n  \n  /**\n   * 判断当前图形是否包含一个点\n   *\n   * @abstract\n   * @method containsXY\n   * @param x {Number} x 坐标信息\n   * @param y {Number} y 坐标信息\n   * @return {Boolean} ture returned if contains, false otherwise\n   */\n  containsXY (x, y) { return true } // eslint-disable-line no-unused-vars\n  \n  /**\n   * 移动改图形，移动图形，需要传递x，y的移动量\n   *\n   * @method move\n   * @abstract\n   * @param x {Number} x 坐标信息\n   * @param y {Number} y 坐标信息\n   */\n  move (x = 0,y = 0, opts) {} // eslint-disable-line no-unused-vars\n  \n  /**\n   * 定义对图形本身的缩放方法\n   *\n   * @method scale\n   * @abstract\n   * @param scale {Number} 缩放比率\n   * @param origin {Array} 缩放参考点\n   */\n  scale(scale = 1,origin) {} // eslint-disable-line no-unused-vars\n  \n  /**\n   * 定义图形本身的旋转方法\n   *\n   * @method rotate\n   * @abstract\n   * @param angle {Number} 旋转的角度\n    * @param anchor {Object}\n   */\n  rotate(angle,anchor) {} // eslint-disable-line no-unused-vars\n  \n  /**\n   * 创建一个简化后的图形副本\n   *\n   * @method simplify\n   * @abstract\n   * @param tolerance {Number} 阈值\n   */\n  simplify(tolerance = 1) {} // eslint-disable-line no-unused-vars\n \n  /**\n   * 将图形转换成json格式\n   *\n   * @method toJSON\n   * @abstrct\n   */\n  toJSON () {}\n  \n  /**\n   * 克隆一个图形副本\n   *\n   * @method clone\n   * @abstract\n   */\n  clone () {}\n}\n\n/**\n * 点类型\n *\n * @property POINT\n * @static\n * @final\n * @type {String}\n */\nGeometry.POINT = 'point'\n\n/**\n * 多点类型\n *\n * @property MULTI_POINT\n * @static\n * @final\n * @type {String}\n */\nGeometry.MULTI_POINT = 'multi_point'\n\n/**\n * 线类型\n *\n * @property LINE\n * @static\n * @final\n * @type {String}\n */\nGeometry.LINE = 'line'\n\n/**\n * 多线类型\n *\n * @property MULTI_LINE\n * @static\n * @final\n * @type {String}\n */\nGeometry.MULTI_LINE = 'multi_line'\n\n/**\n * 多边形类型\n *\n * @property POLYGON\n * @static\n * @final\n * @type {String}\n */\nGeometry.POLYGON = 'polygon'\n\n/**\n * 多个多边形类型\n *\n * @property MULTI_POLYGON\n * @static\n * @final\n * @type {String}\n */\nGeometry.MULTI_POLYGON = 'multi_polygon'\n\n/**\n * 矩形类型\n *\n * @property EXTENT\n * @static\n * @final\n * @type {String}\n */\nGeometry.EXTENT = 'extent'\n\n/**\n * 圆类型\n *\n * @property CIRCLE\n * @static\n * @final\n * @type {String}\n */\nGeometry.CIRCLE = 'circle'\n\n/**\n * 定义平行四边形图形\n * @type {string}\n */\nGeometry.PARALLELOGRAM = 'parallelogram'\n\n/**\n * 未定义\n *\n * @property UNDEFINED\n * @static\n * @final\n * @type {String}\n */\nGeometry.UNDEFINED = 'undefined'\n\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/geometry.js","/**\n * Created by zhangyong on 2017/5/24.\n */\n\nexport const ExtentUtil = {}\n\n/**\n * 创建一个空矩形\n *\n * @method createEmpty\n * @returns {[*,*,*,*]}\n */\nExtentUtil.createEmpty = function () {\n  return [Infinity, Infinity, -Infinity, -Infinity]\n}\n\n/**\n *\n * @param flatCoordinates\n * @param offset\n * @param end\n * @param stride\n * @param opt_extent\n */\nExtentUtil.createOrUpdateFromFlatCoordinates = function(flatCoordinates, offset, end, stride, opt_extent) {\n  const extent = ExtentUtil.createOrUpdateEmpty(opt_extent)\n  return extendFlatCoordinates(\n    extent, flatCoordinates, offset, end, stride)\n}\n\nconst extendXY = function(extent, x, y) {\n  extent[0] = Math.min(extent[0], x)\n  extent[1] = Math.min(extent[1], y)\n  extent[2] = Math.max(extent[2], x)\n  extent[3] = Math.max(extent[3], y)\n}\n\n\nconst extendFlatCoordinates = function(extent, flatCoordinates, offset, end, stride) {\n  for (; offset < end; offset += stride) {\n    extendXY(\n      extent, flatCoordinates[offset], flatCoordinates[offset + 1])\n  }\n  \n  return extent\n}\n\n/**\n *\n * @param opt_extent\n * @returns {*}\n */\nExtentUtil.createOrUpdateEmpty = function(opt_extent) {\n  return ExtentUtil.createOrUpdate(\n    Infinity, Infinity, -Infinity, -Infinity, opt_extent)\n}\n\n/**\n * 创建或更新矩形\n *\n * @method createOrUpdate\n * @param minX {Number}\n * @param minY {Number}\n * @param maxX {Number}\n * @param maxY {Number}\n * @param opt_extent {Array}\n * @returns {*}\n */\nExtentUtil.createOrUpdate = function(minX, minY, maxX, maxY, opt_extent) {\n  if (opt_extent) {\n    opt_extent[0] = minX\n    opt_extent[1] = minY\n    opt_extent[2] = maxX\n    opt_extent[3] = maxY\n    return opt_extent\n  } else {\n    return [minX, minY, maxX, maxY]\n  }\n}\n\n/**\n * 获取矩形的中心点\n *\n * @method getCenter\n * @param extent\n * @returns {[*,*]}\n */\nExtentUtil.getCenter = function(extent) {\n  return [(extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2]\n}\n\n/**\n * Create an empty extent.\n * @returns {[*,*,*,*]}\n */\nExtentUtil.createScaleExtent = function (center,value) {\n  return [center.x  - value, center.y  - value, center.x  + value, center.y + value]\n}\n\n/**\n *\n * @param point1\n * @param point2\n * @returns {[*,*,*,*]}\n */\nExtentUtil.boundingExtentFromTwoPoints = function (point1, point2) {\n  let xmin = 0, ymin = 0, xmax = 0, ymax = 0\n  \n  if (point1[0] > point2[0]) {\n    xmin = point2[0]\n    xmax = point1[0]\n  } else {\n    xmin = point1[0]\n    xmax = point2[0]\n  }\n  \n  if (point1[1] > point2[1]) {\n    ymin = point2[1]\n    ymax = point1[1]\n  } else {\n    ymin = point1[1]\n    ymax = point2[1]\n  }\n  \n  return [xmin, ymin, xmax, ymax]\n}\n\n/**\n * 通过坐标数据构建矩形\n *\n * @method boundingExtent\n * @param extent\n * @param coordinate\n */\nExtentUtil.boundingExtent = function (coordinates) {\n  let extent = ExtentUtil.createEmpty()\n  \n  for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n    ExtentUtil.extendCoordinate(extent, coordinates[i])\n  }\n  \n  return [\n    ExtentUtil.getBottomLeft(extent),\n    ExtentUtil.getBottomRight(extent),\n    ExtentUtil.getTopRight(extent),\n    ExtentUtil.getTopLeft(extent),\n    ExtentUtil.getBottomLeft(extent)\n  ]\n}\n\n/**\n * Build an extent that includes all given coordinates.\n * @param extent\n * @param coordinate\n */\nExtentUtil.boundingSimpleExtent = function (coordinates) {\n  let extent = ExtentUtil.createEmpty()\n  \n  for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n    ExtentUtil.extendCoordinate(extent, coordinates[i])\n  }\n  \n  return extent\n}\n\n/**\n * 通过坐标更新矩形\n *\n * @method extendCoordinate\n * @param extent {Geometry}\n * @param coordinate {Array}\n */\nExtentUtil.extendCoordinate = function(extent, coordinate) {\n  if (coordinate[0] < extent[0]) {\n    extent[0] = coordinate[0]\n  }\n  \n  if (coordinate[0] > extent[2]) {\n    extent[2] = coordinate[0]\n  }\n  \n  if (coordinate[1] < extent[1]) {\n    extent[1] = coordinate[1]\n  }\n  \n  if (coordinate[1] > extent[3]) {\n    extent[3] = coordinate[1]\n  }\n}\n\n\n/**\n * 获取矩形右侧线段坐标\n *\n * getBottomRight\n * @param extent {Geometry}\n * @returns {[*,*]}\n */\nExtentUtil.getBottomRight = function (extent) {\n  return [extent[2], extent[1]]\n}\n\n\n/**\n * 获取矩形左侧线段坐标\n *\n * getBottomLef\n * @param extent {Geometry}\n * @returns {[*,*]}\n */\nExtentUtil.getBottomLeft = function (extent) {\n  return [extent[0], extent[1]]\n}\n\n\n/**\n * Get the top right coordinate of an extent\n * extent\n * @returns {[*,*]}\n */\nExtentUtil.getTopRight = function (extent) {\n  return [extent[2], extent[3]]\n}\n\n\n/**\n * Get the top left coordinate of an extent\n *  extent\n * @returns {[*,*]}\n */\nExtentUtil.getTopLeft = function (extent) {\n  return [extent[0], extent[3]]\n}\n\n/**\n * 判断点是否在矩形上\n *\n * @method containsPoint\n * @param extent {Geometry}\n * @param point {Array}\n * @returns {Boolean}\n */\nExtentUtil.containsPoint = function(extent, point){\n  const x = point[0]\n  const y = point[1]\n  \n  if (Array.isArray(extent)) {\n    return extent[0] <= x && x <= extent[2] &&\n           extent[1] <= y && y <= extent[3]\n  } else {\n    return (extent.xmin - 1) <= x && x <= (extent.xmax + 1) &&\n      (extent.ymin - 1)<= y && y <= (extent.ymax + 1)\n  }\n}\n\n/**\n * Return extent increased by the provided value.\n * @param extent\n * @param value\n * @param optExtent\n * @returns {*}\n */\nExtentUtil.buffer = function(extent, value, optExtent) {\n  if (optExtent) {\n    optExtent[0] = extent[0] - value\n    optExtent[1] = extent[1] - value\n    optExtent[2] = extent[2] + value\n    optExtent[3] = extent[3] + value\n    return optExtent\n  } else {\n    return [\n      extent[0] - value,\n      extent[1] - value,\n      extent[2] + value,\n      extent[3] + value\n    ]\n  }\n}\n\n/**\n * Convert xmin, ymin, xmax, ymax of an extent to a ring array\n * @param xmin\n * @param ymin\n * @param xmax\n * @param ymax\n * @returns {[*,*,*,*,*]}\n */\nExtentUtil.minMaxToRing = function (xmin, ymin, xmax, ymax) {\n  const ring = [\n    [xmin, ymin],\n    [xmax, ymin],\n    [xmax, ymax],\n    [xmin, ymax],\n    [xmin, ymin]\n  ]\n  \n  return ring\n}\n\n/**\n * 获取图形的高\n *\n * @method getHeight\n * @param extent {Geometry}\n * @returns {Number}\n */\nExtentUtil.getHeight = function(extent) {\n  return extent[3] - extent[1]\n}\n\n/**\n * 获取图形的宽\n *\n * @method getWidth\n * @param extent {Geometry}\n * @returns {Number}\n */\nExtentUtil.getWidth = function(extent) {\n  return extent[2] - extent[0]\n}\n\n/**\n * 矩形坐标点更新\n *\n * @method updateExtent\n * @param geometry {Geometry}\n * @param newCoordinates {Array}\n * @param dragSegments\n * @returns {Array}\n */\nExtentUtil.updateExtent = function (geometry, newCoordinates, dragSegments) {\n  const dragSegment = dragSegments[0]\n  const index = dragSegment.index\n  const extentCoordinates = geometry.getCoordinates()\n  const segment1 = extentCoordinates[index]\n  const segment2 = extentCoordinates[index + 1]\n  \n  const isVertex = dragSegment.isVertex\n  if (isVertex) {\n    if (index === 0 || index === 4) {\n      extentCoordinates[0] = newCoordinates\n      extentCoordinates[4] = newCoordinates\n      extentCoordinates[1][1] = newCoordinates[1]\n      extentCoordinates[3][0] = newCoordinates[0]\n    } else if (index === 1) {\n      extentCoordinates[1] = newCoordinates\n      \n      extentCoordinates[2][0] = newCoordinates[0]\n      extentCoordinates[0][1] = newCoordinates[1]\n      extentCoordinates[4] = extentCoordinates[0]\n    } else if (index === 2) {\n      extentCoordinates[2] = newCoordinates\n      extentCoordinates[1][0] = newCoordinates[0]\n      extentCoordinates[3][1] = newCoordinates[1]\n    } else if (index === 3) {\n      extentCoordinates[3] = newCoordinates\n      extentCoordinates[2][1] = newCoordinates[1]\n      extentCoordinates[0][0] = newCoordinates[0]\n      extentCoordinates[4] = extentCoordinates[0]\n    }\n  } else {\n    if (segment1[0] === segment2[0]) {\n      extentCoordinates[index][0] = newCoordinates[0]\n      extentCoordinates[index + 1][0] = newCoordinates[0]\n    }\n  \n    if (segment1[1] === segment2[1]) {\n      extentCoordinates[index][1] = newCoordinates[1]\n      extentCoordinates[index + 1][1] = newCoordinates[1]\n    }\n  \n    if (index === 3 ) {\n      extentCoordinates[0] = extentCoordinates[4]\n    }\n    if (index === 0 ) {\n      extentCoordinates[4] = extentCoordinates[0]\n    }\n  }\n  \n  \n  return extentCoordinates\n}\n\n/**\n *\n * @param extent1\n * @param extent2\n * @param opt_extent\n * @returns {(*|*|*|*)[]}\n */\nExtentUtil.getIntersection = function(extent1, extent2, opt_extent) {\n  const intersection = opt_extent ? opt_extent : ExtentUtil.createEmpty()\n  if (ExtentUtil.intersects(extent1, extent2)) {\n    if (extent1[0] > extent2[0]) {\n      intersection[0] = extent1[0]\n    } else {\n      intersection[0] = extent2[0]\n    }\n    \n    if (extent1[1] > extent2[1]) {\n      intersection[1] = extent1[1]\n    } else {\n      intersection[1] = extent2[1]\n    }\n    \n    if (extent1[2] < extent2[2]) {\n      intersection[2] = extent1[2]\n    } else {\n      intersection[2] = extent2[2]\n    }\n    \n    if (extent1[3] < extent2[3]) {\n      intersection[3] = extent1[3]\n    } else {\n      intersection[3] = extent2[3]\n    }\n  }\n  \n  return intersection\n}\n\n/**\n * 判断两个矩形是否相交\n *\n * @method intersects\n * @param extent1 {Geometry}\n * @param extent2 {Geometry}\n * @returns {Boolean}\n */\nExtentUtil.intersects = function(extent1, extent2) {\n  return extent1[0] <= extent2[2] &&\n    extent1[2] >= extent2[0] &&\n    extent1[1] <= extent2[3] &&\n    extent1[3] >= extent2[1]\n}\n\n/**\n * 判断矩形是否包含在另一个矩形中\n *\n * @method containsExtent\n * @param extent1\n * @param extent2\n * @returns {Boolean}\n */\nExtentUtil.containsExtent = function(extent1, extent2) {\n  return extent1[0] <= extent2[0] &&\n         extent2[2] <= extent1[2] &&\n         extent1[1] <= extent2[1] &&\n         extent2[3] <= extent1[3]\n}\n\n/**\n *\n * @param extent\n * @returns {boolean}\n */\nExtentUtil.isEmpty = function(extent) {\n  return extent[2] < extent[0] || extent[3] < extent[1]\n}\n\n/**\n *\n * @param center\n * @param resolution\n * @param rotation\n * @param size\n * @param opt_extent\n * @returns {*}\n */\nExtentUtil.getForViewAndSize = function(center, resolution, rotation, size, opt_extent) {\n  const dx = resolution * size[0] / 2\n  const dy = resolution * size[1] / 2\n  const cosRotation = Math.cos(rotation)\n  const sinRotation = Math.sin(rotation)\n  const xCos = dx * cosRotation\n  const xSin = dx * sinRotation\n  const yCos = dy * cosRotation\n  const ySin = dy * sinRotation\n  const x = center[0]\n  const y = center[1]\n  const x0 = x - xCos + ySin\n  const x1 = x - xCos - ySin\n  const x2 = x + xCos - ySin\n  const x3 = x + xCos + ySin\n  const y0 = y - xSin - yCos\n  const y1 = y - xSin + yCos\n  const y2 = y + xSin + yCos\n  const y3 = y + xSin - yCos\n  \n  return ExtentUtil.createOrUpdate(\n    Math.min(x0, x1, x2, x3), Math.min(y0, y1, y2, y3),\n    Math.max(x0, x1, x2, x3), Math.max(y0, y1, y2, y3),\n    opt_extent)\n}\n\nexport default {\n  ExtentUtil\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/support/extentutil.js","/**\n * Created by zypc on 2016/11/13.\n */\n// The BaseObject is a base class that only can be inherited, not be instanced.\nimport Event from './event'\nimport {getUid} from '../utils/counter'\nimport {EventType} from '../meek/eventtype'\n\n/**\n * 对象基类，所有子类原则上要继承该类。\n *\n * 该类提供一个 id 和一个 revision,id 作为类的唯一标示\n *\n * @class BaseObject\n * @extends Event\n * @constructor\n * @module core\n */\nexport default class BaseObject extends Event {\n\n  /**\n   * Create a BaseObject\n   *\n   * 构造函数\n   *\n   * @consructor\n   */\n  constructor () {\n    super()\n  \n    /**\n     * ID\n     *\n     * @property id\n     * @type {Number}\n     * @private\n     */\n    this._id = getUid()\n  \n    /**\n     * 版本号\n     *\n     * @property revision\n     * @type {Number}\n     * @private\n     */\n    this._revision = 0\n  }\n  \n  /**\n   * 此方法用于派发map渲染事件\n   *\n   * @example this.changed() | super.changed()\n   *\n   * @method changed\n   */\n  changed () {\n    ++this._revision\n    this.dispatchEvent(EventType.CHANGE)\n  }\n\n  /**\n   *\n   * ID属性，用于获取该对象的ID编号\n   *\n   * @property id\n   * @type {Number}\n   */\n  get id () {\n    return this._id\n  }\n  \n  /**\n   *\n   * 地图渲染的版本号\n   *\n   * @property revision\n   * @type {Number}\n   * @returns {Number} the revision id\n   */\n  get revision () { return this._revision }\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/baseobject.js","/**\n * Created by zypc on 2016/11/17.\n */\n\n\nimport Obj from '../utils/obj'\n\n/**\n * 根据事件标识和监听对象获取该对象上的事件监听函数列表\n *\n * @method getListeners\n * @param target\n * @param type\n * @returns {Undefined}\n */\nexport function getListeners (target, type) {\n  const listenerMap = target.ol_lm\n  return listenerMap ? listenerMap[type] : undefined\n}\n\n/**\n * 根据事件标示和事件对象，移除全部事件监听\n *\n * @param target\n * @param type\n */\nconst removeListeners = function (target, type) {\n  const listeners = getListeners(target, type)\n  if (listeners) {\n    for (let i = 0, ii = listeners.length; i < ii; ++i) {\n      target.removeEventListener(type, listeners[i].boundListener)\n      Obj.clear(listeners[i])\n    }\n    listeners.length = 0\n    let listenerMap = target.ol_lm\n    if (listenerMap) {\n      Reflect.deleteProperty(listenerMap, type)\n      if (Object.keys(listenerMap).length === 0) {\n        Reflect.deleteProperty(target, ol_lm)\n      }\n    }\n  }\n}\n\n/**\n * 移除该事件标识下全部事件监听\n *\n * @method unlistenByKey\n * @param key {String} 事件标示\n */\nexport function unlistenByKey (key) {\n  if (key && key.target) {\n    key.target.removeEventListener(key.type, key.boundListener)\n    const listeners = getListeners(key.target, key.type)\n    if (listeners) {\n      let i = 'deleteIndex' in key ? key.deleteIndex : listeners.indexOf(key)\n      if (i !== -1) {\n        listeners.splice(i, 1)\n      }\n      if (listeners.length === 0) {\n        removeListeners(key.target, key.type)\n      }\n    }\n    \n    Obj.clear(key)\n  }\n}\n\n/**\n * @param listenerObj\n * @returns {boundListener}\n */\nconst bindListener = function (listenerObj) {\n  let boundListener = function (evt) {\n    const listener = listenerObj.listener\n    const bindTo = listenerObj.bindTo || listenerObj.target\n    if (listenerObj.callOnce) {\n      unlistenByKey(listenerObj)\n    }\n    return listener.call(bindTo, evt)\n  }\n\n  listenerObj.boundListener = boundListener\n  return boundListener\n}\n\n/**\n *\n * @param listeners\n * @param listener\n * @param optThis\n * @param optSetDeleteIndex\n * @returns {*}\n */\nconst findListener = function (listeners, listener, optThis, optSetDeleteIndex) {\n  let listenerObj\n  for (let i = 0, ii = listeners.length; i < ii; ++i) {\n    listenerObj = listeners[i]\n    if (listenerObj.listener === listener &&\n      listenerObj.bindTo === optThis) {\n      if (optSetDeleteIndex) {\n        listenerObj.deleteIndex = i\n      }\n      return listenerObj\n    }\n  }\n  return undefined\n}\n\n/**\n *\n * @param target\n * @returns {{}|*}\n */\nconst getListenerMap = function (target) {\n  let listenerMap = target.ol_lm\n  if (!listenerMap) {\n    listenerMap = target.ol_lm = {}\n  }\n  return listenerMap\n}\n\n/**\n * 监听事件\n *\n * @method listen\n * @param target {Object} 监听对象\n * @param type {String} 事件标识\n * @param listener {Array} 事件响应函数列表\n * @param optThis {This} 可选\n * @param optOnce\n * @returns {Array}\n */\nexport function listen (target, type, listener, optThis, optOnce) {\n  const listenerMap = getListenerMap(target)\n  let listeners = listenerMap[type]\n  if (!listeners) {\n    listeners = listenerMap[type] = []\n  }\n  \n  let listenerObj = findListener(listeners, listener, optThis, false)\n\n  if (listenerObj) {\n    if (!optOnce) {\n      listenerObj.callOnce = false // Turn one-off listener into a permanent one.\n    }\n  } else {\n    listenerObj = {\n      bindTo: optThis,\n      callOnce: !!optOnce,\n      listener,\n      target,\n      type\n    }\n    \n    target.addEventListener(type, bindListener(listenerObj))\n    listeners.push(listenerObj)\n  }\n\n  return listenerObj\n}\n\n/**\n * 对事件只是监听一次\n *\n * @method listenOnce\n * @param target\n * @param type\n * @param listener\n * @param opt_this\n * @returns {*}\n */\nexport function listenOnce (target, type, listener, opt_this) {\n  return listen(target, type, listener, opt_this, true)\n}\n\n\n/**\n * 定义关于事件的注册、注销、派发、监听的通用工具模块\n *\n * @module core\n * @class EventManager\n */\nexport default {\n  getListeners,\n  listen,\n  listenOnce,\n  unlistenByKey,\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/eventmanager.js","/**\n * Created by zypc on 2016/12/4.\n */\n\nimport BaseObject from '../core/baseobject'\n\n/**\n * BrowserEvent\n *\n * @class BrowserEvent\n * @extends BaseObject\n * @module meek\n * @constructor\n */\nexport default class BrowserEvent extends BaseObject {\n\n  /**\n   * @constructor\n   * @param map\n   * @param oriEvent\n   * @param eventTyle\n   */\n  constructor (map, oriEvent, eventTyle) {\n    super()\n\n    /**\n     * 标示事件类型\n     */\n    this.type = eventTyle\n\n    /**\n     *\n     */\n    this.map = map\n\n    /**\n     * 记录事件源对象\n     */\n    this.originalEvent = oriEvent\n\n    /**\n     * 将浏览器坐标转换成canvas屏幕坐标\n     * The pixel of the original browser event.\n     * @type {ol.Pixel}\n     * @api stable\n     */\n    this.pixel = map.getEventPixel(oriEvent)\n  \n  \n    /**\n     * 将canvas左边转换成地图坐标\n     */\n    this.coordinate = map.getCoordinateFromPixel(this.pixel)\n\n    /**\n     * @type {number}\n     */\n    this.pointerId = 0\n  }\n\n  /**\n   * 取消事件的默认动作\n   *\n   * @method preventDefault\n   */\n  preventDefault () {\n    this.originalEvent.preventDefault()\n  }\n  \n  /**\n   * 阻止当前事件在DOM树上冒泡\n   *\n   * @method stopPropagation\n   */\n  stopPropagation () {\n    this.originalEvent.stopPropagation()\n  }\n  \n}\n// The single click is different form double click,which\n// consider as two click heppen during 250ms.\n/**\n * 鼠标在一段时间内单击标识\n *\n * @property SINGLE_CLICK\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.SINGLE_CLICK = 'singleclick'\n\n/**\n *\n * 鼠标单击事件标识\n *\n * @property CLICK\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.CLICK = 'click'\n\n/**\n *\n * 鼠标双击事件标识\n *\n * @property DBLCLICK\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.DBLCLICK = 'dblclick'\n\n/**\n * 鼠标拖拽事件标识\n *\n * @property MOUSE_DRAG\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.MOUSE_DRAG = 'mousedrag'\n\n/**\n * 鼠标按下事件标识\n *\n * @property MOUSE_DOWN\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.MOUSE_DOWN = 'mousedown'\n\n/**\n * 鼠标移动事件标识\n *\n * @property MOUSE_MOVE\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.MOUSE_MOVE = 'mousemove'\n\n/**\n * 鼠标抬起事件标识\n *\n * @property MOUSE_UP\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.MOUSE_UP = 'mouseup'\n\n/**\n * 鼠标移入事件标识\n *\n * @property MOUSE_OVER\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.MOUSE_OVER = 'mouseover'\n\n/**\n * 鼠标移开事件标识\n *\n * @property MOUSE_OUT\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.MOUSE_OUT = 'mouseout'\n\n/**\n * 滚轮事件标识\n *\n * @property WHEEL\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.WHEEL = 'wheel'\n\n/**\n * 鼠标滚轮事件标识\n *\n * @property MOUSE_WHEEL\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.MOUSE_WHEEL = 'mousewheel'\n\n/**\n *\n * @type {string}\n */\nBrowserEvent.KEYDOWN = 'keydown'\n\n/**\n *\n * @type {string}\n */\nBrowserEvent.KEYPRESS = 'keypress'\n\n\n\n// WEBPACK FOOTER //\n// ./src/meek/browserevent.js","/**\n * Created by zypc on 2016/12/6.\n */\nexport const EventType = {}\n\n/**\n * Triggered when map is needed to render\n *\n * @property CHANGE\n * @static\n * @final\n * @type {String}\n */\nEventType.CHANGE = 'change'\n\n\n/**\n * Triggered when view has been changed\n *\n * 当地图视图发生变化时将会派发改事件\n *\n * @property VIEW_CHANGED\n * @static\n * @final\n * @type {String}\n */\nEventType.VIEW_CHANGED = 'viewchanged'\n\n/**\n * Triggered when a image download error\n *\n * @property ERROR\n * @static\n * @final\n * @type {String}\n */\nEventType.ERROR = 'error'\n\n/**\n * Triggered when a image finish load\n *\n * @property LOAD\n * @static\n * @final\n * @type {String}\n */\nEventType.LOAD = 'load'\n\n/**\n * 当浏览器窗口的尺寸发生变化时派发\n *\n * @property RESIZE\n * @static\n * @final\n * @type {string}\n */\nEventType.RESIZE = 'resize'\n\n\nexport default {\n  EventType\n}\n\n\n\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/meek/eventtype.js","/**\n * Created by zhangyong on 2017/3/17.\n */\n\n/**\n * Collection of affine 2d transformation functions. The functions work on an\n * array of 6 elements. The element order is compatible with the [SVGMatrix\n * interface](https://developer.mozilla.org/en-US/docs/Web/API/SVGMatrix) and is\n * a subset (elements a to f) of a 3x3 martrix:\n * ```\n * [ a c e ]\n * [ b d f ]\n * [ 0 0 1 ]\n * ```\n */\n\nexport const Transform = {\n  \n  /**\n   * @private\n   * @type {ol.Transform}\n   */\n  tmp_: new Array(6),\n  \n  /**\n   * 恒等矩阵\n   *\n   * Create an identity（恒等） transform.\n   * @return {!Transform} Identity transform.\n   */\n  create: function () {\n    return [1, 0, 0, 1, 0, 0]\n  },\n  \n  /**\n   * Resets the given transform to an identity（恒等） transform.\n   *\n   * @param {!Transform} transform Transform.\n   * @return {!Transform} Transform.\n   */\n  reset: function (transform) {\n    return transform.set(transform, 1, 0, 0, 1, 0, 0)\n  },\n  \n  /**\n   *\n   * @param flatCoordinates\n   * @param offset\n   * @param end\n   * @param stride\n   * @param transform\n   * @param opt_dest\n   * @returns {Array}\n   */\n  transform2D: function (flatCoordinates, offset, end, stride, transform, opt_dest) {\n    const dest = opt_dest ? opt_dest : []\n    let i = 0\n    let j\n    \n    for (j = offset; j < end; j += stride) {\n      const x = flatCoordinates[j]\n      const y = flatCoordinates[j + 1]\n      dest[i++] = transform[0] * x + transform[2] * y + transform[4]\n      dest[i++] = transform[1] * x + transform[3] * y + transform[5]\n    }\n    \n    if (opt_dest && dest.length != i) {\n      dest.length = i\n    }\n    \n    return dest\n  },\n  \n  /**\n   * 矩阵相乘\n   *\n   * Multiply（相乘） the underlying matrices of two transforms and return the result in\n   * the first transform.\n   *\n   * @param {!Transform} transform1 Transform parameters of matrix 1.\n   * @param {!Transform} transform2 Transform parameters of matrix 2.\n   * @return {!Transform} transform1 multiplied with transform2.\n   */\n  multiply: function (transform1, transform2) {\n    const a1 = transform1[0]\n    const b1 = transform1[1]\n    const c1 = transform1[2]\n    const d1 = transform1[3]\n    const e1 = transform1[4]\n    const f1 = transform1[5]\n    const a2 = transform2[0]\n    const b2 = transform2[1]\n    const c2 = transform2[2]\n    const d2 = transform2[3]\n    const e2 = transform2[4]\n    const f2 = transform2[5]\n    \n    transform1[0] = a1 * a2 + c1 * b2\n    transform1[1] = b1 * a2 + d1 * b2\n    transform1[2] = a1 * c2 + c1 * d2\n    transform1[3] = b1 * c2 + d1 * d2\n    transform1[4] = a1 * e2 + c1 * f2 + e1\n    transform1[5] = b1 * e2 + d1 * f2 + f1\n    \n    return transform1\n  },\n  \n  /**\n   * Set the transform components a-f on a given transform.\n   *\n   * @param {!Transform} transform Transform.\n   * @param {number} a The a component of the transform.\n   * @param {number} b The b component of the transform.\n   * @param {number} c The c component of the transform.\n   * @param {number} d The d component of the transform.\n   * @param {number} e The e component of the transform.\n   * @param {number} f The f component of the transform.\n   * @return {!Transform} Matrix with transform applied.\n   */\n  set: function (transform, a, b, c, d, e, f) {\n    transform[0] = a\n    transform[1] = b\n    transform[2] = c\n    transform[3] = d\n    transform[4] = e\n    transform[5] = f\n    return transform\n  },\n  \n  /**\n   * Set transform on one matrix from another matrix.\n   *\n   * @param {!Transform} transform1 Matrix to set transform to.\n   * @param {!Transform} transform2 Matrix to set transform from.\n   * @return {!Transform} transform1 with transform from transform2 applied.\n   */\n  setFromArray: function (transform1, transform2) {\n    transform1[0] = transform2[0]\n    transform1[1] = transform2[1]\n    transform1[2] = transform2[2]\n    transform1[3] = transform2[3]\n    transform1[4] = transform2[4]\n    transform1[5] = transform2[5]\n    return transform1\n  },\n  \n  /**\n   * 矩阵运算\n   * 将坐标值矩阵运算\n   *\n   * Transforms the given coordinate with the given transform returning the\n   * resulting, transformed coordinate. The coordinate will be modified in-place.\n   *\n   * @param {Transform} transform The transformation.\n   * @param {Coordinate|Pixel} coordinate The coordinate to transform.\n   * @return {Coordinate|Pixel} return coordinate so that operations can be\n   *     chained together.\n   */\n  apply: function (transform, coordinate) {\n    const x = coordinate[0]\n    const y = coordinate[1]\n    coordinate[0] = transform[0] * x + transform[2] * y + transform[4]\n    coordinate[1] = transform[1] * x + transform[3] * y + transform[5]\n    return coordinate\n  },\n  \n  /**\n   * Applies rotation to the given transform.\n   *\n   * 矩阵旋转\n   *\n   * @param {!Transform} transform Transform.\n   * @param {number} angle Angle in radians.\n   * @return {!Transform} The rotated transform.\n   */\n  rotate: function (transform, angle) {\n    const cos = Math.cos(angle)\n    const sin = Math.sin(angle)\n    return transform.multiply(transform, transform.set(transform.tmp_, cos, sin, -sin, cos, 0, 0))\n  },\n  \n  /**\n   *  Applies scale to a given transform.\n   *\n   * 矩阵缩放\n   *\n   * @param {!Transform} transform Transform.\n   * @param {number} x Scale factor x.\n   * @param {number} y Scale factor y.\n   * @return {!Transform} The scaled transform.\n   */\n  scale: function (transform, x, y) {\n    return transform.multiply(transform,\n      transform.set(transform.tmp_, x, 0, 0, y, 0, 0))\n  },\n  \n  /**\n   * Applies translation to the given transform.\n   *\n   * 矩阵转换\n   *\n   * @param {!Transform} transform Transform.\n   * @param {number} dx Translation x.\n   * @param {number} dy Translation y.\n   * @return {!Transform} The translated transform.\n   */\n  translate: function (transform, dx, dy) {\n    return transform.multiply(transform,\n      transform.set(transform.tmp_, 1, 0, 0, 1, dx, dy))\n  },\n  \n  /**\n   * Creates a composite transform given an initial translation, scale, rotation, and\n   * final translation (in that order only, not commutative).\n   *\n   * 复杂矩形运算\n   *\n   * @param {!Transform} transform The transform (will be modified in place).\n   * @param {number} dx1 Initial translation x.\n   * @param {number} dy1 Initial translation y.\n   * @param {number} sx Scale factor x.\n   * @param {number} sy Scale factor y.\n   * @param {number} angle Rotation (in counter-clockwise radians).\n   * @param {number} dx2 Final translation x.\n   * @param {number} dy2 Final translation y.\n   * @return {!Transform} The composite transform.\n   */\n  compose: function (transform, dx1, dy1, sx, sy, angle, dx2, dy2) {\n    const sin = Math.sin(angle)\n    const cos = Math.cos(angle)\n    transform[0] = sx * cos\n    transform[1] = sy * sin\n    transform[2] = -sx * sin\n    transform[3] = sy * cos\n    transform[4] = dx2 * sx * cos - dy2 * sx * sin + dx1\n    transform[5] = dx2 * sy * sin + dy2 * sy * cos + dy1\n    return transform\n  },\n  \n  /**\n   * Invert the given transform.\n   *\n   * @param {!Transform} transform Transform.\n   * @return {!Transform} Inverse of the transform.\n   */\n  invert: function (transform) {\n    const det = Transform.determinant(transform)\n    \n    const a = transform[0]\n    const b = transform[1]\n    const c = transform[2]\n    const d = transform[3]\n    const e = transform[4]\n    const f = transform[5]\n    \n    transform[0] = d / det\n    transform[1] = -b / det\n    transform[2] = -c / det\n    transform[3] = a / det\n    transform[4] = (c * f - d * e) / det\n    transform[5] = -(a * f - b * e) / det\n    \n    return transform\n  },\n  \n  /**\n   * Returns the determinant of the given matrix.\n   *\n   * 行列式\n   *\n   * @param {!Transform} mat Matrix.\n   * @return {number} Determinant.\n   */\n  determinant: function (mat) {\n    return mat[0] * mat[3] - mat[1] * mat[2]\n  }\n}\n\nexport default {\n  Transform\n}\n\n\n// WEBPACK FOOTER //\n// ./src/data/matrix/transform.js","/**\n * Created by zypc on 2016/11/15.\n */\n\nimport BaseObject from '../core/baseobject'\nimport BrowserEvent from '../meek/browserevent'\nimport Obj from '../utils/obj'\n\n/**\n *\n * 定义组件基础类\n *\n * @class Component\n * @extends BaseObject\n * @module component\n *\n */\n\n// Abstract base class,represent a base componnet whcih should be inhrited\nexport default class Component extends BaseObject {\n\n  /**\n   * 构造函数\n   *\n   * @constructor\n   */\n  constructor () {\n    super()\n  \n    /**\n     * 当前组件开关，默认为ture，设置为false时，则关闭当前组件的功能\n     *\n     * @property active\n     * @type {Boolean}\n     */\n    this.active = true\n  \n    /**\n     * @property mapRenderKey\n     * @type {null}\n     * @private\n     */\n    this._mapRenderKey = null\n  \n    /**\n     * @property targetPointers\n     * @type {null}\n     */\n    this.targetPointers = null\n  \n    /**\n     * @property trackedPointers\n     * @type {{}}\n     * @private\n     */\n    this._trackedPointers = {}\n  \n    /**\n     * handlingDownUpSequence\n     * @type {boolean}\n     */\n    this.handlingDownUpSequence = false\n\n  }\n  \n  /**\n   * applyHandleEventOption\n   * @param options\n   */\n  applyHandleEventOption (options) {\n\n    /**\n     *\n     */\n    this.handleMouseEvent = options.handleMouseEvent ?\n      options.handleMouseEvent : this.handleMouseEvent\n  \n    /**\n     *\n     * @private\n     */\n    this._handleDownEvent = options.handleDownEvent ?\n      options.handleDownEvent : function () { return false }\n  \n    /**\n     *\n     * @private\n     */\n    this._handleDragEvent = options.handleDragEvent ?\n      options.handleDragEvent : function () {}\n  \n    /**\n     * @private\n     */\n    this._handleMoveEvent = options.handleMoveEvent ?\n      options.handleMoveEvent : function () {}\n  \n    /**\n     * @private\n     */\n    this._handleUpEvent = options.handleUpEvent ?\n      options.handleUpEvent : function () { return false }\n    \n  }\n  \n  /**\n   * 处理鼠标事件\n   *\n   * handleMouseEvent\n   * @param browserEvent {browserEvent}\n   *\n   * @returns {Boolean}\n   */\n  handleMouseEvent (browserEvent) {\n    let stopEvent = false\n    this._updateTrackedPointers(browserEvent)\n\n    if (this.handlingDownUpSequence) {\n\n      if (browserEvent.type === BrowserEvent.MOUSE_DRAG) {\n        this._handleDragEvent(browserEvent)\n\n      } else if (browserEvent.type === BrowserEvent.MOUSE_UP) {\n\n        const handledUp = this._handleUpEvent(browserEvent)\n        this.handlingDownUpSequence = handledUp && this.targetPointers.length > 0\n      }\n    } else {\n      if (browserEvent.type === BrowserEvent.MOUSE_DOWN) {\n\n        const handled = this._handleDownEvent(browserEvent)\n        this.handlingDownUpSequence = handled\n        stopEvent = this.shouldStopEvent(handled)\n\n      } else if (browserEvent.type === BrowserEvent.MOUSE_MOVE) {\n        this._handleMoveEvent(browserEvent)\n      }\n    }\n    \n    return !stopEvent\n  }\n  \n  /**\n   *\n   * 根据浏览器鼠标操作事件的类型返回true或false\n   *\n   * isPointerDraggingEvent\n   * @param browserEvent {browserEvent}\n   *\n   * @returns {Boolean}\n   * @private\n   */\n  _isPointerDraggingEvent (browserEvent) {\n    const type = browserEvent.type\n    return (\n      type === BrowserEvent.MOUSE_DOWN ||\n      type === BrowserEvent.MOUSE_DRAG ||\n      type === BrowserEvent.MOUSE_UP)\n  }\n  \n  /**\n   *\n   * 处理浏览器鼠标操作事件\n   *\n   * updateTrackedPointers\n   *\n   * @param browserEvent {browserEvent}\n   * @private\n   */\n  _updateTrackedPointers (browserEvent) {\n    if (this._isPointerDraggingEvent(browserEvent)) {\n      const event = browserEvent\n\n      if (browserEvent.type == BrowserEvent.MOUSE_UP) {\n        delete this._trackedPointers[event.pointerId]\n      } else if (browserEvent.type == BrowserEvent.MOUSE_DOWN) {\n        this._trackedPointers[event.pointerId] = event\n      } else if (event.pointerId in this._trackedPointers) {\n        this._trackedPointers[event.pointerId] = event\n      }\n      this.targetPointers = Obj.getValues(this._trackedPointers)\n    }\n  }\n  \n  /**\n   *\n   * @param view\n   * @param delta\n   * @param opt_duration\n   */\n  pan (view, delta) {\n    const currentCenter = view.center\n    if (currentCenter) {\n      view.center = [currentCenter[0] + delta[0], currentCenter[1] + delta[1]]\n    }\n  }\n  \n  /**\n   *\n   * 根据Delta值进行视图缩放，Delta等于1时固定放大，等于-1时固定缩小\n   *\n   * @method zoomByDelta\n   *\n   * @param view {Object}\n   * @param delta {Number}\n   * @param opt_anchor {Number}\n   * @param opt_duration {Number}\n   *\n   */\n  zoomByDelta (view, delta, opt_anchor, opt_duration) {\n    const currentResolution = view.resolution\n    const resolution = view.constrainResolution(currentResolution, delta, 0)\n    \n    if (opt_anchor && resolution !== undefined && resolution !== currentResolution) {\n      const currentCenter = view.center\n      let center = view.calculateCenterZoom(resolution, opt_anchor)\n      center = view.constrainCenter(center)\n      \n      opt_anchor = [\n        (resolution * currentCenter[0] - currentResolution * center[0]) /\n        (resolution - currentResolution),\n        (resolution * currentCenter[1] - currentResolution * center[1]) /\n        (resolution - currentResolution)\n      ]\n    }\n    \n    this.zoomWithoutConstraints(view, resolution, opt_anchor, opt_duration)\n  }\n  \n  /**\n   *\n   * 根据resolution进行缩放\n   *\n   * @method zoomWithoutConstraints\n   *\n   * @param view {Object}\n   * @param resolution {Number}\n   * @param opt_anchor {Number}\n   * @param opt_duration {Number}\n   */\n  zoomWithoutConstraints (view, resolution, opt_anchor, opt_duration) {\n    if (resolution) {\n      const currentResolution = view.resolution\n      const currentCenter = view.center\n      \n      if (currentResolution !== undefined && currentCenter &&\n          resolution !== currentResolution && opt_duration) {\n        view.resolution = resolution\n\n      } else {\n        if (opt_anchor) {\n          const center = view.calculateCenterZoom(resolution, opt_anchor)\n          view.center = center\n        }\n        view.resolution = resolution\n      }\n    }\n  }\n  \n  /**\n   * 获取当前标注视图的坐标范围(标注的图片的像素)\n   *\n   * @method getViewDataExtent\n   *\n   * @returns {*|null}\n   */\n  getViewDataExtent () {\n    if (!this._dataExtent) {\n      this._dataExtent = this.map.view.dataExtent\n    }\n    \n    return this._dataExtent\n  }\n  \n  /**\n   *\n   * 坐标自检测，如果有小于0的坐标，修正为0，如果有大于最大值的坐标，修正为最大值\n   *\n   * @method coordinateBeyond\n   * @param coordinate {Array} 坐标点{x,y}\n   * @returns {Array} new Coordinate\n   */\n  coordinateBeyond (coordinate) {\n    // 如果允许坐标可超出图片的边界\n    if (this.map.allowCoordinatesBeyondImage) {\n      return coordinate\n    }\n    \n    if (coordinate === undefined) {\n      return coordinate\n    }\n    \n    let newCoordinate = new Array(2)\n    \n    let x,y\n    \n    try{\n      x = coordinate[0]\n      y = coordinate[1]\n    } catch (e) {\n      // console.log(coordinate)\n    }\n  \n    newCoordinate[0] = x\n    newCoordinate[1] = y\n  \n    if (x <= 0) {\n      newCoordinate[0] = 0\n    }\n    \n    if (y <= 0) {\n      newCoordinate[1] = 0\n    }\n    \n    const extent = this.getViewDataExtent()\n    \n    if (extent) {\n      if (x >= extent[2]) {\n        newCoordinate[0] = extent[2]\n      }\n      \n      if (y >= extent[3]) {\n        newCoordinate[1] = extent[3]\n      }\n    }\n    \n    return newCoordinate\n  }\n  \n  /**\n   * shouldStopEvent\n   * @param handled\n   * @returns {*}\n   *\n   */\n  shouldStopEvent (handled) {\n    return handled\n  }\n\n\n  /**\n   * map读写器, 读取设置当前map\n   *\n   * @type {Function}\n   * @property map\n   * @type {Datatang.map}\n   */\n  get map () { return this._map }\n  set map (value) { this._map = value }\n\n  /**\n   * active读写器, 读取设置active\n   *\n   * @type {Function}\n   * @property active\n   */\n  get active () { return this._active }\n  set active (value) {\n    this._active = value\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/component.js","/**\n * Created by zypc on 2016/11/13.\n */\n\nimport Geometry from './geometry'\nimport {ExtentUtil} from './support/extentutil'\n\n/**\n * 矩形类和数据结构\n *\n * @class Extent\n * @extends Geometry\n * @module geometry\n * @constructor\n * @example\n *\n *  var rect = new Datatang.Extent(10, 10, 500, 500)\n */\nexport default class Extent extends Geometry {\n\n  /**\n   * 构造函数，构建一个extent对象\n   *\n   * @param xmin {Number}\n   * @param ymin {Number}\n   * @param xmax {Number}\n   * @param ymax {Number}\n   *\n   */\n  constructor (xmin = 0, ymin = 0, xmax = 0, ymax = 0) {\n    super()\n\n    this._xmin = xmin\n    this._ymin = ymin\n    this._xmax = xmax\n    this._ymax = ymax\n  \n    this._rings = []\n  \n    /**\n     * 记录内点更新的次数\n     * @type {number}\n     * @private\n     */\n    this._flatInteriorPointRevision = -1\n  \n    /**\n     * 缓存当前内点\n     * @type {null}\n     * @private\n     */\n    this._flatInteriorPoint = null\n  }\n\n  /**\n   * 获取Geometry的类型\n   *\n   * @property geometryType\n   * @returns {String}\n   */\n  get geometryType () { return Geometry.EXTENT }\n\n  /**\n   * 计算x轴的中心坐标\n   *\n   * @property centerX\n   * @type {Number}\n   */\n  get centerX () { return (this.xmax + this.xmin) / 2 }\n\n  /**\n   * 计算Y轴的中心坐标\n   *\n   * @property centerY\n   * @type {Number}\n   */\n  get centerY () { return (this.ymax + this.ymin) / 2 }\n\n  /**\n   * 计算最小外接矩形的宽\n   *\n   * @property width\n   * @returns {Number}\n   */\n  get width () { return Math.abs(this.xmax - this.xmin) }\n\n  /**\n   * 计算最小外接矩形的高\n   *\n   * @property height\n   * @returns {Number}\n   */\n  get height () { return Math.abs(this.ymax - this.ymin) }\n\n  /**\n   * 获取最小外接矩形本对象\n   *\n   * @property extent\n   * @returns {Object} extent\n   */\n  get extent () { return this }\n  \n  /**\n   * X 轴最小值\n   *\n   * @property xmin\n   * @type {Number}\n   */\n  get xmin () { return this._xmin }\n  set xmin (value) {\n    this._xmin = value\n    this.changed()\n  }\n  \n  /**\n   * Y 轴最小值\n   *\n   * @property ymin\n   * @type {Number}\n   */\n  get ymin () { return this._ymin }\n  set ymin (value) {\n    this._ymin = value\n    this.changed()\n  }\n  \n  /**\n   * X 轴最大值\n   *\n   * @property xmax\n   * @type {Number}\n   */\n  get xmax () { return this._xmax }\n  set xmax (value) {\n    this._xmax = value\n    this.changed()\n  }\n  \n  /**\n   * X 轴最大值\n   *\n   * @property ymax\n   * @type {Number}\n   */\n  get ymax () { return this._ymax }\n  set ymax (value) {\n    this._ymax = value\n    this.changed()\n  }\n  \n  \n  /**\n   * 判断点是否在矩形内\n   *\n   * @method containsXY\n   * @param x {Number}\n   * @param y {Number}\n   */\n  containsXY (x, y) {\n    return ExtentUtil.containsPoint(this, [x, y])\n  }\n  \n  /**\n   * getFlatInteriorPoint\n   * @returns {[*,*]}\n   */\n  getFlatInteriorPoint () {\n    if (this._flatInteriorPointRevision !== this.revision) {\n      this._flatInteriorPointRevision = this.revision\n      this._flatInteriorPoint = [this.centerX, this.centerY]\n    }\n    \n    return this._flatInteriorPoint\n  }\n  \n  /**\n   * 移动矩形通过x，y值\n   *\n   * @method move\n   * @param x {Number}\n   * @param y {Number}\n   */\n  move (x = 0, y = 0, opts) {\n    let beyond\n    if (opts) {\n      if (opts.beyond) {\n        beyond = opts.beyond\n      }\n    }\n    \n    let minPoint = [this.xmin,this.ymin]\n    const width = this.width\n    const height = this.height\n\n    const newMinPoint = new Array(2)\n    \n    newMinPoint[0] = minPoint[0] + x\n    newMinPoint[1] = minPoint[1] + y\n    \n    if (beyond) {\n      if (minPoint[0] < beyond.xmin) {\n        minPoint[0] = beyond.xmin\n        newMinPoint[0] = minPoint[0]\n      }\n      \n      if (minPoint[0] + width + x >= beyond.xmax) {\n        newMinPoint[0] = minPoint[0]\n      }\n  \n      if (minPoint[1] < beyond.ymin) {\n        minPoint[1] = beyond.ymin\n        newMinPoint[1] = minPoint[1]\n      }\n  \n      if (minPoint[1] + height + y >= beyond.ymax) {\n        newMinPoint[1] = minPoint[1]\n      }\n    }\n  \n    const newCoordiante = [\n      newMinPoint,\n      [newMinPoint[0] + width, newMinPoint[1]],\n      [newMinPoint[0] + width, newMinPoint[1] + height],\n      [newMinPoint[0], newMinPoint[1] + height],\n      newMinPoint]\n    \n    this.setCoordinates(newCoordiante)\n  }\n  \n  /**\n   * 设置多边形的边，如果设置了边，则需要重新计算\n   * 外接矩形\n   *\n   * @method rings\n   * @returns {Array}\n   */\n  get rings () {\n    if (this._rings.length === 0) {\n      if (this.xmin !== 0 && this.ymin !== 0 && this.xmax !== 0 && this.ymax !== 0) {\n        this._rings = ExtentUtil.minMaxToRing(this.xmin, this.ymin, this.xmax, this.ymax)\n      }\n    }\n    \n    return this._rings\n  }\n\n  set rings (value) {\n    this._rings = value\n    let extentArr = ExtentUtil.boundingSimpleExtent(value)\n    this.xmin = extentArr[0]\n    this.ymin = extentArr[1]\n    this.xmax = extentArr[2]\n    this.ymax = extentArr[3]\n  }\n  \n  /**\n   * 获取图形的坐标数据\n   *\n   * @method getCoordinates\n   * @returns {[*,*]}\n   */\n  getCoordinates () {\n    if (this._rings.length === 0) {\n      if (this.xmin !== 0 && this.ymin !== 0 && this.xmax !== 0 && this.ymax !== 0) {\n        this._rings = ExtentUtil.minMaxToRing(this.xmin, this.ymin, this.xmax, this.ymax)\n      }\n    }\n  \n    return this._rings\n  }\n\n  /**\n   * 根据得到的坐标点，计算出表单显示的位置\n   *\n   * @param {Number} offsetX x的偏移量\n   * @param {Number} offsetY y的偏移量\n   * @returns {[*,*]}\n   */\n  getFormShowPosition (offsetX = 0, offsetY = 0) {\n    return [( this.xmin + this.xmax ) / 2 - offsetX, this.ymin - offsetY]\n  }\n  \n  /**\n   * 设置坐标数据\n   *\n   * @method setCoordinates\n   * @param coordinates\n   */\n  setCoordinates (coordinates) {\n    this.rings = coordinates\n  \n    let extentArr = ExtentUtil.boundingSimpleExtent(coordinates)\n    this.xmin = extentArr[0]\n    this.ymin = extentArr[1]\n    this.xmax = extentArr[2]\n    this.ymax = extentArr[3]\n  \n    this.changed()\n  }\n  \n  /**\n   * 获取点位于图形坐标点的下标\n   *\n   * @method getCoordinateIndex\n   * @param coord {Array}\n   * @returns {Number}\n   */\n  getCoordinateIndex (coord) {\n    return this.getCoordinates().findIndex( points =>\n      points[0] === coord[0] && points[1] === coord[1]\n    )\n  }\n  \n  /**\n   * 克隆矩形框\n   *\n   * @method clone\n   * @returns {Extent}\n   */\n  clone () {\n    return new Extent(this.xmin, this.ymin, this.xmax, this.ymax)\n  }\n  \n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/extent.js","/**\n * Created by zypc on 2016/11/13.\n */\n\nimport Geometry from './geometry'\nimport Extent from './extent'\n\nimport {linearRings} from './support/interpolate'\nimport {linearRingsAreOriented,orientLinearRings} from './support/orient'\n\n/**\n * 面类和数据结构\n *\n * 多边形是<b>闭合数据结构</b>，所有首尾点必须相同。\n *\n * 多边形顶点存储是一个二维数组，数组中第一条闭合点串表示多边形\n * 的最外层，第二条及其以后表示多边形的内部洞环。\n *\n * @class Polygon\n * @extends Geometry\n * @module geometry\n * @constructor\n * @example\n *\n *  var polygon = new Datatang.Polygon([[100, 100], [120, 130],[50, 50],[100, 100]])\n *\n */\nexport default class Polygon extends Geometry {\n  \n  /**\n   * 创建一个Polygon实例\n   * @constructor\n   * @param rings\n   */\n  constructor (rings = []) {\n    super()\n\n    this._rings = []\n  \n    /**\n     * 记录当前多边形内点更新的次数\n     * @type {number}\n     * @private\n     */\n    this._flatInteriorPointRevision = -1\n  \n    /**\n     * 缓存当前多边形内点\n     * @type {null}\n     * @private\n     */\n    this._flatInteriorPoint = null\n  \n    /**\n     * 更新多边形的坐标\n     */\n    this.setCoordinates(rings)\n  }\n\n  /**\n   * 获取图形的最小外接矩形(MBR-Minimum Bounding Rectangle)\n   * 可用来对图形进行拖动、旋转、缩放\n   *\n   * @method extent\n   * @abstrct function\n   * @returns {Extent}\n   */\n  get extent () {\n    if (this._extent === null) {\n      const coords = this.getCoordinates()\n      \n      // 计算最小外界矩形，只考虑外围环\n      if (coords.length > 0) {\n        let rings = coords[0]\n  \n        let xmin = Number.POSITIVE_INFINITY\n        let ymin = Number.POSITIVE_INFINITY\n        let xmax = Number.NEGATIVE_INFINITY\n        let ymax = Number.NEGATIVE_INFINITY\n  \n        for (let ring of rings) {\n          xmin = Math.min(xmin, ring[0])\n          ymin = Math.min(ymin, ring[1])\n          xmax = Math.max(xmax, ring[0])\n          ymax = Math.max(ymax, ring[1])\n        }\n  \n        this._extent = new Extent(xmin, ymin, xmax, ymax)\n      }\n    }\n\n    return this._extent\n  }\n\n  /**\n   * 获取对象的几何类型\n   *\n   * @method geometryType\n   * @abstrct function\n   * @returns {String}\n   */\n  get geometryType () { return Geometry.POLYGON }\n\n  /**\n   * 设置多边形的边，如果设置了边，则需要重新计算\n   * 外接矩形\n   *\n   * @property rings\n   */\n  get rings () { return this._rings }\n  set rings (value) {\n    this._rings = value\n    this._extent = null\n  }\n  \n  /**\n   * 多边形添加线段\n   *\n   * @method addRing\n   * @param ring {Array}\n   *\n   */\n  addRing (ring) {\n    this.rings.push(ring)\n    this._extent = null\n  }\n  \n  /**\n   * 判断点是否在多边形上\n   *\n   * @method containsXY\n   * @param x {Number}\n   * @param y {Number}\n   * @returns {Boolean}\n   */\n  containsXY (x, y) {\n    const coords = this.getCoordinates()\n    const outRing = coords[0]\n    \n    let contains = false\n    if (this._inOneRing(x, y, outRing)) {\n      contains = true\n    }\n    \n    if (coords.length > 1 && contains) {\n      const coordsTemp = coords.slice(1)\n      \n      const inHole = coordsTemp.some( ring =>\n        this._inOneRing(x, y, ring)\n      )\n      \n      if (inHole) {\n        contains = false\n      }\n    }\n    \n    return contains\n  }\n  \n  /**\n   * 判断 x 和 y 的值是否在环内\n   *\n   * @param x {Number}\n   * @param y {Number}\n   * @param ring {Array}\n   * @returns {Boolean}\n   * @private\n   */\n  _inOneRing (x, y, ring) {\n    const px = x\n    const py = y\n    let flag = false\n  \n    for (let i = 0, l = ring.length, j = l - 1; i < l; j = i, i++) {\n      const sx = ring[i][0]\n      const sy = ring[i][1]\n      const tx = ring[j][0]\n      const ty = ring[j][1]\n    \n      // 点与多边形顶点重合\n      if ((sx === px && sy === py) || (tx === px && ty === py)) {\n        return true\n      }\n    \n      // 判断线段两端点是否在射线两侧\n      if ((sy < py && ty >= py) || (sy >= py && ty < py)) {\n        // 线段上与射线 Y 坐标相同的点的 X 坐标\n        let x = sx + (py - sy) * (tx - sx) / (ty - sy)\n      \n        // 点在多边形的边上\n        if (x === px) {\n          return true\n        }\n      \n        // 射线穿过多边形的边界\n        if (x > px) {\n          flag = !flag\n        }\n      }\n    }\n  \n    // 射线穿过多边形边界的次数为奇数时点在多边形内\n    return flag\n  }\n  \n  /**\n   * 计算多边形的内点\n   *\n   * @method getFlatInteriorPoint\n   * @returns {Array} 返回内点，格式 [x, y]\n   */\n  getFlatInteriorPoint () {\n    // 缓存限制\n    if (this._flatInteriorPointRevision !== this.revision ) {\n      const flatCenter = [this.extent.centerX, this.extent.centerY]\n  \n      const ends = [this.getCoordinates()[0].length * 2]\n      const orientedFlatCoordinates = this.getOrientedFlatCoordinates()\n  \n      this._flatInteriorPoint = linearRings(\n        orientedFlatCoordinates, 0, ends, this.stride, flatCenter, 0)\n      \n      this._flatInteriorPointRevision = this.revision\n    }\n    \n    return  this._flatInteriorPoint\n  }\n  \n  /**\n   * 对多边形的边进行顺序化\n   * getOrientedFlatCoordinates\n   * @returns {*}\n   */\n  getOrientedFlatCoordinates () {\n    let orientedFlatCoordinates\n    \n    const flatCoordinates = []\n    const coordinates = this.getCoordinates()[0]\n  \n    coordinates.forEach( point => {\n      flatCoordinates.push(point[0], point[1])\n    })\n  \n    const ends = [flatCoordinates.length]\n    \n    if (linearRingsAreOriented(flatCoordinates, 0, ends, this.stride)) {\n      orientedFlatCoordinates = flatCoordinates\n    } else {\n      orientedFlatCoordinates = flatCoordinates.slice()\n      orientedFlatCoordinates.length = orientLinearRings(orientedFlatCoordinates,\n        0, ends, this.stride)\n    }\n    \n    // this.orientedRevision_ = this.getRevision()\n      \n    return orientedFlatCoordinates\n  }\n  \n  /**\n   * 判断当前多边形是否有洞\n   *\n   * @method hasHoles\n   * @returns {boolean}\n   */\n  hasHoles () {\n    return this.getCoordinates().length > 1\n  }\n  \n  /**\n   * 获取多边形坐标\n   *\n   * @method getCoordinates\n   * @returns {[*,*]}\n   */\n  getCoordinates () {\n    return this.rings\n  }\n\n  /**\n   * 得到最后一个点的坐标，显示表单\n   *\n   * @param {Number} offsetX x的偏移量\n   * @param {Number} offsetY y的偏移量\n   * @returns {[*,*]}\n   */\n  getFormShowPosition (offsetX = 0, offsetY = 0) {\n    const coordinates = this.getCoordinates()[0]\n    if (coordinates.length === 0) {\n      return\n    }\n    \n    const lastPoint = coordinates[coordinates.length - 2]\n    return [lastPoint[0] - offsetX, lastPoint[1] - offsetY]\n  }\n  \n  /**\n   * 设置多边形的坐标\n   *\n   * @method setCoordinates\n   * @param coords\n   */\n  setCoordinates (coords) {\n    this.rings = coords\n    this._extent = null\n    this.stride = 2\n    this.changed()\n  }\n  \n  /**\n   * getCoordinateIndex\n   * @param coord\n   * @returns {*|number}\n   */\n  getCoordinateIndex (coord) {\n    const coords = this.getCoordinates()\n    for (let i = 0, len = coords.length; i < len; i++) {\n      const rings = coords[i]\n      for (let j = 0,jLen = rings.length; j < jLen; j++) {\n        const point = rings[j]\n        if (point[0] === coord[0] && point[1] === coord[1]) {\n          return {\n            ringIndex: i,\n            index: j\n          }\n        }\n      }\n    }\n    \n    return {\n      ringIndex: -1,\n      index: -1\n    }\n  }\n  \n  /**\n   * 克隆多边形\n   *\n   * @method clone\n   * @returns {Polygon}\n   */\n  clone () {\n    const coords = this.getCoordinates()\n    \n    const newCoordinates = []\n    let outRings = []\n    coords.forEach( ring => {\n      ring.forEach(points => {\n        outRings.push([points[0], points[1]])\n      })\n  \n      newCoordinates.push(outRings)\n      outRings = []\n    })\n    \n    const newPolygon = new Polygon()\n    newPolygon.setCoordinates(newCoordinates)\n    \n    return newPolygon\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/polygon.js","/**\n * Created by zhangyong on 2017/5/23.\n */\n\nimport Geometry from '../../geometry/geometry'\n\n/**\n * 判断两个点是否相交\n *\n * @method pointIntersectPoint\n * @param pointA\n * @param pointB\n * @param tolerance {Number}\n * @returns {Boolean}\n */\nexport function pointIntersectPoint (pointA, pointB, tolerance) {\n  const toleranceDistance = tolerance ? tolerance : 2\n  \n  const distance = squaredDistance(pointA.x, pointA.y, pointB.x, pointB.y)\n  if (distance <= toleranceDistance) {\n    return true\n  }\n  \n  return false\n}\n\n/**\n * 判断点是否与线相交\n *\n * @method pointIntersectLine\n * @param pointA\n * @param line\n * @param tolerance {Number}\n * @returns {Boolean}\n */\nexport function pointIntersectLine (pointA, line, tolerance) {\n  const path = line.path\n  const squaredSegmentDistanceFn = squaredSegmentDistance\n  const x = pointA.x\n  const y = pointA.y\n  \n  let find = false\n  for (let i = 0, ii = path.length - 1; i < ii; i++) {\n    let nowP = path[i]\n    let nextP = path[i + 1]\n    let distance = squaredSegmentDistanceFn(x, y, nowP.x, nowP.y, nextP.x, nextP.y)\n    distance = Math.sqrt(distance)\n    if (distance <= tolerance) {\n      find = true\n      break\n    }\n  }\n  \n  return find\n}\n\n/**\n * Return the square of the closest distance between the point\n * and the line segment.\n * @param x\n * @param y\n * @param x1\n * @param y1\n * @param x2\n * @param y2\n * @returns {number}\n */\nexport function squaredSegmentDistance (x, y, x1, y1, x2, y2) {\n  const dx = x2 - x1\n  const dy = y2 - y1\n  if (dx !== 0 || dy !== 0) {\n    let t = ((x - x1) * dx + (y - y1) * dy) / (dx * dx + dy * dy)\n    if (t > 1) {\n      x1 = x2\n      y1 = y2\n    } else if (t > 0) {\n      x1 += dx * t\n      y1 += dy * t\n    }\n  }\n  \n  return squaredDistance(x, y, x1, y1)\n}\n\n/**\n *\n * @param coordinate\n * @param segment\n * @returns {number}\n */\nexport function squaredDistanceToSegment (coordinate, segment) {\n  const closestCoordinate = closestOnSegment(coordinate, segment)\n  return squaredDistance(coordinate[0], coordinate[1], closestCoordinate[0], closestCoordinate[1])\n}\n\n/**\n * 判断两个坐标是否相等\n *\n * @method equals\n * @param coordinate1\n * @param coordinate2\n * @returns {Boolean}\n */\nexport function equals (coordinate1, coordinate2) {\n  let equals = true\n  for (let i = coordinate1.length - 1; i >= 0; --i) {\n    if (coordinate1[i] != coordinate2[i]) {\n      equals = false\n      break\n    }\n  }\n  \n  return equals\n}\n\n/**\n * 计算两点之间的距离的平方\n *\n * @method squaredDistance\n * @param x1\n * @param y1\n * @param x2\n * @param y2\n * @returns {Number} squared distance\n */\nexport function squaredDistance (x1, y1, x2, y2) {\n  const dx = x2 - x1\n  const dy = y2 - y1\n  return dx * dx + dy * dy\n}\n\n/**\n * 计算两点之间的距离\n *\n * @method distance\n * @param coord1\n * @param coord2\n * @returns {Number}\n */\nexport function distance (coord1, coord2) {\n  return Math.sqrt(squaredDistance(coord1[0], coord1[1], coord2[0], coord2[1]))\n}\n\n/**\n *\n * @param coordinate {Array}\n * @param segment\n * @returns {Array}\n */\nexport function closestOnSegment (coordinate, segment) {\n  const x0 = coordinate[0]\n  const y0 = coordinate[1]\n  const start = segment[0]\n  const end = segment[1]\n  const x1 = start[0]\n  const y1 = start[1]\n  const x2 = end[0]\n  const y2 = end[1]\n  const dx = x2 - x1\n  const dy = y2 - y1\n  \n  const along = (dx === 0 && dy === 0) ? 0 :\n  ((dx * (x0 - x1)) + (dy * (y0 - y1))) / ((dx * dx + dy * dy) || 0)\n  \n  let x, y\n  if (along <= 0) {\n    x = x1\n    y = y1\n  } else if (along >= 1) {\n    x = x2\n    y = y2\n  } else {\n    x = x1 + along * dx\n    y = y1 + along * dy\n  }\n  \n  return [x, y]\n}\n\n/**\n *\n * @param flatCoordinates\n * @param offset\n * @param ends\n * @param stride\n * @param x\n * @param y\n * @returns {oolean}\n */\nexport function linearRingsContainsXY (flatCoordinates, offset, ends, stride, x, y) {\n  if (ends.length === 0) {\n    return false\n  }\n  \n  if (!linearRingContainsXY(flatCoordinates, offset, ends[0], stride, x, y)) {\n    return false\n  }\n  \n  let i, ii\n  for (i = 1, ii = ends.length; i < ii; ++i) {\n    if (linearRingContainsXY(flatCoordinates, ends[i - 1], ends[i], stride, x, y)) {\n      return false\n    }\n  }\n  \n  return true\n}\n\n/**\n *\n * @param flatCoordinates\n * @param offset\n * @param end\n * @param stride\n * @param x\n * @param y\n * @returns {boolean}\n */\nexport function linearRingContainsXY (flatCoordinates, offset, end, stride, x, y) {\n  // http://geomalgorithms.com/a03-_inclusion.html\n  // Copyright 2000 softSurfer, 2012 Dan Sunday\n  // This code may be freely used and modified for any purpose\n  // providing that this copyright notice is included with it.\n  // SoftSurfer makes no warranty for this code, and cannot be held\n  // liable for any real or imagined damage resulting from its use.\n  // Users of this code must verify correctness for their application.\n  let wn = 0\n  let x1 = flatCoordinates[end - stride]\n  let y1 = flatCoordinates[end - stride + 1]\n  for (; offset < end; offset += stride) {\n    let x2 = flatCoordinates[offset]\n    let y2 = flatCoordinates[offset + 1]\n    \n    if (y1 <= y) {\n      if (y2 > y && ((x2 - x1) * (y - y1)) - ((x - x1) * (y2 - y1)) > 0) {\n        wn++\n      }\n    } else if (y2 <= y && ((x2 - x1) * (y - y1)) - ((x - x1) * (y2 - y1)) < 0) {\n      wn--\n    }\n    \n    x1 = x2\n    y1 = y2\n  }\n  \n  return wn !== 0\n}\n\n/**\n * 计算在 AB 延长线上的距离点 B d 距离的点\n * @param xa A 点的 X\n * @param ya A 点的 Y\n * @param xb B 点的 X\n * @param yb B 点的 Y\n * @param d 距离 B 点 d 距离\n * @returns {Array} 返回延长线上的点\n */\nexport function getPointInExtendedLineByDistanceFromAB (xa, ya, xb, yb, d) {\n  let xab, yab\n  let xbd\n  let xd, yd\n  \n  xab = xb - xa\n  yab = yb - ya\n  \n  xbd = Math.sqrt((d * d) / ((yab / xab) * (yab / xab) + 1))\n  \n  if (xab > 0) {\n    xbd = Math.sqrt((d * d) / ((yab / xab) * (yab / xab) + 1))\n  } else {\n    xbd = -Math.sqrt((d * d) / ((yab / xab) * (yab / xab) + 1))\n  }\n  \n  xd = xb + xbd\n  yd = yb + yab / xab * xbd\n  \n  return [xd, yd]\n}\n\nexport function simplify(geometry) {\n  if (!geometry) {\n    return geometry\n  }\n  \n  let coordinates\n  const geoType = geometry.geometryType\n  if (geoType === Geometry.POLYGON) {\n    coordinates = geometry.getCoordinates()[0]\n  } else if (geoType === Geometry.LINE) {\n    coordinates = geometry.getCoordinates()\n    \n    const sliceCoords = coordinates.slice(1, coordinates.length - 2)\n    const newCoords = [coordinates[0]]\n    \n    for (let i = 0, len = sliceCoords.length ;i < len; i += 2) {\n      newCoords.push(sliceCoords[i])\n    }\n  \n    newCoords.push(coordinates[coordinates.length - 1])\n    geometry.setCoordinates(newCoords)\n  }\n}\n\nexport default {\n  linearRingContainsXY,\n  linearRingsContainsXY,\n  pointIntersectPoint,\n  squaredDistance,\n  closestOnSegment,\n  getPointInExtendedLineByDistanceFromAB,\n  equals,\n  simplify,\n  distance\n}\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/support/geometryutil.js","/**\n * Created by zhangyong on 2017/5/22.\n */\n//  The BaseEvent is a base class, all event dinfined in library should inherit this.\n//\n// The sub event class can define it's own property ,\n//\n//  which can be passed to other event Listener via event dispatch.\n/**\n * 定义事件模型基类，自定义事件必须继承该类。\n *\n * 事件类及其继承者用于事件传递、数据传送和信息通告。\n *\n * @class BaseEvent\n * @constructor\n * @module core\n *\n */\nexport default class BaseEvent {\n  \n  /**\n   * 构造函数\n   *\n   * @constructor\n   * @param type\n   */\n  constructor (type) {\n  \n    /**\n     * 是否停止事件的冒泡\n     *\n     * @type {Boolean}\n     * @property propagatinoStopped\n     */\n    this.propagatinoStopped = false\n  \n    /**\n     * 事件标示\n     *\n     * @example'mousedown' | 'mousemove' | 'click'\n     *\n     * @type {String}\n     * @property type\n     */\n    this.type = type\n  \n    /**\n     * 事件源\n     *\n     * @type {Object}\n     * @property target\n     */\n    this.target = null\n  }\n  \n}\n\n/**\n *\n * 用于阻止事件的冒泡\n *\n * @param evt {Object} evt DOM event model\n * @static\n * @method stopPropagation\n */\nBaseEvent.stopPropagation = evt => evt.stopPropagation()\n\n/**\n *\n * 用于阻止浏览器的默认行为\n *\n * @static\n * @method preventDefault\n * @param evt {Object} evt DOM event model\n */\nBaseEvent.preventDefault = evt => evt.preventDefault()\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/baseevent.js","\nimport BaseLayer from './baselayer'\nimport {Style} from '../style/style'\nimport {ExtentUtil} from '../geometry/support/extentutil'\nimport FeatureEvent from '../meek/featureevent'\nimport {EventType} from '../meek/eventtype'\nimport {listen, unlistenByKey} from '../core/eventmanager'\nimport Geometry from '../geometry/geometry'\n\n/**\n * FeatureLayer\n *\n * class FeatureLayer\n * @extends BaseObject\n * @module layer\n * @constructor\n */\nexport default class FeatureLayer extends BaseLayer {\n\n  constructor (options = {}) {\n    super(options)\n  \n    /**\n     *\n     * @type {Array}\n     * @private\n     */\n    this._features = []\n  \n    /**\n     *\n     * @type {null}\n     * @private\n     */\n    this._style = null\n  \n    /**\n     *\n     * @type {null}\n     * @private\n     */\n    this._styleFunction = null\n  \n    /**\n     *\n     * @type {Map}\n     * @private\n     */\n    this._featureChangeKeys = new Map()\n  \n    /**\n     *\n     */\n    this.style = options.style\n    \n    // add features if passed by options\n    if (options.features) {\n      this.addFeatures(options.features)\n    }\n  \n    /**\n     * zIndex\n     *\n     * @property zIndex\n     * @type {Number}\n     */\n    this.zIndex = options.zIndex || 2\n  \n    /**\n     * The rendering buffer will be used for building an extent that\n     * limit geometries rendering\n     * @type {number}\n     * @private\n     */\n    this._renderBuffer = options.renderBufferValue !== undefined ?\n      options.renderBufferValue : 100\n  \n  }\n  \n  /**\n   * 清除所有features\n   *\n   * @method clear\n   */\n  clear () {\n    if (this._features.length !== 0) {\n      this._features = []\n      \n      // remove the event listener from feature\n      const unlistenByKeyFn = unlistenByKey\n      \n      this._featureChangeKeys.forEach((value) => {\n        unlistenByKeyFn(value)\n      })\n      \n      this._featureChangeKeys.clear()\n      \n      this.dispatchEvent(new FeatureEvent(FeatureEvent.EventType.CLEAR))\n      this.dispatchEvent(FeatureEvent.EventType.FEATURE_COLLECTION_CHANGED)\n      this.changed()\n    }\n  }\n\n  /**\n   * 获取features\n   *\n   * @returns {Array}\n   */\n  get features () { return this._features }\n  \n  /**\n   * 通过id查找feature\n   *\n   * @param id\n   * @returns {Boolean}\n   */\n  findFeature (id) {\n    const features = this.features\n    return features.find( f => f.id === id )\n  }\n  \n  /**\n   * 向layer中添加features\n   *\n   * @method addFeatures\n   * @param {Object} features\n   * @returns {Boolean}\n   */\n  addFeatures (features) {\n    if (!Array.isArray(features)) {\n      return false\n    }\n    \n    this._addFeaturesInner(features)\n    this.dispatchEvent(FeatureEvent.EventType.FEATURE_COLLECTION_CHANGED)\n    this.changed()\n  }\n  \n  /**\n   * 判断feature是否存在\n   *\n   * @param feature\n   * @returns {Boolean}\n   */\n  hasFeature (feature) {\n    if (feature === null || feature === undefined) {\n      return false\n    }\n    \n    const featureId = feature.id\n    const features = this.features\n    const findIndex = features.findIndex(f => f.id === featureId )\n    \n    return findIndex > -1\n  }\n  \n  /**\n   * 添加feature到layer的集合中，并派发feature事件\n   *\n   * addFeaturesInner\n   * @param features\n   * @private\n   */\n  _addFeaturesInner (features) {\n    features.forEach(feature => {\n      if (!this.hasFeature(feature)) {\n        this.features.push(feature)\n        \n        this._setupChangeEvents(feature.id, feature)\n        this.dispatchEvent(new FeatureEvent(FeatureEvent.EventType.ADD_FEATURE, feature))\n      }\n    })\n  }\n  \n  /**\n   * 添加feature到layer的集合中\n   *\n   * @method addFeature\n   * @param feature\n   * @returns {Boolean}\n   */\n  addFeature (feature) {\n    if (!feature) {\n      return false\n    }\n    \n    this._addFeaturesInner([feature])\n    this.dispatchEvent(FeatureEvent.EventType.FEATURE_COLLECTION_CHANGED)\n    this.changed()\n  }\n  \n  /**\n   * 获取当前鼠标点的所有feature\n   *\n   * @method forEachFeatureAtPiexl\n   * @param frameState\n   * @param piexl {Array}\n   * @param callback\n   * @param tolerance {Number}\n   * @returns {*}\n   */\n  forEachFeatureAtPiexl (frameState,piexl,callback,tolerance) {\n    // frameState 携带 view 信息\n  \n    // 1、计算当前屏幕内的feature\n    const features = this._getCurrentExtentFeatures()\n    \n    // calculate features that their extent has intersected with a given point\n    const extentFeatures = this._getIntersectedFeatures(piexl,features)\n  \n    const piexlX = piexl[0]\n    const piexlY = piexl[1]\n    const options = {\n      tolerance: tolerance * frameState.viewState.resolution\n    }\n    \n    const result = extentFeatures.filter( (feature) =>\n      feature.geometry.containsXY(piexlX, piexlY, options)\n    )\n    \n    return result\n  }\n  \n  /**\n   *\n   * @param point\n   * @param features\n   * @private\n   */\n  _getIntersectedFeatures (point, features) {\n    return features.filter( (feature) =>\n      feature.geometry.pointInExtent(point)\n    )\n  }\n  \n  /**\n   *\n   * @returns {*}\n   * @private\n   */\n  _getCurrentExtentFeatures () {\n    return this.features\n  }\n  \n  /**\n   * 从集合中移除feature\n   *\n   * @param feature\n   * @returns {Boolean}\n   */\n  removeFeature (feature) {\n    const features = this.features\n    if (features.length === 0) {\n      return false\n    }\n    \n    const featureId = feature.id\n    const index = features.findIndex( f =>\n      f.id === featureId\n    )\n    \n    \n    if (index > -1) {\n      features.splice(index, 1)\n      \n      this._featureChangeKeys.delete(featureId)\n      \n      this.dispatchEvent(new FeatureEvent(FeatureEvent.EventType.REMOVE_FEATURE, feature))\n      this.dispatchEvent(FeatureEvent.EventType.FEATURE_COLLECTION_CHANGED)\n      this.changed()\n    }\n  }\n  \n  /**\n   *\n   * @param featureKey\n   * @param feature\n   * @private\n   */\n  _setupChangeEvents (featureKey, feature) {\n    this._featureChangeKeys.set(featureKey, listen(feature,\n      EventType.CHANGE, this._handleFeatureChange, this))\n  }\n  \n  /**\n   *\n   * @private\n   */\n  _handleFeatureChange () {\n    this.changed()\n  }\n\n  /**\n   * 样式读写器\n   *\n   * @property style\n   * @param value\n   */\n  set style (value) {\n    this._style = value !== undefined ? value : Style.defaultFunction()\n    this._styleFunction = value === null ? undefined :Style.createFunction(this._style)\n  }\n  \n  get style () {\n    if(this._style === null){\n      this._style = Style.defaultFunction()\n    }\n    \n    return this._style\n  }\n  \n  /**\n   * renderBuffer读写器\n   *\n   */\n  get renderBuffer() { return this._renderBuffer }\n  set renderBuffer (renderBufferValue) {\n    if (this._renderBuffer !== renderBufferValue) {\n      this._renderBuffer = renderBufferValue\n    }\n  }\n  \n  /**\n   * 加载当前屏幕的 features\n   *\n   * 默认会把点、线放在队列尾部\n   *\n   * @method loadFeature\n   * @param extent {Geometry}\n   * @returns {feature}\n   */\n  loadFeature (extent) {\n    const features = this.features\n    const intersects = ExtentUtil.intersects\n    const createOrUpdate = ExtentUtil.createOrUpdate\n    const newFeatures = []\n    const pointFeatures = []\n    const lineFeatures = []\n    \n    features.forEach(feature => {\n      // 判断图形是否显示\n      if (feature.display) {\n        const geometry = feature.geometry\n        const geometryExtent = geometry.extent\n        const extentArr = createOrUpdate(geometryExtent.xmin,\n          geometryExtent.ymin, geometryExtent.xmax, geometryExtent.ymax)\n\n        if (intersects(extentArr, extent)) {\n          const geometryType = geometry.geometryType\n          if (geometryType === Geometry.POINT ||\n              geometryType === Geometry.MULTI_POINT ) {\n            pointFeatures.push(feature)\n          } else if (geometryType === Geometry.LINE ||\n            geometryType === Geometry.MULTI_LINE) {\n            lineFeatures.push(feature)\n          } else {\n            newFeatures.push(feature)\n          }\n        }\n      }\n    })\n\n    return [].concat(newFeatures, lineFeatures, pointFeatures)\n  }\n\n  /**\n   * 获取样式\n   *\n   * @method styleFunction\n   * @returns {null|undefined|*}\n   */\n  get styleFunction () { return this._styleFunction }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lyr/featurelayer.js","/**\n * Created by zhangyong on 2017/5/23.\n */\n\nimport BrowserEvent from '../meek/browserevent'\n\n\nexport function singleClick (browserEvent) {\n  return browserEvent.type === BrowserEvent.SINGLE_CLICK\n}\n\nexport function mouseWheel (browserEvent) {\n  return browserEvent.type === BrowserEvent.MOUSE_WHEEL ||\n         browserEvent.type === BrowserEvent.WHEEL\n}\n\nexport function noModifierKeys (browserEvent) {\n  const originalEvent = browserEvent.originalEvent\n  return ( !originalEvent.altKey &&\n  !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n  !originalEvent.shiftKey)\n}\n\n\nexport function targetNotEditable (mapBrowserEvent) {\n  const target = mapBrowserEvent.originalEvent.target\n  const tagName = target.tagName\n  return (\n  tagName !== 'INPUT' &&\n  tagName !== 'SELECT' &&\n  tagName !== 'TEXTAREA')\n}\n\nexport default {\n  singleClick,\n  mouseWheel,\n  noModifierKeys,\n  targetNotEditable\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/mousekey.js","/**\n * Created by zhangyong on 2017/6/5.\n */\n\nexport default class Obj {\n  \n  /**\n   * Get a collection from object\n   * @param object\n   * @returns {Array}\n   */\n  static getValues (object) {\n    const values = []\n    for (let property in object) {\n      values.push(object[property])\n    }\n    return values\n  }\n  \n  /**\n   * Clear all properties in object\n   * @param object\n   */\n  static clear (object) {\n    for (let property in object) {\n      Reflect.deleteProperty(object, property)\n    }\n  }\n  \n  /**\n   * Convert an object to a map instance\n   * @param obj\n   * @returns {Map}\n   */\n  static objectToMap (obj) {\n    let map = new Map()\n    \n    for (let ke of Object.keys(obj)) {\n      map.set(ke, obj[ke])\n    }\n    \n    return map\n  }\n  \n  /**\n   *\n   * Convert a map object to object\n   *\n   * @static\n   * @method mapToObject\n   * @param map {Map} 传入的 Map 的对象\n   * @returns {Object} 装换成后的 Object 的对象\n   */\n  static mapToObject (map) {\n    // 合法性判断\n    if (map === undefined || map === null) {\n      return {}\n    }\n    \n    let object = {}\n    map.forEach( (value, key) => {\n      object[key] = value\n    })\n    \n    return object\n  }\n  \n  \n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/obj.js","/**\n * Created by zypc on 2016/11/15.\n */\n\nimport BaseStyle from './basestyle'\nimport TextStyle from './textstyle'\n\n/**\n * 定义一个线图形的样式\n *\n * @class LineStyle\n * @extends BaseStyle\n * @module style\n * @constructor\n * @example\n *\n *     var lineStye = new Datatang.LineStyle([0, 0, 255],1,3,\n *        Datatang.LineStyle.LineCap.ROUND,\n *        Datatang.LineStyle.LineJion.ROUND)\n */\nexport default class LineStyle extends BaseStyle {\n  \n  /**\n   * @constructor\n   * @param color\n   * @param alpha\n   * @param width\n   * @param style\n   * @param lineCap\n   * @param lineJion\n   * @param miterLimit\n   */\n  constructor (color = [255,255,255], alpha = 1, width = 1,\n        style = LineStyle.SOLID,lineCap = LineStyle.LineCap.BUTT,\n        lineJion = LineStyle.LineJion.MITER,miterLimit = 10) {\n    super(color, style, alpha)\n\n    this.width = width\n    this.lineCap = lineCap\n    this.lineJion = lineJion\n    this.miterLimit = miterLimit\n    this.textStyle = new TextStyle()\n  }\n  \n  /**\n   * 线宽\n   *\n   * @property width\n   * @type {Number}\n   */\n  get width () { return this._width }\n  set width (value) { this._width = value }\n  \n  /**\n   * 线的末端样式\n   *\n   * @property lineCap\n   * @type {Number}\n   */\n  set lineCap (value) { this._lineCap = value }\n  get lineCap () { return this._lineCap }\n  \n  /**\n   * 交叉线时的样式\n   *\n   * @property lineJion\n   * @type {Number}\n   */\n  set lineJion (value) { this._lineJion = value }\n  get lineJion () { return this._lineJion }\n  \n  /**\n   * 斜角缝限制\n   *\n   * @property miterLimit\n   * @type {Number}\n   */\n  set miterLimit (value) { this._miterLimit = value }\n  get miterLimit () { return this._miterLimit }\n\n  /**\n   * 克隆线样式\n   *\n   * @method clone\n   * @returns {LineStyle}\n   */\n  clone () {\n    const newStyle = new LineStyle(this.color, this.alpha, this.width,\n      this.style, this.lineCap, this.lineJion, this.miterLimit)\n\n    if (this.textStyle) {\n      newStyle.textStyle = this.textStyle\n    }\n\n    return newStyle\n  }\n\n}\n\n/**\n * 定义线的样式\n * @type {string}\n */\nLineStyle.SOLID = 'solid'\n\n/**\n * TODO 由郭靖来处理，参考 PointStyle\n * @type {string}\n */\nLineStyle.DASH = 'dash'\n\nLineStyle.DOT = 'dot'\n\nLineStyle.DASHDOT = 'dashdot'\n\nLineStyle.DASHDOTDOT = 'dashdotdot'\n\nLineStyle.NULL = 'none'\n\nLineStyle.LineCap = {\n  BUTT: 'butt',\n  ROUND: 'round',\n  SQUARE: 'square'\n}\n\n// visit http://www.w3school.com.cn/tags/canvas_linejoin.asp for more infomation\nLineStyle.LineJion = {\n  MITER: 'miter',// 默认，创建尖角\n  BEVEL: 'bevel',\n  ROUND: 'round'\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/style/linestyle.js","/**\n * Created by zhangyong on 2017/3/17.\n */\n\nimport Geometry from '../geometry/geometry'\nimport FillStyle from './fillstyle'\nimport LineStyle from './linestyle'\nimport PointStyle from './pointstyle'\n\nexport const Style = {}\n\n/**\n * 设置缺省图形style\n *\n * Create a defaut style for feature layer\n * @returns {null|Array|[*]}\n */\nStyle.defaultFunction = function () {\n  if (!Style._default) {\n    const white = [255, 255, 255]\n    const blue = [0, 153, 255]\n    const width = 1.5\n  \n    Style._default = {}\n    \n    // 面样式 polygon style\n    Style._default[Geometry.POLYGON] = [\n      new FillStyle(white, new LineStyle(blue, 1, 1.25), 0.2)\n    ]\n    Style._default[Geometry.MULTI_POLYGON] = Style._default[Geometry.POLYGON]\n    Style._default[Geometry.PARALLELOGRAM] = Style._default[Geometry.POLYGON]\n    \n    // same as polygon style\n    Style._default[Geometry.EXTENT] = Style._default[Geometry.POLYGON]\n  \n    // 线样式 line style\n    Style._default[Geometry.LINE] = [\n      new LineStyle(blue, 1, width)// 内框\n    ]\n  \n    // 点样式 point style\n    Style._default[Geometry.POINT] = [new PointStyle(10,white,1,new LineStyle(blue,1,width))]\n    \n  }\n  \n  return Style._default\n}\n\n/**\n * Create a default style while drawing\n * @returns {{}}\n */\nStyle.createDefaultEditing = function () {\n  const styles = {}\n  const white = [255, 255, 255]\n  const blue = [0, 153, 255]\n  const width = 1.5\n  \n  // 面样式\n  styles[Geometry.POLYGON] = [\n    new FillStyle(white,// 填充\n    new LineStyle(blue,1,1)// 边框\n    ,0.2)\n  ]\n  \n  styles[Geometry.MULTI_POLYGON] = styles[Geometry.POLYGON]\n  styles[Geometry.EXTENT] = styles[Geometry.POLYGON]\n  styles[Geometry.PARALLELOGRAM] = styles[Geometry.POLYGON]\n    \n  // 线样式\n  styles[Geometry.LINE] = [\n    new LineStyle(white,1,width + 1,LineStyle.LineCap.ROUND,LineStyle.LineJion.ROUND),// 外框\n    new LineStyle(blue,1,width,LineStyle.LineCap.ROUND,LineStyle.LineJion.ROUND)// 内框\n  ]\n  styles[Geometry.MULTI_LINE] = styles[Geometry.LINE]\n  \n  // 点样式\n  styles[Geometry.POINT] = [new PointStyle(10, white, 0.1, new LineStyle(blue, 1, 2))]\n  styles[Geometry.MULTI_POINT] = styles[Geometry.POINT]\n  \n  return styles\n}\n\n/**\n *\n * @returns {{}}\n */\nStyle.createDefaultSelecting = function () {\n  const styles = {}\n  const white = [255, 255, 255]\n  const blue = [0, 153, 255]\n  const width = 3\n  const outsideLine = new LineStyle(white,1,width + 2,LineStyle.LineCap.ROUND,LineStyle.LineJion.ROUND)// 外框\n  const insideLine = new LineStyle(blue,1,width,LineStyle.LineCap.ROUND,LineStyle.LineJion.ROUND)\n  // 面样式\n  styles[Geometry.POLYGON] = [\n    new FillStyle(white, outsideLine,0.5),\n\n    new FillStyle(white, insideLine,0)\n  ]\n  styles[Geometry.MULTI_POLYGON] = styles[Geometry.POLYGON]\n  styles[Geometry.EXTENT] = styles[Geometry.POLYGON]\n  \n  // 线样式\n  styles[Geometry.LINE] = [\n    outsideLine,// 外框\n    insideLine// 内框\n  ]\n  styles[Geometry.MULTI_LINE] = styles[Geometry.LINE]\n  \n  // 点样式\n  styles[Geometry.POINT] = [new PointStyle(12,blue,1,new LineStyle(blue,1,1))]\n  styles[Geometry.MULTI_POINT] = styles[Geometry.POINT]\n  \n  return styles\n}\n\n/**\n * Convert the passed obj into a style function.\n *\n * @param obj\n * @returns {*}\n */\nStyle.createFunction = function(obj) {\n  let styleFunction\n  \n  if (typeof obj === 'function') {\n    styleFunction = obj\n  } else {\n    let styles\n    \n    if (Array.isArray(obj)) {\n      styles = obj\n    } else {\n      styles = [obj]\n    }\n    \n    styleFunction = function(feature) {\n      return styles[0][feature.geometry.geometryType]\n    }\n  }\n  \n  return styleFunction\n}\n\n\nexport default {\n  Style\n}\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/style/style.js","/**\n * Created by zhangyong on 2017/3/17.\n */\n\n/**\n *\n * @param optWidth\n * @param optHeight\n * @returns {CanvasRenderingContext2D|WebGLRenderingContext}\n */\nexport function createCanvasContext2D (optWidth, optHeight) {\n  let canvas = document.createElement('CANVAS')\n  if (optWidth) {\n    canvas.width = optWidth\n  }\n  \n  if (optHeight) {\n    canvas.height = optHeight\n  }\n  \n  return canvas.getContext('2d')\n}\n\n/**\n *\n * @param element\n * @returns {number}\n */\nexport function outerWidth (element) {\n  let width = element.offsetWidth\n  const style = getComputedStyle(element)\n  width += parseInt(style.marginLeft, 10) + parseInt(style.marginRight, 10)\n  \n  return width\n}\n\n/**\n *\n * @param element\n * @returns {number}\n */\nexport function outerHeight (element) {\n  let height = element.offsetHeight\n  const style = getComputedStyle(element)\n  height += parseInt(style.marginTop, 10) + parseInt(style.marginBottom, 10)\n  \n  return height\n}\n\n\nexport function removeNode (node) {\n  return node && node.parentNode ? node.parentNode.removeChild(node) : null\n}\n\n/**\n *\n * @param node\n */\nexport function removeChildren (node) {\n  while (node.lastChild) {\n    node.removeChild(node.lastChild)\n  }\n}\n\nexport default {\n  createCanvasContext2D,\n  outerWidth,\n  outerHeight,\n  removeChildren,\n  removeNode\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/domutil.js","/**\n * Created by zypc on 2016/11/13.\n */\n\n\n/**\n * 将rbg数组装换成rgba的字符串格式\n * @param color rgb数组\n * @param alpha 透明度\n * @returns {string} 返回rgba格式字符串\n */\nexport function colorToString(color,alpha = 1){\n  let r = color[0]\n  if (r != (r | 0)) {\n    r = (r + 0.5) | 0\n  }\n  \n  let g = color[1]\n  if (g != (g | 0)) {\n    g = (g + 0.5) | 0\n  }\n  \n  let b = color[2]\n  if (b != (b | 0)) {\n    b = (b + 0.5) | 0\n  }\n  \n  return `rgba(${r}, ${g} , ${b} , ${alpha} )`\n}\n\nexport default {\n  colorToString\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/helpers.js","/**\n * Created by zhangyong on 2017/8/2.\n */\n\nimport BaseObject from '../core/baseobject'\n\nimport {removeNode} from '../utils/domutil'\nimport {unlistenByKey} from '../core/eventmanager'\n\nexport default class Control extends BaseObject {\n  constructor (options = {}) {\n    super()\n    \n    this._element = options.element ? options.element : null\n    \n    this._target = null\n    \n    this._map = null\n    \n    this._listenerKeys = []\n    \n    \n    if (options.target) {\n      this.target = options.target\n    }\n  }\n  \n  get map() { return this._map }\n  set map(value) {\n    if (this.map) {\n      removeNode(this._element)\n    }\n    \n    this._listenerKeys.forEach(listener => unlistenByKey(listener) )\n    \n    this._listenerKeys.length = 0\n    this._map = value\n    \n    if (this._map) {\n      const target = this._target ? this._target : value.overlayContainerStopEvent\n      target.appendChild(this._element)\n      \n      value.render()\n    }\n  }\n  \n  set target(value) {\n    this._target = typeof value === 'string' ?\n      document.getElementById(value) :\n      value\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/control/control.js","/**\n * Created by zhangyong on 2017/8/23.\n */\n\nimport Geometry from './geometry'\nimport Polygon from './polygon'\nimport {distance} from '../geometry/support/geometryutil'\n\nimport {getPointInExtendedLineByDistanceFromAB} from '../geometry/support/geometryutil'\n\nexport default class Parallelogram extends Polygon {\n  \n  constructor (coordinates) {\n    super(coordinates)\n  }\n  \n  get geometryType () {\n    return Geometry.PARALLELOGRAM\n  }\n  \n  getCoordinateIndex (coord) {\n    return this.getCoordinates()[0].findIndex( points =>\n      points[0] === coord[0] && points[1] === coord[1]\n    )\n  }\n  \n  clone () {\n    return new Parallelogram(this.getCoordinates())\n  }\n  \n  /**\n   *\n   * @param coordinates\n   * @returns {Array}\n   */\n  static getTheLastPoint (coordinates) {\n    const firstPoint = coordinates[0]\n    const secondPoint = coordinates[1]\n    const thirdPoint = coordinates[2]\n    \n    const dx = thirdPoint[0] - secondPoint[0]\n    const dy = thirdPoint[1] - secondPoint[1]\n    \n    return [firstPoint[0] + dx, firstPoint[1] + dy]\n  }\n  \n  \n  /**\n   * 用于计算和更新平行四边形的顶点\n   *\n   * @param p 平行四边形对象\n   * @param vertex 新移动的点\n   * @param oldVertex 上次移动的点\n   * @param dragSegment 数据对象\n   * @returns {*} 返回新的点集合（3维数组）\n   */\n  static updateCoordinatesForModification(p, vertex, oldVertex, dragSegment) {\n    let dis = 0\n    if (oldVertex) {\n      dis = distance (oldVertex, vertex)\n    }\n    \n    const oldRingsCoordinates = p.getCoordinates()\n    if (dis === 0) {\n      return oldRingsCoordinates\n    }\n    \n    const oldCoordinates = oldRingsCoordinates[0]\n    const segement = dragSegment[0]\n    const edgeIndex = segement.index\n  \n    let firstCoord\n    let nowCood\n    let otherCood\n    \n    if (edgeIndex === 0 || edgeIndex === 4) {\n      firstCoord = oldCoordinates[3]\n      nowCood = oldCoordinates[0]\n      otherCood = oldCoordinates[1]\n    } else {\n      firstCoord = oldCoordinates[edgeIndex - 1]\n      nowCood = oldCoordinates[edgeIndex]\n      otherCood = oldCoordinates[edgeIndex + 1]\n    }\n    \n    // 计算延长线上的一点\n    const newCood1 = getPointInExtendedLineByDistanceFromAB(firstCoord[0],\n      firstCoord[1], nowCood[0], nowCood[1], dis)\n    \n    // 计算向量\n    const tempXX = nowCood[0] - firstCoord[0]\n    const tempYY = nowCood[1] - firstCoord[1]\n    const tempX2 = vertex[0] - oldVertex[0]\n    const tempY2 = vertex[1] - oldVertex[1]\n    \n    // 使用向量的点积，来计算两个向量的方向是否一致\n    // 如果 <0 则表示异向\n    const direction = ( tempX2 * tempXX ) + (tempY2 * tempYY)\n    \n    const dx = newCood1[0] - nowCood[0]\n    const dy = newCood1[1] - nowCood[1]\n    let newCood2\n    \n    // 不同方向\n    if (direction < 0) {\n      newCood1[0] = nowCood[0] - dx\n      newCood1[1] = nowCood[1] - dy\n  \n      newCood2 = [otherCood[0] - dx, otherCood[1] - dy]\n    } else {\n      newCood2 = [otherCood[0] + dx, otherCood[1] + dy]\n    }\n    \n    \n    oldCoordinates[edgeIndex] = newCood1\n    oldCoordinates[edgeIndex + 1] = newCood2\n    \n    if (edgeIndex === 0) {\n      oldCoordinates[4] = oldCoordinates[0]\n    } else if (edgeIndex === 4 || edgeIndex === 3) {\n      oldCoordinates[0] = oldCoordinates[4]\n    }\n    \n    return [oldCoordinates]\n  }\n  \n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/parallelogram.js","/**\n * Created by zypc on 2016/11/13.\n */\n\nimport Geometry from './geometry'\nimport Extent from './extent'\nimport {ExtentUtil} from './support/extentutil'\nimport {squaredDistance} from './support/geometryutil'\n\n\n/**\n * 定义点类和数据结构\n *\n * @class Point\n * @extends Geometry\n * @module geometry\n * @constructor\n * @example\n *\n *    var point = new Datatang.Point(100, 100)\n */\nexport default class Point extends Geometry {\n\n  /**\n   * 根据x和y构建一个点对象\n   * @param x 默认值为0\n   * @param y 默认值为0\n   * @constructor\n   */\n  constructor (xValue, yValue) {\n    super()\n\n    this.x = xValue\n    this.y = yValue\n  }\n\n  /**\n   * 获取对象的几何类型\n   *\n   * @protected\n   */\n  get geometryType () { return Geometry.POINT }\n\n  /**\n   * 获取点的最小外接矩形\n   *\n   * @note 点是没有最小外接矩形\n   * @returns {null}\n   */\n  get extent () {\n    if (!this._extent) {\n      const extentObj = ExtentUtil.createScaleExtent(this, 8)\n      this._extent = new Extent(extentObj[0], extentObj[1], extentObj[2], extentObj[3])\n    }\n    \n    return this._extent\n  }\n\n  /**\n   * 获取 X 坐标值\n   *\n   * @property x\n   * @type x {number}\n   */\n  get x () { return this._x }\n  set x (value) { this._x = value }\n  \n  /**\n   * 获取 Y 坐标值\n   *\n   * @property y\n   * @type {number}\n   */\n  get y () { return this._y }\n  set y (value) { this._y = value }\n\n  /**\n   * 根据x,y的偏移量得到点\n   *\n   * @method offset\n   * @param nx x轴偏移量\n   * @param ny y轴偏移量\n   * @returns {Datatang.Point} 返回偏移以后的点对象\n   */\n  offset (nx, ny) {\n    return new Point(this.x + nx, this.y + ny)\n  }\n  \n  /**\n   * containsXY\n   * @param x\n   * @param y\n   * @param opt\n   * @returns {boolean}\n   */\n  containsXY (x, y, opt = {}) {\n    const tolerance = opt.tolerance ? opt.tolerance : 2\n    const pointA = this\n\n    const distance = squaredDistance(pointA.x, pointA.y, x, y)\n    if (Math.sqrt(distance/2) <= tolerance) {\n      return true\n    }\n\n    return false\n  }\n\n  /**\n   * 更新x,y坐标值\n   *\n   * @method update\n   * @param nx x新值\n   * @param ny y新值\n   */\n  update (nx, ny) {\n    this.x = nx\n    this.y = ny\n    \n    this._extent = null\n  }\n  \n  /**\n   *\n   *\n   * getFlatInteriorPoint\n   * @returns {[]}\n   */\n  getFlatInteriorPoint () {\n    return this.getCoordinates()\n  }\n  \n  /**\n   * 获取点的坐标\n   *\n   * @method getCoordinates\n   * @returns {Array}\n   */\n  getCoordinates () {\n    return [this.x, this.y]\n  }\n\n  /**\n   * 点的位置就是坐标点的位置减去偏移量的位置\n   *\n   * @method getFormShowPosition\n   * @param {Number} offsetX x的偏移量\n   * @param {Number} offsetY y的偏移量\n   * @return {[]}\n   */\n  getFormShowPosition (offsetX = 0, offsetY = 10) {\n    return [this.x - offsetX, this.y - offsetY]\n  }\n\n  /**\n   * 设置点的坐标\n   *\n   * @method setCoordinates\n   * @param coordinates\n   */\n  setCoordinates (coordinates) {\n    this.update(coordinates[0], coordinates[1])\n    this.changed()\n  }\n  \n  /**\n   * getCoordinateIndex\n   * @returns {number}\n   */\n  getCoordinateIndex () {\n    return 0\n  }\n  \n  /**\n   * 判断两个图形对象是否相等\n   *\n   * 判断标准：该图形的所有顶点值是否一致\n   *\n   * @method equal\n   * @param geometry\n   * @return {Boolean}\n   */\n  equal (geom) {\n    let equals = false\n    if (geom !== null) {\n      equals = ((this.x === geom.x && this.y === geom.x) ||\n      (Number.isNaN(this.x) && Number.isNaN(this.y) && Number.isNaN(geom.x) && Number.isNaN(geom.y)))\n    }\n    return equals\n  }\n  \n  /**\n   * 克隆点\n   *\n   * @method clone\n   * @returns {Point}\n   */\n  clone () {\n    return new Point(this.x, this.y)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/point.js","/**\n * Created by zhangyong on 2017/6/6.\n */\n\n\nexport const ImageState = {}\n\n/**\n * On IDLE\n * @type {number}\n */\nImageState.IDLE = 0\n\n/**\n * On loading\n * @type {number}\n */\nImageState.LOADING = 1\n\n/**\n * Already loaded\n * @type {number}\n */\nImageState.LOADED = 2\n\n/**\n * Error occurred\n * @type {number}\n */\nImageState.ERROR = 3\n\nexport default {\n  ImageState\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lyr/image/imagestate.js","/**\n * Created by zypc on 2016/11/15.\n */\n\nimport BaseObject from '../core/baseobject'\nimport Obj from '../utils/obj'\nimport {listen, unlistenByKey} from '../core/eventmanager'\nimport {EventType} from '../meek/eventtype'\nimport Geometry from '../geometry/geometry'\nimport LineStyle from '../style/linestyle'\n\n/**\n * The feature class is intent to represent geographic features,with a geometry ,a style and\n * other attrubutes properties.\n * Feature provides a function named style that can be seted a style you want,\n * otherwise will use the style of feature layer.\n *\n * @class Feature\n * @extends BaseObject\n * @module meek\n * @constructor\n */\nexport default class Feature extends BaseObject {\n\n  constructor(geometry, attributes = {}, displayText, style) {\n    super()\n\n    /**\n     *\n     * @type {undefined}\n     * @private\n     */\n    this._styleFunction = undefined\n\n    /**\n     *\n     * @type {null}\n     * @private\n     */\n    this._geometryChangeKey = null\n\n\n    /**\n     *\n     */\n    this.geometry = geometry\n\n    /**\n     * 设置feature属性\n     */\n    this.initArribute(attributes)\n\n\n    /**\n     * 设置feature样式\n     *\n     */\n    this.style = style\n\n    /**\n     * 设置feature文本\n     *\n     */\n    this.displayText = displayText\n\n    /**\n     * 设置feature是否显示\n     *\n     * @type {Boolean}\n     * @private\n     */\n    this.display = true\n\n    /**\n     * 设置feature的标签是否显示\n     * @type {Boolean}\n     * @private\n     */\n    this.textDisplay = true\n\n    /**\n     * 设置feature的样式是否高亮\n     * @type {Boolean}\n     * @private\n     */\n    this.styleHighLight = false\n\n  }\n\n  /**\n   *\n   * @private\n   */\n  _handleGeometryChanged() {\n    this.changed()\n  }\n\n  /**\n   * 设置feature属性\n   *\n   * @method initArribute\n   * @param attributes\n   */\n  initArribute(attributes) {\n    if (!(attributes instanceof Object)) {\n      attributes = {}\n    }\n    \n    this._attributesMap = Obj.objectToMap(attributes)\n  }\n\n  /**\n   * 获取feature属性\n   *\n   * @method get\n   * @param property\n   * @return {*}\n   */\n  get(property) {\n    if (this._attributesMap.has(property)) {\n      return this._attributesMap.get(property)\n    }\n\n    return undefined\n  }\n\n  /**\n   * 设置属性的值\n   *\n   * @method set\n   * @param property\n   * @param value\n   * @return {Map.<K, V>}\n   */\n  set(property, value) {\n    return this._attributesMap.set(property, value)\n  }\n\n  /**\n   * 删除属性\n   *\n   * @method delete\n   * @param property\n   * @return {boolean}\n   */\n  delete(property) {\n    return this._attributesMap.delete(property)\n  }\n\n  /**\n   * 遍历属性\n   *\n   * @method forEachAttribute\n   * @param callback\n   */\n  forEachAttribute(callback) {\n    this._attributesMap.forEach(callback)\n  }\n\n  /**\n   * 判断属性是否存在\n   *\n   * @method has\n   * @param property\n   * @return {Boolean}\n   */\n  has(property) {\n    return this._attributesMap.has(property)\n  }\n\n  /**\n   * Geometry 读写器\n   *\n   * @property geometry\n   * @return {*}\n   */\n  get geometry() {\n    return this._geometry\n  }\n\n  set geometry(value) {\n    if (value) {\n      this._geometry = value\n\n      if (this._geometryChangeKey) {\n        unlistenByKey(this._geometryChangeKey)\n      }\n\n      this._geometryChangeKey = listen(value,\n        EventType.CHANGE, this._handleGeometryChanged, this)\n    }\n  }\n\n  /**\n   * 缺省样式读写器\n   *\n   * @property styleFunction\n   * @return {*}\n   */\n  get styleFunction() {\n    return this._styleFunction\n  }\n\n  set styleFunction(value) {\n    this._styleFunction = value\n  }\n\n  /**\n   * 样式读写器\n   *\n   * @property style\n   * @return {*}\n   */\n  get style() {\n    return this._style\n  }\n\n  set style(value) {\n    this._style = value\n  }\n\n  /**\n   * feature标题读写器\n   *\n   * @property text\n   * @return {*}\n   */\n  get displayText() {\n    return this._displayText\n  }\n\n  set displayText(value) {\n    this._displayText = value\n  }\n\n  /**\n   * 样式高亮读写器\n   *\n   * @property styleHighLight\n   * @returns {*}\n   */\n  get styleHighLight() {\n    return this._styleHighLight\n  }\n\n  set styleHighLight(value) {\n    if (this._styleHighLight === value) {\n      return\n    }\n    \n    this._styleHighLight = value\n  \n    if (this.style === undefined) {\n      return\n    }\n    \n    const white = [255, 255, 255]\n    const newStyles = []\n    \n    for (let i = 0,len = this.style.length; i < len; i++) {\n      const s = this.style[i]\n      newStyles.push(s.clone())\n    }\n\n    if (this._styleHighLight) {\n      this.set('_originStyle', this.style)\n      \n      const geometryType = this.geometry.geometryType\n\n      if (geometryType === Geometry.LINE) {\n        const firstStyle = newStyles[0]\n        firstStyle.width = firstStyle.width + 1\n\n        const cloneStyle = firstStyle.clone()\n        cloneStyle.width = cloneStyle.width + 1\n        cloneStyle.color = white\n  \n        newStyles.unshift(cloneStyle)\n\n      } else if (geometryType === Geometry.POLYGON ||\n          geometryType === Geometry.MULTI_POLYGON ||\n          geometryType === Geometry.PARALLELOGRAM ||\n          geometryType === Geometry.EXTENT ) {\n        const firstStyle = newStyles[0]\n        firstStyle.borderStyle.width = firstStyle.borderStyle.width + 1\n\n        const cloneStyle = firstStyle.clone()\n        cloneStyle.alpha = 0\n        cloneStyle.borderStyle.width = firstStyle.borderStyle.width + 1\n        cloneStyle.borderStyle.color = white\n        cloneStyle.borderStyle.lineCap = LineStyle.LineCap.ROUND\n        cloneStyle.borderStyle.lineJion = LineStyle.LineJion.ROUND\n  \n        newStyles.unshift(cloneStyle)\n\n      } else if (geometryType === Geometry.POINT ) {\n        const firstStyle = newStyles[0]\n        firstStyle.size = firstStyle.size + 3\n        firstStyle.borderStyle.width = firstStyle.borderStyle.width + 1\n      }\n\n      this.style = newStyles\n    } else {\n      if (this.get('_originStyle')) {\n        this.style = this.get('_originStyle')\n        this.delete('_originStyle')\n      }\n    }\n    \n    this.changed()\n  }\n\n\n  /**\n   * 设置图层的透明度\n   *\n   * 将会触发map的重绘事件\n   *\n   * @method display\n   * @param value\n   */\n  get display() {\n    return this._display\n  }\n\n  set display(value) {\n    if (this._display !== value) {\n      this._display = value\n      // 需要触动绘制事件派发\n      this.changed()\n    }\n  }\n\n  /**\n   * 设置标签是否显示\n   *\n   * 将会触发map的重绘事件\n   *\n   * @method textDisplay\n   * @param value\n   */\n  get textDisplay () { return this._textDisplay }\n  set textDisplay (value) {\n    if (this._textDisplay !== value) {\n      this._textDisplay = value\n      // 需要触动绘制事件派发\n      this.changed()\n    }\n  }\n\n  /**\n   * 克隆map属性\n   *\n   * @method cloneAttributesMap\n   * @returns {Map}\n   */\n  cloneAttributesMap () {\n    const newMap = new Map()\n    if (this._attributesMap.size !== 0) {\n      const entries = this._attributesMap.entries()\n      for (let [key, value] of entries) {\n        newMap.set(key, value)\n      }\n    }\n\n    return newMap\n  }\n\n  /**\n   * features 克隆方法\n   *\n   * @method clone\n   * @returns {Feature}\n   */\n  clone () {\n    let renderStyleArr\n    if (this.style) {\n      let style\n      if (Array.isArray(this.style)) {\n        style = this.style[0].clone()\n      } else {\n        style = this.style.clone()\n      }\n\n      renderStyleArr = [style]\n    }\n\n    return new Feature(this.geometry.clone(),\n      this.cloneAttributesMap(), this.displayText ,renderStyleArr )\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/meek/feature.js","/**\n * Created by zhangyong on 2017/3/20.\n */\n\nimport BaseObject from '../../core/baseobject'\nimport {equals} from '../../utils/array'\nimport {Transform} from '../../data/matrix/transform'\n\nexport default class GeomertyRender extends BaseObject {\n  constructor (context) {\n    super()\n  \n    /**\n     *\n     */\n    this._context = context\n  \n    /**\n     *\n     * @type {Array}\n     * @private\n     */\n    this._pixelCoordinates = null\n  \n    /**\n     *\n     * @type {*}\n     */\n    this.renderedTransform = Transform.create()\n  }\n  \n  /**\n   *\n   */\n  resetRenderOption () {\n    this._pixelCoordinates = null\n    this.renderedTransform = Transform.create()\n  }\n  \n  /**\n   *\n   * @param transform1\n   * @param transform2\n   */\n  equalsTransform (transform1, transform2) {\n    return equals(transform1, transform2)\n  }\n  \n  /**\n   * context getter\n   * @returns {*}\n   */\n  get context () { return this._context }\n  \n  /**\n   * abstract function\n   * @param feature\n   * @param renderStyle\n   * @param transform\n   */\n  render (feature, renderStyle, transform) {} // eslint-disable-line no-unused-vars\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/render/geomertyrender.js","/**\n * Created by zhangyong on 2017/6/12.\n */\n\nimport BaseObject from '../core/baseobject'\n\n/**\n *\n * 定义文本样式\n *\n * @class TextStyle\n * @extends BaseStyle\n * @module style\n * @constructor\n * @example\n *\n *     new Datatang.TextStyle({\n *       textAlign: 'center',\n *       textBaseline: 'middle',\n *       font: 'Arial',\n *       text: '标注示例',\n *       fill: [255, 0, 0],\n *       stroke: new Datatang.LineStyle([255, 255, 255],1,3,\n *          Datatang.LineStyle.LineCap.ROUND,\n *          Datatang.LineStyle.LineJion.ROUND),\n *       offsetX: 0,\n *       offsetY: 0,\n *       rotation: 0\n *     });\n *\n */\nexport default class TextStyle extends BaseObject {\n  \n  /**\n   *\n   * @constructor\n   * @param optOptions\n   */\n  constructor (optOptions) {\n    super()\n  \n    const options = optOptions || {}\n  \n    /**\n     *\n     */\n    this.text = options.text || ''\n    \n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.font = options.font || TextStyle.DEFAULT_FONT\n  \n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.rotation = options.rotation || 0\n  \n    /**\n     * @private\n     * @type {boolean|undefined}\n     */\n    this.rotateWithView = options.rotateWithView\n  \n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.scale = options.scale || TextStyle.DEFAULT_SCALE\n  \n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.textAlign = options.textAlign || TextStyle.DEFAULT_TEXT_ALIGN\n  \n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.textBaseline = options.textBaseline || TextStyle.DEFAULT_BASE_LINE\n  \n    /**\n     * @private\n     * @type {ol.style.Fill}\n     */\n    this.fill = options.fill !== undefined ? options.fill : TextStyle.DEFAULT_FILL_COLOR\n  \n    /**\n     * @private\n     * @type {ol.style.Stroke}\n     */\n    this.stroke = options.stroke !== undefined ? options.stroke : TextStyle.DEFAULT_STROKE\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this.offsetX = options.offsetX !== undefined ? options.offsetX : 0\n  \n    /**\n     * @property offsetY\n     * @type {number}\n     */\n    this.offsetY = options.offsetY !== undefined ? options.offsetY : 0\n    \n  }\n  \n  /**\n   * 要显示的文本\n   *\n   * @property text\n   * @type {Stirng}\n   */\n  get text () { return this._text }\n  set text (value) { this._text = value }\n  \n  /**\n   * 显示的字体\n   *\n   * @property font\n   * @type {Stirng}\n   */\n  get font () { return this._font }\n  set font (value) { this._font = value }\n  \n  /**\n   * 旋转的角度\n   *\n   * @property rotation\n   * @type {Stirng}\n   */\n  get rotation () { return this._rotation }\n  set rotation (value) { this._rotation = value }\n  \n  /**\n   * 旋转视图\n   *\n   * @property rotateWithView\n   * @type {Stirng}\n   */\n  get rotateWithView () { return this._rotateWithView }\n  set rotateWithView (value) { this._rotateWithView = value }\n  \n  /**\n   * 缩放比例\n   *\n   * @property scale\n   * @type {Stirng}\n   */\n  get scale () { return this._scale }\n  set scale (value) { this._scale = value }\n  \n  /**\n   * 字体\n   *\n   * @property textAlign\n   * @type {Stirng}\n   */\n  get textAlign () { return this._textAlign }\n  set textAlign (value) { this._textAlign = value }\n  \n  /**\n   * 字体线\n   *\n   * @property textBaseline\n   * @type {Stirng}\n   */\n  get textBaseline () { return this._textBaseline }\n  set textBaseline (value) { this._textBaseline = value }\n  \n  /**\n   * 字体颜色\n   *\n   * @property fill\n   * @type {Stirng}\n   */\n  get fill () { return this._fill }\n  set fill (value) { this._fill = value }\n  \n  /**\n   * 字体线的样式\n   *\n   * property stroke\n   * @type {Stirng}\n   */\n  get stroke () { return this._stroke }\n  set stroke (value) { this._stroke = value }\n  \n  /**\n   * 字体x轴偏移\n   *\n   * @property offsetX\n   * @type {Stirng}\n   */\n  get offsetX () { return this._offsetX }\n  set offsetX (value) { this._offsetX = value }\n  \n  /**\n   * 字体y轴偏移\n   *\n   * @property offsetY\n   * @type {Stirng}\n   */\n  get offsetY () { return this._offsetY }\n  set offsetY (value) { this._offsetY = value }\n  \n  /**\n   * 克隆字体样式\n   *\n   * @method clone\n   * @returns {TextStyle}\n   */\n  clone () {\n    return new TextStyle({\n      font: this.font,\n      rotation: this.rotation,\n      rotateWithView: this.rotateWithView,\n      scale: this.scale,\n      text: this.text,\n      textAlign: this.textAlign,\n      textBaseline: this.textBaseline,\n      fill: this.fill ? this.fill.clone : undefined,\n      stroke: this.stroke ? this.stroke.clone : undefined,\n      offsetX: this.offsetX,\n      offsetY: this.offsetY\n    })\n  }\n}\n\n/**\n *\n * 默认字体边框样式\n * @type {String} DEFAULT_STROKE\n * @static\n * @final\n *\n */\nTextStyle.DEFAULT_STROKE = {\n  color: [255, 255, 255],\n  width: 2,\n  lineCap: 'round',\n  lineJion: 'round'\n}\n\n/**\n *\n * 默认字体颜色\n * @type {String} DEFAULT_FILL_COLOR\n * @static\n * @final\n *\n */\nTextStyle.DEFAULT_FILL_COLOR = [0, 0, 255]\n\n/**\n * 默认字体样式\n * @type {String} DEFAULT_FONT\n * @static\n * @final\n *\n */\nTextStyle.DEFAULT_FONT = 'bold 12px Arial'\n\n\n/**\n * 默认字体显示位置\n * @type {String} DEFAULT_TEXT_ALIGN\n * @static\n * @final\n *\n */\nTextStyle.DEFAULT_TEXT_ALIGN = 'center'\n\n\n/**\n * 默认字体显示位置\n * @type {String} DEFAULT_BASE_LINE\n * @static\n * @final\n *\n */\nTextStyle.DEFAULT_BASE_LINE = 'middle'\n\n/**\n * 默认字体缩放初始值\n * @type {String} DEFAULT_BASE_LINE\n * @static\n * @final\n *\n */\nTextStyle.DEFAULT_SCALE = 10\n\n\n// WEBPACK FOOTER //\n// ./src/style/textstyle.js","/**\n * Created by zhangyong on 2017/6/14.\n */\n\n/**\n *\n * @param arr\n * @param target\n * @param direction\n * @returns {number}\n */\nexport function linearFindNearest (arr, target, direction) {\n  const n = arr.length\n  if (arr[0] <= target) {\n    return 0\n  } else if (target <= arr[n - 1]) {\n    return n - 1\n  } else {\n    let i\n    if (direction > 0) {\n      for (i = 1; i < n; ++i) {\n        if (arr[i] < target) {\n          return i - 1\n        }\n      }\n    } else if (direction < 0) {\n      for (i = 1; i < n; ++i) {\n        if (arr[i] <= target) {\n          return i\n        }\n      }\n    } else {\n      for (i = 1; i < n; ++i) {\n        if (arr[i] == target) {\n          return i\n        } else if (arr[i] < target) {\n          if (arr[i - 1] - target < target - arr[i]) {\n            return i - 1\n          } else {\n            return i\n          }\n        }\n      }\n    }\n    return n - 1\n  }\n}\n\n/**\n *\n * @param arr\n * @param compareFnc\n */\nexport function stableSort (arr, compareFnc) {\n  const length = arr.length\n  let tmp = Array(arr.length)\n  let i\n  \n  for (i = 0; i < length; i++) {\n    tmp[i] = {index: i, value: arr[i]}\n  }\n  \n  tmp.sort(function(a, b) {\n    return compareFnc(a.value, b.value) || a.index - b.index\n  })\n  \n  for (i = 0; i < arr.length; i++) {\n    arr[i] = tmp[i].value\n  }\n}\n\n/**\n *\n * @param haystack\n * @param needle\n * @param opt_comparator\n * @returns {number}\n */\nexport function binarySearch (haystack, needle, opt_comparator) {\n  let mid, cmp\n  const comparator = opt_comparator || numberSafeCompareFunction\n  let low = 0\n  let high = haystack.length\n  let found = false\n  \n  while (low < high) {\n    /* Note that \"(low + high) >>> 1\" may overflow, and results in a typecast\n     * to double (which gives the wrong results). */\n    mid = low + (high - low >> 1)\n    cmp = +comparator(haystack[mid], needle)\n    \n    if (cmp < 0.0) { /* Too low. */\n      low  = mid + 1\n      \n    } else { /* Key found or too high */\n      high = mid\n      found = !cmp\n    }\n  }\n  \n  /* Key not found. */\n  return found ? low : ~low\n}\n\n/**\n * Determine if two arrays get equal to each other\n * @param arr1\n * @param arr2\n * @returns {boolean}\n */\nexport function equals (arr1, arr2) {\n  const len1 = arr1.length\n  if (len1 !== arr2.length) {\n    return false\n  }\n  \n  for (let i = 0; i < len1; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false\n    }\n  }\n  \n  return true\n}\n\n/**\n *\n * @param a\n * @param b\n * @returns {number}\n */\nexport function numberSafeCompareFunction (a, b) {\n  return a > b ? 1 : a < b ? -1 : 0\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/array.js","/**\n * Created by zhangyong on 2017/6/5.\n */\n\n\n\nexport function clamp (value, min, max) {\n  return Math.min(Math.max(value, min), max)\n}\n\n\nexport function lerp (a, b, x) {\n  return a + x * (b - a)\n}\n\nexport default {\n  clamp,\n  lerp\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/math.js","/**\n * Created by zhangyong on 2017/8/4.\n */\n\nimport Geometry from '../../geometry/geometry'\nimport Polygon from '../../geometry/polygon'\n\n/**\n *\n * 判断多边形是否包含另外一个图形\n *\n * @method contains\n * @param polygon\n * @param geometry\n * @returns {*}\n */\nexport default function contains (polygon, geometry) {\n  const polyGeometryType = polygon.geometryType\n  let isContained = false\n  \n  if (polyGeometryType === Geometry.POLYGON ||\n      polyGeometryType === Geometry.MULTI_POLYGON ||\n      polyGeometryType === Geometry.EXTENT ) {\n    const targetGeometryType = geometry.geometryType\n    \n    if (targetGeometryType === Geometry.POINT ) {\n      return polygon.containsXY(geometry.x, geometry.y)\n    } else if (targetGeometryType === Geometry.LINE ) {\n      return polyContainsLine(polygon, geometry)\n    } else if (targetGeometryType === Geometry.POLYGON ) {\n      return polyContainsPoly(polygon, geometry)\n    } else if (targetGeometryType === Geometry.PARALLELOGRAM) {\n      return polyContainsPoly(polygon, new Polygon(geometry.getCoordinates()))\n    }\n  }\n  \n  return isContained\n}\n\n\nconst polyContainsLine = function (poly, line) {\n  const lineCoords = line.getCoordinates()\n  return polygonContainsLinestring(poly, lineCoords)\n}\n\n\nconst polyContainsPoly = function (poly, poly2) {\n  const poly2Type = poly2.geometryType\n  if (poly2Type === Geometry.POLYGON ) {\n    const outRing = poly2.getCoordinates()[0]\n    return polygonContainsLinestring(poly, outRing)\n  } else if (poly2Type === Geometry.MULTI_POLYGON ) {\n    return true\n  }\n  \n  return false\n}\n\n\nconst polygonContainsLinestring = function (poly, coords) {\n  const hasOne = coords.some( coord =>\n    !poly.containsXY(coord[0], coord[1])\n  )\n  \n  return !hasOne\n}\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/analysis/contains.js","/**\n * Created by zypc on 2016/11/13.\n */\n\nimport Geometry from './geometry'\nimport Extent from './extent'\n\nimport {squaredSegmentDistance, distance} from './support/geometryutil'\nimport {lineString} from './support/interpolate'\n\n/**\n * 定义线类和数据结构\n *\n * @class Line\n * @extends Geometry\n * @module geometry\n * @constructor\n * @example\n *\n *  var line = new Datatang.Line()\n *\n *  line.setCoordinates([100, 100], [200, 200], [400, 500])\n */\nexport default class Line extends Geometry {\n  \n  /**\n   * Create a line geometry\n   * @constructor\n   * @param path\n   */\n  constructor (path) {\n    super()\n  \n    /**\n     * 记录内点更新的次数\n     * @type {number}\n     * @private\n     */\n    this._flatInteriorPointRevision = -1\n  \n    /**\n     * 缓存当前内点\n     * @type {null}\n     * @private\n     */\n    this._flatInteriorPoint = null\n  \n    /**\n     *\n     * @type {Array}\n     * @private\n     */\n    this._path = []\n    \n    this.addPath(path)\n  }\n\n  get geometryType () { return Geometry.LINE }\n\n  /**\n   * 获取图形的最小外接矩形(MBR-Minimum Bounding Rectangle)\n   *\n   * @returns {Object} 返回对象的最小外接矩形\n   *\n   */\n  get extent () {\n    const me = this\n    if (me._extent === null) {\n      let xmin = Number.POSITIVE_INFINITY\n      let ymin = Number.POSITIVE_INFINITY\n      let xmax = Number.NEGATIVE_INFINITY\n      let ymax = Number.NEGATIVE_INFINITY\n\n      const coors = me.getCoordinates()\n      for (let p of coors) {\n        xmin = Math.min(xmin, p[0])\n        ymin = Math.min(ymin, p[1])\n        xmax = Math.max(xmax, p[0])\n        ymax = Math.max(ymax, p[1])\n      }\n\n      me._extent = new Extent(xmin, ymin, xmax, ymax)\n    }\n\n    return me._extent\n  }\n  \n  /**\n   * 线段读写器\n   *\n   * @property path\n   * @returns\n   */\n  get path () { return this._path }\n  set path (value) {\n    this._path = value\n    this._extent = null\n  }\n  \n  /**\n   * 添加线段\n   *\n   * @method addPath\n   * @deprecated\n   * @param coordinates {Array}\n   */\n  addPath (coordinates) {\n    this.path.push(coordinates)\n    this._extent = null\n    this.changed()\n  }\n  \n  /**\n   * 多段线的长度\n   *\n   * @property length\n   * @type {Number}\n   */\n  get length () {\n    const coordinates = this.getCoordinates()\n    let len = 0\n    for (let i = 0, ii = coordinates.length; i < ii - 1 ; i++) {\n      const fp = coordinates[i]\n      const np = coordinates[i + 1]\n      len += distance(fp, np)\n    }\n    \n    return len\n  }\n  \n  /**\n   * 遍历每一条边\n   *\n   * @method forEachSegment\n   * @param callback {callback}\n   * @param opt\n   */\n  forEachSegment (callback, opt) {\n    this.path.forEach(callback, opt)\n  }\n  \n  /**\n   * @param x\n   * @param y\n   * @param opt\n   * @returns {boolean}\n   */\n  containsXY (x, y, opt = {}) {\n    const tolerance = opt.tolerance ? opt.tolerance : 2\n    const path = this.path\n    const squaredSegmentDistanceFn = squaredSegmentDistance\n  \n    let find = false\n    for (let i = 0, ii = path.length - 1; i < ii; i++) {\n      let nowP = path[i]\n      let nextP = path[i + 1]\n      let distance = squaredSegmentDistanceFn(x, y, nowP[0], nowP[1], nextP[0], nextP[1])\n      distance = Math.sqrt(distance)\n      if (distance <= tolerance) {\n        find = true\n        break\n      }\n    }\n  \n    return find\n  }\n  \n  /**\n   * 计算线的平面内点\n   *\n   * @method getFlatInteriorPoint\n   * @returns {Array}\n   */\n  getFlatInteriorPoint () {\n    if (this._flatInteriorPointRevision !== this.revision) {\n      const interiorPoint = null\n      const fraction = 0.5\n      const flatCoordinates = []\n      const coordinates = this.getCoordinates()\n  \n      coordinates.forEach( point => {\n        flatCoordinates.push(point[0], point[1])\n      })\n  \n      this._flatInteriorPoint = lineString( flatCoordinates, 0, flatCoordinates.length, this.stride,\n        fraction, interiorPoint)\n      \n      this._flatInteriorPointRevision = this.revision\n    }\n    \n    return this._flatInteriorPoint\n  }\n  \n  getCoordinates () { return this.path }\n\n  /**\n   * 得到最后一个点的坐标，显示表单\n   *\n   * @param {Number} offsetX x的偏移量\n   * @param {Number} offsetY y的偏移量\n   * @returns {[*,*]}\n   */\n  getFormShowPosition (offsetX = 0, offsetY = 0) {\n    const coordinates = this.getCoordinates()\n    if (coordinates.length === 0) {\n      return null\n    }\n    \n    const lastPoint = coordinates[coordinates.length - 1]\n    \n    return [lastPoint[0] - offsetX, lastPoint[1] - offsetY]\n  }\n  \n  /**\n   * 设置坐标数据\n   *\n   * @method setCoordinates\n   * @param coords {Array}\n   */\n  setCoordinates (coords) {\n    this.path = coords\n    this._extent = null\n    this.changed()\n  }\n  \n  /**\n   * 根据坐标点，计算改点的下标\n   *\n   * @method getCoordinateIndex\n   * @param coord\n   * @returns {*|number}\n   */\n  getCoordinateIndex (coord) {\n    return this.getCoordinates().findIndex( points =>\n      points[0] === coord[0] && points[1] === coord[1]\n    )\n  }\n  \n  /**\n   * 克隆线段\n   *\n   * @method clone\n   * @returns {Line} new line\n   */\n  clone () {\n    const newCoordinates = this.getCoordinates()\n    this.getCoordinates().forEach( coords => {\n      newCoordinates.push([coords[0], coords[1]])\n    })\n  \n    const newLine = new Line()\n    newLine.setCoordinates(newCoordinates)\n    \n    return newLine\n  }\n  \n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/line.js","/**\n * Created by zhangyong on 2017/8/4.\n */\n\nimport Geometry from './geometry'\nimport Polygon from './polygon'\nimport Extent from './extent'\n\nimport {centerLinearRingss, linearRingss} from './support/interpolate'\nimport {linearRingssAreOriented,orientLinearRingss} from './support/orient'\n\n\n/**\n * 定义复合多边形对象和数据结构\n *\n *\n * @class MutilPolygon\n * @module geometry\n * @constructor\n *\n */\nexport default class MutilPolygon extends Geometry {\n  \n  constructor (coordinates) {\n    super()\n    \n    this._polygons = []\n  \n    this.stride = 2\n  \n    /**\n     * 记录当前多边形内点更新的次数\n     * @type {number}\n     * @private\n     */\n    this._flatInteriorPointRevision = -1\n  \n    /**\n     * 缓存当前多边形内点\n     * @type {null}\n     * @private\n     */\n    this._flatInteriorPoint = null\n  \n    this.setCoordinates(coordinates)\n  }\n  \n  /**\n   *\n   * @returns {String}\n   */\n  get geometryType () { return Geometry.MULTI_POLYGON }\n  \n  /**\n   * 计算复合多边形的最小外界矩形\n   * 注意：这里所求出来的是多个多边形的最小外界矩形，既一个能包裹所有\n   * 多边形的矩形\n   *\n   * @returns {Extent|null}\n   */\n  get extent () {\n    if (this._extent === null) {\n      const allPolygonCoords = this.getCoordinates()\n    \n      // 计算最小外界矩形，只考虑外围环\n      if (allPolygonCoords.length > 0) {\n        let xmin = Number.POSITIVE_INFINITY\n        let ymin = Number.POSITIVE_INFINITY\n        let xmax = Number.NEGATIVE_INFINITY\n        let ymax = Number.NEGATIVE_INFINITY\n        \n        allPolygonCoords.forEach( polyCoods => {\n          let rings = polyCoods[0]\n          for (let ring of rings) {\n            xmin = Math.min(xmin, ring[0])\n            ymin = Math.min(ymin, ring[1])\n            xmax = Math.max(xmax, ring[0])\n            ymax = Math.max(ymax, ring[1])\n          }\n        })\n      \n        this._extent = new Extent(xmin, ymin, xmax, ymax)\n      }\n    }\n  \n    return this._extent\n  }\n  \n  /**\n   * 获得复合多边形的坐标\n   * @returns {Array|*}\n   */\n  getCoordinates () {\n    return this._polygons\n  }\n  \n  /**\n   * 设置复合多边形的坐标\n   * @param coordinates\n   */\n  setCoordinates (coordinates) {\n    this._polygons = coordinates\n    this._extent = null\n    this.changed()\n  }\n  \n  /**\n   * 获得一个多边形对象\n   * @method getPolygon\n   * @param index 多边形的下标\n   * @returns {Datatang.Polygon} 返回一个新的多边形对象\n   */\n  getPolygon (index) {\n    if (index < 0 && this._polygons.length < index ) {\n      return null\n    }\n    \n    const coords = this._polygons[index]\n    let outRing = []\n    let innerRing = []\n    coords.forEach( rings => {\n      rings.forEach( points => {\n        innerRing.push([points[0], points[1]])\n      })\n      \n      outRing.push(innerRing)\n      innerRing = []\n    })\n    \n    const polygon = new Polygon(outRing)\n    return polygon\n  }\n  \n  /**\n   * 判断集合多边形是否包括指定 x 和 y\n   * @param x\n   * @param y\n   * @returns {boolean}\n   */\n  containsXY (x, y) {\n    const polygons = this._polygons\n    for (let i = 0, len = polygons.length; i < len; i ++ ) {\n      const onePolygon = this.getPolygon(i)\n      if (onePolygon.containsXY(x, y)) {\n        return true\n      }\n    }\n    \n    return false\n  }\n  \n  /**\n   * 获取标签显示的内点\n   * 注意：复合多边形，标签显示的位置，只显示在第一个图形上\n   * @returns {*}\n   */\n  getFlatInteriorPoint () {\n    if (this._flatInteriorPointRevision !== this.revision) {\n      this._flatInteriorPointRevision = this.revision\n  \n      const polygons = this._polygons\n      let flatCoordinates = []\n      let endss = []\n  \n      const orderArray = []\n  \n      polygons.forEach( polygon => {\n        const outRings = polygon[0]\n        orderArray.push(outRings)\n      })\n  \n      orderArray.sort( (arr1, arr2) => arr1.length - arr2.length )\n  \n      let lastLen = 0\n      orderArray.forEach( arr => {\n        const currLen = arr.length * 2 + lastLen\n        endss.push([currLen])\n        lastLen = currLen\n    \n        arr.forEach( points => {\n          flatCoordinates.push(points[0], points[1])\n        })\n      })\n  \n      const flatCenters = centerLinearRingss(flatCoordinates, 0, endss, this.stride)\n      this._flatInteriorPoint = linearRingss(\n        this.getOrientedFlatCoordinates(flatCoordinates, endss), 0, endss, this.stride,\n        flatCenters)\n    }\n    \n  \n    return this._flatInteriorPoint\n  }\n  \n  /**\n   * 计算复合多边形顺时针坐标\n   * @param flatCoordinates\n   * @param endss\n   * @returns {*}\n   */\n  getOrientedFlatCoordinates (flatCoordinates, endss) {\n    let orientedFlatCoordinates\n    \n    if (linearRingssAreOriented(flatCoordinates, 0, endss, this.stride)) {\n      orientedFlatCoordinates = flatCoordinates\n    } else {\n      orientedFlatCoordinates = [...flatCoordinates]\n      orientedFlatCoordinates.length = orientLinearRingss(orientedFlatCoordinates,\n        0, endss, this.stride)\n    }\n    \n    return orientedFlatCoordinates\n  }\n  \n  /**\n   * 根据坐标值计算复合多边形的点下标\n   *\n   * @method getCoordinateIndex\n   * @param coord 坐标值，[x, y]结构\n   * @returns {\n   *    {\n   *      polygonIndex: number 位于第几个多边形上 ,\n   *      ringIndex: number 位于多边形第几个环上,\n   *      index: number 位于环上第几个顶点上\n   *     }\n   *   }\n   */\n  getCoordinateIndex (coord) {\n    const polygonCoods = this.getCoordinates()\n    \n    for ( let ii = 0, iiLen = polygonCoods.length ; ii < iiLen; ii ++) {\n      const coords = polygonCoods[ii]\n  \n      for (let i = 0, len = coords.length; i < len; i++) {\n        const rings = coords[i]\n        for (let j = 0,jLen = rings.length; j < jLen; j++) {\n          const point = rings[j]\n          if (point[0] === coord[0] && point[1] === coord[1]) {\n            return {\n              polygonIndex : ii,\n              ringIndex: i,\n              index: j\n            }\n          }\n        }\n      }\n    }\n  \n    return {\n      polygonIndex : -1,\n      ringIndex: -1,\n      index: -1\n    }\n  }\n  \n  /**\n   * 克隆一个 Mutilpolygon\n   * @returns {MutilPolygon}\n   */\n  clone () {\n    const allCoords = []\n    \n    this._polygons.forEach( coords => {\n      let outRing = []\n      let innerRing = []\n      coords.forEach( rings => {\n        rings.forEach( points => {\n          innerRing.push([points[0], points[1]])\n        })\n    \n        outRing.push(innerRing)\n      })\n  \n      allCoords.push(outRing)\n      outRing = []\n    })\n    \n    const newMutilPolygon = new MutilPolygon(allCoords)\n    return newMutilPolygon\n  }\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/mutilpolygon.js","/**\n * Created by zhangyong on 2017/6/14.\n */\n\n\nimport {binarySearch, numberSafeCompareFunction} from '../../utils/array'\nimport {linearRingsContainsXY} from '../support/geometryutil'\nimport {lerp} from '../../utils/math'\nimport {ExtentUtil} from './extentutil'\n\n\n/**\n *\n * @param flatCoordinates\n * @param offset\n * @param end\n * @param stride\n * @param fraction\n * @param opt_dest\n * @returns {*}\n */\nexport function lineString (flatCoordinates, offset, end, stride, fraction, opt_dest) {\n  let pointX = NaN\n  let pointY = NaN\n  const n = (end - offset) / stride\n  \n  if (n === 1) {\n    pointX = flatCoordinates[offset]\n    pointY = flatCoordinates[offset + 1]\n  } else if (n == 2) {\n    pointX = (1 - fraction) * flatCoordinates[offset] +\n      fraction * flatCoordinates[offset + stride]\n    pointY = (1 - fraction) * flatCoordinates[offset + 1] +\n      fraction * flatCoordinates[offset + stride + 1]\n  } else if (n !== 0) {\n    let x1 = flatCoordinates[offset]\n    let y1 = flatCoordinates[offset + 1]\n    let length = 0\n    const cumulativeLengths = [0]\n    let i\n    for (i = offset + stride; i < end; i += stride) {\n      const x2 = flatCoordinates[i]\n      const y2 = flatCoordinates[i + 1]\n      length += Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1))\n      cumulativeLengths.push(length)\n      x1 = x2\n      y1 = y2\n    }\n    \n    const target = fraction * length\n    const index = binarySearch(cumulativeLengths, target)\n    \n    if (index < 0) {\n      const t = (target - cumulativeLengths[-index - 2]) /\n        (cumulativeLengths[-index - 1] - cumulativeLengths[-index - 2])\n      const o = offset + (-index - 2) * stride\n      pointX = lerp(\n        flatCoordinates[o], flatCoordinates[o + stride], t)\n      pointY = lerp(\n        flatCoordinates[o + 1], flatCoordinates[o + stride + 1], t)\n    } else {\n      pointX = flatCoordinates[offset + index * stride]\n      pointY = flatCoordinates[offset + index * stride + 1]\n    }\n  }\n  \n  if (opt_dest) {\n    opt_dest[0] = pointX\n    opt_dest[1] = pointY\n    return opt_dest\n  } else {\n    return [pointX, pointY]\n  }\n}\n\n\n/**\n *\n * @param flatCoordinates\n * @param offset\n * @param ends\n * @param stride\n * @param flatCenters\n * @param flatCentersOffset\n * @param opt_dest\n * @returns {*}\n */\nexport function linearRings(flatCoordinates, offset,\n       ends, stride, flatCenters, flatCentersOffset, opt_dest) {\n  let i, ii, x, x1, x2, y1, y2\n  const y = flatCenters[flatCentersOffset + 1]\n  const intersections = []\n  // Calculate intersections with the horizontal line\n  const end = ends[0]\n  x1 = flatCoordinates[end - stride]\n  y1 = flatCoordinates[end - stride + 1]\n  \n  for (i = offset; i < end; i += stride) {\n    x2 = flatCoordinates[i]\n    y2 = flatCoordinates[i + 1]\n    if ((y <= y1 && y2 <= y) || (y1 <= y && y <= y2)) {\n      x = (y - y1) / (y2 - y1) * (x2 - x1) + x1\n      intersections.push(x)\n    }\n    x1 = x2\n    y1 = y2\n  }\n  \n  // Find the longest segment of the horizontal line that has its center point\n  // inside the linear ring.\n  let pointX = NaN\n  let maxSegmentLength = -Infinity\n  intersections.sort(numberSafeCompareFunction)\n  x1 = intersections[0]\n  for (i = 1, ii = intersections.length; i < ii; ++i) {\n    x2 = intersections[i]\n    const segmentLength = Math.abs(x2 - x1)\n    if (segmentLength > maxSegmentLength) {\n      x = (x1 + x2) / 2\n      if (linearRingsContainsXY(\n          flatCoordinates, offset, ends, stride, x, y)) {\n        pointX = x\n        maxSegmentLength = segmentLength\n      }\n    }\n    x1 = x2\n  }\n  \n  if (isNaN(pointX)) {\n    // There is no horizontal line that has its center point inside the linear\n    // ring.  Use the center of the the linear ring's extent.\n    pointX = flatCenters[flatCentersOffset]\n  }\n  \n  if (opt_dest) {\n    opt_dest.push(pointX, y)\n    return opt_dest\n  } else {\n    return [pointX, y]\n  }\n}\n\n\n/**\n *\n * @param flatCoordinates\n * @param offset\n * @param endss\n * @param stride\n * @param flatCenters\n * @returns {Array}\n */\nexport function linearRingss (flatCoordinates, offset, endss, stride, flatCenters) {\n  let interiorPoints = []\n  let i, ii\n  for (i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i]\n    interiorPoints = linearRings(flatCoordinates,\n      offset, ends, stride, flatCenters, 2 * i, interiorPoints)\n    offset = ends[ends.length - 1]\n  }\n  \n  return interiorPoints\n}\n\n/**\n *\n * @param flatCoordinates\n * @param offset\n * @param endss\n * @param stride\n * @returns {Array}\n */\nexport function centerLinearRingss (flatCoordinates, offset, endss, stride) {\n  const flatCenters = []\n  let i, ii\n  let extent = ExtentUtil.createEmpty()\n  for (i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i]\n    extent = ExtentUtil.createOrUpdateFromFlatCoordinates(\n      flatCoordinates, offset, ends[0], stride)\n    flatCenters.push((extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2)\n    offset = ends[ends.length - 1]\n  }\n  return flatCenters\n}\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/support/interpolate.js","/**\n * Created by zhangyong on 2017/6/14.\n */\n\n/**\n *\n * @param flatCoordinates\n * @param offset\n * @param endss\n * @param stride\n * @param opt_right\n * @returns {*}\n */\nexport function orientLinearRingss (flatCoordinates, offset, endss, stride, opt_right) {\n  let i, ii\n  for (i = 0, ii = endss.length; i < ii; ++i) {\n    offset = orientLinearRings(\n      flatCoordinates, offset, endss[i], stride, opt_right)\n  }\n  \n  return offset\n}\n\n/**\n *\n * @param flatCoordinates\n * @param offset\n * @param ends\n * @param stride\n * @param opt_right\n * @returns {*}\n */\nexport function orientLinearRings (flatCoordinates, offset, ends, stride, opt_right) {\n  const right = opt_right !== undefined ? opt_right : false\n  let i, ii\n  \n  for (i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i]\n    const isClockwise = linearRingIsClockwise(flatCoordinates, offset, end, stride)\n    \n    const reverse = i === 0 ?\n    (right && isClockwise) || (!right && !isClockwise) :\n    (right && !isClockwise) || (!right && isClockwise)\n    \n    if (reverse) {\n      // reverse(flatCoordinates, offset, end, stride)\n      // 反转\n      flatCoordinates = flatCoordinates.reverse()\n    }\n    offset = end\n  }\n  \n  return offset\n}\n\n/**\n *\n * @param flatCoordinates\n * @param offset\n * @param endss\n * @param stride\n * @param opt_right\n * @returns {boolean}\n */\nexport function linearRingssAreOriented (flatCoordinates, offset, endss, stride, opt_right) {\n  let i, ii\n  for (i = 0, ii = endss.length; i < ii; ++i) {\n    if (!linearRingsAreOriented(\n        flatCoordinates, offset, endss[i], stride, opt_right)) {\n      return false\n    }\n  }\n  return true\n}\n\n/**\n * 判断线串的方向\n * @param flatCoordinates\n * @param offset\n * @param ends\n * @param stride\n * @param opt_right\n * @returns {boolean}\n */\nexport function linearRingsAreOriented (flatCoordinates, offset, ends, stride, opt_right) {\n  const right = opt_right !== undefined ? opt_right : false\n  let i, ii\n  \n  for (i = 0, ii = ends.length; i < ii; ++i) {\n    let end = ends[i]\n    // 判断坐标串是否是顺时针\n    let isClockwise = linearRingIsClockwise(flatCoordinates, offset, end, stride)\n    \n    if (i === 0) {\n      if ((right && isClockwise) || (!right && !isClockwise)) {\n        return false\n      }\n    } else {\n      if ((right && !isClockwise) || (!right && isClockwise)) {\n        return false\n      }\n    }\n    \n    offset = end\n  }\n  \n  return true\n}\n\n/**\n * 判断坐标串是否是顺时针方向\n * @param flatCoordinates\n * @param offset\n * @param end\n * @param stride\n * @returns {boolean}\n */\nexport function linearRingIsClockwise(flatCoordinates, offset, end, stride) {\n  // http://tinyurl.com/clockwise-method\n  // https://github.com/OSGeo/gdal/blob/trunk/gdal/ogr/ogrlinearring.cpp\n  let edge = 0\n  let x1 = flatCoordinates[end - stride]\n  let y1 = flatCoordinates[end - stride + 1]\n  \n  for (; offset < end; offset += stride) {\n    let x2 = flatCoordinates[offset]\n    let y2 = flatCoordinates[offset + 1]\n    edge += (x2 - x1) * (y2 + y1)\n    x1 = x2\n    y1 = y2\n  }\n  \n  return edge > 0\n}\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/support/orient.js","/**\n * Created by zhangyong on 2017/3/20.\n */\n\n\n/**\n * Constants defined width the define tag connot be changed in application code,\n * but can be set at compile time.\n *\n * @type {{}}\n */\nexport const Config = {}\n\n/**\n * Enable debug mode ,Default is 'true'\n *\n * 配置DEBUG\n *\n * @property DEBUG\n * @static\n * @type {Boolean}\n */\nConfig.DEBUG = true\n\n/**\n * Default max zomm factor\n *\n * @property DEFAULT_ZOOM_FACTOR\n * @static\n * @type {Number}\n */\nConfig.DEFAULT_ZOOM_FACTOR = 2\n\n/**\n * Default max zoom level for map view.\n * Defaylt is '10'\n *\n * @property DEFAULT_MAX_ZOOM\n * @static\n * @type {Number}\n */\nConfig.DEFAULT_MAX_ZOOM = 10\n\n/**\n * Default min zoom level for map view.\n * Default is '0'\n *\n * @property DEFAULT_MIN_ZOOM\n * @static\n * @type {Number}\n */\nConfig.DEFAULT_MIN_ZOOM = 0\n\n/**\n * Maxinum mouse wheel delta.\n *\n * @property MOUSE_WHEEL_ZOOM_MAXDELTA\n * @static\n * @type {Number}\n */\nConfig.MOUSE_WHEEL_ZOOM_MAXDELTA = 1\n\n/**\n * Default tile size\n *\n * @property DEFAULT_TILE_SIZE\n * @static\n * @type {Number}\n */\nConfig.DEFAULT_TILE_SIZE = 256\n\n\nexport default{\n  Config\n}\n\n\n// WEBPACK FOOTER //\n// ./src/meek/config.js","/**\n * Created by zhangyong on 2017/6/13.\n */\n\nimport BaseObject from '../core/baseobject'\n\n/**\n * 定义基础样式类，包括了一些基础的属性，如颜色、对象样式、透明度\n *\n * @class BaseStyle\n * @extends BaseObject\n * @module style\n */\nexport default class BaseStyle extends BaseObject {\n\n  /**\n   *\n   * @constructor\n   * @param color {Array}\n   * @param style {Object}\n   * @param alpha {Number}\n   */\n  constructor (color, style, alpha = 1) {\n    \n    super()\n    \n    /**\n     * The color to fill or stroke geometry\n     */\n    this.color = color\n    \n    /**\n     * Which style to style geometry\n     */\n    this.style = style\n    \n    /**\n     *\n     */\n    this.alpha = alpha\n    \n    /**\n     * The text displayed with geometry\n     * @type {null}\n     */\n    this.textStyle = null\n  }\n  \n  /**\n   * 颜色\n   *\n   * @property color\n   * @type {Array}\n   */\n  get color () { return this._color }\n  set color (value) { this._color = value }\n  \n  /**\n   * 样式对象\n   *\n   * @property style\n   * @type {Datatang.Style}\n   */\n  get style () { return this._style }\n  set style (value) { this._style = value }\n  \n  /**\n   * 透明度\n   *\n   * @property alpha\n   * @default 1\n   * @type {Number}\n   */\n  get alpha () { return this._alpha}\n  set alpha (value) { return this._alpha = value }\n  \n  /**\n   * 文本样式对象\n   *\n   * @property textStyle\n   */\n  get textStyle () { return this._textStyle }\n  set textStyle (value) { this._textStyle = value }\n  \n  /**\n   * 克隆一个样式对象\n   *\n   * @method clone\n   * @abstract\n   */\n  clone () {}\n  \n}\n  \n\n\n// WEBPACK FOOTER //\n// ./src/style/basestyle.js","\nlet uid = 0\n\nexport function getUid () {\n  return uid++\n}\n\nexport default {\n  getUid\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/counter.js","/**\n * Created by zhangyong on 2017/6/2.\n */\n\nimport Component from './component'\nimport {noModifierKeys} from '../utils/mousekey'\nimport {Coordinate} from '../utils/coordinate'\n\n/**\n * 拖动事件基础类\n *\n * @class DragPan\n * @extends Component\n * @module component\n * @constructor\n */\nexport default class DragPan extends Component {\n\n  /**\n   * 构造函数\n   *\n   * @constructor\n   * @param options\n   */\n  constructor (options = {}) {\n    super()\n\n    this.applyHandleEventOption({\n      handleDownEvent: this._handleDownEvent,\n      handleDragEvent: this._handleDragEvent\n    })\n    \n    /**\n     * @property tragetPointers\n     * @type {Array}\n     */\n    this.targetPointers = []\n  \n    /**\n     * @property lastCentroid\n     * @type {null}\n     */\n    this.lastCentroid = null\n  \n    /**\n     * kinetic\n     * @private\n     * @type {ol.Kinetic|undefined}\n     */\n    this._kinetic = options.kinetic\n  \n    /**\n     * @property lastCentroid\n     * @type {ol.Pixel}\n     */\n    this.lastCentroid = null\n  \n    /**\n     * @property lastPointersCount\n     * @private\n     * @type {number}\n     */\n    this._lastPointersCount = null\n  \n    /**\n     * @property conidtion\n     * @private\n     * @type {ol.EventsConditionType}\n     */\n    this._condition = options.condition ?\n      options.condition : noModifierKeys\n  \n    /**\n     * @property noKinetic\n     * @private\n     * @type {boolean}\n     */\n    this._noKinetic = false\n    \n  }\n  \n  /**\n   * 处理browserEvent\n   *\n   * @param browserEvent {BrowserPointerEvent} mapBrowserEvent Event.\n   * @return {boolean} Start drag sequence?\n   * @this {DragPan}\n   * @private\n   */\n  _handleDownEvent (browserEvent) {\n    if (this.targetPointers.length > 0 && this._condition(browserEvent)) {\n      this.lastCentroid = null\n      \n      if (this._kinetic) {\n        this._kinetic.begin()\n      }\n      \n      // No kinetic as soon as more than one pointer on the screen is\n      // detected. This is to prevent nasty pans after pinch.\n      this._noKinetic = this.targetPointers.length > 1\n      return true\n    } else {\n      return false\n    }\n  }\n  \n  /**\n   * handleDragEvent\n   * @param browserEvent {browserEvent}\n   * @private\n   */\n  _handleDragEvent (browserEvent) {\n    const targetPointers = this.targetPointers\n    const centroid = this.centroid(targetPointers)\n\n    if (targetPointers.length === this._lastPointersCount) {\n      if (this._kinetic) {\n        this._kinetic.update(centroid[0], centroid[1])\n      }\n      \n      if (this.lastCentroid) {\n        const deltaX = this.lastCentroid[0] - centroid[0]\n        const deltaY = this.lastCentroid[1] - centroid[1]\n        const map = browserEvent.map\n        const view = map.view\n        const viewState = view.getViewState()\n        const center = [deltaX, deltaY]\n        Coordinate.scale(center, viewState.resolution)\n        Coordinate.rotate(center, viewState.rotation)\n        Coordinate.add(center, viewState.center)\n        // center = view.constrainCenter(center)\n        view.center = center\n      }\n    } else if (this._kinetic) {\n      this._kinetic.begin()\n    }\n\n    this.lastCentroid = centroid\n    this._lastPointersCount = targetPointers.length\n  }\n  \n  /**\n   * 计算视图的中心点\n   *\n   * @method centroid\n   * @param pointerEvents {pointerEvents}\n   * @returns {[*,*]}\n   */\n  centroid (pointerEvents) {\n    const length = pointerEvents.length\n    let clientX = 0\n    let clientY = 0\n    \n    for (let i = 0; i < length; i++) {\n      clientX += pointerEvents[i].originalEvent.clientX\n      clientY += pointerEvents[i].originalEvent.clientY\n    }\n    \n    return [clientX / length, clientY / length]\n  }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/dragpan.js","/**\n * Created by zhangyong on 2017/5/22.\n */\n\nimport BaseEvent from '../core/baseevent'\n\n/**\n * The DrawEvent will emitted while geometrys on drawing end.\n *\n * 绘制结束时，DrawEvent将会被派发\n *\n *\n * @class drawevent\n * @extends BaseObject\n * @module component\n *\n *\n */\nexport default class DrawEvent extends BaseEvent {\n  \n  /**\n   * @constructor\n   * @param type\n   * @param feature\n   */\n  constructor (type, feature) {\n  \n    super(type)\n  \n    /**\n     * The feature being drawn\n     */\n    this.feature = feature\n  }\n  \n}\n\n/**\n * 定义绘制工具的事件类型\n *\n * @type {{DRAW_START: string, DRAW_END: string}}\n */\nDrawEvent.EventType = {\n  /**\n   * Triggered upon feature draw start\n   */\n  DRAW_START: 'drawstart',\n  \n  \n  /**\n   * Triggered upon feature draw end\n   */\n  DRAW_END: 'drawend'\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/drawevent.js","/**\n * Created by zhangyong on 2017/6/9.\n */\n\n/**\n * 修改结束时，ModifyEvent将会被派发\n *\n * @class modifyevent\n * @extends BaseObject\n * @module component\n *\n */\nimport BaseEvent from '../core/baseevent'\n\nexport default class ModifyEvent extends BaseEvent {\n  \n  constructor (type, features, event) {\n    super(type)\n  \n    /**\n     * features being modified.\n     */\n    this.features = features\n  \n    /**\n     * BrowserEvent\n     */\n    this.browserEvent = event\n  }\n  \n}\n\n\nModifyEvent.EventType = {\n  \n  /**\n   * Triggered on features modification start.\n   */\n  MODIFY_START: 'modifystart',\n  \n  /**\n   * Triggered on features modification end\n   */\n  MODIFY_END: 'modifyend'\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/modifyevent.js","/**\n * Created by zypc on 2017/6/4.\n */\n\nimport Component from './component'\nimport BrowserEvent from '../meek/browserevent'\n\n\nimport {Config} from '../meek/config'\n\nimport {mouseWheel} from '../utils/mousekey'\nimport {clamp} from '../utils/math'\n\n/**\n * 鼠标滚轮缩放基类\n *\n *\n * @class MouseWheelZoom\n * @extends Component\n * @module component\n * @constructor\n */\nexport default class MouseWheelZoom extends Component {\n\n  /**\n   * 构造函数\n   *\n   * @constructor\n   * @param options\n   */\n  constructor (options = {}){\n    \n    super()\n  \n    /**\n     * 私有属性Delta，默认为0\n     *\n     * @property delta\n     * @type {Number}\n     * @private\n     */\n    this._delta = 0\n  \n    /**\n     * 私有属性useAnchor\n     *\n     * @property useAnchor\n     * @type {Boolean}\n     * @private\n     */\n    this._useAnchor = options.useAnchor !== undefined ?\n      options.useAnchor : true\n  \n    /**\n     * 私有属性duration\n     *\n     * @property duration\n     * @type {Boolean}\n     * @private\n     */\n    this._duration = options.duration !== undefined ?\n      options.duration : 250\n  \n    /**\n     * 私有属性lastAnchor\n     *\n     * @property lastAnchor\n     * @type {null}\n     * @private\n     */\n    this._lastAnchor = null\n  \n    /**\n     *\n     * @type {undefined}\n     * @private\n     */\n    this._startTime = undefined\n  \n    /**\n     *\n     * @type {number}\n     * @private\n     */\n    this._timeout = options.timeout !== undefined ? options.timeout : 80\n  \n    /**\n     *\n     * @type {undefined}\n     * @private\n     */\n    this._timeoutId = undefined\n  \n    /**\n     *\n     * @type {undefined}\n     * @private\n     */\n    this._mode = undefined\n  }\n  \n  \n  /**\n   *\n   * @param mapBrowserEvent\n   * @returns {boolean}\n   */\n  handleMouseEvent (mapBrowserEvent){\n    if (!mouseWheel(mapBrowserEvent)) {\n      return true\n    }\n  \n    mapBrowserEvent.preventDefault()\n  \n    const map = mapBrowserEvent.map\n    const wheelEvent = mapBrowserEvent.originalEvent\n  \n    if (this._useAnchor) {\n      this._lastAnchor = mapBrowserEvent.coordinate\n    }\n  \n    // Delta normalisation inspired by\n    // https://github.com/mapbox/mapbox-gl-js/blob/001c7b9/js/ui/handler/scroll_zoom.js\n    let delta\n    if (mapBrowserEvent.type == BrowserEvent.WHEEL) {\n      delta = wheelEvent.deltaY\n    } else if (mapBrowserEvent.type == BrowserEvent.MOUSE_WHEEL) {\n      delta = -wheelEvent.wheelDeltaY\n    }\n  \n    if (delta === 0) {\n      return false\n    }\n  \n    const now = Date.now()\n  \n    if (this._startTime === undefined) {\n      this._startTime = now\n    }\n  \n    this._delta += delta\n  \n    const timeLeft = Math.max(this._timeout - (now - this._startTime), 0)\n  \n    clearTimeout(this._timeoutId)\n    this._timeoutId = setTimeout(() => this._handleWheelZoom(map), timeLeft)\n  \n    return false\n  }\n  \n  /**\n   * Zoom to the map\n   *\n   * handleWheelZoom\n   * @param map\n   * @private\n   */\n  _handleWheelZoom (map) {\n    const view = map.view\n    // if (view.getAnimating()) {\n    //   view.cancelAnimations()\n    // }\n    \n    const maxDelta = Config.MOUSE_WHEEL_ZOOM_MAXDELTA\n    const delta = clamp(this._delta, -maxDelta, maxDelta)\n    \n    this.zoomByDelta(view, -delta, this._lastAnchor, this._duration)\n    \n    this._mode = undefined\n    this._delta = 0\n    this._lastAnchor = null\n    this._startTime = undefined\n    this._timeoutId = undefined\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/mousewheelzoom.js","/**\n * Created by zhangyong on 2017/5/25.\n */\n/**\n * 选择结束时，SelectEvent将会被派发\n *\n * @class selectevent\n * @extends BaseObject\n * @module component\n *\n *\n */\n\nimport BaseEvent from '../core/baseevent'\n\nexport default class SelectEvent extends BaseEvent {\n  \n  constructor (type, features, event) {\n    \n    super(type)\n    \n    /**\n     * The feature being selected\n     */\n    this.selectedFeatures = features\n  \n    /**\n     *\n     */\n    this.browserEvent = event\n  }\n  \n}\n\n/**\n * The select event\n * @type {{SELECT: string}}\n */\nSelectEvent.EventType = {\n  /**\n   * Triggered upon features select\n   * @api stable\n   */\n  SELECT: 'select',\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/selectevent.js","/**\n * Created by zhangyong on 2017/8/2.\n */\n\nimport Control from './control'\nimport BrowserEvent from '../meek/browserevent'\n\nimport {listen} from '../core/eventmanager'\n\nexport default class Zoom extends Control {\n  \n  constructor (options = {}) {\n  \n    const className = options.className !== undefined ? options.className : 'dt-zoom'\n  \n    const delta = options.delta !== undefined ? options.delta : 1\n  \n    const zoomInLabel = options.zoomInLabel !== undefined ? options.zoomInLabel : '+'\n    const zoomOutLabel = options.zoomOutLabel !== undefined ? options.zoomOutLabel : '\\u2212'\n  \n    const zoomInTipLabel = options.zoomInTipLabel !== undefined ?\n      options.zoomInTipLabel : '放大'\n    \n    const zoomOutTipLabel = options.zoomOutTipLabel !== undefined ?\n      options.zoomOutTipLabel : '缩小'\n  \n    const inElement = document.createElement('button')\n    inElement.className = `${className}-in`\n    inElement.setAttribute('type', 'button')\n    inElement.title = zoomInTipLabel\n    inElement.appendChild(\n      typeof zoomInLabel === 'string' ? document.createTextNode(zoomInLabel) : zoomInLabel\n    )\n  \n    const outElement = document.createElement('button')\n    outElement.className = `${className}-out`\n    outElement.setAttribute('type', 'button')\n    outElement.title = zoomOutTipLabel\n    outElement.appendChild(\n      typeof zoomOutLabel === 'string' ? document.createTextNode(zoomOutLabel) : zoomOutLabel\n    )\n  \n    const cssClasses = `${className} dt-unselectable dt-control`\n    const element = document.createElement('div')\n    element.className = cssClasses\n    element.appendChild(inElement)\n    element.appendChild(outElement)\n  \n    super({\n      element: element,\n      target: options.target\n    })\n  \n    this._delta = delta\n    \n    listen(inElement, BrowserEvent.CLICK, this._handleClick, this)\n    listen(outElement, BrowserEvent.CLICK, this._handleClickIn, this)\n  }\n  \n  _handleClickIn (event) {\n    event.preventDefault()\n    this._zoomByDelta(-this._delta)\n  }\n  \n  /**\n   * @param {number} delta Zoom delta.\n   * @param {Event} event The event to handle\n   * @private\n   */\n  _handleClick ( event) {\n    event.preventDefault()\n    this._zoomByDelta(this._delta)\n  }\n  \n  \n  /**\n   * @param {number} delta Zoom delta.\n   * @private\n   */\n  _zoomByDelta (delta) {\n    const map = this.map\n    const view = map.view\n    if (!view) {\n      return\n    }\n    \n    const currentResolution = view.resolution\n    if (currentResolution) {\n      const newResolution = view.constrainResolution(currentResolution, delta)\n      view.resolution = newResolution\n    }\n  }\n  \n} \n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/control/zoom.js","/**\n * Created by zypc on 2016/11/13.\n */\n\n // The event processor for all subclasss, which can allow subclass\n // to handle event dispatching and listening.This is the top level class\n/**\n * 顶层事件处理器类,让子类具备事件的监听和派发\n *\n * @class Event\n * @module core\n * @constructor new Event()\n *\n */\nexport default class Event {\n  \n  /**\n   * Event's constructor\n   * @constructor constructor\n   */\n  constructor () {\n    this._pendingRemovals = {}\n\n    this._listeners = {}\n    this._dispatching = {}\n\n    this.nullFunction = function () {}\n  }\n  \n  /**\n   * 根据事件标识获取对应标识的方法列表\n   *\n   * @method getListeners\n   * @param type {String} event type 事件标识\n   * @return {Array} 返回对应事件标示的函数数组\n   */\n  getListeners (type) {\n    return this._listeners[type]\n  }\n  \n  /**\n   * 判断是否含有对应事件标识的监听\n   *\n   * @method hasListener\n   * @param optType {Boolean}\n   * @returns {Boolean} ture if exsit ,false otherwise\n   */\n  hasListener (optType) {\n    return optType ?\n      Reflect.has(this._listeners, optType) :\n      Object.keys(this._listeners).length > 0\n  }\n\n  /**\n   * 移除事件监听\n   *\n   * @method removeEventListener\n   * @param type {String} event type\n   * @param listener {Array} listeners for event type\n   */\n  removeEventListener (type, listener) {\n    const listeners = this._listeners[type]\n    if (listeners) {\n      let index = listeners.indexOf(listener)\n\n      if (Reflect.has(this._pendingRemovals, type)) {\n        listeners[index] = this.nullFunction\n        ++this._pendingRemovals[type]\n      } else {\n        listeners.splice(index, 1)\n\n        if (listeners.length === 0) {\n          Reflect.deleteProperty(this._listeners, type)\n        }\n      }\n    }\n  }\n  \n  /**\n   * 添加事件监听,需要指定事件标示和处理方法\n   *\n   * @example\n   *    map.addEventListener('singleclick', function(event) {})\n   *\n   * @method addEventListener\n   * @param type {String} event type\n   * @param listener {Array} listeners for event type\n   */\n  addEventListener (type, listener) {\n    let listeners = this._listeners[type]\n    if (!listeners) {\n      listeners = this._listeners[type] = []\n    }\n\n    if (listeners.indexOf(listener) === -1) {\n      listeners.push(listener)\n    }\n  }\n  \n  /**\n   * 事件派发\n   *\n   * @example\n   * this.dispatchEvent(EventType.CHANGE)\n   *\n   * @method dispatchEvent\n   * @param event {String} event type string\n   * @returns {Boolean} ture if success ,false otherwise.\n   */\n  dispatchEvent (event) {\n    const evt = typeof event === 'string' ? {type: event} : event\n    const type = evt.type\n    evt.target = this\n    const listeners = this._listeners[type]\n    let propagate\n\n    if (listeners) {\n      if(!Reflect.has(this._dispatching, type)) {\n        this._dispatching[type] = 0\n        this._pendingRemovals[type] = 0\n      }\n\n      ++this._dispatching[type]\n\n      for (let i = 0, ii = listeners.length; i < ii; ++i) {\n        if (listeners[i].call(this, evt) === false || evt.propagationStopped) {\n          propagate = false\n          break\n        }\n      }\n\n      --this._dispatching[type]\n\n      if (this._dispatching[type] === 0) {\n        let pendingRemovals = this._pendingRemovals[type]\n        Reflect.deleteProperty(this._pendingRemovals, type)\n\n        while (pendingRemovals--) {\n          this.removeEventListener(type, this.nullFunction)\n        }\n\n        Reflect.deleteProperty(this._dispatching, type)\n      }\n\n      return propagate\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/event.js","/**\n * Created by zypc on 2016/11/15.\n */\n\nimport BaseObject from '../core/baseobject'\nimport {listen, unlistenByKey} from '../core/eventmanager'\nimport {EventType} from '../meek/eventtype'\n\n/**\n * Layer基础类\n *\n * @class BaseLayer\n * @extends BaseObject\n * @module layer\n * @constructor\n */\nexport default class BaseLayer extends BaseObject {\n\n  constructor (options) {\n    super()\n\n    const baseOptions = Object.assign({},options)\n    \n    this.name = baseOptions.name || ''\n    this.visible = true\n    this.datasource = []\n    this.opacity = baseOptions.opacity !== undefined ? options.opacity : 1\n    this.dataExtent = null\n    this.maxResolution = 0\n    this.minResolution = 0\n    this.zIndex = baseOptions.zIndex || 0\n\n    this._mapRenderKey = null\n    \n  }\n\n  /**\n   * map读写器, 读取设置当前map\n   *\n   * @type {Function}\n   * @property map\n   * @param mapValue {Object} Datatang.map\n   */\n  get map () { return this._map }\n  set map (value) {\n    if (this._mapRenderKey) {\n      unlistenByKey(this._mapRenderKey)\n      this._mapRenderKey = null\n    }\n\n    if (value) {\n      this._map = value\n      this._mapRenderKey = listen(this, EventType.CHANGE, value.render, value)\n      this.changed()\n    }\n  }\n\n  /**\n   * 设置图层是否显示(将会触发的重绘事件)\n   *\n   * @property visible\n   * @param value\n   */\n  get visible () { return this._visible }\n  set visible (value) {\n    if (this._visible !== value) {\n      this._visible = value\n    }\n  }\n\n  /**\n   * 设置图层的透明度(将会触发map的重绘事件)\n   *\n   * @property opacity\n   * @param value\n   */\n  get opacity () { return this._opacity }\n  set opacity (value) { this._opacity = value }\n\n  /**\n   * 设置图层的最小分辨率\n   *\n   * @property minResolution\n   * @returns {*}\n   */\n  get minResolution () { return this._minResolution }\n  set minResolution (value) { this._minResolution = value }\n\n  /**\n   * 设置图层的最大分辨率\n   *\n   * @property maxResolution\n   * @returns {*}\n   */\n  get maxResolution () { return this._maxResolution }\n  set maxResolution (value) { this._maxResolution = value }\n\n  /**\n   * dataExtent读取器\n   *\n   * @property dataExtent\n   * @returns {*}\n   */\n  get dataExtent () {}\n  set dataExtent (value) {\n    this._dataExtent = value\n  }\n\n  /**\n   * datasouce 读取器\n   *\n   * @property datasouce\n   * @returns {*}\n   */\n  get datasouce () { return this._datasource }\n  set datasource (value) {\n    this._datasource = value\n  }\n\n  /**\n   * zIndex读取器\n   *\n   * @property maxResolution\n   * @returns {*}\n   */\n  get zIndex () { return this._zIndex }\n  set zIndex (value) {\n    if (this._zIndex !== value) {\n      this._zIndex = value\n    }\n  }\n\n  /**\n   * 加载Feature\n   *\n   * @method loadFeature\n   * @returns {Object} features\n   */\n  loadFeature () {\n    return this.features\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lyr/baselayer.js","/**\n * Created by zhangyong on 2017/6/6.\n */\n\nimport BaseEvent from '../../core/baseevent'\n\nexport default class ImageEvent extends BaseEvent {\n  constructor (type, image) {\n    super(type)\n    \n    this.image = image\n  }\n  \n}\n\n\nImageEvent.Type = {\n  \n  /**\n   * Triggered when an image starts loading.\n   * @api\n   */\n  IMAGELOADSTART: 'imageloadstart',\n  \n  /**\n   * Triggered when an image finishes loading.\n   * @api\n   */\n  IMAGELOADEND: 'imageloadend',\n  \n  /**\n   * Triggered if image loading results in an error.\n   * @api\n   */\n  IMAGELOADERROR: 'imageloaderror'\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/lyr/image/imageevent.js","/**\n * Created by zhangyong on 2017/6/6.\n */\n\nimport BaseImage from '../../core/baseimage'\nimport {ImageState} from './imagestate'\nimport Obj from '../../utils/obj'\nimport {ExtentUtil} from '../../geometry/support/extentutil'\nimport {EventType} from '../../meek/eventtype'\n\nimport {listenOnce, unlistenByKey} from '../../core/eventmanager'\nimport {getUid} from '../../utils/counter'\n\nexport default class SingleImage extends BaseImage {\n  \n  constructor (extent, resolution, pixelRatio, attributions, src,\n               crossOrigin, imageLoadFunction) {\n    \n    super(extent, resolution, pixelRatio, ImageState.IDLE,\n      attributions)\n  \n    /**\n     * @private\n     * @type {string}\n     */\n    this._src = src\n  \n    /**\n     * @private\n     * @type {HTMLCanvasElement|Image|HTMLVideoElement}\n     */\n    this.domImage = new Image()\n    if (crossOrigin !== null) {\n      this.getDomImage().crossOrigin = crossOrigin\n    }\n  \n    /**\n     * @private\n     * @type {Object.<number, (HTMLCanvasElement|Image|HTMLVideoElement)>}\n     */\n    this._imageByContext = {}\n  \n    /**\n     * @private\n     * @type {Array.<EventsKey>}\n     */\n    this._imageListenerKeys = null\n  \n    /**\n     * @protected\n     * @type {ImageState}\n     */\n    this.state = ImageState.IDLE\n  \n    /**\n     * @private\n     * @type {ImageLoadFunctionType}\n     */\n    this._imageLoadFunction = imageLoadFunction\n  }\n  \n  /**\n   * @inheritDoc\n   * @api\n   */\n  getDomImage (opt_context) {\n    if (opt_context !== undefined) {\n      let image\n      let key = getUid(opt_context)\n      \n      if (key in this._imageByContext) {\n        return this._imageByContext[key]\n      } else if (Obj.isEmpty(this._imageByContext)) {\n        image = this._domImage\n      } else {\n        image = this._domImage.cloneNode(false)\n      }\n      \n      this._imageByContext[key] = image\n      return image\n    } else {\n      return this._domImage\n    }\n  }\n  \n  \n  /**\n   * Tracks loading or read errors.\n   *\n   * @private\n   */\n  _handleImageError () {\n    this.state = ImageState.ERROR\n    this._unlistenImage()\n    this.changed()\n  }\n  \n  \n  /**\n   * Tracks successful image load.\n   *\n   * @private\n   */\n  _handleImageLoad () {\n    if (this.resolution === undefined) {\n      this.resolution = ExtentUtil.getHeight(this.extent) / this.getDomImage().height\n    }\n    \n    this.state = ImageState.LOADED\n    this._unlistenImage()\n    this.changed()\n  }\n  \n  \n  /**\n   * Load the image or retry if loading previously failed.\n   * Loading is taken care of by the tile queue, and calling this method is\n   * only needed for preloading or for reloading in case of an error.\n   * @override\n   * @api\n   */\n  load () {\n    if (this.state === ImageState.IDLE || this.state === ImageState.ERROR) {\n      this.state = ImageState.LOADING\n      this.changed()\n      this._imageListenerKeys = [\n        listenOnce(this.getDomImage(), EventType.ERROR,\n          this._handleImageError, this),\n        listenOnce(this.getDomImage(), EventType.LOAD,\n          this._handleImageLoad, this)\n      ]\n      \n      this._imageLoadFunction(this, this._src)\n    }\n  }\n  \n  \n  /**\n   * @param {HTMLCanvasElement|Image|HTMLVideoElement} image Image.\n   */\n  set domImage (value) {\n    this._domImage = value\n  }\n  \n  /**\n   * Discards event handlers which listen for load completion or errors.\n   *\n   * @private\n   */\n  _unlistenImage () {\n    this._imageListenerKeys.forEach(unlistenByKey)\n    this._imageListenerKeys = null\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/lyr/image/singleimage.js","/**\n * Created by zypc on 2016/11/15.\n */\n\nimport BaseLayer from './baselayer'\nimport SingleImage from '../lyr/image/singleimage'\n\nimport {listen} from '../core/eventmanager'\nimport {createCanvasContext2D} from '../utils/domutil'\nimport ImageEvent from '../lyr/image/imageevent'\n\nimport {EventType} from '../meek/eventtype'\nimport {ImageState} from '../lyr/image/imagestate'\nimport {ExtentUtil} from '../geometry/support/extentutil'\n\n/**\n * SingleImageLayer\n *\n * @class SingleImageLayer\n * @extends BaseObject\n * @module layer\n * @constructor\n */\nexport default class SingleImageLayer extends BaseLayer {\n  \n  /**\n   * @constructor\n   * @param options\n   */\n  constructor (options = {}) {\n    super(options)\n  \n    const imageExtent = options.imageExtent\n    this.dataExtent = imageExtent\n  \n    const crossOrigin = options.crossOrigin !== undefined ?\n      options.crossOrigin : null\n  \n    const imageLoadFunction =\n      options.imageLoadFunction !== undefined ?\n      options.imageLoadFunction : this.defaultImageLoadFunction\n    \n    this.attributions = options.attributions\n  \n    /**\n     * @private\n     */\n    this._singleImage = new SingleImage(imageExtent, undefined, 1, this.attributions,\n      options.url, crossOrigin, imageLoadFunction)\n    \n    /**\n     * @private\n     * @type {ol.Size}\n     */\n    this._imageSize = options.imageSize ? options.imageSize : null\n  \n    /**\n     * Listen the change event for SingleImage\n     */\n    listen(this.singleImage, EventType.CHANGE, this.handleImageChange, this)\n  \n    /**\n     *\n     * @type {number}\n     */\n    this.zIndex = 0\n  }\n  \n  /**\n   * 设置图片链接\n   *\n   * @method imageSrc\n   * @param url {String}\n   *\n   */\n  set imageSrc (url) {\n    this._singleImage._src = url\n    this._singleImage.domImage = new Image()\n    this._singleImage.state = ImageState.IDLE\n  }\n\n  /**\n   * 获取singleImage\n   *\n   * @property singleImage\n   * @returns {SingleImage}\n   */\n  get singleImage () { return this._singleImage }\n\n  /**\n   * 属性读写器\n   *\n   * @property attributions\n   * @param value\n   */\n  set attributions(value){\n    this._attributes = value\n  }\n  \n  get attributions(){\n    return this._attributes || null\n  }\n  \n  /**\n   *\n   * @param image\n   * @param src\n   */\n  defaultImageLoadFunction (image, src) {\n    image.getDomImage().src = src\n  }\n  \n  /**\n   * 获取图片的Dom\n   * @inheritDoc\n   */\n  getImageInternal (extent) {\n    if (ExtentUtil.intersects(extent, this.singleImage.extent)) {\n      return this.singleImage\n    }\n    \n    return null\n  }\n  \n  /**\n   * Handle the image change event\n   * @param evt\n   */\n  handleImageChange (evt) {\n    if (this.singleImage.state === ImageState.LOADED) {\n      const imageExtent = this.singleImage.extent\n      const image = this.singleImage.getDomImage()\n      let imageWidth, imageHeight\n      if (this._imageSize) {\n        imageWidth = this._imageSize[0]\n        imageHeight = this._imageSize[1]\n      } else {\n        imageWidth = image.width\n        imageHeight = image.height\n      }\n      \n      const resolution = ExtentUtil.getHeight(imageExtent) / imageHeight\n      const targetWidth = Math.ceil(ExtentUtil.getWidth(imageExtent) / resolution)\n      \n      if (targetWidth !== imageWidth) {\n        const context = createCanvasContext2D(targetWidth, imageHeight)\n        const canvas = context.canvas\n        context.drawImage(image, 0, 0, imageWidth, imageHeight,\n          0, 0, canvas.width, canvas.height)\n        // Pre-load image\n        this.singleImage.domImage = canvas\n      }\n    }\n  \n    this._dispatchImageEvent(evt)\n  }\n  \n  /**\n   *\n   * @param event\n   * @private\n   */\n  _dispatchImageEvent (event) {\n    const image = event.target\n    switch (image.state) {\n    case ImageState.LOADING:\n      this.dispatchEvent(\n        new ImageEvent(ImageEvent.Type.IMAGELOADSTART,\n          image))\n      break\n    case ImageState.LOADED:\n      this.dispatchEvent(\n        new ImageEvent(ImageEvent.Type.IMAGELOADEND,\n          image))\n      break\n    case ImageState.ERROR:\n      this.dispatchEvent(\n        new ImageEvent(ImageEvent.Type.IMAGELOADERROR,\n          image))\n      break\n    default:\n      // pass\n    }\n  }\n  \n  \n  \n  \n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lyr/singleimagelayer.js","/**\n * Created by zhangyong on 2017/6/9.\n */\n\nimport BaseEvent from '../core/baseevent'\n\n/**\n * FeatureEvent类\n *\n * @class FeatureEvent\n * @extends baseevent\n * @module meek\n */\nexport default class FeatureEvent extends BaseEvent {\n  \n  constructor (type, feature) {\n    super(type)\n    \n    this.feature = feature\n  }\n  \n}\n\n\n/**\n * Feature event definition\n * @type {{ADD_FEATURE: string, REMOVE_FEATURE: string, CLEAR: string}}\n */\nFeatureEvent.EventType = {\n  \n  /**\n   * Triggered when a feature is added.\n   */\n  ADD_FEATURE: 'addfeature',\n  \n  /**\n   * Triggered when a feature is removed.\n   */\n  REMOVE_FEATURE: 'removefeature',\n  \n  /**\n   * Triggered when all features are removed.\n   */\n  CLEAR: 'clear',\n  \n  /**\n   * Triggered when the feature collection has been changed.\n   */\n  FEATURE_COLLECTION_CHANGED: 'featurecollectionchanged'\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/meek/featureevent.js","/**\n * Created by zhangyong on 2017/3/23.\n */\n\nimport BaseObject from '../core/baseobject'\nimport {ExtentUtil} from '../geometry/support/extentutil'\nimport {Config} from '../meek/config'\n\nimport {linearFindNearest} from '../utils/array'\nimport {clamp} from '../utils/math'\n\n/**\n * View 视图类\n *\n * @class View\n * @extends BaseObject\n * @module meek\n * @constructor\n */\nexport default class View extends BaseObject {\n\n  /**\n   * @constructor\n   * @param options\n   */\n  constructor (options) {\n    super()\n    \n    const _innerOptions = Object.assign({}, options)\n    \n    this._applyOptions(_innerOptions)\n  }\n  \n  /**\n   * Parse options and apply to view\n   * @param options\n   * @private\n   */\n  _applyOptions (options) {\n    \n    const resolutionConstraint = this._createResolutionConstraint(options)\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._maxResolution = resolutionConstraint.maxResolution\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._minResolution = resolutionConstraint.minResolution\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._zoomFactor = resolutionConstraint.zoomFactor\n  \n    /**\n     * @private\n     * @type {Array.<number>|undefined}\n     */\n    this._resolutions = options.resolutions\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._minZoom = resolutionConstraint.minZoom\n  \n    const centerConstraint = this._createCenterConstraint(options)\n    const constraint = resolutionConstraint.constraint\n    const rotationConstraint = this._createRotationConstraint(options)\n  \n    /**\n     * center、resolution、ratation\n     * @private\n     */\n    this._constraints = {\n      center: centerConstraint,\n      resolution: constraint,\n      rotation: rotationConstraint\n    }\n  \n    this.center = options.center !== undefined ?\n         options.center : this._calculateCenter()\n\n    this.resolution = options.resolution !== undefined ?\n        options.resolution : this.constrainResolution(this._maxResolution, options.zoom - this._minZoom)\n\n    // 记录原始 view 参数\n    this._originalCenter = this.center\n    this._originalResolution = this.resolution\n    \n    this.rotation = 0\n    \n    this.dataExtent = resolutionConstraint.extent\n    \n    this._options = options\n  }\n  \n  \n  _createRotationConstraint () {\n    return 0\n  }\n  \n  /**\n   * 创建视图中心限制条件\n   *\n   * @method createCenterConstraint\n   * @param options\n   * @returns {Function}\n   * @private\n   */\n  _createCenterConstraint () {\n    return function (center) {\n      return center\n    }\n  }\n  \n  /**\n   * 创建分辨率限制条件\n   *\n   * @method createResolutionConstraint\n   * @param options\n   * @returns {{constraint: *, maxResolution: *, minResolution: *, minZoom: *, zoomFactor: number}}\n   * @private\n   */\n  _createResolutionConstraint (options) {\n    let resolutionConstraint\n    let maxResolution\n    let minResolution\n    let extent\n  \n    const defaultMaxZoom = Config.DEFAULT_MAX_ZOOM\n    const defaultZoomFactor = Config.DEFAULT_ZOOM_FACTOR\n    const defaultMinZoom = Config.DEFAULT_MIN_ZOOM\n    const defaultTileSize = Config.DEFAULT_TILE_SIZE\n  \n    let minZoom = options.minZoom !== undefined ?\n      options.minZoom : defaultMinZoom\n  \n    let maxZoom = options.maxZoom !== undefined ?\n      options.maxZoom : defaultMaxZoom\n  \n    const zoomFactor = options.zoomFactor !== undefined ?\n      options.zoomFactor : defaultZoomFactor\n  \n    const projection = options.projection\n    extent = projection.extent\n    \n    if (options.resolutions !== undefined) {\n      const resolutions = options.resolutions\n      maxResolution = resolutions[0]\n      minResolution = resolutions[resolutions.length - 1]\n      resolutionConstraint = this.createSnapToResolutions(resolutions)\n    } else {\n      // calculate the default min and max resolution\n      const size = Math.max(ExtentUtil.getWidth(extent), ExtentUtil.getHeight(extent))\n      const defaultMaxResolution = size / defaultTileSize / Math.pow(\n          defaultZoomFactor, defaultMinZoom)\n    \n      const defaultMinResolution = defaultMaxResolution / Math.pow(\n          defaultZoomFactor, defaultMaxZoom - defaultMinZoom)\n    \n      // user provided maxResolution takes precedence\n      maxResolution = options.maxResolution\n      if (maxResolution !== undefined) {\n        minZoom = 0\n      } else {\n        maxResolution = defaultMaxResolution / Math.pow(zoomFactor, minZoom)\n      }\n    \n      // user provided minResolution takes precedence\n      minResolution = options.minResolution\n      if (minResolution === undefined) {\n        if (options.maxZoom !== undefined) {\n          if (options.maxResolution !== undefined) {\n            minResolution = maxResolution / Math.pow(zoomFactor, maxZoom)\n          } else {\n            minResolution = defaultMaxResolution / Math.pow(zoomFactor, maxZoom)\n          }\n        } else {\n          minResolution = defaultMinResolution\n        }\n      }\n    \n      // given discrete zoom levels, minResolution may be different than provided\n      maxZoom = minZoom + Math.floor(\n          Math.log(maxResolution / minResolution) / Math.log(zoomFactor))\n      minResolution = maxResolution / Math.pow(zoomFactor, maxZoom - minZoom)\n    \n      resolutionConstraint = this.createSnapToPower(\n        zoomFactor, maxResolution, maxZoom - minZoom)\n    }\n    \n    return {\n      constraint: resolutionConstraint,\n      maxResolution,\n      minResolution,\n      minZoom,\n      zoomFactor,\n      extent\n    }\n  }\n  \n  /**\n   *\n   * @param power\n   * @param maxResolution\n   * @param opt_maxLevel\n   * @returns {Function}\n   */\n  createSnapToPower (power, maxResolution, opt_maxLevel) {\n    return function(resolution, delta, direction) {\n      if (resolution !== undefined) {\n        const offset = -direction / 2 + 0.5\n        const oldLevel = Math.floor(\n          Math.log(maxResolution / resolution) / Math.log(power) + offset)\n        let newLevel = Math.max(oldLevel + delta, 0)\n        if (opt_maxLevel !== undefined) {\n          newLevel = Math.min(newLevel, opt_maxLevel)\n        }\n  \n        const reso = maxResolution / Math.pow(power, newLevel)\n        return reso\n      } else {\n        return undefined\n      }\n    }\n  }\n  \n  /**\n   *\n   * @param resolutions\n   * @returns {Function}\n   */\n  createSnapToResolutions (resolutions) {\n    return function(resolution, delta, direction) {\n      if (resolution !== undefined) {\n        let z = linearFindNearest(resolutions, resolution, direction)\n        z = clamp(z + delta, 0, resolutions.length - 1)\n        const index = Math.floor(z)\n        if (z != index && index < resolutions.length - 1) {\n          let power = resolutions[index] / resolutions[index + 1]\n          return resolutions[index] / Math.pow(power, z - index)\n        } else {\n          return resolutions[index]\n        }\n      } else {\n        return undefined\n      }\n    }\n  }\n  \n  _calculateCenter () {\n    return [500, 500]\n  }\n  \n  \n  /**\n   * 获取视图状态\n   *\n   * @method getViewState\n   * @returns {{center: (ArrayBuffer|*|Array.<T>|Blob|string), resolution: *, rotation: *}}\n   */\n  getViewState () {\n    const center = this.center\n    const resolution = this.resolution\n    const rotation = this.rotation\n    \n    return {\n      center: center.slice(),\n      resolution,\n      rotation\n    }\n  }\n  \n  /**\n   * 分辨率限制\n   *\n   * @method constrainResolution\n   * @param resolution\n   * @param opt_delta\n   * @param opt_direction\n   * @returns {*}\n   */\n  constrainResolution (resolution, opt_delta, opt_direction) {\n    const delta = opt_delta || 0\n    const direction = opt_direction || 0\n    return this._constraints.resolution(resolution, delta, direction)\n  }\n  \n  /**\n   * 计算缩放中心点\n   *\n   * @method calculateCenterZoom\n   * @param resolution {Number}\n   * @param anchor {Number}\n   * @returns {Array}\n   */\n  calculateCenterZoom (resolution, anchor) {\n    let center\n    const currentCenter = this.center\n    const currentResolution = this.resolution\n    if (currentCenter !== undefined && currentResolution !== undefined) {\n      const x = anchor[0] -\n        resolution * (anchor[0] - currentCenter[0]) / currentResolution\n      const y = anchor[1] -\n        resolution * (anchor[1] - currentCenter[1]) / currentResolution\n      center = [x, y]\n    }\n    \n    return center\n  }\n  \n  /**\n   * 是否限制视图中心\n   *\n   * @method constrainCenter\n   * @param center\n   * @returns {Boolean}\n   */\n  constrainCenter (center) {\n    this._constraints.center = center\n    this._center = center\n    return true\n  }\n\n  /**\n   * 视图中心点读写器\n   *\n   * @property center\n   * @return {*}\n   */\n  get center () { return this._center }\n  set center ( value ) {\n    this.constrainCenter(value)\n    this.changed()\n  }\n\n  /**\n   * 分辨率读写器\n   *\n   * @property resolution\n   * @return {*}\n   */\n  get resolution () { return this._resolution }\n  set resolution (value){\n    this._resolution = value\n  \n    this.changed()\n  }\n\n  /**\n   * 旋转率读写器\n   *\n   * @property rotation\n   * @return {*}\n   */\n  get rotation () { return this._rotation }\n  set rotation (value){\n    this._rotation = value\n  }\n\n  /**\n   * dataExtent读写器\n   *\n   * @property dataExtent\n   * @return {*}\n   */\n  get dataExtent () { return this._dataExtent }\n  set dataExtent (value) {\n    this._dataExtent = value\n  }\n\n  /**\n   * 获取最小分辨率\n   *\n   * @property minResolution\n   * @return {Number}\n   */\n  get minResolution () { return this._minResolution }\n\n  /**\n   * 获取最大分辨率\n   *\n   * @property maxResolution\n   * @returns {Number}\n   */\n  get maxResolution () { return this._maxResolution }\n  \n  \n  /**\n   * 获取初始设置的地图中心点\n   *\n   * @property originalCenter\n   * @type {Array}\n   */\n  get originalCenter () { return this._originalCenter }\n  \n  /**\n   * 获取初始设置的地图级别\n   *\n   * @property originalResolution\n   * @type {Number}\n   */\n  get originalResolution () { return this._originalResolution }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/meek/view.js","/**\n * Created by zhangyong on 2017/3/20.\n */\n\nimport BaseObject from '../../core/baseobject'\nimport {Transform} from '../../data/matrix/transform'\nimport {ExtentUtil} from '../../geometry/support/extentutil'\nimport {ImageState} from '../../lyr/image/imagestate'\nimport {EventType} from '../../meek/eventtype'\nimport {Canvas} from '../../utils/canvas'\n\nimport {listen} from '../../core/eventmanager'\n\nexport default class LayerRenderer extends BaseObject {\n  \n  constructor (layer,context) {\n    super()\n    \n    this._context = context\n    this._layer = layer\n  \n    this.renderedResolution = undefined\n    \n    this._transform = ExtentUtil.createEmpty()\n  }\n  \n  /**\n   *\n   * @param frameState\n   * @param offsetX\n   * @returns {*|!Transform}\n   */\n  getTransform (frameState, offsetX) {\n    const viewState = frameState.viewState\n    const pixelRatio = 1\n    const dx1 = pixelRatio * frameState.size[0] / 2\n    const dy1 = pixelRatio * frameState.size[1] / 2\n    const sx = pixelRatio / viewState.resolution\n    const sy = sx\n    const angle = -viewState.rotation\n    const dx2 = -viewState.center[0] + offsetX\n    const dy2 = -viewState.center[1]\n    return Transform.compose(this._transform, dx1, dy1, sx, sy, angle, dx2, dy2)\n  }\n  \n  /**\n   * Load the image\n   * @param image\n   * @returns {boolean}\n   */\n  loadImage (image) {\n    let imageState = image.state\n    if (imageState !== ImageState.LOADED &&\n        imageState !== ImageState.ERROR) {\n      listen(image, EventType.CHANGE, this._handleImageChange, this)\n    }\n    \n    if (imageState === ImageState.IDLE) {\n      image.load()\n      imageState = image.state\n    }\n    \n    return imageState === ImageState.LOADED\n  }\n  \n  /**\n   *\n   * @param event\n   * @private\n   */\n  _handleImageChange (event) {\n    const image = event.target\n    if (image.state === ImageState.LOADED) {\n      this.renderIfReadyAndVisible()\n    }\n  }\n  \n  /**\n   *\n   */\n  renderIfReadyAndVisible () {\n    const layer = this.layer\n    // if (layer.visible && layer.getSourceState() == State.READY) {\n    if (layer.visible) {\n      layer.changed()\n      // this.changed()\n    }\n  }\n  \n  /**\n   *\n   * @param context\n   * @param frameState\n   * @param extent\n   */\n  clip (context, frameState, extent) {\n    const pixelRatio = frameState.pixelRatio\n    const width = frameState.size[0] * pixelRatio\n    const height = frameState.size[1] * pixelRatio\n    const rotation = frameState.viewState.rotation\n    const topLeft = ExtentUtil.getTopLeft((extent))\n    const topRight = ExtentUtil.getTopRight((extent))\n    const bottomRight = ExtentUtil.getBottomRight((extent))\n    const bottomLeft = ExtentUtil.getBottomLeft((extent))\n    \n    Transform.apply(frameState.toPixelTransform, topLeft)\n    Transform.apply(frameState.toPixelTransform, topRight)\n    Transform.apply(frameState.toPixelTransform, bottomRight)\n    Transform.apply(frameState.toPixelTransform, bottomLeft)\n    \n    context.save()\n    Canvas.rotateAtOffset(context, -rotation, width / 2, height / 2)\n    context.beginPath()\n    context.moveTo(topLeft[0] * pixelRatio, topLeft[1] * pixelRatio)\n    context.lineTo(topRight[0] * pixelRatio, topRight[1] * pixelRatio)\n    context.lineTo(bottomRight[0] * pixelRatio, bottomRight[1] * pixelRatio)\n    context.lineTo(bottomLeft[0] * pixelRatio, bottomLeft[1] * pixelRatio)\n    context.clip()\n    Canvas.rotateAtOffset(context, rotation, width / 2, height / 2)\n  }\n  \n  \n  /**\n   *\n   * @returns {*}\n   */\n  get layer () { return this._layer }\n  get context () {return this._context}\n  \n  /**\n   *\n   * @param frameStateOpt\n   */\n  prepareFrame (frameStateOpt) {}// eslint-disable-line no-unused-vars\n  \n  /**\n   *\n   * @param frameStateOpt\n   * @param context\n   */\n  composeFrame (frameStateOpt, context) {}// eslint-disable-line no-unused-vars\n  \n  /**\n   *\n   * @param context\n   * @param frameState\n   * @param optTransform\n   */\n  postCompose (context, frameState, optTransform){} // eslint-disable-line no-unused-vars\n  \n  /**\n   *\n   * @param context\n   * @param frameState\n   * @param optTransform\n   */\n  preCompose (context, frameState, optTransform){} // eslint-disable-line no-unused-vars\n}\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/canvas/layerrenderer.js","/**\n * Created by zhangyong on 2017/5/15.\n */\n\n\nexport const RenderEventType = {}\n\n/**\n *\n * @type {string}\n */\nRenderEventType.PRERENDER =  'prerender'\n\n/**\n *\n * @type {string}\n */\nRenderEventType.POSTRENDER = 'postrender'\n\n/**\n *\n * @type {string}\n */\nRenderEventType.RENDER = 'render'\n\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/rendereventtype.js","/**\n * Created by zypc on 2016/11/15.\n */\n\nimport BaseStyle from './basestyle'\nimport TextStyle from './textstyle'\n\n/**\n *\n * 定义多边形样式，多边形样式包括<b>填充样式</b>和<b>边框样式</b>，\n * 需要分别设置\n *\n * @class FillStyle\n * @extends BaseStyle\n * @module style\n * @constructor\n * @example\n *\n *     var fillStyle = new Datatang.FillStyle([255,255,255],\n *         new Datatang.LineStyle([0,0,255],1,1.25),0.5)\n *\n */\nexport default class FillStyle extends BaseStyle {\n\n  /**\n   * 构建一个面样式\n   * 面样式由填充样式和边框样式组成\n   *\n   * @constructor\n   * @param style 备有接口，以后扩充面的填充样式\n   * @param color 面的填充颜色\n   * @param alpha 免得填充透明度\n   * @param borderStyle LineStyle对象，指定面样式的边框对象属性\n   */\n  constructor (color = [255,255,255], borderStyle = null, alpha = 1, style = FillStyle.SOLID) {\n    super(color, style, alpha)\n\n    this._borderStyle = borderStyle\n    this.textStyle = new TextStyle()\n  }\n  \n  /**\n   * 边框样式对象\n   *\n   * @property borderStyle\n   * @type {Datatang.LineStyle}\n   */\n  get borderStyle () { return this._borderStyle}\n  set borderStyle (value) { return this._borderStyle = value }\n  \n  /**\n   * 克隆面样式\n   *\n   * @method clone\n   * @returns {FillStyle}\n   */\n  clone () {\n    const newStyle = new FillStyle(this.color, this.borderStyle.clone(),\n      this.alpha, this.style)\n    \n    if (this.textStyle) {\n      newStyle.textStyle = this.textStyle\n    }\n    \n    return newStyle\n  }\n  \n}\n\n/**\n * 实体填充\n * @static\n * @final\n * @property SOLID\n * @type {string}\n */\nFillStyle.SOLID = 'solid'\n\n\n// WEBPACK FOOTER //\n// ./src/style/fillstyle.js","/**\n * Created by zypc on 2016/11/15.\n */\n\nimport BaseStyle from './basestyle'\nimport TextStyle from './textstyle'\n\n/**\n * 定义一个点图形的样式\n *\n * @class PointStyle\n * @extends BaseStyle\n * @module style\n * @constructor\n * @example\n *\n *  // 定义一个点，包括外边框的样式\n *\n *  var pointStyle = new Datatang.PointStyle(10,[255, 255, 255],1,new Datatang.LineStyle([0, 0, 255],1,1))\n *\n */\nexport default class PointStyle extends BaseStyle {\n\n  /**\n   * 构建一个点样式对象\n   *\n   * @constructor\n   * @param style 点样式，{circle|square|cross|x|triangle}其中的一种\n   * @param size 点的大小，默认15\n   * @param color\n   * @param alpha\n   * @param xoffset\n   * @param yoffset\n   * @param angle\n   */\n  constructor (size = 15, color = [255,0,0], alpha = 1,borderStyle = null,\n               xoffset = 0, yoffset = 0, angle = 0, style = PointStyle.CIRCLE) {\n    super(color, style, alpha)\n\n    this._size = size\n    this._xoffset = xoffset\n    this._yoffset = yoffset\n    this._angle = angle\n    this._borderStyle = borderStyle\n    this.textStyle = new TextStyle()\n  }\n\n  /**\n   * 克隆点的样式\n   *\n   * @method clone\n   * @returns {PointStyle}\n   */\n  clone () {\n    const newStyle = new PointStyle(this.size, this.color, this.alpha,\n       this.borderStyle.clone(), this.xoffset, this.yoffset, this.angle, this.style)\n\n    if (this.textStyle) {\n      newStyle.textStyle = this.textStyle\n    }\n\n    return newStyle\n  }\n  \n  /**\n   * 大小\n   *\n   * @property size\n   * @type {Number}\n   */\n  get size(){ return this._size }\n  set size(value){ this._size = value}\n  \n  /**\n   * X 轴偏移量\n   *\n   * @property xoffset\n   * @type {Number}\n   */\n  get xoffset(){ return this._xoffset }\n  set xoffset(value){ this._xoffset = value}\n  \n  /**\n   * Y 轴偏移量\n   *\n   * @property yoffset\n   * @type {Number}\n   */\n  get yoffset(){ return this._yoffset }\n  set yoffset(value){ this._yoffset = value}\n  \n  /**\n   * 样式显示的角度\n   *\n   * @property angle\n   * @type {Number}\n   */\n  get angle(){ return this._angle }\n  set angle(value){ this._angle = value}\n  \n  /**\n   * 边框样式\n   *\n   * @property borderStyle\n   * @type {LineStyle}\n   */\n  get borderStyle(){ return this._borderStyle }\n  set borderStyle(value){ this._borderStyle = value}\n  \n}\n\n/**\n * 圆形样式\n *\n * @static\n * @final\n * @property CIRCLE\n * @type {String}\n */\nPointStyle.CIRCLE = 'circle'\n\n/**\n * 方形样式\n *\n * @static\n * @final\n * @property SQUARE\n * @type {String}\n */\nPointStyle.SQUARE = 'square'\n\n/**\n * 十字样式\n *\n * @static\n * @final\n * @property CROSS\n * @type {string}\n */\nPointStyle.CROSS = 'cross'\n\n/**\n * X样式\n *\n * @static\n * @final\n * @property X\n * @type {string}\n */\nPointStyle.X = 'x'\n\n/**\n * 三角形样式\n *\n * @static\n * @final\n * @property TRIANGLE\n * @type {string}\n */\nPointStyle.TRIANGLE = 'triangle'\n\n\n\n// WEBPACK FOOTER //\n// ./src/style/pointstyle.js","/**\n * Created by zhangyong on 2017/6/7.\n */\n\n\nexport const Canvas = {}\n\n\n/**\n *\n * @param context\n * @param rotation\n * @param offsetX\n * @param offsetY\n */\nCanvas.rotateAtOffset = function(context, rotation, offsetX, offsetY) {\n  if (rotation !== 0) {\n    context.translate(offsetX, offsetY)\n    context.rotate(rotation)\n    context.translate(-offsetX, -offsetY)\n  }\n}\n\n\n\nexport default {\n  Canvas\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/canvas.js","/**\n * Created by zypc on 2017/6/4.\n */\nexport const Coordinate = {}\n\nCoordinate.add = (coordinate, delta)  => {\n  coordinate[0] += delta[0]\n  coordinate[1] += delta[1]\n  return coordinate\n}\n\n\nCoordinate.rotate = (coordinate, angle) => {\n  const cosAngle = Math.cos(angle)\n  const sinAngle = Math.sin(angle)\n  const x = coordinate[0] * cosAngle - coordinate[1] * sinAngle\n  const y = coordinate[1] * cosAngle + coordinate[0] * sinAngle\n  coordinate[0] = x\n  coordinate[1] = y\n  return coordinate\n}\n\nCoordinate.scale = (coordinate, scale) => {\n  coordinate[0] *= scale\n  coordinate[1] *= scale\n  return coordinate\n}\n\n\nexport default {\n  Coordinate\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/coordinate.js","/**\n * Created by zhangyong on 2017/8/30.\n */\n\n\nexport const functions = {}\n\n/**\n * 默认条件函数执行\n * @returns {boolean}\n * @constructor\n */\nfunctions.TURE = () => true\n\n/**\n * 默认条件函数不执行\n * @returns {boolean}\n * @constructor\n */\nfunctions.FALSE = () => false\n\nexport default {\n  functions\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/functions.js","/**\n * Created by zhangyong on 2017/6/15.\n */\n\n\nimport Kinetic from './kinetic'\nimport DragPan from './dragpan'\nimport MouseWheelZoom from './mousewheelzoom'\nimport KeyboardHome from './keyboardhome'\nimport KeyboardZoom from './keyboardzoom'\nimport KeyboardPan from './keyboardpan'\n\n/**\n *\n * @param options\n * @returns {Set}\n */\nexport function componentsDefaults (options = {}) {\n  const components = new Set()\n  \n  const kinetic = new Kinetic(-0.005, 0.05, 100)\n  \n  const dragPan = options.dragPan !== undefined ? options.dragPan : true\n  if (dragPan) {\n    components.add(new DragPan({\n      kinetic: kinetic\n    }))\n  }\n  \n  const mouseWheelZoom = options.mouseWheelZoom !== undefined ?\n    options.mouseWheelZoom : true\n  if (mouseWheelZoom) {\n    components.add(new MouseWheelZoom({\n      constrainResolution: options.constrainResolution,\n      duration: options.zoomDuration\n    }))\n  }\n  \n  const keyboard = options.keyboard !== undefined ? options.keyborad : true\n  if (keyboard) {\n    components.add(new KeyboardHome(options))\n    components.add(new KeyboardPan(options))\n    components.add(new KeyboardZoom({\n      delta: options.zoomDelta\n    }))\n  }\n  \n  return components\n}\n\n\nexport default {\n  componentsDefaults\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/componentdefaults.js","/**\n * Created by zypc on 2016/11/15.\n */\n\nimport Component from './component'\nimport {Style} from '../style/style'\nimport FeaureLayer from '../lyr/featurelayer'\nimport Feature from '../meek/feature'\nimport Geometry from '../geometry/geometry'\nimport Point from '../geometry/point'\nimport Line from '../geometry/line'\nimport Polygon from '../geometry/polygon'\nimport MultiPolygon from '../geometry/mutilpolygon'\nimport Extent from '../geometry/extent'\nimport {ExtentUtil} from '../geometry/support/extentutil'\nimport {simplify} from '../geometry/support/geometryutil'\nimport {listen, unlistenByKey} from '../core/eventmanager'\nimport BrowserEvent from '../meek/browserevent'\nimport DrawEvent from './drawevent'\nimport Parallelogram from '../geometry/parallelogram'\nimport {functions} from '../utils/functions'\n\n/**\n * 图形绘制工具基础类\n *\n * @class Draw\n * @extends Component\n * @module component\n * @constructor\n * @example\n *\n *      // 实例化绘图工具\n *      var drawTool = new Datatang.Draw({\n *        type: 'point',\n *        drawLayer: new Datatang.FeatureLayer()\n *      })\n *\n */\nexport default class Draw extends Component {\n  \n  /**\n   * 构造函数\n   *\n   * @constructor constructor\n   * @param options\n   */\n  constructor (options = {}) {\n    super()\n  \n    this.applyHandleEventOption({\n      handleDownEvent: this._handleDownEvent,\n      handleMouseEvent: this.handleMouseEvent,\n      handleUpEvent: this._handleUpEvent\n    })\n    \n    /**\n     * mapRenderKey\n     * @type {null}\n     * @private\n     */\n    this._mapRenderKey = null\n    \n    /**\n     * 绘制作用图层;\n     * 需要给绘制工具一个绘制的图层\n     *\n     * @property drawLayer\n     * @type {null}\n     * @private\n     */\n    this._drawLayer = options.drawLayer ? options.drawLayer : null\n  \n    /**\n     * 鼠标按下时的坐标点\n     *\n     * @property downPointPx\n     * @type {null}\n     * @private\n     */\n    this._downPointPx = null\n    \n    /**\n     * 图形绘制结束条件\n     *\n     * @property finishCoordinate\n     * @type {null}\n     * @private\n     */\n    this._finishCoordinate = null\n  \n    /**\n     * 当前的绘图模式(点、线、多边形、矩形)\n     *\n     * @property drawMode\n     * @type {*}\n     */\n    this.drawMode = Draw.getDrawMode(options.type)\n  \n    /**\n     * 绘制多边形、线段时的临时坐标数据\n     *\n     * @property sketchCoords\n     * @type\n     * @private\n     */\n    this._sketchCoords = null\n  \n    /**\n     * 绘制多边的临时线段\n     *\n     * @property sketchLine\n     * @type {null}\n     * @private\n     */\n    this._sketchLine = null\n  \n    /**\n     * 绘制完成时的结束条件\n     *\n     * @property finishCondition\n     * @type {null}\n     * @private\n     *\n     */\n    this._finishCondition = options.finishCondition ?\n        options.finishCondition : functions.TURE\n        \n    /**\n     * 撤销条件\n     *\n     * @property undoCondition\n     * @type {Function}\n     * @private\n     */\n    this._undoCondition = options.undoCondition !== undefined ?\n        options.undoCondition : functions.TURE\n  \n    /**\n     * 设置默认回退的顶点数，默认1\n     * @TODO 需要完善\n     * @type {number}\n     * @private\n     */\n    this._undoStep = options.freehandUndoStep ?\n      options.freehandUndoStep : 2\n      \n    // add keyboard events\n    if (options.undoCondition || options.finishCondition) {\n      listen(document, 'keyup',\n        this._handleKeyboardEvent, this)\n    }\n  \n    /**\n     * 初始化草稿图层，用于临时显示绘制的图形\n     *\n     * @property sketchLayer\n     * @type {Object} featurelayer\n     * @private\n     */\n    this._sketchLayer = new FeaureLayer({name: 'sketch layer for draw component'})\n\n    /**\n     * 获取默认绘制渲染样式\n     *\n     * @property sketchLayer\n     * @private\n     * @type {Function}\n     */\n    this._sketchLayer.style = this.getDefaultStyleFunction()\n    \n    /**\n     * 临时点\n     *\n     * @property sketchPoint\n     * @type {null}\n     * @private\n     */\n    this._sketchPoint = null\n  \n    /**\n     * 绘制时，是否允许鼠标参考点\n     * @type {boolean}\n     * @private\n     */\n    this._enableSketchPoint = options.enableSketchPoint ?\n      options.enableSketchPoint : false\n  \n    /**\n     * 临时Feature\n     *\n     * @property sketchFeature\n     * @type {null}\n     * @private\n     */\n    this._sketchFeature = null\n  \n    /**\n     * 通过geometry的类型去构建一个geometry\n     *\n     * @property eometryFunction\n     * @type {null}\n     * @private\n     */\n    // The function that can build a geometry by the passed geometry type.\n    this._geometryFunction = null\n  \n    /**\n     * 临时的线段坐标数据\n     *\n     * @property sketchLineCoords\n     * @type {null}\n     * @private\n     */\n    this._sketchLineCoords = null\n  \n    /**\n     * freehand drawing\n     * @type {Boolean}\n     * @private\n     */\n    this._freehand = options.freehand ? options.freehand : false\n    \n    /**\n     * 公差像素距离\n     *\n     * @property snapTolerance\n     * @type {Number}\n     * @private\n     */\n    this._snapTolerance = options.snapTolerance ?\n        options.snapTolerance : 2\n  \n    /**\n     * 绘制线段时的最多点限制，默认没有限制\n     *\n     * @property maxLinePoints\n     * @type {Number}\n     * @private\n     */\n    this._maxLinePoints = options.maxLinePoints ?\n        options.maxLinePoints : Infinity\n\n    /**\n     * 绘制多边形时的顶点限制，默认没有限制\n     *\n     * @property maxPolygonPoints\n     * @type {Number}\n     * @private\n     */\n    this._maxPolygonPoints = options.maxPolygonPoints ?\n      options.maxPolygonPoints : Infinity\n  \n    /**\n     * 绘制线段的最少点为2，多边形为3\n     *\n     * @property minPoints\n     * @type {Number}\n     * @private\n     */\n    this._minPoints = options.minPoints ?\n      options.minPoints :\n      (this.drawMode === Draw.DrawMode.POLYGON ? 3 : 2)\n  \n  \n    /**\n     *\n     * @type {condition}\n     * @private\n     */\n    this._condition = options.condition ?\n      options.condition : functions.TURE\n    \n    /**\n     *\n     * @type {boolean}\n     * @private\n     */\n    this._shouldHandle = false\n  \n  \n    /**\n     *\n     * @type {number}\n     * @private\n     */\n    this._squaredClickTolerance = options.clickUpTolerance ?\n      options.clickUpTolerance * options.clickUpTolerance : 36\n        \n      \n  }\n  \n  /**\n   * 处理绘制结束事件\n   *\n   * handleKeyboardEvent\n   * @type {Function}\n   * @param event {event}\n   * @private\n   */\n  _handleKeyboardEvent (event) {\n    // If finish drawing\n    if (this._finishCondition(event)) {\n      // 判断多边形的顶点是否小于4个（正常多边形3个顶点，首尾相接多一个顶点），小于4个不是多边形，return\n      if (this.drawMode === Draw.DrawMode.POLYGON) {\n        if( this._sketchFeature === null) {\n          return\n        }\n        \n        let pcoordinates = this._sketchFeature.geometry.getCoordinates()\n        if (pcoordinates[0].length < 4) {\n          return\n        }\n      }\n\n      // 判断线的顶点是否小于2个，小于2个不是线段，return\n      if (this.drawMode === Draw.DrawMode.LINE) {\n        if( this._sketchFeature === null) {\n          return\n        }\n        \n        let pcoordinates = this._sketchFeature.geometry.getCoordinates()\n        if (pcoordinates.length <= 2) {\n          return\n        }\n      }\n      \n      this._finishDrawing()\n    }\n    \n    // If undo drawing\n    if (this._undoCondition) {\n      if (this._undoCondition(event)) {\n        this._undoDrawing()\n      }\n    }\n  }\n  \n  /**\n   * 获取图形创建、修改的工厂方法\n   *\n   * @property geometryFunction\n   * @type {Function}\n   * @retruns geometryFunction {Function}\n   */\n  get geometryFunction () {\n    if(!this._geometryFunction){\n      this._geometryFunction = this._initGeometryFunction()\n    }\n    \n    return this._geometryFunction\n  }\n  \n  /**\n   * drawMode读写器，\n   * 设置当前绘图的模式，重新赋值将会启动新图形类型的绘制\n   *\n   * @type {Function}\n   * @property drawMode\n   * @type {Datatang.Draw.DrawMode}\n   */\n  get drawMode () { return this._drawMode }\n  set drawMode (value){\n    const isIn = this._existInDrawMode(value)\n    \n    this.active = isIn ? true : false\n    this._drawMode = isIn ? value : Draw.DrawMode.UNDEFINED\n    \n    this._sketchLineCoords = null\n    this._abortDrawing()\n  \n    this._minPoints = this._drawMode === Draw.DrawMode.POLYGON ? 3 : 2\n  }\n\n  /**\n   * 判断传入的绘制类型是否在绘制列表中\n   *\n   * @method existInDrawMode\n   * @param value {String}\n   * @returns {Boolean}\n   * @private\n   */\n  _existInDrawMode (value){\n    if ((typeof value === 'string') && (value.constructor === String)) {\n      const drawMode = Draw.DrawMode\n      const modeValue = value.toUpperCase()\n  \n      if (modeValue === Draw.DrawMode.UNDEFINED.toUpperCase()) {\n        return false\n      }\n      \n      for (let val in drawMode) {\n        if (modeValue === drawMode[val].toUpperCase()) {\n          return true\n        }\n      }\n    }\n    \n    return false\n  }\n\n  /**\n   * 图形生产工厂方法\n   *\n   * @method geometryFactory\n   * @returns {Object} 返回一个geometry对象\n   * @private\n   */\n  _geometryFactory () {\n    let Constructor\n    let mode = this.drawMode\n  \n    if (mode === Draw.DrawMode.POINT) {\n      Constructor = Point\n    } else if (mode === Draw.DrawMode.LINE) {\n      Constructor = Line\n    } else if(mode === Draw.DrawMode.POLYGON) {\n      Constructor = Polygon\n    } else if (mode === Draw.DrawMode.EXTENT) {\n      Constructor = Extent\n    } else if (mode === Draw.DrawMode.PARALLELOGRAM) {\n      Constructor = Parallelogram\n    }\n    \n    return Constructor\n  }\n  \n  /**\n   * 设置缺省 geometryfunction\n   *\n   * @method initGeometryFunction\n   * @returns {Function} Geometry\n   * @private\n   */\n  _initGeometryFunction () {\n    const geometryFunction = (coordinates, opt_geometry) => {\n      let mode = this.drawMode\n      let geometry = opt_geometry\n      \n      if (geometry) {\n        if (mode === Draw.DrawMode.POLYGON ||\n            mode === Draw.DrawMode.PARALLELOGRAM ||\n            mode === Draw.DrawMode.LINE ) {\n          geometry.setCoordinates(coordinates)\n        } else if(mode === Draw.DrawMode.EXTENT) {\n          geometry.setCoordinates(ExtentUtil.boundingExtent(coordinates))\n        }\n      } else {\n        let Constructor = this._geometryFactory()\n        geometry = new Constructor(coordinates[0],coordinates[1])\n      }\n      \n      return geometry\n    }\n    \n    return geometryFunction\n  }\n  \n  /**\n   * 或者 freehand draw 的执行条件\n   *\n   * @param event\n   * @returns {boolean|*}\n   * @private\n   */\n  _freehandEnable () {\n    const drawMode = this.drawMode\n    return (drawMode === Draw.DrawMode.POLYGON ||\n            drawMode === Draw.DrawMode.LINE ) && this._freehand\n  }\n  \n  /**\n   * 处理鼠标事件\n   *\n   * handleMouseEvent\n   * @param event {event}\n   * @returns {*|Boolean}\n   */\n  handleMouseEvent (event) {\n    // 排除右键\n    const buttons = event.originalEvent.buttons\n    if (buttons === 2) {\n      return false\n    }\n    \n    // 越界限制\n    event.coordinate = this.coordinateBeyond(event.coordinate)\n  \n    const freehand = this._freehandEnable()\n    // this._freehand = this._freehandEnable()\n    // let pass = !this._freehand\n    let pass = true\n    const eventType = event.type\n    if (freehand &&\n        eventType === BrowserEvent.MOUSE_DRAG &&\n        this._sketchFeature !== null) {\n      this._addToDrawing(event)\n      // pass = false\n    } else if (eventType === BrowserEvent.MOUSE_MOVE) {\n      pass = this._handleMove(event)\n    } else if (eventType === BrowserEvent.DBLCLICK) {\n      pass = false\n    }\n    \n    return super.handleMouseEvent(event) && pass\n  }\n  \n  /**\n   * 处理移动事件\n   *\n   * handleMove\n   * @param {BrowserEvent} event A move event.\n   * @return {boolean} Pass the event to other compoments.\n   * @private\n   */\n  _handleMove (event) {\n    if (this._downPointPx &&\n      ((!this._freehand && this._shouldHandle) ||\n      (this._freehand && !this._shouldHandle))) {\n      const downPx = this._downPointPx\n      const clickPx = event.pixel\n      const dx = downPx[0] - clickPx[0]\n      const dy = downPx[1] - clickPx[1]\n      const squaredDistance = dx * dx + dy * dy\n      this._shouldHandle = this._freehand ?\n        squaredDistance > this._squaredClickTolerance :\n        squaredDistance <= this._squaredClickTolerance\n    }\n    \n    if (this._finishCoordinate) {\n      this._modifyDrawing(event)\n      // this._autoPan(event)\n    } else {\n      this._updateSketchPoint(event)\n    }\n    \n    return true\n  }\n  \n  /**\n   * 鼠标按下时，获取当前坐标点\n   *\n   * handleDownEvent\n   * @param event {BrowserEvent} event A up event.\n   * @returns {Boolean}\n   * @private\n   */\n  _handleDownEvent (event) {\n    this._shouldHandle = !this._freehand\n    \n    if (this._freehand) {\n      this._downPointPx = event.pixel\n      if (!this._finishCoordinate) {\n        this._startDrawing(event)\n      }\n      \n      return false\n    } else if (this._condition(event)) {\n      this._downPointPx = event.pixel\n      return true\n    } else {\n      return false\n    }\n  }\n  \n  /**\n   * 处理鼠标弹起事件\n   *\n   * handleUpEvent\n   * @param event {BrowserEvent} event\n   * @private\n   */\n  _handleUpEvent (event) {\n    if (this.drawMode === Draw.DrawMode.UNDEFINED) {\n      return\n    }\n    \n    let pass = true\n    const mode = this.drawMode\n    \n    this._handleMove(event)\n    \n    if (this._shouldHandle) {\n      if (!this._finishCoordinate) {\n        this._startDrawing(event)\n    \n        // 点绘制在up的时候结束\n        if (this.drawMode === Draw.DrawMode.POINT) {\n          this._finishDrawing()\n        }\n      } else if (mode === Draw.DrawMode.CIRCLE ) {\n        //\n        //\n      } else if (mode === Draw.DrawMode.EXTENT) {\n        this._finishDrawing()\n      }\n      else if (this._atFinish(event)) {\n        if (this._finishCondition(event)) {\n          this._finishDrawing()\n        }\n      } else {\n        this._addToDrawing(event)\n      }\n    } else if (this._freehand && !this._finishCondition) {\n      this._finishCoordinate = null\n      this._abortDrawing()\n    }\n    \n    return pass\n  }\n  \n  /**\n   * 启动绘制，生成feature\n   *\n   * @method startDrawing\n   * @param event {Event}\n   * @private\n   */\n  _startDrawing (event) {\n    const startPoint = event.coordinate\n    this._finishCoordinate = startPoint\n    \n    const _drawMode = this.drawMode\n    \n    // 构造geometry数据\n    if (_drawMode === Draw.DrawMode.POINT) {\n      this._sketchCoords = startPoint.slice() // 缓存up的点\n    } else if (_drawMode === Draw.DrawMode.POLYGON ) {\n      this._sketchCoords = [[startPoint.slice(), startPoint.slice()]]\n      this._sketchLineCoords = this._sketchCoords[0]// temp line\n    } else if (_drawMode === Draw.DrawMode.PARALLELOGRAM) {// 平行四边形\n      this._sketchCoords = [[startPoint.slice(), startPoint.slice()]]\n      this._sketchLineCoords = this._sketchCoords[0]// temp line\n    } else {\n      this._sketchCoords = [startPoint.slice(),startPoint.slice()] // 缓存up的点，最后一个值，用于move的替换\n      \n      if (_drawMode === Draw.DrawMode.EXTENT) {\n        this._sketchLineCoords = this._sketchCoords\n      }\n    }\n  \n    if (this._sketchLineCoords) {\n      this._sketchLine = new Feature(new Line(this._sketchLineCoords))\n    }\n    \n    // Build a geometry uesed sketchCorrdds\n    const geometry = this.geometryFunction(this._sketchCoords)\n    \n    this._sketchFeature = new Feature()\n    this._sketchFeature.geometry = geometry\n    \n    // Redraw the sketch features\n    this._updateSketchFeatures()\n    \n    // 派发绘制开始事件\n    // Trigger the draw-strat event\n    this.dispatchEvent(new DrawEvent(DrawEvent.EventType.DRAW_START, this._sketchFeature))\n  }\n  \n  /**\n   * Modify the drawing\n   *\n   * @param event {Event}\n   * @private\n   */\n  _modifyDrawing (event) {\n    let coordinate = event.coordinate\n    const geometry = this._sketchFeature.geometry\n    let coordinates = null, last = null\n    const mode = this.drawMode\n    \n    if (mode === Draw.DrawMode.POINT) {\n      last = this._sketchCoords\n  \n      last[0] = coordinate[0]\n      last[1] = coordinate[1]\n    } else if (mode === Draw.DrawMode.POLYGON) {\n      coordinates = this._sketchCoords[0]\n      last = coordinates[coordinates.length - 1]\n      if (this._atFinish(event)) {\n        coordinate = this._finishCoordinate.slice()\n      }\n  \n      // 在鼠标移动的时候，将最后一个点替换成当前的鼠标点\n      last[0] = coordinate[0]\n      last[1] = coordinate[1]\n    } else if (mode === Draw.DrawMode.PARALLELOGRAM) {\n      coordinates = this._sketchCoords[0]\n      last = coordinates[coordinates.length - 1]\n      \n      // 需要清理，第三个点应该为鼠标点\n      if (coordinates.length > 3) {\n        coordinates = coordinates.slice(0, 2)\n        coordinates.push(coordinate)\n      } else {\n        last[0] = coordinate[0]\n        last[1] = coordinate[1]\n      }\n      \n      const lastSecondPoint = coordinates[coordinates.length - 2]\n  \n      // 平行四边形，如果有3个点，则直接生成平行四边形\n      if (lastSecondPoint[0] !== last[0] &&\n          lastSecondPoint[1] !== last[1] && coordinates.length === 3) {\n        const lstPoint = Parallelogram.getTheLastPoint(coordinates)\n        coordinates.push(lstPoint, coordinates[0])\n        this._sketchCoords = [coordinates]\n  \n        // 辅助效果线\n        this._sketchLineCoords = coordinates\n      }\n  \n    } else {\n      coordinates = this._sketchCoords // 获取up的点\n      last = coordinates[coordinates.length - 1]// 替换为当前MOve的点，形成一条path\n  \n      last[0] = coordinate[0]\n      last[1] = coordinate[1]\n    }\n    \n    if (this._freehand) {\n      const tempLastRing = this._sketchCoords[0]\n      if (tempLastRing.length > 2) {\n        const lastPoint = tempLastRing[tempLastRing.length - 1]\n        const lastPoint2 = tempLastRing[tempLastRing.length - 2]\n  \n        if (lastPoint[0] === lastPoint2[0] && lastPoint[1] === lastPoint2[1]) {\n          tempLastRing.pop()\n        }\n      }\n    }\n    \n    // 给 geometry 赋值\n    this.geometryFunction(this._sketchCoords, geometry)\n    \n    // 更新点坐标\n    if (this._sketchPoint) {\n      const sketchPointGeom = this._sketchPoint.geometry\n      sketchPointGeom.update(coordinate[0],coordinate[1])\n    }\n    \n    let sketchLineGeom\n    if (mode === Draw.DrawMode.EXTENT) {\n      if (!this._sketchLine) {\n        this._sketchLine = new Feature(new Line(null))\n      }\n      \n      const rings = geometry.getCoordinates()\n      sketchLineGeom = this._sketchLine.geometry\n      sketchLineGeom.path = rings\n    } else if (this._sketchLineCoords) {\n      sketchLineGeom =  (this._sketchLine.geometry)\n      sketchLineGeom.path = this._sketchLineCoords\n    }\n    \n    this._updateSketchFeatures()\n  }\n  \n  /**\n   * Add a new coordinate to the drawing\n   *\n   * @param event\n   * @private\n   */\n  _addToDrawing (event) {\n    const coordinate = event.coordinate\n    const geometry = this._sketchFeature.geometry\n    let coordinates,done\n    const mode = this.drawMode\n    \n    if (mode === Draw.DrawMode.LINE) {\n      this._finishCoordinate = coordinate.slice()\n      coordinates = this._sketchCoords\n      \n      if (coordinates.length > this._maxLinePoints) {\n        if (this._freehand) {\n          coordinates.pop()\n        } else {\n          done = true\n        }\n      }\n      \n      if (this._freehand) {\n        if (coordinates.length > 1) {\n          const lastPoint = coordinates[coordinates.length - 1]\n          if (lastPoint[0] === coordinate[0] &&\n            lastPoint[1] === coordinate[1]) {\n            coordinates.pop()\n          }\n        }\n      }\n      \n      coordinates.push(coordinate.slice())\n      this.geometryFunction(coordinates, geometry)\n    } else if (mode === Draw.DrawMode.POLYGON) {\n      coordinates = this._sketchCoords[0]\n      \n      if (coordinates.length > this._maxPolygonPoints ) {\n        if (this._freehand) {\n          coordinates.pop()\n        } else {\n          done = true\n        }\n      }\n      \n      coordinates.push(coordinate.slice())\n      \n      if (done) {\n        this._finishCoordinate = coordinates[0]\n      }\n      \n      this.geometryFunction(this._sketchCoords, geometry)\n    } else if (mode === Draw.DrawMode.PARALLELOGRAM) {\n      coordinates = this._sketchCoords[0]\n  \n      // 当前坐标数组添加新点数组\n      coordinates.push(coordinate.slice())\n      done = coordinates.length > this._maxPolygonPoints\n      \n      if (done) {\n        this._finishCoordinate = coordinates[0]\n      }\n      \n      this.geometryFunction(this._sketchCoords, geometry)\n    }\n    \n    this._updateSketchFeatures()\n    \n    if (done) {\n      this._finishDrawing()\n    }\n  }\n  \n  \n  /**\n   * 终止绘制，不会添加临时feature\n   *\n   * @method abortDrawing\n   * @returns {Feature|null|_Feature2.default}\n   * @private\n   */\n  _abortDrawing () {\n    this._finishCoordinate = null\n    const sketchFeature = this._sketchFeature\n    if (sketchFeature) {\n      this._sketchFeature = null\n      this._sketchPoint = null\n      this._sketchLine = null\n      this._sketchLayer.clear()\n    }\n    \n    return sketchFeature\n  }\n  \n  /**\n   * 绘制完成，形成正式feature\n   *\n   * @method finishDrawing\n   * @private\n   */\n  _finishDrawing () {\n    if (this._sketchFeature === null){\n      this.dispatchEvent(new DrawEvent(DrawEvent.EventType.DRAW_END))\n      return\n    }\n\n    const sketchFeature = this._abortDrawing()// 中止绘制，\n    const coordinates = this._sketchCoords\n    const geometry = (sketchFeature.geometry)\n    \n    const drawMode = this.drawMode\n  \n    if (drawMode === Draw.DrawMode.LINE) {\n      // remove the redundant last point\n      coordinates.pop()\n      this.geometryFunction(coordinates, geometry)\n    } else if (drawMode === Draw.DrawMode.POLYGON) {\n      // When we finish drawing a polygon on the last point,\n      // the last coordinate is duplicated as for LineString\n      // we force the replacement by the first point\n      coordinates[0].pop()\n      coordinates[0].push(coordinates[0][0])\n      this.geometryFunction(coordinates, geometry)\n    }\n    \n    // 处理复合图形\n    if (drawMode === Geometry.MULTI_POINT) {\n      // sketchFeature.geometry = new MultiPoint([coordinates]))\n    } else if (drawMode === Geometry.MULTI_LINE) {\n      // sketchFeature.geometry = new MultiLineString([coordinates])\n    } else if (drawMode === Geometry.MULTI_POLYGON) {\n      sketchFeature.geometry = new MultiPolygon([coordinates])\n    }\n  \n    if (this._freehand) {\n      simplify(sketchFeature.geometry)\n    }\n    \n    // 最终放到shource中，形成正式feature\n    if (this._drawLayer) {\n      sketchFeature.style = undefined\n      this._drawLayer.addFeatures([sketchFeature])\n    }\n  \n    // First dispatch event to allow full set up of feature\n    this.dispatchEvent(new DrawEvent(DrawEvent.EventType.DRAW_END, sketchFeature))\n  }\n  \n  /**\n   * Determine if an event is within the snapping tolerance of the start coord.\n   *\n   * @param event\n   * @returns {Boolean}\n   * @private\n   */\n  _atFinish (event) {\n    let at = false\n    if (this._sketchFeature) {\n      \n      if (this._freehand && this._finishCondition) {\n        return false\n      }\n      \n      let potentiallyDone = false\n      let potentiallyFinishCoordinates = [this._finishCoordinate]\n      \n      const drawMode = this.drawMode\n      if (drawMode === Draw.DrawMode.LINE) {\n        potentiallyDone = this._sketchCoords.length > this._minPoints\n      } else if (drawMode === Draw.DrawMode.POLYGON) {\n        potentiallyDone = this._sketchCoords[0].length > this._minPoints\n        potentiallyFinishCoordinates = [this._sketchCoords[0][0],\n          this._sketchCoords[0][this._sketchCoords[0].length - 2]]\n      } else if (drawMode === Draw.DrawMode.PARALLELOGRAM) {\n        at = this._sketchCoords[0].length === 5 ? true : false\n      }\n      \n      if (potentiallyDone) {\n        const map = event.map\n        for (let  i = 0, ii = potentiallyFinishCoordinates.length; i < ii; i++) {\n          const finishCoordinate = potentiallyFinishCoordinates[i]\n          const finishPixel = map.getPixelFromCoordinate(finishCoordinate)\n          const pixel = event.pixel\n          const dx = pixel[0] - finishPixel[0]\n          const dy = pixel[1] - finishPixel[1]\n          const freehand = this._freehand\n          const snapTolerance = freehand ? 1 : this._snapTolerance\n          at = Math.sqrt(dx * dx + dy * dy) <= snapTolerance\n          if (at) {\n            this._finishCoordinate = finishCoordinate\n            break\n          }\n        }\n      }\n    }\n    \n    return at\n  }\n  \n  /**\n   * Create or update the sketch point\n   *\n   * updateSketchPoint\n   * @param event {BrowserEvent} event\n   * @private\n   */\n  _updateSketchPoint (event) {\n    let coordinates = event.coordinate\n\n    if (!this._enableSketchPoint) {\n      return\n    }\n    \n    if (this._sketchPoint === null) {\n      const geom = new Point(coordinates[0], coordinates[1])\n      this._sketchPoint = new Feature(geom)\n      this._updateSketchFeatures()\n    } else {\n      const sketchPointgeom = this._sketchPoint.geometry\n      sketchPointgeom.setCoordinates(coordinates)\n    }\n  }\n  \n  _autoPan (event) {\n    const pixel = event.pixel\n    const size = this.map.size\n    const x = pixel[0]\n    const y = pixel[1]\n    \n    if (x <= 2 || y <= 2) {\n      // console.log('出界')\n      return\n    }\n    \n    if (x >= size[0] - 5 || y >= size[1] - 5) {\n      // console.log('出界')\n      return\n    }\n    \n  }\n  \n  /**\n   * Redraw the sketch featrues.\n   * updateSketchFeatures\n   * @private\n   */\n  _updateSketchFeatures () {\n    const features = []\n\n    if (this._sketchFeature){\n      features.push(this._sketchFeature)\n    }\n    \n    if (this._sketchLine) {\n      features.push(this._sketchLine)\n    }\n    \n    if (this._sketchPoint) {\n      features.push(this._sketchPoint)\n    }\n    \n    // 出发map的render\n    this._sketchLayer.clear()\n    this._sketchLayer.addFeatures(features)\n  }\n  \n  /**\n   * 执行撤销\n   *\n   * @method undoDrawing\n   * @private\n   */\n  _undoDrawing () {\n    const drawMode = this.drawMode\n    let undoStep = 1\n    let polygonDeleteStep = 2\n    if (this._freehand) {\n      undoStep = this._undoStep\n      polygonDeleteStep = 3\n    }\n    \n    if (drawMode === Draw.DrawMode.LINE ) {\n      if (this._sketchFeature) {\n        const coordinates = this._sketchFeature.geometry.getCoordinates()\n        if (coordinates.length + undoStep > 2) {\n          coordinates.splice(coordinates.length - 2, undoStep)\n          this._sketchFeature.changed()\n        }\n      }\n    } else if (drawMode === Draw.DrawMode.POLYGON) {\n      if (this._sketchFeature) {\n        const pcoordinates = this._sketchFeature.geometry.getCoordinates()[0]\n        \n        if (pcoordinates.length + undoStep > polygonDeleteStep ) {\n          pcoordinates.splice(pcoordinates.length - polygonDeleteStep, undoStep)\n          this._sketchFeature.changed()\n        }else {\n          this._abortDrawing()\n          this._finishDrawing()\n        }\n      }\n    }\n    \n  }\n\n  /**\n   * map读写器, 读取设置当前map\n   *\n   * @type {Function}\n   * @property map\n   * @param mapValue {Object} Datatang.map\n   */\n  get map (){ return this._map }\n  set map (mapValue) {\n    if (this._mapRenderKey) {\n      unlistenByKey(this._mapRenderKey)\n      this._mapRenderKey = null\n    }\n\n    if (mapValue) {\n      this._map = mapValue\n      // this._mapRenderKey = listen(this, EventType.CHANGE, mapValue.render, mapValue)\n      \n      mapValue.addLayer(this._sketchLayer)\n    }\n    \n    this._updateState()\n  }\n  \n  /**\n   * 更新绘制状态\n   *\n   * @method updateState\n   * @private\n   */\n  _updateState () {\n    const map = this.map\n    const active = this.active\n    if (!map || !active){\n      this._abortDrawing()\n    }\n  \n    this._sketchLayer.map = map\n  }\n  \n  /**\n   * 获取默认绘制样式\n   *\n   * @method getDefaultStyleFunction\n   * @returns {Function}\n   */\n  getDefaultStyleFunction () {\n    const styles = Style.createDefaultEditing()\n    return function (feature) {\n      return styles[feature.geometry.geometryType]\n    }\n  }\n  \n  /**\n   *\n   * @returns {boolean}\n   */\n  shouldStopEvent () {\n    if (this._freehand) {\n      return true\n    }\n    \n    return false\n  }\n\n  /**\n   * 获取当前的Layer\n   *\n   * @method drawLayer\n   * @return {null}\n   */\n  get drawLayer () { return this._drawLayer }\n  \n  /**\n   * 设置当前自由、绘制模式\n   * @property freehand\n   * @type {Boolean}\n   */\n  get freehand () { return this._freehand }\n  set freehand (value) {\n    this._freehand = value\n  }\n\n  /**\n   * active读写器, 读取设置当前active非自由\n   *\n   * @type {Function}\n   * @property active\n   * @type {Boolean}\n   */\n  get active () { return this._active }\n  set active (value) {\n    this._active = value\n    if (this._active === false) {\n      if (this._sketchLayer) {\n        this._sketchLayer.clear()\n      }\n      \n      this._sketchPoint = null\n    }\n  }\n}\n\n/**\n * 获取当前绘制模式的静态方法\n *\n * @method getDrawMode\n * @param type {String}\n * @returns {Object}\n */\nDraw.getDrawMode = function(type) {\n  let drawMode = Draw.DrawMode.UNDEFINED\n  \n  switch (type){\n  case Geometry.POINT:\n  case Geometry.MULTI_POINT:\n    drawMode = Draw.DrawMode.POINT\n    break\n  case Geometry.LINE:\n  case Geometry.MULTI_LINE:\n    drawMode = Draw.DrawMode.LINE\n    break\n  case Geometry.POLYGON:\n  case Geometry.MULTI_POLYGON:\n    drawMode = Draw.DrawMode.POLYGON\n    break\n  case Geometry.EXTENT:\n    drawMode = Draw.DrawMode.EXTENT\n    break\n  case Geometry.PARALLELOGRAM:\n    drawMode = Draw.DrawMode.PARALLELOGRAM\n    break\n  }\n  \n  return drawMode\n}\n\n\n/**\n * Draw mode.  This collapses multi-part geometry types with their single-part\n * cousins.\n *\n * 绘制模式：点、线、面、矩形(circle暂时不支持)\n * @enum {string}\n */\nDraw.DrawMode = {\n  POINT: 'Point',\n  LINE: 'Line',\n  POLYGON: 'Polygon',\n  CIRCLE: 'Circle',\n  EXTENT: 'Extent',\n  PARALLELOGRAM :'Parallelogram',\n  UNDEFINED: 'undefined'\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/draw.js","/**\n * Created by zhangyong on 2017/8/3.\n */\n\nimport Component from './component'\nimport {targetNotEditable, noModifierKeys} from '../utils/mousekey'\n\n/**\n *\n */\nexport default class KeyboardHome extends Component {\n  \n  constructor (options = {}) {\n    super()\n  \n    this._defaultCondition = function(mapBrowserEvent) {\n      const keyCode = mapBrowserEvent.originalEvent.keyCode\n      return noModifierKeys(mapBrowserEvent) && targetNotEditable(mapBrowserEvent) && (\n          (keyCode === 36))\n    }\n    \n    /**\n     * @private\n     * @type {ol.EventsConditionType}\n     */\n    this._condition = options.condition ? options.condition : this._defaultCondition\n  }\n  \n  /**\n   *\n   * @param mapBrowserEvent\n   */\n  handleMouseEvent (mapBrowserEvent) {\n    let stopEvent = false\n    if (this._condition(mapBrowserEvent)) {\n      this._goToHome()\n    }\n  \n    return !stopEvent\n  }\n  \n  /**\n   * 将视图还原到最初\n   * @private\n   */\n  _goToHome () {\n    const view = this.map.view\n    if (view) {\n      const orignalCenter = view.originalCenter\n      const originalResolution = view.originalResolution\n      \n      view.center = orignalCenter\n      view.resolution = originalResolution\n    }\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/keyboardhome.js","/**\n * Created by zhangyong on 2017/8/2.\n */\n\nimport Component from './component'\nimport BrowserEvent from '../meek/browserevent'\n\nimport {noModifierKeys, targetNotEditable} from '../utils/mousekey'\n\nexport default class KeyboardPan extends Component {\n  constructor (options = {}) {\n  \n    super()\n    \n    this._defaultCondition = function(mapBrowserEvent) {\n      const keyCode = mapBrowserEvent.originalEvent.keyCode\n      return noModifierKeys(mapBrowserEvent) && targetNotEditable(mapBrowserEvent) && (\n        (keyCode === 40 || keyCode === 37 || keyCode === 39 || keyCode === 38))\n    }\n  \n    /**\n     * @private\n     */\n    this._condition = options.condition !== undefined ?\n      options.condition : this._defaultCondition\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._duration = options.duration !== undefined ? options.duration : 100\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._pixelDelta = options.pixelDelta !== undefined ?\n      options.pixelDelta : 128\n  }\n  \n  /**\n   * \n   * @param event\n   * @returns {boolean}\n   */\n  handleMouseEvent (mapBrowserEvent) {\n    let stopEvent = false\n    if (mapBrowserEvent.type === BrowserEvent.KEYDOWN) {\n      const keyEvent = mapBrowserEvent.originalEvent\n      const keyCode = keyEvent.keyCode\n      if (this._condition(mapBrowserEvent) ) {\n        const map = mapBrowserEvent.map\n        const view = map.view\n        const mapUnitsDelta = view.resolution * this._pixelDelta\n        let deltaX = 0, deltaY = 0\n        \n        if (keyCode === 40) {\n          deltaY = mapUnitsDelta\n        } else if (keyCode === 37) {\n          deltaX = -mapUnitsDelta\n        } else if (keyCode === 39) {\n          deltaX = mapUnitsDelta\n        } else {\n          deltaY = -mapUnitsDelta\n        }\n        \n        const delta = [deltaX, deltaY]\n        super.pan(view, delta, null)\n        mapBrowserEvent.preventDefault()\n        stopEvent = true\n      }\n    }\n    return !stopEvent\n  }\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/keyboardpan.js","/**\n * Created by zhangyong on 2017/8/2.\n */\n\nimport Component from './component'\nimport BrowserEvent from '../meek/browserevent'\nimport {targetNotEditable} from '../utils/mousekey'\n\nexport default class KeyboardZoom extends Component {\n  constructor (options = {}) {\n    super()\n  \n    /**\n     * @private\n     */\n    this._condition = options.condition ? options.condition : targetNotEditable\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._delta = options.delta ? options.delta : 1\n    \n  }\n  \n  /**\n   *\n   * @param mapBrowserEvent\n   * @returns {boolean}\n   */\n  handleMouseEvent (mapBrowserEvent) {\n    let stopEvent = false\n    if (mapBrowserEvent.type == BrowserEvent.KEYDOWN ||\n        mapBrowserEvent.type == BrowserEvent.KEYPRESS) {\n      const keyEvent = mapBrowserEvent.originalEvent\n      const charCode = keyEvent.charCode\n      if (this._condition(mapBrowserEvent) &&\n        (charCode == '+'.charCodeAt(0) || charCode == '-'.charCodeAt(0))) {\n        const map = mapBrowserEvent.map\n        const delta = (charCode == '+'.charCodeAt(0)) ? this._delta : -this._delta\n        const view = map.view\n        super.zoomByDelta(view, delta, undefined, null)\n        mapBrowserEvent.preventDefault()\n        stopEvent = true\n      }\n    }\n    \n    return !stopEvent\n  }\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/keyboardzoom.js","\nimport BaseObject from '../core/baseobject'\n\nexport default class Kinetic extends BaseObject{\n  \n  constructor(decay, minVelocity, delay){\n  \n    super()\n    \n    /**\n     * @private\n     * @type {number}\n     */\n    this._decay = decay\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._minVelocity = minVelocity\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._delay = delay\n  \n    /**\n     * @private\n     * @type {Array.<number>}\n     */\n    this._points = []\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._angle = 0\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._initialVelocity = 0\n  }\n  \n  \n  /**\n   */\n  begin () {\n    this._points.length = 0\n    this._angle = 0\n    this._initialVelocity = 0\n  }\n  \n  \n  /**\n   * @param {number} x X.\n   * @param {number} y Y.\n   */\n  update (x, y) {\n    this._points.push(x, y, Date.now())\n  }\n  \n  \n  /**\n   * @return {boolean} Whether we should do kinetic animation.\n   */\n  end () {\n    if (this._points.length < 6) {\n      // at least 2 points are required (i.e. there must be at least 6 elements\n      // in the array)\n      return false\n    }\n    const delay = Date.now() - this._delay\n    const lastIndex = this._points.length - 3\n    if (this._points[lastIndex + 2] < delay) {\n      // the last tracked point is too old, which means that the user stopped\n      // panning before releasing the map\n      return false\n    }\n    \n    // get the first point which still falls into the delay time\n    let firstIndex = lastIndex - 3\n    while (firstIndex > 0 && this._points[firstIndex + 2] > delay) {\n      firstIndex -= 3\n    }\n    \n    const duration = this._points[lastIndex + 2] - this._points[firstIndex + 2]\n    const dx = this._points[lastIndex] - this._points[firstIndex]\n    const dy = this._points[lastIndex + 1] - this._points[firstIndex + 1]\n    this._angle = Math.atan2(dy, dx)\n    this._initialVelocity = Math.sqrt(dx * dx + dy * dy) / duration\n    return this._initialVelocity > this._minVelocity\n  }\n  \n  \n  /**\n   * @return {number} Total distance travelled (pixels).\n   */\n  getDistance () {\n    return (this._minVelocity - this._initialVelocity) / this._decay\n  }\n  \n  \n  /**\n   * @return {number} Angle of the kinetic panning animation (radians).\n   */\n  angle () {\n    return this._angle\n  }\n \n}\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/kinetic.js","/**\n * Created by zhangyong on 2017/5/25.\n */\n\nimport Component from './component'\n\nimport BrowserEvent from '../meek/browserevent'\nimport Geometry from '../geometry/geometry'\nimport Point from '../geometry/point'\nimport Parallelogram from '../geometry/parallelogram'\n\nimport {listen, unlistenByKey} from '../core/eventmanager'\nimport {EventType} from '../meek/eventtype'\n\nimport ModifyEvent from './modifyevent'\n\nimport Feature from '../meek/feature'\nimport FeatureLayer from '../lyr/featurelayer'\nimport {Style} from '../style/style'\nimport {ExtentUtil} from '../geometry/support/extentutil'\n\nimport {closestOnSegment, squaredDistanceToSegment,\n        squaredDistance, distance} from '../geometry/support/geometryutil'\n\nimport {noModifierKeys, singleClick} from '../utils/mousekey'\nimport {functions} from '../utils/functions'\n\n/**\n * 编辑模式，启动后可以编辑图形\n *\n * @class Modify\n * @extends Component\n * @module component\n * @constructor\n * @example\n *\n *      // 实例化编辑工具\n *      var modifyTool = new Datatang.Modify({\n *        features: selectedFeaturs\n *      })\n */\nexport default class Modify extends Component {\n\n  /**\n   * 构造函数\n   *\n   * @constructor constructor\n   * @param options\n   */\n  constructor(options = {}) {\n    super(options)\n    \n    this.applyHandleEventOption({\n      handleDownEvent: this._handleDownEvent,\n      handleDragEvent: this._handleDragEvent,\n      handleUpEvent: this._handleUpEvent\n    })\n  \n    /**\n     * 可以编辑的feature集合\n     *\n     * @property features\n     * @type {Array}\n     * @private\n     */\n    this._features = []\n    \n    /**\n     * 当前鼠标点与图形之间的公差距离，小于该值后立即捕捉标注数据\n     *\n     * @property pixelTolerance\n     * @type {number}\n     * @private\n     */\n    this._pixelTolerance = options.pixelTolerance ?\n        options.pixelTolerance : 10\n  \n    /**\n     * 可以整体移动图形，矩形默认可以整体移动\n     *\n     * @property movableGeometrys\n     * @type {[*]}\n     * @private\n     */\n    this._movableGeometrys = options.movableGeometrys ?\n        options.movableGeometrys : ['extent']\n  \n  \n    /**\n     *\n     * hasMoveableGeometrys\n     * @type {boolean}\n     * @private\n     */\n    this._hasMoveableGeometrys = true\n    \n    const movableGeometrys = this._movableGeometrys\n    if (movableGeometrys === null || movableGeometrys === undefined) {\n      this._hasMoveableGeometrys = false\n    }\n  \n    if (Array.isArray(movableGeometrys)) {\n      if (movableGeometrys.length === 0) {\n        this._hasMoveableGeometrys = false\n      }\n    }\n  \n    /**\n     *\n     * @type {Set}\n     * @private\n     */\n    this.movableGeometrySet\n    \n    if (this._hasMoveableGeometrys) {\n      this.movableGeometrySet = new Set(this._movableGeometrys)\n    }\n  \n    /**\n     * @private\n     */\n    this._deleteCondition = options.deleteCondition ?\n      options.deleteCondition : this._defaultDeleteCondition\n  \n    /**\n     * 允许顶点编辑的条件方法，默认可编辑\n     * @private\n     */\n    this._vertexEditableCondition = options.vertexEditableCondition ?\n      options.vertexEditableCondition : functions.TURE\n  \n    /**\n     * 允许边编辑的条件方法，默认可编辑\n     * @private\n     */\n    this._edgeEditableCondition = options.edgeEditableCondition ?\n      options.edgeEditableCondition : functions.TURE\n    \n    /**\n     * Determine if should snap to vertexs of gemetry\n     *\n     * snappedToVertex\n     * @type {boolean}\n     * @private\n     */\n    this._snappedToVertex = false\n  \n    /**\n     * @snapSegments\n     * @type {null}\n     * @private\n     */\n    this._snapSegments = null\n  \n    /**\n     * @vertexFeature\n     * @type {null}\n     * @private\n     */\n    this._vertexFeature = null\n  \n    /**\n     * The editable features\n     *\n     * 设置需要编辑图形的集合，\n     * 如果图形不允许编辑，请从该集合移除\n     *\n     * @property features\n     * @type {[]}\n     */\n    this.features = options.features || []\n  \n    /**\n     *\n     * @type {[*]}\n     * @private\n     */\n    this._lastPixel = [0, 0]\n  \n  \n    /**\n     * 初始化草稿图层，用于临时高亮显示编辑的图形\n     *\n     * @property overLayer\n     * @type {FeatureLayer}\n     * @private\n     */\n    this._overLayer = new FeatureLayer({\n      style: options.style ? options.style : this.getDefaultStyleFunction(),\n      zIndex: 1000\n    })\n  \n    this.active = true\n  \n    \n    this._dragSegments = []\n  \n    /**\n     * 图形是否修改过，默认为false\n     *\n     * modified\n     * @type {boolean}\n     * @private\n     */\n    this._modified = false\n  \n    /**\n     * changingFeature\n     * @type {boolean}\n     * @private\n     */\n    this._changingFeature = true\n  \n    /**\n     * Tracks if the next `singleclick` event should be ignored to prevent\n     * accidental deletion right after vertex creation.\n     *\n     * ignoreNextSingleClick\n     * @type {boolean}\n     * @private\n     */\n    this._ignoreNextSingleClick = false\n  \n    /**\n     * shouldAddToVertexs\n     * @type {boolean}\n     * @private\n     */\n    this._shouldAddToVertexs = false\n  \n    /**\n     * insertVertices\n     * @type {Array}\n     * @private\n     */\n    this._insertVertices = []\n  \n    /**\n     * Keep the mouse-down point\n     *\n     * downPoint\n     * @type {null}\n     * @private\n     */\n    this._downPoint = null\n  \n    /**\n     * Keep the current moved geometry\n     *\n     * currentMovedGeometry\n     * @type {null}\n     * @private\n     */\n    this._currentMovedGeometry = null\n  \n    /**\n     * 记录上一次被编辑的点\n     * 一般指的是在边上的捕捉点或者顶点本身\n     * 只是用于平行四边形的编辑使用\n     * @type {null}\n     * @private\n     */\n    this._oldEditedVertex = null\n  }\n  \n  /**\n   * feature的读写器，读取设置当前的feature\n   *\n   * @property features\n   * @returns {Object} feature\n   */\n  get features () { return this._features }\n  set features (value = []) {\n    this._features = value\n    this._snapSegments = null\n  \n    if (this._vertexFeature) {\n      this._overLayer.removeFeature(this._vertexFeature)\n      this._vertexFeature = null\n    }\n    \n    this._hasMoveableGeometrys =\n      value.length === 0 ? false : true\n    \n    this._dragSegments = []\n    this._snappedToVertex = false\n  }\n  \n  /**\n   * Handle the mouse events emitted from map.\n   *\n   * 处理鼠标事件\n   *\n   * handleMouseEvent\n   * @param browserEvent\n   * @returns {boolean}\n   */\n  handleMouseEvent (browserEvent) {\n    if (!(browserEvent instanceof BrowserEvent)) {\n      return true\n    }\n  \n    browserEvent.coordinate = this.coordinateBeyond(browserEvent.coordinate)\n    \n    this.lastPointerEvent_ = browserEvent\n  \n    let handled\n    if ( browserEvent.type == BrowserEvent.MOUSE_MOVE &&\n      !this.handlingDownUpSequence) {\n      this._handlePointerMove(browserEvent)\n    }\n    if (this._vertexFeature && this._deleteCondition(browserEvent)) {\n      if (browserEvent.type !== BrowserEvent.SINGLE_CLICK ||\n        !this._ignoreNextSingleClick) {\n        handled = this.removePoint()\n      } else {\n        handled = true\n      }\n    }\n  \n    if (browserEvent.type == BrowserEvent.SINGLE_CLICK) {\n      this._ignoreNextSingleClick = false\n    }\n  \n    return super.handleMouseEvent(browserEvent) && !handled\n  }\n  \n  /**\n   * Removes the vertex currently being pointed.\n   *\n   *\n   * removePoint\n   * @return {boolean} True when a vertex was removed.\n   * @api\n   */\n  removePoint () {\n    if (this._lastPointerEvent && this._lastPointerEvent.type != BrowserEvent.MOUSE_DRAG) {\n      let evt = this.lastPointerEvent_\n      this.willModifyFeatures_(evt)\n      this._removeVertex()\n      \n      this.dispatchEvent(new ModifyEvent(\n        ModifyEvent.EventType.MODIFY_END, this.features, evt))\n      this._modified = false\n      return true\n    }\n    \n    return false\n  }\n  \n  /**\n   * compareIndexes\n   * @param a\n   * @param b\n   * @returns {number}\n   * @private\n   */\n  _compareIndexes (a, b) {\n    return a.index - b.index\n  }\n  \n  /**\n   * willModifyFeatures\n   * @param event\n   * @private\n   */\n  _willModifyFeatures (event) {\n    if (!this._modified) {\n      this._modified = true\n      this.dispatchEvent(new ModifyEvent(ModifyEvent.EventType.MODIFY_START,\n        this.features, event))\n    }\n  }\n  \n  /**\n   * Handle poiner mouse down event\n   *\n   * handleDownEvent\n   * @param evt {Event}\n   * @private\n   */\n  _handleDownEvent (evt) {\n    this._downPoint = evt.coordinate\n    this._dragSegments.length = 0\n    this._modified = false\n    const coordinate = evt.coordinate\n    const vertexFeature = this._vertexFeature\n    \n    if (vertexFeature) {\n      const insertVertices = [this._snapSegments]\n      if (insertVertices.length) {\n        this._willModifyFeatures(evt)\n      }\n  \n      this._shouldAddToVertexs = true\n      this._insertVertices = insertVertices\n  \n      return !!this._vertexFeature\n    }\n    // Move the selected geometry\n    else {\n      if (!this._hasMoveableGeometrys) {\n        return\n      }\n      \n      const filters = this.features.filter(feature => {\n        const geometry = feature.geometry\n        return this.movableGeometrySet.has(geometry.geometryType) &&\n               geometry.containsXY(coordinate[0], coordinate[1])\n      })\n      \n      // We get the first filter geometry to move\n      // Otherwise, you should reselect\n      if (filters.length > 0) {\n        this._currentMovedGeometry = filters[0]\n        return true\n      }\n      \n      return false\n    }\n  }\n  \n  /**\n   * Handle pointer move event\n   *\n   * 处理点移动事件\n   *\n   * handlePointerMove\n   * @param evt {Event}\n   * @private\n   */\n  _handlePointerMove (evt) {\n    this._lastPixel = evt.pixel\n    this._handlePointerAtPixel(evt.pixel, evt.map)\n  }\n  \n  /**\n   * @param pixel {Array}\n   * @param map {map}\n   * @private\n   */\n  _handlePointerAtPixel (pixel, map) {\n    const pixelCoordinate = map.getCoordinateFromPixel(pixel)\n    \n    const sortByDistance = (s1, s2) => {\n      const d1 = this._pointDistanceToSegment(pixelCoordinate, s1)\n      const d2 = this._pointDistanceToSegment(pixelCoordinate, s2)\n      return d1 - d2\n    }\n  \n    this._snapSegments = null\n    \n    if (this.features.length === 0) {\n      return\n    }\n    \n    // 与当前屏幕内图形做碰撞检测\n    const nodes = this._getInExtent(this.features, pixelCoordinate, this._pixelTolerance)\n    if (nodes.length > 0) {\n      nodes.sort(sortByDistance)\n      const node = nodes[0]\n      const geometry = node.geometry\n      const geometryType = geometry.geometryType\n      const closestSegment = node.segment\n      let vertex = this._closestOnSegment(pixelCoordinate, node)// 计算鼠标点在线段上的投影点\n      const vertexPixel = map.getPixelFromCoordinate(vertex)\n      \n      // 判断当前是否选中了边\n      let dist = distance(pixel, vertexPixel)\n      if (dist <= this._pixelTolerance) {\n        /**\n         *  已经选中了边\n         */\n        this._snapSegments = node\n        \n        let vertexEditable = false\n  \n        if (geometryType === Geometry.CIRCLE &&\n          node.index === Modify.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX) {\n          this._snappedToVertex = true\n        } else {\n  \n          /**\n           * 再计算是否选中了线段的两个顶点\n           */\n          \n          // 判断是否允许顶点可编辑\n          if (this._vertexEditableCondition(node)) {\n            const pixel1 = map.getPixelFromCoordinate(closestSegment[0])\n            const pixel2 = map.getPixelFromCoordinate(closestSegment[1])\n            const squaredDist1 = squaredDistance(vertexPixel[0], vertexPixel[1], pixel1[0], pixel1[1])\n            const squaredDist2 = squaredDistance(vertexPixel[0], vertexPixel[1], pixel2[0], pixel2[1])\n            dist = Math.sqrt(Math.min(squaredDist1, squaredDist2))\n  \n            // 判断当前是否选中了顶点\n            this._snappedToVertex = dist <= this._pixelTolerance\n            if (this._snappedToVertex) {\n              vertex = squaredDist1 > squaredDist2 ?\n                closestSegment[1] : closestSegment[0]\n    \n              const coordinateIndex = geometry.getCoordinateIndex(vertex)\n              if (geometryType === Geometry.POLYGON || geometryType === Geometry.PARALLELOGRAM) {\n                this._snapSegments.index = coordinateIndex.index\n                this._snapSegments.ringIndex = coordinateIndex.ringIndex\n              } else if (geometryType === Geometry.MULTI_POLYGON) {\n                this._snapSegments.index = coordinateIndex.index\n                this._snapSegments.ringIndex = coordinateIndex.ringIndex\n                this._snapSegments.polygonIndex = coordinateIndex.polygonIndex\n              } else {\n                this._snapSegments.index = coordinateIndex\n              }\n    \n              this._snapSegments.isVertex = true\n              vertexEditable = true\n            }\n          }\n\n          if (geometryType === Geometry.PARALLELOGRAM) {\n            this._snapSegments.index = node.index\n            this._snapSegments.ringIndex = node.ringIndex\n          }\n        }\n  \n        // 边可编辑，或者顶点可编辑\n        if (this._edgeEditableCondition(node) || vertexEditable) {\n          // draw the snapping point\n          this._createOrUpdateVertexFeature(vertex)\n        } else {\n          this._snapSegments = null\n        }\n        \n        return\n      }\n    }\n    \n    if (this._vertexFeature) {\n      this._overLayer.removeFeature(this._vertexFeature)\n      this._vertexFeature = null\n    }\n  }\n  \n  /**\n   * Handle mouse drag event.\n   *\n   * handleDragEvent\n   * @param evt {Event}\n   * @private\n   */\n  _handleDragEvent (evt) {\n    this._ignoreNextSingleClick = false\n    const vertex = evt.coordinate\n  \n    if (this._shouldAddToVertexs) {\n      const vertexFeature = this._vertexFeature\n      const vertex = vertexFeature.geometry.getCoordinates()\n    \n      const insertVertices = this._insertVertices\n      for (let j = insertVertices.length - 1; j >= 0; --j) {\n        this._insertVertex(insertVertices[j], vertex)\n      }\n    \n      this._shouldAddToVertexs = false\n    }\n    \n    const dragSegments = this._dragSegments\n    const len = dragSegments.length\n  \n    // move the edge of selected geometry\n    if (len !== 0) {\n      this._willModifyFeatures(evt)\n      \n      for (let i = 0; i < len; ++i) {\n        const dragSegment = dragSegments[i]\n        const segmentData = dragSegment[0]\n        const depth = segmentData.depth\n        const geometry = segmentData.geometry\n        let coordinates = null\n        const segment = segmentData.segment\n        const index = dragSegment.index\n        \n        switch (geometry.geometryType) {\n        case Geometry.POINT:\n          coordinates = vertex\n          segment[0] = segment[1] = vertex\n          break\n        case Geometry.MULTI_POINT:\n          coordinates = geometry.getCoordinates()\n          coordinates[segmentData.index] = vertex\n          segment[0] = segment[1] = vertex\n          break\n        case Geometry.LINE:\n          coordinates = geometry.getCoordinates()\n          coordinates[segmentData.index] = vertex\n          // segment[index] = vertex\n          break\n        case Geometry.MULTI_LINE:\n          coordinates = geometry.getCoordinates()\n          coordinates[depth[0]][segmentData.index + index] = vertex\n          segment[index] = vertex\n          break\n        case Geometry.POLYGON:\n          coordinates = geometry.getCoordinates()\n          coordinates[segmentData.ringIndex][segmentData.index] = vertex\n          if (segmentData.index === 0) {\n            coordinates[segmentData.ringIndex][coordinates[segmentData.ringIndex].length - 1] = vertex\n          }\n          break\n        case Geometry.PARALLELOGRAM:\n          // 重新计算平行四边的各个顶点\n          coordinates = Parallelogram.updateCoordinatesForModification(geometry,\n            vertex, this._oldEditedVertex, dragSegment)\n          this._oldEditedVertex = vertex\n          break\n        case Geometry.EXTENT:\n          coordinates = ExtentUtil.updateExtent(geometry, vertex, dragSegment)\n          break\n        case Geometry.MULTI_POLYGON:\n          coordinates = geometry.getCoordinates()\n          coordinates[segmentData.polygonIndex][segmentData.ringIndex][segmentData.index] = vertex\n          if (segmentData.index === 0) {\n            coordinates[segmentData.polygonIndex][segmentData.ringIndex][coordinates[segmentData.polygonIndex][segmentData.ringIndex].length - 1] = vertex\n          }\n          break\n        case Geometry.CIRCLE:\n          segment[0] = segment[1] = vertex\n          if (segmentData.index === Modify.MODIFY_SEGMENT_CIRCLE_CENTER_INDEX) {\n            this._changingFeature = true\n            geometry.setCenter(vertex)\n            this._changingFeature = false\n          } else { // We're dragging the circle's circumference:\n            this._changingFeature = true\n            geometry.setRadius(distance(geometry.getCenter(), vertex))\n            this._changingFeature = false\n          }\n          break\n        default:\n          // pass\n        }\n        \n        if (coordinates) {\n          this._setGeometryCoordinates(geometry, coordinates)\n        }\n      }\n      \n      this._createOrUpdateVertexFeature(vertex)\n    }\n    // move the whole selected geometry\n    else if (this._currentMovedGeometry) {\n      const downPoint = this._downPoint\n      const dx = vertex[0] - downPoint[0]\n      const dy = vertex[1] - downPoint[1]\n      \n      this._currentMovedGeometry.geometry.move(dx, dy, {\n        beyond: {\n          xmin: 0,\n          ymin: 0,\n          xmax: this.map.view.dataExtent[2],\n          ymax: this.map.view.dataExtent[3]\n        }\n      })\n      \n      this.changed()\n      this._downPoint = vertex\n    }\n  }\n  \n  /**\n   * handleUpEvent\n   * @param evt {Event}\n   * @returns {boolean}\n   * @private\n   */\n  _handleUpEvent (evt) {\n    this._dragSegments.length = 0\n    this._shouldAddToVertexs = false\n    this._insertVertices = []\n  \n    if (this._vertexFeature) {\n      this._overLayer.removeFeature(this._vertexFeature)\n      this._vertexFeature = null\n    }\n  \n    this._oldEditedVertex = null\n    \n    this._downPoint = null\n    this._currentMovedGeometry = null\n    \n    if (this._modified) {\n      this.dispatchEvent(new ModifyEvent(ModifyEvent.EventType.MODIFY_END, this.features, evt))\n      this._modified = false\n    }\n    \n    return false\n  }\n  \n  /**\n   *\n   * segmentData\n   * @param vertex\n   * @private\n   */\n  _insertVertex (segmentData, vertex) {\n    const segment = segmentData.segment\n    const feature = segmentData.feature\n    const geometry = segmentData.geometry\n    const depth = segmentData.depth\n    const isVertex = segmentData.isVertex\n    let index =  segmentData.index\n    let coordinates\n    \n    switch (geometry.geometryType) {\n    case Geometry.MULTI_LINE:\n      coordinates = geometry.getCoordinates()\n      coordinates[depth[0]].splice(index + 1, 0, vertex)\n      break\n    case Geometry.POLYGON:\n      coordinates = geometry.getCoordinates()\n      if (!isVertex) {\n        coordinates[segmentData.ringIndex].splice(index + 1, 0, vertex)\n        index = index + 1\n      } else {\n        // dragIndex = index\n      }\n      break\n    case Geometry.MULTI_POLYGON:\n      coordinates = geometry.getCoordinates()\n      if (!isVertex) {\n        coordinates[segmentData.polygonIndex][segmentData.ringIndex].splice(index + 1, 0, vertex)\n        index = index + 1\n      } else {\n        // dragIndex = index\n      }\n      break\n    case Geometry.LINE:\n      coordinates = geometry.getCoordinates()\n      if (!isVertex) {\n        coordinates.splice(index + 1, 0, vertex)\n        index = index + 1\n      } else {\n        // dragIndex = index\n      }\n      break\n    case Geometry.POINT:\n      coordinates = geometry.getCoordinates()\n      coordinates = vertex\n      break\n    case Geometry.EXTENT:\n      coordinates = geometry.getCoordinates()\n      break\n    case Geometry.PARALLELOGRAM:\n      break\n    default:\n      return\n    }\n    \n    this._setGeometryCoordinates(geometry, coordinates)\n    \n    const newSegmentData = {\n      segment: [segment[0], vertex],\n      feature,\n      geometry,\n      depth,\n      index,\n      ringIndex: segmentData.ringIndex,\n      polygonIndex: segmentData.polygonIndex,\n      isVertex\n    }\n    \n    this._dragSegments.push([newSegmentData, 1])\n    this._ignoreNextSingleClick = true\n  }\n  \n  /**\n   * Calcalute geometrys within the current extent\n   * TODO 将来需要优化计算视图范围内的图形\n   *\n   * getInExtent\n   * @param geometry {Array}\n   * @param pixelCoordinate {Array}\n   * @param tolarance {Number}\n   * @returns {Array}\n   * @private\n   */\n  _getInExtent (features, pixelCoordinate, tolarance) {\n    let result = []\n    const _ExtentUtil = ExtentUtil\n  \n    // loop the passed features\n    features.forEach( feature => {\n      const geometry = feature.geometry\n      \n      // build an extent from the passed geometry with tolarance\n      const gometryExtent = geometry.extent\n      const bufferExtent = _ExtentUtil.buffer([gometryExtent.xmin, gometryExtent.ymin,\n        gometryExtent.xmax, gometryExtent.ymax], tolarance)\n  \n      // Exclude the moved point\n      if (_ExtentUtil.containsPoint(bufferExtent, pixelCoordinate)) {\n        \n        // Calculte if the moved point has insected a geometry\n        const geometryType = geometry.geometryType\n        \n        if (geometryType === Geometry.POINT) {\n          const points = geometry.getCoordinates()\n          const dist = distance(points, pixelCoordinate)\n          if (dist <= tolarance) {\n            result.push({\n              geometry: geometry,\n              segment: [points, points],\n              index: 0\n            })\n          }\n        } else if (geometryType === Geometry.POLYGON ||\n                  geometryType === Geometry.PARALLELOGRAM ) { // @todo 这一块需要重构\n          let coords = geometry.getCoordinates()\n          coords.forEach( (coordinates, ringIndex) => {\n            for (let j = 0, jj = coordinates.length - 1; j < jj; j++) {\n              let points = coordinates[j]\n              let nextPoints = coordinates[j + 1]\n    \n              let pathExtent = _ExtentUtil.boundingExtentFromTwoPoints(points, nextPoints)\n              let pathBufferExtent = _ExtentUtil.buffer(pathExtent, tolarance)\n    \n              if (ExtentUtil.containsPoint(pathBufferExtent, pixelCoordinate)) {\n                const segment = [points, nextPoints]\n                result.push({\n                  geometry,\n                  segment,\n                  index: j,\n                  ringIndex\n                })\n              }\n            }\n          })\n        } else if (geometryType === Geometry.MULTI_POLYGON ){\n          let allCoords = geometry.getCoordinates()\n          allCoords.forEach( (coords, polygonIndex) => {\n            coords.forEach( (coordinates, ringIndex) => {\n              for (let j = 0, jj = coordinates.length - 1; j < jj; j++) {\n                let points = coordinates[j]\n                let nextPoints = coordinates[j + 1]\n      \n                let pathExtent = _ExtentUtil.boundingExtentFromTwoPoints(points, nextPoints)\n                let pathBufferExtent = _ExtentUtil.buffer(pathExtent, tolarance)\n      \n                if (ExtentUtil.containsPoint(pathBufferExtent, pixelCoordinate)) {\n                  const segment = [points, nextPoints]\n                  result.push({\n                    geometry,\n                    segment,\n                    polygonIndex,\n                    index: j,\n                    ringIndex\n                  })\n                }\n              }\n            })\n          })\n        } else if ( geometryType === Geometry.EXTENT ||\n                    geometryType === Geometry.LINE) {\n          let coordinates = geometry.getCoordinates()\n          \n          for (let j = 0, jj = coordinates.length - 1; j < jj; j++) {\n            let points = coordinates[j]\n            let nextPoints = coordinates[j + 1]\n      \n            let pathExtent = _ExtentUtil.boundingExtentFromTwoPoints(points, nextPoints)\n            let pathBufferExtent = _ExtentUtil.buffer(pathExtent, tolarance)\n      \n            if (ExtentUtil.containsPoint(pathBufferExtent, pixelCoordinate)) {\n              const segment = [points, nextPoints]\n              result.push({\n                geometry,\n                segment,\n                index: j\n              })\n            }\n          }\n        }\n      }\n    })\n    \n    return result\n  }\n  \n  /**\n   * 设置Ceometry的坐标数据\n   *\n   * @method setGeometryCoordinates\n   * @param geometry {Object}\n   * @param coordinates {Array}\n   * @private\n   */\n  _setGeometryCoordinates (geometry, coordinates) {\n    if (coordinates) {\n      this._changingFeature = true\n      geometry.setCoordinates(coordinates)\n      this._changingFeature = false\n    }\n  }\n  \n  /**\n   * @method pointDistanceToSegment\n   *\n   * coordinates {Array}\n   * @param segmentData\n   * @returns {number}\n   * @private\n   */\n  _pointDistanceToSegment (coordinates, segmentData) {\n    const geometry = segmentData.geometry\n    \n    if (geometry.geometryType === Geometry.CIRCLE) {\n      const circleGeometry = geometry\n      \n      if (segmentData.index === Modify.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX) {\n        const distanceToCenterSquared =\n          squaredDistance(circleGeometry.getCenter(), coordinates)\n        const distanceToCircumference =\n          Math.sqrt(distanceToCenterSquared) - circleGeometry.getRadius()\n        return distanceToCircumference * distanceToCircumference\n      }\n    }\n    \n    \n    return squaredDistanceToSegment(coordinates, segmentData.segment)\n  }\n  \n  /**\n   * closestOnSegment\n   * @param coordinate\n   * @param segmentData\n   * @returns {*}\n   * @private\n   */\n  _closestOnSegment (coordinate, segmentData) {\n    return closestOnSegment(coordinate, segmentData.segment)\n  }\n  \n  /**\n   * Create or update the vertex feature while snapping a point\n   * on the edge of geometry\n   *\n   * createOrUpdateVertexFeature\n   * @param point {Array}\n   * @private\n   */\n  _createOrUpdateVertexFeature (point) {\n    let vertexFeature = this._vertexFeature\n    if (!vertexFeature) {\n      vertexFeature = new Feature(new Point(point[0], point[1]))\n      this._vertexFeature = vertexFeature\n      this._overLayer.addFeature(vertexFeature)\n    } else {\n      const geom = vertexFeature.geometry\n      geom.update(point[0], point[1])\n      this._overLayer.changed()\n    }\n  }\n  \n  /**\n   * 获取默认的图形编辑样式\n   *\n   * @method getDefaultStyleFunction\n   * @returns {Function}\n   */\n  getDefaultStyleFunction () {\n    const style = Style.createDefaultEditing()\n    return function () {\n      return style[Geometry.POINT]\n    }\n  }\n  \n  /**\n   *\n   * mapBrowserEvent\n   * @returns {*}\n   * @private\n   */\n  _defaultDeleteCondition (mapBrowserEvent) {\n    return noModifierKeys(mapBrowserEvent) &&\n           singleClick(mapBrowserEvent)\n  }\n  \n  /**\n   * active读写器，读取设置当前的active状态\n   *\n   * @property active\n   * @type {Function}\n   * @returns {*}\n   */\n  get active () { return this._active }\n  set active (isActive) {\n    if (this._vertexFeature && !isActive) {\n      this._overLayer.removeFeature(this._vertexFeature)\n      this._vertexFeature = null\n    }\n    \n    this._active = isActive\n  }\n\n  /**\n   * map读写器, 读取设置当前map\n   *\n   * @type {Function}\n   * @property map\n   * @param map {Object} Datatang.map\n   */\n  get map () {return this._map}\n  set map (map) {\n    if (this._mapRenderKey) {\n      unlistenByKey(this._mapRenderKey)\n      this._mapRenderKey = null\n    }\n  \n    if (map) {\n      this._map = map\n      this._mapRenderKey = listen(this, EventType.CHANGE, map.render, map)\n      \n      map.addLayer(this._overLayer)\n    }\n  }\n}\n\n/**\n *\n * @type {number}\n */\nModify.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX = 1\n\n/**\n *\n * @type {number}\n */\nModify.MODIFY_SEGMENT_CIRCLE_CENTER_INDEX = 0\n\n\n// WEBPACK FOOTER //\n// ./src/components/modify.js","/**\n * Created by zhangyong on 2017/5/23.\n */\n\nimport Component from './component'\nimport BrowserEvent from '../meek/browserevent'\nimport FeatureLayer from '../lyr/featurelayer'\nimport {listen, unlistenByKey} from '../core/eventmanager'\nimport {EventType} from '../meek/eventtype'\nimport {Style} from '../style/style'\nimport SelectEvent from '../components/selectevent'\n\nlet hasMutilSelectedSymbol = Symbol('hasmutilselected')\n\n/**\n * 图形选择模式\n *\n * @class Select\n * @extends Component\n * @module component\n * @constructor\n * @example\n *\n *      // 实例化选择工具\n *      selectTool = new Datatang.Select({\n *       selectMode: Datatang.BrowserEvent.CLICK,\n *       selectMultiMode: selectMultiMode\n *      });\n *\n *\n */\nexport default class Select extends Component {\n\n  /**\n   * 构造函数\n   *\n   * @constructor constructor\n   * @param options\n   */\n\n  constructor (options = {}) {\n    super()\n\n    /**\n     * 当前鼠标点与图形之间的公差距离，小于该值则可已选中图形\n     *\n     * @property hitTolerance\n     * @type {number}\n     * @private\n     */\n    this._hitTolerance = options.hitTolerance ? options.hitTolerance : 6\n\n    /**\n     * 选择图层是否配置了样式\n     *\n     * @type {boolean}\n     * @private\n       */\n    this._hasSelectedStyle = false\n\n    /**\n     * 多选模式，默认为false\n     *\n     * @property multiSelectMode\n     * @type {boolean}\n     * @private\n     */\n    this._multiSelectMode = false\n    \n    /**\n     * 初始化草稿图层，用于临时高亮显示选中的图形\n     *\n     * @property selectLayer\n     * @type {FeatureLayer}\n     * @private\n     */\n    this._selectLayer = new FeatureLayer()\n\n    if (options.style) {\n      this._selectLayer.style = options.style\n      this._hasSelectedStyle = true\n    } else {\n      this._hasSelectedStyle = false\n    }\n    /**\n     * 选中图形的feature集合\n     *\n     * @property selectFeatures\n     * @type {Array}\n     * @private\n     */\n    this._selectFeatures = []\n\n    /**\n     * 选中的模式，默认为单击选中\n     *\n     * @property selectMode\n     * @type {string}\n     */\n    this.selectMode = options.selectMode ? options.selectMode : BrowserEvent.CLICK\n\n    this._selectMultiMode = options.selectMultiMode ?\n      options.selectMultiMode : function () { return true }\n\n    /**\n     * listen Ctrl key envet\n     */\n    if (options.selectMultiMode) {\n      listen(document, 'keydown', this._handleCtrlKeyDwon, this)\n    }\n    if (options.selectMultiMode) {\n      listen(document, 'keyup', this._handleCtrlKeyUp, this)\n    }\n\n  }\n\n  _condition (event) {\n    return this.selectMode === event.type\n  }\n\n  _keyPress () {}\n\n  /**\n   * handle Ctrl key down event\n   *\n   * 处理Ctrt键按下事件\n   *\n   * handleCtrlKeyDwon\n   * @param event\n   * @private\n   */\n  _handleCtrlKeyDwon (event) {\n    if (this._selectMultiMode(event)) {\n      this._multiSelectMode = true\n    }\n  }\n\n  /**\n   * handle Ctrl key up event\n   *\n   * 处理Ctrl键弹起事件\n   *\n   * @param event\n   * @private\n   */\n  _handleCtrlKeyUp (event) {\n    // Ctrl button down\n    if (this._selectMultiMode(event)) {\n      this._multiSelectMode = false\n    }\n  }\n\n  /**\n   * Handler mouse event\n   *\n   * 处理鼠标事件\n   * handleMouseEvent\n   * @method\n   * @param browserEvent {browserEvent}\n   */\n  handleMouseEvent (browserEvent) {\n    if (!this._condition(browserEvent)) {\n      return true\n    }\n\n    const map = browserEvent.map\n    const pixel = browserEvent.pixel\n    const hitTolerance = this._hitTolerance\n\n    if (!this._multiSelectMode) {\n      this.clear()\n    }\n\n    map.forEachFeatureAtPiexl(pixel, (features) => {\n      if(features.length > 0){\n        // 赋值并填充到selectFeatures中\n        this.selectFeatures = features\n      }\n    }, hitTolerance)\n\n    if (this.selectFeatures.length > 0 ) {\n      this._forEachStyle()\n      this._selectLayer.addFeatures(this.selectFeatures)\n    }\n\n    // 派发要素的选择事件\n    this.dispatchEvent(\n      new SelectEvent(SelectEvent.EventType.SELECT, this.selectFeatures,browserEvent))\n  }\n  \n  /**\n   * 清空选择的集合\n   *\n   * @method clear\n   */\n  clear () {\n    this._selectLayer.clear()\n    \n    this.selectFeatures.forEach(feature => {\n      feature.styleHighLight = false\n      feature.delete(hasMutilSelectedSymbol)\n    })\n\n    this.selectFeatures = []\n  }\n  \n  /**\n   * 当前选中feature的集合的读写器\n   *\n   * @property selectFeatures\n   * @type {Array}\n   */\n  get selectFeatures () { return this._selectFeatures }\n  set selectFeatures (features) {\n    if (features.length === 0 ) {\n      this._selectFeatures = []\n    } else {\n      features.forEach( feature => {\n        // 去掉重复的\n        if (!this._isInSelectFeatures(feature)) {\n          this._selectFeatures.push(feature)\n        }\n      })\n    }\n  }\n  \n  /**\n   * 判断当前选中的集合中是否包含指定的feature\n   *\n   * @param feature\n   * @returns {Boolean}\n   * @private\n   */\n  _isInSelectFeatures (feature) {\n    const features = this.selectFeatures\n    const result = features.find( f => f.id === feature.id)\n    \n    return result === undefined ? false : true\n  }\n\n  /**\n   * Update the drawing state for aborting drawing if active is false\n   *\n   * updateState\n   * @private\n   */\n  _updateState () {\n    const map = this.map\n    const active = this.active\n    if (!map || !active){\n      // this._abortDrawing()\n    }\n    \n    map.addLayer(this._selectLayer)\n  }\n  \n  /**\n   * 高亮显示选中图形\n   *\n   * @method forEachStyle\n   * @private\n   */\n  _forEachStyle () {\n    if (this._hasSelectedStyle) {\n      return\n    }\n\n    const features = this.selectFeatures\n    features.forEach ( feature => {\n      if (!feature.get(hasMutilSelectedSymbol)) {\n        feature.styleHighLight = true\n        feature.set(hasMutilSelectedSymbol, true)\n      }\n    })\n  }\n\n  /**\n   * map读写器, 读取设置当前map\n   *\n   * @type {Function}\n   * @property map\n   * @param map {Object} Datatang.map\n   */\n  get map (){ return this._map }\n  set map (map) {\n    if (this._mapRenderKey) {\n      unlistenByKey(this._mapRenderKey)\n      this._mapRenderKey = null\n    }\n\n    if (map) {\n      this._map = map\n      this._mapRenderKey = listen(this, EventType.CHANGE, map.render, map)\n    }\n\n    this._updateState()\n  }\n\n  /**\n   * 选择方式读写器\n   *\n   * @property selectMode\n   * @type {Object} Datatang.BrowserEvent.CLICK\n   * @return {*}\n   */\n  get selectMode () { return this._selectMode }\n  set selectMode (value) {\n    if (this._selectMode !== value) {\n      this._selectMode = value\n      this.clear()\n    }\n  }\n\n  /**\n   * 获取默认编辑样式\n   *\n   * @method getDefaultStyleFunction\n   * @returns {Function}\n   */\n  getDefaultStyleFunction () {\n    const styles = Style.createDefaultEditing()\n    return feature => styles[feature.geometry.geometryType]\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/select.js","/**\n * Created by zhangyong on 2017/8/2.\n */\n\nimport Zoom from './zoom'\nimport Home from './home'\nimport zoomPercentage from './zoompercentage'\n\nexport function controlDefaults (options = {}) {\n  \n  const controls = []\n  \n  const zoomControl = options.zoom !== undefined ? options.zoom : true\n  if (zoomControl) {\n    controls.push(new Zoom(options.zoomOptions))\n  }\n  \n  const homeControl = options.home !== undefined ? options.home : true\n  if (homeControl) {\n    controls.push(new Home(options.homeOptions))\n  }\n  \n  const zoomPercentageControl = options.zoomPercentage !== undefined ? options.zoomPercentage : true\n  if (zoomPercentageControl) {\n    controls.push(new zoomPercentage(options.zoomPercentageOptions))\n  }\n  \n  return controls\n}\n\nexport default {\n  controlDefaults\n}\n\n\n// WEBPACK FOOTER //\n// ./src/control/controldefaults.js","/**\n * Created by zhangyong on 2017/8/3.\n */\n\nimport Control from './control'\nimport BrowserEvent from '../meek/browserevent'\n\nimport {listen} from '../core/eventmanager'\n\n/**\n *\n */\nexport default class Home extends Control {\n  constructor (options = {}) {\n    const className = options.className ? options.className : 'dt-zoom-extent'\n    const homeLabel = options.homeLabel ? options.homeLabel : 'H'\n    const homeLabelTip = options.homeLabelTip ? options.homeLabelTip : '全图'\n  \n    const homeElement = document.createElement('button')\n    homeElement.setAttribute('type', 'button')\n    homeElement.title = homeLabelTip\n    homeElement.appendChild(\n      typeof homeLabel === 'string' ? document.createTextNode(homeLabel) : homeLabel\n    )\n  \n    const cssClasses = `${className} dt-unselectable dt-control`\n    const element = document.createElement('div')\n    element.className = cssClasses\n    element.appendChild(homeElement)\n  \n    super({\n      element,\n      target: options.target\n    })\n  \n    listen(homeElement, BrowserEvent.CLICK, this._handleClick, this)\n  }\n  \n  /**\n   * 处理按钮点击事件\n   * @param event\n   * @private\n   */\n  _handleClick ( event) {\n    event.preventDefault()\n    this._goToHome()\n  }\n  \n  /**\n   * 将视图还原到最初\n   * @private\n   */\n  _goToHome () {\n    const view = this.map.view\n    if (view) {\n      const orignalCenter = view.originalCenter\n      const originalResolution = view.originalResolution\n      \n      view.center = orignalCenter\n      view.resolution = originalResolution\n    }\n  }\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/control/home.js","/**\n * Created by zhangyong on 2017/8/3.\n */\n\n\nimport Control from './control'\nimport {removeNode} from '../utils/domutil'\nimport {unlistenByKey, listen} from '../core/eventmanager'\nimport {EventType} from '../meek/eventtype'\n\nexport default class ZoomPercentage extends Control {\n  constructor (options = {}) {\n    super()\n    \n    this._map = undefined\n    \n    const className = options.className ? options.className : 'dt-scale-line'\n    \n    this._innerElement = document.createElement('DIV')\n    this._innerElement.className = `${className}-inner`\n    \n    this._element = document.createElement('DIV')\n    this._element.className = `${className} dt-unselectable`\n    this._element.appendChild(this._innerElement)\n  }\n  \n  get map() { return this._map }\n  set map(value) {\n    if (this.map) {\n      removeNode(this._element)\n    }\n    \n    this._listenerKeys.forEach(listener => unlistenByKey(listener) )\n    \n    this._listenerKeys.length = 0\n    this._map = value\n    \n    if (this._map) {\n      const target = this._target ? this._target : value.overlayContainerStopEvent\n      target.appendChild(this._element)\n      \n      this._listenerKeys.push(listen(value, EventType.VIEW_CHANGED, this.render, this))\n      \n      this.render()\n    }\n  }\n  \n  render () {\n    const view = this.map.view\n    const resolution =  (1 / view.resolution).toFixed(2)\n    const html = `&#8195;缩放比${resolution * 100}% &#8195;`\n    this._innerElement.innerHTML = html\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/control/zoompercentage.js","/**\n * Created by zhangyong on 2017/6/6.\n */\n\nimport BaseObject from '../core/baseobject'\n\n/**\n * The base class to represent a generic layer image,it has some basic properties.\n * such as extent,resolution,state<br/>\n *\n * 基础图片图层类，定义了一些用于加载图片的必要信息\n *\n * @class BaseImage\n * @extends BaseObject\n * @module core\n * @constructor\n */\nexport default class BaseImage extends BaseObject {\n  \n  /**\n   * Create a BaseImage\n   * @param extent the extent of layer\n   * @param resolution the resolution of layer\n   * @param pixelRatio the pixel ratio\n   * @param state the image loading status\n   * @param attributions\n   */\n  constructor (extent, resolution, pixelRatio,\n               state, attributions) {\n  \n    super()\n  \n    /**\n     * @type {Object}\n     * @private\n     */\n    this._attributions = attributions\n  \n    /**\n     * @type {Object}\n     * @private\n     */\n    this._extent = extent\n  \n    /**\n     * @type {Number}\n     * @private\n     */\n    this._pixelRatio = pixelRatio\n  \n    /**\n     * @type {Number}\n     * @private\n     */\n    this._resolution = resolution\n  \n    /**\n     * @type {Number}\n     * @private\n     */\n    this._state = state\n  }\n  \n  /**\n   * return the attributions of layer <br/>\n   * 返回图层的属性\n   * @property attributions\n   * @type Object\n   */\n  get attributions () {\n    return this._attributions\n  }\n  \n  /**\n   * return the extent of layer<br/>\n   * 返回图层的视图范围\n   * @property extent\n   * @type Object\n   */\n  get extent () {\n    return this._extent\n  }\n  \n  /**\n   * return the DOM image<br/>\n   * 返回DOM对象\n   * @param optContext options\n   * @method getDomImage\n   * @abstract\n   */\n  getDomImage (optContext) { return optContext }\n  \n  /**\n   * return the pixel ratio<br/>\n   * 返回像素因数\n   * @property pixelRatio\n   * @type Number\n   */\n  get pixelRatio () {\n    return this._pixelRatio\n  }\n  \n  /**\n   * return the resolution of layer<br/>\n   * 返回图层的分辨率\n   * @property resolution\n   * @type Number\n   */\n  get resolution () {\n    return this._resolution\n  }\n  set resolution (value) {\n    if (this._resolution !== value) {\n      this._resolution = value\n    }\n  }\n  \n  /**\n   * return the state of layer loading <br/>\n   * 获取图片下载状态\n   * @property state\n   * @type Number\n   */\n  get state () { return this._state }\n  set state (value) {\n    if (this.state !== value){\n      this._state = value\n    }\n  }\n  \n  /**\n   * Load not yet loaded URI. <br/>\n   * 抽象方法，下载图片\n   * @abstract\n   * @method load\n   */\n  load () {}\n  \n}\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/baseimage.js","/**\n * Created by zhangyong on 2017/7/12.\n */\n\nimport Geometry from '../../geometry/geometry'\nimport Point from '../../geometry/point'\nimport Polygon from '../../geometry/polygon'\nimport MutilPolygon from '../../geometry/mutilpolygon'\nimport Line from '../../geometry/line'\nimport Extent from '../../geometry/extent'\nimport Parallelogram from '../../geometry/parallelogram'\nimport Feature from '../../meek/feature'\nimport Obj from '../../utils/obj'\n\n/**\n *\n */\nexport default class GeoJSON {\n  \n  /**\n   * 解析 GeoJSON 并返回 Feature 的集合\n   *\n   * @static\n   * @method read\n   * @param json geojson格式的数据\n   * @returns {Array} 返回 features 的集合\n   */\n  static read (json) {\n    const features = []\n\n    if(!json) {\n      return\n    }\n    const featuresObj = json.features\n    featuresObj.forEach( featureObj => {\n      if (featureObj.type === 'Feature') {\n        if (featureObj.geometry) {\n          let constructor = undefined\n          const geometryObj = featureObj.geometry\n          const geometryType = geometryObj.type\n          if (geometryType === 'Point') {\n            constructor = Point\n          } else if (geometryType === 'LineString') {\n            constructor = Line\n          } else if (geometryType === 'Polygon') {\n            constructor = Polygon\n          } else if (geometryType === 'ExtentPolygon') {\n            constructor = Extent\n          } else if (geometryType === 'MutilPolygon') {\n            constructor = MutilPolygon\n          } else if (geometryType === 'ParallelogramPolygon') {\n            constructor = Parallelogram\n          }\n          \n          if (constructor === undefined) {\n            throw new Error('包含未定义的 Geometry 类型')\n          } else {\n            const coordinates = geometryObj.coordinates\n            const geometry = new constructor()\n            geometry.setCoordinates(coordinates)\n  \n            let propertiesObj\n            if (featureObj.properties) {\n              propertiesObj = featureObj.properties\n            }\n  \n            let title = featureObj.title\n            const feature = new Feature(geometry, propertiesObj, title)\n            features.push(feature)\n          }\n        }\n      }\n    })\n    \n    return features\n  }\n  \n  /**\n   *\n   * 将 Feature 集合写入到 GeoJSON 的格式对象中\n   *\n   * @static\n   * @method write\n   * @param features Feature 集合\n   * @returns {Object} 返回 GeoJSON 格式的数据\n   */\n  static write (features) {\n    const featuresArr = []\n    \n    features.forEach( feature => {\n      featuresArr.push({\n        type: 'Feature',\n        geometry: {\n          type: GeoJSON.getGeoJSONGeometryType(feature.geometry),\n          coordinates: feature.geometry.getCoordinates()\n        },\n        properties: Obj.mapToObject(feature._attributesMap),\n\n        title: feature.displayText\n      })\n    })\n    \n    return {\n      type: 'FeatureCollection',\n      features: featuresArr\n    }\n  }\n  \n  /**\n   * 获取Geometry的类型\n   *\n   * @static\n   * @method getGeoJSONGeometryType\n   * @param geometry\n   * @returns {*}\n   */\n  static getGeoJSONGeometryType (geometry) {\n    const type = geometry.geometryType\n    let jsonType\n    switch (type) {\n    case Geometry.POINT :\n      jsonType = 'Point'\n      break\n    case Geometry.LINE :\n      jsonType = 'LineString'\n      break\n    case Geometry.POLYGON :\n      jsonType = 'Polygon'\n      break\n    case Geometry.MULTI_POLYGON :\n      jsonType = 'MutilPolygon'\n      break\n    case Geometry.EXTENT :\n      jsonType = 'ExtentPolygon'\n      break\n    case Geometry.PARALLELOGRAM :\n      jsonType = 'ParallelogramPolygon'\n    }\n    \n    return jsonType\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/data/json/geojson.js","/**\n * Created by zhangyong on 2017/7/13.\n */\n\nimport Geometry from '../../geometry/geometry'\nimport {ExtentUtil} from '../support/extentutil'\n\n/**\n * 判断任意图形是否相交\n * @TODO 还需要解决带洞多边形带来的问题\n *\n * @method intersects\n * @param geometry1\n * @param geometry2\n * @returns {Boolean}\n */\nexport default function intersects (geometry1, geometry2) {\n  if ( (geometry1 === null || geometry1 === undefined ) ||\n       (geometry2 === null || geometry2 === undefined )) {\n    return false\n  }\n  \n  const extent1 = geometry1.extent\n  const extent2 = geometry2.extent\n  const ext1Arr = [extent1.xmin, extent1.ymin, extent1.xmax, extent1.ymax]\n  const ext2Arr = [extent2.xmin, extent2.ymin, extent2.xmax, extent2.ymax]\n  \n  // 如果两个图形的外界矩形不相交，则跳出判断\n  if (!ExtentUtil.intersects(ext1Arr, ext2Arr)) {\n    return false\n  }\n  \n  const geometryType = geometry1.geometryType\n  \n  let result = false\n  switch (geometryType) {\n  case Geometry.POINT :\n    result = pointIntersectsGeometry(geometry1, geometry2)\n    break\n  case Geometry.LINE :\n    result = lineIntersectsGeometry(geometry1, geometry2)\n    break\n  case Geometry.POLYGON:\n  case Geometry.EXTENT:\n    result = polygonIntersectsGeometry(geometry1, geometry2)\n  }\n  \n  return result\n}\n\n/**\n * 点和图形相交判断\n * @param point\n * @param geometry\n * @returns {*}\n */\nconst pointIntersectsGeometry = function(point, geometry) {\n  const geometryType = geometry.geometryType\n  \n  switch (geometryType) {\n  case Geometry.POINT:\n  case Geometry.LINE:\n  case Geometry.POLYGON:\n  case Geometry.EXTENT:\n    return geometry.containsXY(point.x, point.y)\n  }\n  \n  return false\n}\n\n/**\n * 线和图形相交判断\n * @param line\n * @param geometry\n * @returns {Boolean|boolean|*}\n */\nconst lineIntersectsGeometry = function (line, geometry) {\n  const geometryType = geometry.geometryType\n  switch (geometryType) {\n  case Geometry.POINT:\n    return line.containsXY(geometry.x, geometry.y)\n  case Geometry.LINE:\n    return lineIntersectsLine(line, geometry)\n  case Geometry.POLYGON:\n  case Geometry.EXTENT:\n    return lineIntersectsPolygon(line, geometry)\n  }\n}\n\n/**\n * 线与线相交判断\n * @param line1\n * @param line2\n */\nconst lineIntersectsLine = function(line1, line2) {\n  const lineLinearRings1 = line1.getCoordinates()\n  const lineLinearRings2 = line2.getCoordinates()\n  \n  return intersectsByLinearRings(lineLinearRings1, lineLinearRings2)\n}\n\n/**\n * 多边形和图形相交判断\n * @param poly\n * @param geometry\n * @returns {Boolean|boolean|*}\n */\nconst polygonIntersectsGeometry = function (poly, geometry) {\n  const geometryType = geometry.geometryType\n  switch (geometryType) {\n  case Geometry.POINT:\n    return poly.containsXY(geometry.x, geometry.y)\n  case Geometry.LINE:\n    return lineIntersectsPolygon(geometry, poly)\n  case Geometry.POLYGON:\n  case Geometry.EXTENT:\n    return polygonIntersectsPolygon(poly, geometry)\n  }\n}\n\n/**\n * 线和多边形相交判断\n * @param line\n * @param polygon\n */\nconst lineIntersectsPolygon = function (line, polygon) {\n  const lineLinearRings = line.getCoordinates()\n  let polygon2LinearRings = polygon.getCoordinates()\n  \n  if (polygon.geometryType === Geometry.POLYGON ||\n      polygon.geometry === Geometry.MULTI_POLYGON) {\n    polygon2LinearRings = polygon2LinearRings[0] // 只获得外环\n  }\n  \n  let intersect = intersectsByLinearRings(lineLinearRings, polygon2LinearRings)\n  \n  if (!intersect) {\n    // check if this poly contains points of the ring/linestring\n    for (let i = 0, len = lineLinearRings.length; i < len; ++i) {\n      const point = lineLinearRings[i]\n      intersect = polygon.containsXY(point[0], point[1])\n      if (intersect) {\n        break\n      }\n    }\n  }\n  \n  return intersect\n}\n\n/**\n * 多边形和多边形相交判断\n * @param poly\n * @param polygon\n */\nconst polygonIntersectsPolygon = function (poly, polygon) {\n  let lineLinearRings = poly.getCoordinates()\n  let polygon2LinearRings = polygon.getCoordinates()// 只获得外环\n  \n  if (poly.geometryType === Geometry.POLYGON) {\n    lineLinearRings = lineLinearRings[0]\n  }\n  \n  if (polygon.geometryType === Geometry.POLYGON) {\n    polygon2LinearRings = polygon2LinearRings[0]\n  }\n  \n  let intersect = intersectsByLinearRings(lineLinearRings, polygon2LinearRings)\n  \n  // 两个多边形要做相互内含关系的判断\n  \n  // 正向检查\n  if (!intersect) {\n    for (let i = 0, len = lineLinearRings.length; i < len; ++i) {\n      const point = lineLinearRings[i]\n      intersect = polygon.containsXY(point[0], point[1])\n      if (intersect) {\n        break\n      }\n    }\n  }\n  \n  // 反向检查\n  if (!intersect) {\n    for (let i = 0, len = polygon2LinearRings.length; i < len; ++i) {\n      const point = polygon2LinearRings[i]\n      intersect = poly.containsXY(point[0], point[1])\n      if (intersect) {\n        break\n      }\n    }\n  }\n  \n  return intersect\n}\n\nconst intersectsByLinearRings = function (LinearRing1, LinearRings2) {\n  let intersect = false\n  const segs1 = getSortedSegments(LinearRing1)\n  const segs2 = getSortedSegments(LinearRings2)\n  \n  let seg1, seg1x1, seg1x2, seg1y1, seg1y2,\n    seg2, seg2y1, seg2y2\n  \n  // sweep right\n  for(let i = 0, len = segs1.length; i < len; ++i) {\n    seg1 = segs1[i]\n    seg1x1 = seg1.x1\n    seg1x2 = seg1.x2\n    seg1y1 = seg1.y1\n    seg1y2 = seg1.y2\n    \n    for(let j = 0, jlen = segs2.length; j < jlen; ++j) {\n      seg2 = segs2[j]\n      if(seg2.x1 > seg1x2) {\n        // seg1 still left of seg2\n        break\n      }\n      \n      if(seg2.x2 < seg1x1) {\n        // seg2 still left of seg1\n        continue\n      }\n      \n      seg2y1 = seg2.y1\n      seg2y2 = seg2.y2\n      if (Math.min(seg2y1, seg2y2) > Math.max(seg1y1, seg1y2)) {\n        // seg2 above seg1\n        continue\n      }\n      \n      if (Math.max(seg2y1, seg2y2) < Math.min(seg1y1, seg1y2)) {\n        // seg2 below seg1\n        continue\n      }\n      \n      if (segmentsIntersect(seg1, seg2)) {\n        intersect = true\n        break\n      }\n    }\n  }\n  \n  return intersect\n}\n\nconst getSortedSegments = function (points) {\n  const numSeg = points.length - 1\n  let segments = new Array(numSeg), point1, point2\n  \n  for (let i = 0; i < numSeg; ++i) {\n    point1 = points[i]\n    point2 = points[i + 1]\n    \n    if (point1[0] < point2[0]) {\n      segments[i] = {\n        x1: point1[0],\n        y1: point1[1],\n        x2: point2[0],\n        y2: point2[1]\n      }\n    } else {\n      segments[i] = {\n        x1: point2[0],\n        y1: point2[1],\n        x2: point1[0],\n        y2: point1[1]\n      }\n    }\n  }\n  \n  // more efficient to define this somewhere static\n  function byX1(seg1, seg2) {\n    return seg1.x1 - seg2.x1\n  }\n  \n  return segments.sort(byX1)\n}\n\nconst segmentsIntersect = function (seg1, seg2, options) {\n  const point = options && options.point\n  const tolerance = options && options.tolerance\n  let intersection = false\n  const x11_21 = seg1.x1 - seg2.x1\n  const y11_21 = seg1.y1 - seg2.y1\n  const x12_11 = seg1.x2 - seg1.x1\n  const y12_11 = seg1.y2 - seg1.y1\n  const y22_21 = seg2.y2 - seg2.y1\n  const x22_21 = seg2.x2 - seg2.x1\n  const d = (y22_21 * x12_11) - (x22_21 * y12_11)\n  const n1 = (x22_21 * y11_21) - (y22_21 * x11_21)\n  const n2 = (x12_11 * y11_21) - (y12_11 * x11_21)\n  \n  if (d == 0) {\n    // parallel\n    if (n1 == 0 && n2 == 0) {\n      // coincident\n      intersection = true\n    }\n  } else {\n    const along1 = n1 / d\n    const along2 = n2 / d\n    if (along1 >= 0 && along1 <= 1 && along2 >=0 && along2 <= 1) {\n      // intersect\n      if (!point) {\n        intersection = true\n      } else {\n        // calculate the intersection point\n        const x = seg1.x1 + (along1 * x12_11)\n        const y = seg1.y1 + (along1 * y12_11)\n        intersection = { 'x':x, 'y':y }\n      }\n    }\n  }\n  \n  if (tolerance) {\n    let dist\n    if (intersection) {\n      if (point) {\n        const segs = [seg1, seg2]\n        let seg, x, y\n        // check segment endpoints for proximity to intersection\n        // set intersection to first endpoint within the tolerance\n        for (let i = 0; i < 2; ++i) {\n          seg = segs[i]\n          for (let j = 1; j < 3; ++j) {\n            x = seg['x' + j]\n            y = seg['y' + j]\n            \n            dist = Math.sqrt(\n              Math.pow(x - intersection.x, 2) +\n              Math.pow(y - intersection.y, 2)\n            )\n            \n            if (dist < tolerance) {\n              intersection.x = x\n              intersection.y = y\n              break\n            }\n          }\n        }\n        \n      }\n    } else {\n      // no calculated intersection, but segments could be within\n      // the tolerance of one another\n      const segs = [seg1, seg2]\n      let source, target, p, result\n      // check segment endpoints for proximity to intersection\n      // set intersection to first endpoint within the tolerance\n      for (let i = 0; i < 2; ++i) {\n        source = segs[i]\n        target = segs[(i + 1) % 2]\n        for (let j = 1; j < 3; ++j) {\n          p = {x: source['x' + j], y: source['y' + j]}\n          result = distanceToSegment(p, target)\n          if (result.distance < tolerance) {\n            if (point) {\n              intersection = { 'x':p.x, 'y':p.y }\n            } else {\n              intersection = true\n            }\n            \n            break\n          }\n        }\n      }\n    }\n  }\n  return intersection\n}\n\n\nconst distanceToSegment = function (point, segment) {\n  let result = distanceSquaredToSegment(point, segment)\n  result.distance = Math.sqrt(result.distance)\n  return result\n}\n\nconst distanceSquaredToSegment = function (point, segment) {\n  const x0 = point.x\n  const y0 = point.y\n  const x1 = segment.x1\n  const y1 = segment.y1\n  const x2 = segment.x2\n  const y2 = segment.y2\n  const dx = x2 - x1\n  const dy = y2 - y1\n  const along = ((dx * (x0 - x1)) + (dy * (y0 - y1))) / (Math.pow(dx, 2) + Math.pow(dy, 2))\n  let x, y\n  \n  if(along <= 0.0) {\n    x = x1\n    y = y1\n  } else if(along >= 1.0) {\n    x = x2\n    y = y2\n  } else {\n    x = x1 + along * dx\n    y = y1 + along * dy\n  }\n  \n  return {\n    distance: Math.pow(x - x0, 2) + Math.pow(y - y0, 2),\n    x,\n    y,\n    along\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/analysis/intersects.js","/**\n * Created by zhangyong on 2017/8/4.\n */\n\nimport Geometry from '../../geometry/geometry'\nimport {linearRingIsClockwise} from '../support/orient'\nimport contains from './contains'\n\n/**\n *\n * @param polygon\n * @param holePolygon\n * @returns {*}\n */\nexport default function polygonWithHoles (polygon1, polygon2) {\n  \n  const polygon = polygon1.clone()\n  const holePolygon = polygon2.clone()\n  \n  let resultPolygon = polygon\n  const holeCoordinates = holePolygon.getCoordinates()\n  const polygonCoordinates = polygon.getCoordinates()\n  \n  const type = polygon.geometryType\n  // if (type === Geometry.POLYGON || type === Geometry.MULTI_POLYGON ) {\n  if (type === Geometry.POLYGON ) {\n    // 必须要被包含在多边形内\n    if (contains(polygon, holePolygon)) {\n      const holeOutRings = holeCoordinates[0]\n      const polygonOutRings = polygonCoordinates[0]\n      \n      let tempHoleOutRings = []\n      let tempPolygonOutRings = []\n  \n      holeOutRings.forEach( ring => {\n        tempHoleOutRings.push(ring[0], ring[1])\n      })\n  \n      polygonOutRings.forEach( ring => {\n        tempPolygonOutRings.push(ring[0], ring[1])\n      })\n      \n      const holeOriented = linearRingIsClockwise(tempHoleOutRings, 0, tempHoleOutRings.length, 2)\n      const polygonOutRingOriented = linearRingIsClockwise(tempPolygonOutRings, 0, tempPolygonOutRings.length, 2)\n      \n      // 带洞多边形\n      if (polygonCoordinates.length > 1) {\n        // 如果有带洞多边形，需要处理的更多\n        // 这里只是简单的存储进去\n  \n        // 不同向\n        if (holeOriented !== polygonOutRingOriented) {\n          polygonCoordinates.push(holeOutRings.slice())\n        } else {\n          polygonCoordinates.push(holeOutRings.slice().reverse())\n        }\n        \n      } else {\n        // 不同向\n        if (holeOriented !== polygonOutRingOriented) {\n          polygonCoordinates.push(holeOutRings.slice())\n        } else {\n          polygonCoordinates.push(holeOutRings.slice().reverse())\n        }\n      }\n    }\n  }\n  \n  return resultPolygon\n}\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/analysis/polygonwithhole.js","/**\n * Created by zhangyong on 2017/7/17.\n */\n\nimport contains from './contains'\nimport {ExtentUtil} from '../../geometry/support/extentutil'\nimport Polygon from '../../geometry/polygon'\n\n\nlet isDividedPointSymbol = Symbol('isDividedPoint')\nlet alreadyUsedSymbol = Symbol('alreadyUsed')\nlet dividePointSymbol = Symbol('dividePoint')\n\n/**\n * 使用直线来切割多边形,\n * 暂时只支持不带洞的多边形的分割\n *\n * @method splitPolygonByLine\n * @param polygon {Geometry} 被切割多边形\n * @param line {Geometry} 切割直线\n * @returns {Array}\n */\nexport default function splitPolygonByPolyline(targetPolygon, splitLine) {\n  \n  // 不再原对象上处理\n  const polygon = targetPolygon.clone()\n  const line = splitLine.clone()\n  \n  const polygonCoordinates = polygon.getCoordinates()[0]\n  const lineCoordinates = line.getCoordinates()\n  \n  // 找到直线和面的相交点\n  let dividedPointList = findIntersectionPoints(polygonCoordinates, lineCoordinates)\n  \n  // 0交点或者交点为奇数，则认为非法输入\n  if (dividedPointList.length === 0 || dividedPointList.length % 2 === 1) {\n    return []\n  }\n  \n  // 参入到原来分割线中\n  const afterInsertLineCoords = insertDiveidePointsToSplitLineCoords(dividedPointList, lineCoordinates)\n  \n  const allPartsScliedFromLineCoords = sliceDividedPointFromLine(dividedPointList, afterInsertLineCoords)\n  \n  // 按照顺序插入分割点到分割多边形顶多序列中\n  const vertexListAfterDivide = insertDividePointsToCoordinates(dividedPointList, polygonCoordinates)\n  \n  // 重塑多边形\n  const results = renewal(vertexListAfterDivide, allPartsScliedFromLineCoords)\n  \n  const featureCollection = []\n  results.forEach( r=> {\n    const coords = []\n    r.forEach(arrs => {\n      coords.push([arrs[0], arrs[1]])\n    })\n    const polygon = new Polygon()\n    polygon.setCoordinates([coords])\n    featureCollection.push(polygon)\n  })\n  \n  // 处理带洞多边形\n  handleHolesForPolygon(polygon, featureCollection, line)\n  \n  return featureCollection\n}\n\n\nconst renewal = function(vertexListAfterDivide, allPartsScliedFromLineCoords) {\n  \n  let i = 0\n  let len = vertexListAfterDivide.length\n  \n  const isInArray = (point, singlePolygonCoords) =>\n    singlePolygonCoords.find( item =>\n      item[0] === point[0] && item[1] === point[1]\n    )\n  \n  \n  // 找到分割点在同一分割边上的其他点\n  const findPartners = function(point) {\n    for (let j = 0, jLen = allPartsScliedFromLineCoords.length; j < jLen; j++) {\n      const parts = allPartsScliedFromLineCoords[j]\n      const fp = parts[0]\n      const ep = parts[parts.length - 1]\n      \n      // 如果是首点\n      if (fp[0] === point[0] && fp[1] === point[1]) {\n        return parts\n      }\n      \n      if (ep[0] === point[0] && ep[1] === point[1]) {\n        const newParts = [].concat(parts)\n        return newParts.reverse()\n      }\n    }\n  }\n  \n  // 寻找点在多边形序列的下一点\n  const findNextPoint = function(point) {\n    for (let m = 0, mlen = vertexListAfterDivide.length; m < mlen; m++) {\n      const item = vertexListAfterDivide[m]\n      if (item[0] === point[0] && item[1] === point[1]) {\n        if (m === vertexListAfterDivide.length - 1) {\n          return item\n        } else {\n          return vertexListAfterDivide[m + 1]\n        }\n      }\n    }\n  }\n  \n  let singlePolygonCoords = []\n  let allPolygonCoords = []\n  \n  // 递归分割\n  const goThrough = function(ePoint, singlePolygonCoords ) {\n    if (singlePolygonCoords.length > 1) {\n      const firstPoint = singlePolygonCoords[0]\n      if (firstPoint[0] === ePoint[0] && firstPoint[1] === ePoint[1]) {\n        singlePolygonCoords.push(ePoint)\n        return true\n      }\n    }\n    \n    // 找到分割点，就需要添加它的伙伴（不管顺逆方向）\n    if (ePoint.length >= 3 && ePoint[2] === isDividedPointSymbol) {\n      const parts = findPartners(ePoint)\n      parts.forEach(p => {\n        singlePolygonCoords.push(p)\n      })\n  \n      // 判断此时是否已经完成绘制\n      const ffpoint = singlePolygonCoords[0]\n      const eepoint = singlePolygonCoords[singlePolygonCoords.length - 1]\n      if (ffpoint[0] === eepoint[0] && ffpoint[1] === eepoint[1]) {\n        return true\n      }\n    \n      const endPoint = parts[parts.length - 1]\n      const nextPoint = findNextPoint(endPoint)\n      goThrough(nextPoint, singlePolygonCoords)\n    } else if(ePoint.length === 2) {\n      singlePolygonCoords.push(ePoint)\n      \n      const nextPoint = findNextPoint(ePoint)\n      goThrough(nextPoint, singlePolygonCoords)\n    }\n  }\n  \n  // 更新多边形顶点的状态\n  const updataStatus = function(singlePolygonCoords, vertexListAfterDivide) {\n    vertexListAfterDivide.forEach(vertex => {\n      if (isInArray(vertex, singlePolygonCoords)) {\n        // 如果是原多边形顶点，则设置为alreadyUsedSymbol\n        if (vertex.length === 2) {\n          vertex.push(alreadyUsedSymbol)\n        }\n        // 如果是分割点，则只能使用2次\n        else if (vertex.length === 3 && vertex[2] === isDividedPointSymbol) {\n          vertex.push('1')\n        }\n        //\n        else if(vertex.length === 4 ) {\n          if (vertex[3] === '1') {\n            vertex[3] = '2'\n          }\n        }\n      }\n    })\n  }\n  \n  // 检测这两个点是否是切割边\n  const isInOneSegment = function(onePoint, otherPoint) {\n    const allPartsScliedFromLineCoordsTemp = allPartsScliedFromLineCoords\n    let findCount = 0\n    \n    for (let i = 0, len = allPartsScliedFromLineCoordsTemp.length; i < len; i++) {\n      const group = allPartsScliedFromLineCoordsTemp[i]\n      findCount = 0\n      \n      for (let j = 0, jjlen = group.length; j < jjlen; j++) {\n        const item = group[j]\n        if (item[0] === onePoint[0] && item[1] === onePoint[1]) {\n          findCount ++\n        }\n        \n        if (item[0] === otherPoint[0] && item[1] === otherPoint[1]) {\n          findCount ++\n        }\n        \n        if (findCount === 2) {\n          return true\n        }\n      }\n    }\n  \n    return false\n  }\n\n  for (; i < len - 1; i++) {\n    const fPoint = vertexListAfterDivide[i]\n    // 如果是普通点\n    if (fPoint.length === 2) {\n      if (!isInArray(fPoint, singlePolygonCoords)) {\n        singlePolygonCoords.push(fPoint)\n      }\n  \n      const ePoint = vertexListAfterDivide[i + 1]\n      goThrough(ePoint, singlePolygonCoords)\n  \n      updataStatus(singlePolygonCoords, vertexListAfterDivide)\n      \n      allPolygonCoords.push(singlePolygonCoords)\n      singlePolygonCoords = []\n    }\n    // 如果是分割点\n    else if (fPoint.length === 3 && fPoint[2] === isDividedPointSymbol) {\n      if (!isInArray(fPoint, singlePolygonCoords)) {\n        singlePolygonCoords.push(fPoint)\n      }\n  \n      const ePoint = vertexListAfterDivide[i + 1]\n      goThrough(ePoint, singlePolygonCoords)\n  \n      updataStatus(singlePolygonCoords, vertexListAfterDivide)\n  \n      allPolygonCoords.push(singlePolygonCoords)\n      singlePolygonCoords = []\n    } else if (fPoint.length === 4 && fPoint[3] === '1') {\n      let ePoint = vertexListAfterDivide[i + 1]\n      \n      // 分割点，必须是构成同一边，不能是异边\n      if(ePoint.length >= 3 && ePoint[2] === isDividedPointSymbol && isInOneSegment(fPoint, ePoint)) {\n        ePoint = fPoint\n      }\n      // 异边，则重新启动分割流程\n      else {\n        if (!isInArray(fPoint, singlePolygonCoords)) {\n          singlePolygonCoords.push(fPoint)\n        }\n      }\n  \n      goThrough(ePoint, singlePolygonCoords)\n      updataStatus(singlePolygonCoords, vertexListAfterDivide)\n  \n      const fp = singlePolygonCoords[0]\n      const tp = singlePolygonCoords[singlePolygonCoords.length - 1]\n      if (fp[0] !== tp[0] || fp[1] !== tp[1]) {\n        singlePolygonCoords.push(fp)\n      }\n      \n      allPolygonCoords.push(singlePolygonCoords)\n      singlePolygonCoords = []\n    }\n  }\n  \n  return allPolygonCoords\n}\n\nconst sliceDividedPointFromLine = function(dividedPointList, afterInsertLineCoords) {\n  let allParts = []\n  let singleParts = []\n  let isDividePointStart = false\n  \n  for (let i = 0, len = afterInsertLineCoords.length; i < len; i++) {\n    const item = afterInsertLineCoords[i]\n    \n    if (isDividePointStart === false && item.length === 3) {\n      singleParts.push([item[0], item[1]])\n      isDividePointStart = true\n      \n      continue\n    }\n    \n    if (isDividePointStart) {\n      if (item.length === 2) {\n        singleParts.push(item)\n        \n        continue\n      }\n    }\n    \n    if (isDividePointStart && item.length === 3) {\n      singleParts.push([item[0], item[1]])\n      isDividePointStart = false\n      \n      allParts.push(singleParts)\n      singleParts = []\n    }\n  }\n  \n  return allParts\n}\n\nconst insertDiveidePointsToSplitLineCoords = function(dividedPointList, lineCoordinates) {\n  \n  const getDividePoints = function (fP, eP) {\n    return dividedPointList.filter(dp => {\n      const dfPoint = dp.intersectFrom.fromPoint\n      const dePoint = dp.intersectFrom.endPoint\n      \n      return dfPoint[0] === fP[0] &&\n             dfPoint[1] === fP[1] &&\n             dePoint[0] === eP[0] &&\n             dePoint[1] === eP[1]\n    })\n  }\n  \n  const isInArray = function(point) {\n    return afterArr.find( item =>\n      item[0] === point[0] && item[1] === point[1]\n    )\n  }\n  \n  let len = lineCoordinates.length\n  let i = 0\n  const afterArr = []\n  for (;i < len - 1; i ++) {\n    const fPoint = lineCoordinates[i]\n    const ePoint = lineCoordinates[i + 1]\n  \n    if (!isInArray(fPoint)) {\n      afterArr.push(fPoint)\n    }\n    \n    const dividePoints = getDividePoints(fPoint, ePoint)\n    if (dividePoints.length !== 0) {\n      // 插入分割点\n      if (dividePoints.length === 1) {\n        afterArr.push([dividePoints[0].point.x, dividePoints[0].point.y, dividePointSymbol])\n      } else {\n        // 多个分割点需要排序\n        \n        const firstPointXY = {\n          x: fPoint[0],\n          y: fPoint[1]\n        }\n        \n        dividePoints.sort((item1, item2) =>\n          distance(item1.point, firstPointXY) - distance(item2.point, firstPointXY)\n        )\n  \n        dividePoints.forEach(item => {\n          afterArr.push([item.point.x, item.point.y, dividePointSymbol])\n        })\n      }\n    }\n  \n    if (!isInArray(ePoint)) {\n      afterArr.push(ePoint)\n    }\n  }\n  \n  return afterArr\n}\n\n\nconst distance = function(p1, p2) {\n  return Math.sqrt((p1.x - p2.x) * (p1.x - p2.x) + (p1.y - p2.y) * (p1.y - p2.y))\n}\n\nconst insertDividePointsToCoordinates = function(dividedPointList, polygonCoordinates) {\n  const afterInserted = []\n  \n  const isInDividedPointList = function(firstPoint, endPoint) {\n    return dividedPointList.filter(item => {\n      const orialPoint = item.originPoint\n      const ofPoint = orialPoint.fromPoint\n      const oePoint = orialPoint.toPoint\n      \n      return firstPoint[0] === ofPoint[0] &&\n        firstPoint[1] === ofPoint[1] &&\n        endPoint[0] === oePoint[0] &&\n        endPoint[1] === oePoint[1]\n    })\n  }\n  \n  const len = polygonCoordinates.length\n  let i = 0\n  \n  for (; i < len - 1; i++) {\n    const fPoint = polygonCoordinates[i]\n    const ePoint = polygonCoordinates[i + 1]\n    \n    afterInserted.push(fPoint)\n    const itemDividedPoint = isInDividedPointList(fPoint, ePoint)\n    \n    if (itemDividedPoint.length > 0) {\n      if (itemDividedPoint.length > 1) {\n        const firstPointXY = {\n          x: fPoint[0],\n          y: fPoint[1]\n        }\n    \n        itemDividedPoint.sort((item1, item2) =>\n          distance(item1.point, firstPointXY) - distance(item2.point, firstPointXY)\n        )\n      }\n  \n      itemDividedPoint.forEach(item => {\n        const point = item.point\n        afterInserted.push([point.x, point.y, isDividedPointSymbol])\n      })\n    }\n  }\n  \n  afterInserted.push(afterInserted[0])\n  return afterInserted\n}\n\nconst findOneIntersectionPoints = function(polygonCoordinates, lineCoordinates) {\n  const _ExtentUtil = ExtentUtil\n  const lineCoordinatesExtent = _ExtentUtil.boundingExtentFromTwoPoints(lineCoordinates[0], lineCoordinates[1])\n  const lineCoordinatesExtentBuffer = _ExtentUtil.buffer(lineCoordinatesExtent, 4)\n  \n  const seg2 = {\n    x1: lineCoordinates[0][0],\n    y1: lineCoordinates[0][1],\n    x2: lineCoordinates[1][0],\n    y2: lineCoordinates[1][1]\n  }\n  \n  const ntersectionPoints = []\n  \n  for (let j = 0, jj = polygonCoordinates.length - 1; j < jj; j ++) {\n    let points = polygonCoordinates[j]\n    let nextPoints = polygonCoordinates[j + 1]\n    \n    let pathExtent = _ExtentUtil.boundingExtentFromTwoPoints(points, nextPoints)\n    // 如果两边的extent相交，则判断他们是否相交\n    if (_ExtentUtil.intersects(pathExtent, lineCoordinatesExtentBuffer)) {\n      \n      const seg1 = {\n        x1: points[0],\n        y1: points[1],\n        x2: nextPoints[0],\n        y2: nextPoints[1]\n      }\n      \n      const intersectPoint = segmentsIntersect(seg1, seg2, {point: true})\n      if (intersectPoint instanceof Object) {\n        ntersectionPoints.push({\n          point: intersectPoint,\n          originPoint:{\n            fromPoint: points,\n            toPoint: nextPoints\n          },\n          index: j\n        })\n      }\n    }\n  }\n  \n  return ntersectionPoints\n}\n\nconst findIntersectionPoints = function (polygonCoordinates, lineCoordinates) {\n  const _findOneIntersectionPoints = findOneIntersectionPoints\n  let ntersectionPoints = []\n  \n  for (let i = 0, len = lineCoordinates.length - 1; i < len ; i++) {\n    const firstPoint = lineCoordinates[i]\n    const endPoint = lineCoordinates[i + 1]\n    \n    const intersectionPoints = _findOneIntersectionPoints(polygonCoordinates, [firstPoint, endPoint])\n    intersectionPoints.forEach( ntp => {\n      ntp.intersectIndex = i\n      ntp.intersectFrom = {\n        fromPoint: firstPoint,\n        endPoint: endPoint\n      }\n    })\n    \n    ntersectionPoints = ntersectionPoints.concat(intersectionPoints)\n  }\n  \n  return ntersectionPoints\n}\n\n\nconst segmentsIntersect = function (seg1, seg2, options) {\n  const point = options && options.point\n  const tolerance = options && options.tolerance\n  let intersection = false\n  const x11_21 = seg1.x1 - seg2.x1\n  const y11_21 = seg1.y1 - seg2.y1\n  const x12_11 = seg1.x2 - seg1.x1\n  const y12_11 = seg1.y2 - seg1.y1\n  const y22_21 = seg2.y2 - seg2.y1\n  const x22_21 = seg2.x2 - seg2.x1\n  const d = (y22_21 * x12_11) - (x22_21 * y12_11)\n  const n1 = (x22_21 * y11_21) - (y22_21 * x11_21)\n  const n2 = (x12_11 * y11_21) - (y12_11 * x11_21)\n  \n  if (d == 0) {\n    // parallel\n    if (n1 == 0 && n2 == 0) {\n      // coincident\n      intersection = true\n    }\n  } else {\n    const along1 = n1 / d\n    const along2 = n2 / d\n    if (along1 >= 0 && along1 <= 1 && along2 >=0 && along2 <= 1) {\n      // intersect\n      if (!point) {\n        intersection = true\n      } else {\n        // calculate the intersection point\n        const x = seg1.x1 + (along1 * x12_11)\n        const y = seg1.y1 + (along1 * y12_11)\n        intersection = { 'x':x, 'y':y }\n      }\n    }\n  }\n  \n  if (tolerance) {\n    let dist\n    if (intersection) {\n      if (point) {\n        const segs = [seg1, seg2]\n        let seg, x, y\n        // check segment endpoints for proximity to intersection\n        // set intersection to first endpoint within the tolerance\n        for (let i = 0; i < 2; ++i) {\n          seg = segs[i]\n          for (let j = 1; j < 3; ++j) {\n            x = seg['x' + j]\n            y = seg['y' + j]\n            \n            dist = Math.sqrt(\n              Math.pow(x - intersection.x, 2) +\n              Math.pow(y - intersection.y, 2)\n            )\n            \n            if (dist < tolerance) {\n              intersection.x = x\n              intersection.y = y\n              break\n            }\n          }\n        }\n      }\n    } else {\n      // no calculated intersection, but segments could be within\n      // the tolerance of one another\n      const segs = [seg1, seg2]\n      let source, target, p, result\n      // check segment endpoints for proximity to intersection\n      // set intersection to first endpoint within the tolerance\n      for (let i = 0; i < 2; ++i) {\n        source = segs[i]\n        target = segs[(i + 1) % 2]\n        for (let j = 1; j < 3; ++j) {\n          p = {x: source['x' + j], y: source['y' + j]}\n          result = distanceToSegment(p, target)\n          if (result.distance < tolerance) {\n            if (point) {\n              intersection = { 'x':p.x, 'y':p.y }\n            } else {\n              intersection = true\n            }\n            \n            break\n          }\n        }\n      }\n    }\n  }\n  return intersection\n}\n\nconst distanceToSegment = function (point, segment) {\n  let result = distanceSquaredToSegment(point, segment)\n  result.distance = Math.sqrt(result.distance)\n  return result\n}\n\nconst distanceSquaredToSegment = function (point, segment) {\n  const x0 = point.x\n  const y0 = point.y\n  const x1 = segment.x1\n  const y1 = segment.y1\n  const x2 = segment.x2\n  const y2 = segment.y2\n  const dx = x2 - x1\n  const dy = y2 - y1\n  const along = ((dx * (x0 - x1)) + (dy * (y0 - y1))) / (Math.pow(dx, 2) + Math.pow(dy, 2))\n  let x, y\n  \n  if(along <= 0.0) {\n    x = x1\n    y = y1\n  } else if(along >= 1.0) {\n    x = x2\n    y = y2\n  } else {\n    x = x1 + along * dx\n    y = y1 + along * dy\n  }\n  \n  return {\n    distance: Math.pow(x - x0, 2) + Math.pow(y - y0, 2),\n    x: x, y: y,\n    along: along\n  }\n}\n\n/**\n * 处理带洞多边形\n * @param polygon\n * @param geometryCollection\n * @param splitLine\n */\nconst handleHolesForPolygon = function(polygon, geometryCollection, splitLine) {\n  if (!polygon.hasHoles()) {\n    return\n  }\n  \n  const addHoleToPolygon = function(polyCoods, geometryCollection) {\n    const poly = new Polygon([polyCoods])\n    const needPoly = geometryCollection.find( polygon => {\n      return contains(polygon, poly)\n    })\n    \n    if (needPoly) {\n      needPoly.getCoordinates().push(polyCoods)\n    }\n  }\n  \n  // 判断洞是否与切割线相交\n  const coords = polygon.getCoordinates()\n  const lineCoords = splitLine\n  \n  for (let i = 1, len = coords.length ;i < len ; i++) {\n    const dividedPoints = findIntersectionPoints(coords[i], lineCoords)\n    \n    // 如果分割线和洞不相交，需要判断洞的归属\n    if (dividedPoints.length === 0) {\n      // console.log('Find one need to appended to collection.')\n      addHoleToPolygon (coords[i], geometryCollection)\n    }\n  }\n  \n  \n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/analysis/splitpolygon.js","/**\n * Created by zypc on 2016/11/21.\n */\n\nimport BaseObject from '../core/baseobject'\nimport {listen, unlistenByKey} from '../core/eventmanager'\nimport BrowserEvent from './browserevent'\n\nexport default class BrowserEventHandler extends BaseObject {\n\n  constructor (map, element) {\n    super()\n\n    this.map = map\n\n    /**\n     *\n     * @private\n     */\n    this._element = element\n  \n    /**\n     *\n     * @type {boolean}\n     * @private\n     */\n    this._dragging = false\n  \n    /**\n     * The most recent \"down\" type event (or null if none have occurred).\n     * @private\n     */\n    this._down = null\n  \n    /**\n     *\n     * @type {Array}\n     * @private\n     */\n    this._dragListenerKeys = []\n  \n    /**\n     *\n     * @type {number}\n     * @private\n     */\n    this._clickTimeoutId = 0\n    \n\n    // 事件和对应的处理方法\n    // 映射关系\n    this._mapping = {\n      'mousedown': this._mousedown,\n      'mousemove': this._mousemove,\n      'mouseup': this._mouseup,\n      'mouseover': this._mouseover,\n      'mouseout': this._mouseout\n    }\n\n    this._registerSource()\n  }\n\n  /**\n   *\n   * @private\n   */\n  _registerSource () {\n    // console.log('注册鼠标事件')\n    const events = this.getEvents()\n    events.forEach(eventName =>\n        listen(this._element, eventName, this._mapping[eventName], this))\n  }\n\n  /**\n   * 得到事件\n   *\n   * @method getEvents\n   * @return {Array}\n   */\n  getEvents () {\n    return Object.keys(this._mapping)\n  }\n\n  /**\n   *\n   * @param e\n   * @private\n   */\n  _mousedown (e) {\n    let event = new BrowserEvent(this.map, e, BrowserEvent.MOUSE_DOWN)\n    this.dispatchEvent(event)\n  \n    this._dragging = false\n    this._down = e\n    \n    if (this._dragListenerKeys.length === 0) {\n      const documentDom = document\n  \n      this._dragListenerKeys.push(\n        listen(documentDom, BrowserEvent.MOUSE_MOVE, this._mousemove, this),\n        listen(documentDom, BrowserEvent.MOUSE_UP, this._mouseup, this)\n      )\n    }\n  }\n\n  /**\n   *\n   * @param e\n   * @private\n   */\n  _mousemove (e) {\n  \n    let event = new BrowserEvent(this.map, e, BrowserEvent.MOUSE_MOVE)\n  \n    if (event.coordinate === null) {\n      return\n    }\n    \n    this.dispatchEvent(event)\n    \n    if (this._isMoving(e)) {\n      this._dragging = true\n  \n      const newEvent = new BrowserEvent(this.map, e, BrowserEvent.MOUSE_DRAG, this._dragging)\n      this.dispatchEvent(newEvent)\n    }\n  }\n\n  /**\n   *\n   * @param e\n   * @private\n   */\n  _mouseup (e) {\n    let event = new BrowserEvent(this.map, e, BrowserEvent.MOUSE_UP)\n    this.dispatchEvent(event)\n  \n    if (!this._dragging && this._down) {\n      this._emulateClick(this._down)\n    }\n  \n    this._dragListenerKeys.forEach(unlistenByKey)\n    this._dragListenerKeys.length = 0\n    this._dragging = false\n    this._down = null\n  }\n\n  /**\n   *\n   * @param e\n   * @private\n   */\n  _mouseover (e) {\n    let event = new BrowserEvent(this.map, e,BrowserEvent.MOUSE_OVER)\n    this.dispatchEvent(event)\n  }\n\n  /**\n   *\n   * @param e\n   * @private\n   */\n  _mouseout (e) {\n    let event = new BrowserEvent(this.map, e, BrowserEvent.MOUSE_OUT)\n    this.dispatchEvent(event)\n  }\n\n  /**\n   *\n   * @param event\n   * @private\n   */\n  _emulateClick (event) {\n    let newEvent = new BrowserEvent(this.map,event,BrowserEvent.CLICK)\n    this.dispatchEvent(newEvent)\n  \n    // double click\n    if (this._clickTimeoutId !== 0) {\n      clearTimeout(this._clickTimeoutId)\n      this._clickTimeoutId = 0\n      newEvent = new BrowserEvent(this.map,event,BrowserEvent.DBLCLICK)\n      this.dispatchEvent(newEvent)\n    } else {\n      // single click\n      this._clickTimeoutId = setTimeout(function() {\n        this._clickTimeoutId = 0\n        let newEvent = new BrowserEvent(this.map,event,BrowserEvent.SINGLE_CLICK)\n        this.dispatchEvent(newEvent)\n      }.bind(this), 250)\n    }\n  }\n\n  /**\n   *\n   * @param event\n   * @return {boolean}\n   * @private\n   */\n  _isMoving (event) {\n    if (this._down === null) {\n      return false\n    }\n    \n    return event.clientX !== this._down.clientX ||\n           event.clientY !== this._down.clientY\n  }\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/meek/browsereventhandler.js","/**\n * Created by zypc on 2016/11/15.\n */\n\nimport BaseObject from '../core/baseobject'\nimport CanvasRenderer from '../renderer/canvas/canvasrenderer'\nimport BrowserEventHandler from './browsereventhandler'\nimport BrowserEvent from './browserevent'\nimport View from './view'\nimport FeatureLayer from '../lyr/featurelayer'\nimport {listen} from '../core/eventmanager'\nimport {Transform} from '../data/matrix/transform'\nimport {EventType} from '../meek/eventtype'\nimport {ExtentUtil} from '../geometry/support/extentutil'\nimport {componentsDefaults} from '../components/componentdefaults'\nimport {controlDefaults} from '../control/controldefaults'\n\n\n/**\n * Map类\n *\n * @class Map\n * @extends BaseObject\n * @module meek\n * @constructor\n */\nexport default class Map extends BaseObject {\n\n  /**\n   * @constructor\n   *\n   * @param options\n   */\n  constructor (options) {\n    super()\n\n    this._frameState = null\n    \n    /**\n     * 添加到map中的layers集合\n     * @private\n     */\n    this._layers = []\n  \n    /**\n     * 初始化矩阵转换器\n     * @type {*}\n     * @private\n     */\n    this._toPixelTransform = Transform.create()\n    this._toCoordinateTransform = Transform.create()\n\n    /**\n     *\n     * @private\n     */\n    this._animationDelayKey = undefined\n\n    /**\n     * The collection of components\n     * @private\n     */\n    this._components = []\n  \n    /**\n     * The collection of controls\n     * @type {Array}\n     * @private\n     */\n    this._controls = []\n  \n    // Create the viewport for map container\n    this._createViewport()\n  \n    this._overlayContainer = document.createElement('DIV')\n    this._overlayContainer.className = 'dt-overlaycontainer'\n    this.viewport.appendChild(this._overlayContainer)\n  \n    this._overlayContainerStopEvent = document.createElement('DIV')\n    this._overlayContainerStopEvent.className = 'dt-overlaycontainer-stopevent'\n  \n    // prevent event propagation from overlay\n    const overlayEvents = [\n      BrowserEvent.CLICK,\n      BrowserEvent.DBLCLICK,\n      BrowserEvent.MOUSE_DOWN,\n      BrowserEvent.MOUSE_UP,\n      BrowserEvent.MOUSE_WHEEL,\n      BrowserEvent.WHEEL\n    ]\n    overlayEvents.forEach(overlayEvent => {\n      listen(this._overlayContainerStopEvent, overlayEvent,\n        (evt) => {evt.stopPropagation() })\n    })\n    \n    this.viewport.appendChild(this._overlayContainerStopEvent)\n  \n    // Get the options inner\n    const optionsInner = Map.parseOptionsInner(options)\n    \n    // 是否允许图片坐标超出图片范围\n    this.allowCoordinatesBeyondImage = options.allowCoordinatesBeyondImage || false\n  \n    // Create the renderer\n    this._renderer = new optionsInner.rendererClass(this.viewport, this)\n    \n    // Create the browser events handler\n    this._createBrowserEventHandler()\n  \n    this._animationDelay = () => {\n      this._animationDelayKey = undefined\n      this._renderFrame(Date.now())\n    }\n    \n    // Set up the properties for map\n    this.layers = optionsInner.values['layers']\n    this.target = optionsInner.values['target']\n    this.view = optionsInner.values['view']\n    \n    // add default components to map\n    optionsInner.components.forEach(component =>\n      this.addComponents(component))\n    \n    // add default controls to map\n    optionsInner.controls.forEach(control => this.addControl(control))\n  \n    this._overlayIdIndex = {}\n    this._overlays = optionsInner.overlays\n    this._overlays.forEach(overlay => this._addOverlayInternal(overlay))\n    \n    //\n    listen(this.view, EventType.CHANGE, this._handleViewChange, this)\n    \n    // add mouse wheel events listener\n    listen(this.viewport, BrowserEvent.MOUSE_WHEEL, this._handleMouseWheelEvent, this)\n    listen(this.viewport, BrowserEvent.WHEEL, this._handleMouseWheelEvent, this)\n  }\n\n  /**\n   * 设置map的父容器,\n   * 所有的图层对象、组件对象的父容器\n   *\n   * @method createViewport\n   * @private\n   */\n  _createViewport () {\n    const viewport = document.createElement('DIV')\n    viewport.className = 'dt-viewport'\n    viewport.style.position = 'relative'\n    viewport.style.overflow = 'hidden'\n    viewport.style.width = '100%'\n    viewport.style.height = '100%'\n\n    this._viewport = viewport\n  }\n  \n  /**\n   * 获取overlay的容器\n   *\n   * @property overlayContainer\n   * @returns {Element|*}\n   */\n  get overlayContainer () { return this._overlayContainer }\n  \n  /**\n   * 获取overlay容器的结束事件\n   *\n   * @property overlayContainerStopEvent\n   * @returns {Element|*}\n   */\n  get overlayContainerStopEvent () { return this._overlayContainerStopEvent }\n  \n  /**\n   * 获取viewport\n   *\n   * @property viewport\n   * @returns {Element|*}\n   */\n  get viewport () { return this._viewport }\n\n  /**\n   * 地图渲染器对象;默认渲染方式为canvas方式\n   *\n   * @method createRenderer\n   * @private\n   */\n  _createRenderer () {\n    this._renderer = new CanvasRenderer(this.viewport, this)\n  }\n\n  /**\n   * 创建浏览器事件的监听器\n   *\n   * 浏览器事件包括{mousedown|mousemove|mouseup|mouseover|mouseup}\n   *\n   * @method createBrowserEventHandler\n   * @private\n   */\n  _createBrowserEventHandler () {\n    this._browserEventHandler = new BrowserEventHandler(this, this.viewport)\n\n    /**\n     * 监听浏览器上的鼠标事件 mousemove,mouseup,mousedown\n     * 并处理浏览器事件\n     */\n    for (let key in BrowserEvent) {\n      listen(this._browserEventHandler, BrowserEvent[key],\n        this._handleBrowserEvent, this)\n    }\n  }\n  \n  /**\n   * Handle the mouse wheel event\n   * @param wheelEvent\n   * @private\n   */\n  _handleMouseWheelEvent (wheelEvent) {\n    const type = wheelEvent.type\n    const browserEvent = new BrowserEvent(this, wheelEvent, type)\n    this._handleBrowserEvent(browserEvent)\n  }\n  \n  /**\n   *\n   * @param keyboardEvent\n   * @private\n   */\n  _handleKeyboardEvent (keyboardEvent) {\n    const type = keyboardEvent.type\n    const browserEvent = new BrowserEvent(this, keyboardEvent, type)\n    this._handleBrowserEvent(browserEvent)\n  }\n  \n  /**\n   * Handle browser events\n   * @param browserEvent\n   * @private\n   */\n  _handleBrowserEvent (browserEvent) {\n    const cpts = this.components\n    let i\n\n    if (this.dispatchEvent(browserEvent) !== false) {\n      for (i = cpts.length - 1; i >= 0; i--) {\n        let cpt = cpts[i]\n\n        if (!cpt.active) {\n          continue\n        }\n\n        let cont = cpt.handleMouseEvent(browserEvent)\n        if (!cont) {\n          break\n        }\n      }\n    }\n  }\n  \n  /**\n   * 渲染map\n   *\n   * @method renderFrame\n   * @private\n   */\n  _renderFrame () {\n    const size = this.size\n    const view = this.view\n    let frameState = null\n\n    const extent = ExtentUtil.createEmpty()\n    const viewState = view.getViewState()\n    frameState = {\n      size,\n      viewState,\n      pixelRatio: 1,\n      extent,\n      toPixelTransform: this._toPixelTransform,\n      toCoordinateTransform: this._toCoordinateTransform,\n    }\n    \n    if (frameState) {\n      frameState.extent = ExtentUtil.getForViewAndSize(viewState.center,\n        viewState.resolution, viewState.rotation, frameState.size, extent)\n    }\n    \n    this._frameState = frameState\n    this._renderer.renderFrame(frameState)\n  }\n  \n  /**\n   * 执行渲染\n   *\n   * @method render\n   */\n  render () {\n    if (this._animationDelayKey === undefined) {\n      this._animationDelayKey = window.requestAnimationFrame(this._animationDelay)\n    }\n  }\n  \n  /**\n   * Render map while the view has been changed\n   * @private\n   */\n  _handleViewChange () {\n    this.render()\n    this.dispatchEvent(EventType.VIEW_CHANGED)\n  }\n  \n  /**\n   * 是否渲染\n   *\n   * @method isRendered\n   * @returns {Boolean}\n   */\n  isRendered () {\n    return !!this._frameState\n  }\n\n  /**\n   * Size读写器,当前地图的大小\n   *\n   * @property size\n   * @returns {Number}\n   */\n  get size () { return this._size }\n  set size (value) {\n    this._size = value\n  }\n\n  /**\n   * 获取组件\n   *\n   * @method components\n   * @returns {Array}\n   */\n  get components () { return this._components }\n  \n  /**\n   * map中控件集合\n   * @property controls\n   * @type {[]}\n   */\n  get controls () { return this._controls }\n\n  /**\n   * 当前存储在Map中的图层集合\n   *\n   * @property layers\n   * @type {Array}\n   */\n  get layers () { return this._layers }\n  set layers (value) {\n    if (Array.isArray(value)) {\n      value.forEach( layer => {\n        this.addLayer(layer)\n      })\n    }\n  }\n\n  /**\n   * target 读写器\n   *\n   * @property target\n   * @type\n   */\n  get target () { return this._target }\n  set target (value) {\n    this._target = value\n    const targetElement = document.getElementById(this._target)\n    targetElement.appendChild(this.viewport)\n  \n    // 监听键盘点击和抬起事件\n    listen(document, BrowserEvent.KEYDOWN,\n      this._handleKeyboardEvent, this),\n    listen(document, BrowserEvent.KEYPRESS,\n        this._handleKeyboardEvent, this)\n  \n    // 监听浏览器窗口变化，并做自适应\n    const handleRize = this.updateSize.bind(this)\n    window.addEventListener(EventType.RESIZE, handleRize, false)\n    \n    this.updateSize()\n    this.render()\n  }\n\n  /**\n   * 用于添加一个Component的方法接口\n   *\n   * @method addComponents\n   * @param cpt {Component} Componnet的一个子类\n   */\n  addComponents (cpt) {\n    this.components.push(cpt)\n    cpt.map = this\n  }\n  \n  /**\n   * 添加一个控件到地图中\n   * @method addControl\n   * @param control\n   */\n  addControl (control) {\n    this.controls.push(control)\n    control.map = this\n  }\n\n  /**\n   * 添加layer\n   *\n   * @method addLayer\n   * @param layer\n   */\n  addLayer (layer) {\n    this.layers.push(layer)\n    layer.map = this\n  }\n  \n  /**\n   * 获取当前地图中的矢量图层\n   *\n   * @method getFeaturesLayer\n   * @return {Array}\n   */\n  getFeaturesLayer () {\n    return this.layers.filter( layer => layer instanceof FeatureLayer )\n  }\n  \n  /**\n   *\n   * @param overlay\n   * @private\n   */\n  _addOverlayInternal (overlay) {\n    const id = overlay.overlayId\n    if (id !== undefined) {\n      this._overlayIdIndex[id.toString()] = overlay\n    }\n    \n    overlay.map = this\n  }\n  \n  /**\n   *\n   * getTargetElement\n   * @returns {Object}\n   */\n  getTargetElement () {\n    const target = this.target\n    if(target !== undefined) {\n      return typeof target === 'string' ?\n        document.getElementById(target) :\n        target\n    }else{\n      return null\n    }\n  }\n  \n  /**\n   * 遍历鼠标点位置的所有feature\n   *\n   * @method forEachFeatureAtPiexl\n   * @param piexl {Array}\n   * @param callback\n   * @param tolerance\n   * @returns {eature}\n   */\n  forEachFeatureAtPiexl (piexl,callback,tolerance) {\n    if (!this._frameState) {\n      return\n    }\n    \n    const coordinate = this.getCoordinateFromPixel(piexl)\n    const hitTolerance = tolerance\n    \n    const layers = this.getFeaturesLayer()\n    let result = null\n    for (let i = 0, ii = layers.length; i < ii; i++){\n      let layer = layers[i]\n      if (layer.visible) {\n        result = layer.forEachFeatureAtPiexl(this._frameState,coordinate,callback,hitTolerance)\n        if (result) {\n          return callback(result, layer)\n        }\n      }\n    }\n    \n    return result\n  }\n  \n  /**\n   * 更新map viewport的大小\n   *\n   * @method updateSize\n   */\n  updateSize () {\n    const targetElement = this.getTargetElement()\n    if (!targetElement) {\n      this.size = undefined\n    } else {\n      const computedStyle = getComputedStyle(targetElement)\n      this.size = [\n        targetElement.offsetWidth -\n        Number.parseFloat(computedStyle['borderLeftWidth']) -\n        Number.parseFloat(computedStyle['paddingLeft']) -\n        Number.parseFloat(computedStyle['paddingRight']) -\n        Number.parseFloat(computedStyle['borderRightWidth']),\n        targetElement.offsetHeight -\n        Number.parseFloat(computedStyle['borderTopWidth']) -\n        Number.parseFloat(computedStyle['paddingTop']) -\n        Number.parseFloat(computedStyle['paddingBottom']) -\n        Number.parseFloat(computedStyle['borderBottomWidth'])\n      ]\n    }\n  }\n\n  /**\n   * 获取当前视图鼠标的坐标\n   *\n   * @method getEventPixel\n   * @param {Event} event Event.\n   * @return {Array}\n   * @api stable\n   */\n  getEventPixel (event) {\n    // 获取viewport元素在浏览器视图窗口总的位置(left,top,bottom,right)\n    const viewportPosition = this.viewport.getBoundingClientRect()\n    // const eventPosition = event.changedTouches ? event.changedTouches[0] : event\n    const eventPosition = event\n    return [\n      eventPosition.clientX - viewportPosition.left,\n      eventPosition.clientY - viewportPosition.top\n    ]\n  }\n  \n  /**\n   * 把坐标数据转换到标准坐标系中\n   *\n   * @method getCoordinateFromPixel\n   * @param pixelPoint {Array}\n   * @returns {Array}\n   */\n  getCoordinateFromPixel (pixelPoint) {\n    // console.log('转换到标准坐标')\n    const frameState = this._frameState\n    if (!frameState) {\n      return null\n    } else {\n      return Transform.apply( frameState.toCoordinateTransform, pixelPoint.slice())\n    }\n  }\n  \n  /**\n   * Get the pixel for a coordinate.  This takes a coordinate in the map view\n   * projection and returns the corresponding pixel.\n   *\n   * getPixelFromCoordinate\n   * @param coordinate\n   * @returns {Array}\n   */\n  getPixelFromCoordinate (coordinate) {\n    const frameState = this._frameState\n    if (!frameState) {\n      return null\n    } else {\n      return Transform.apply(frameState.toPixelTransform, coordinate.slice(0, 2))\n    }\n  }\n  \n  /**\n   * Parse the options passed inner\n   * parseOptionsInner\n   * @param options\n   * @static\n   * @returns {{rendererClass: CanvasRenderer, components: *, values: Map}}\n   */\n  static parseOptionsInner (options = {}) {\n    \n    const rendererClass = CanvasRenderer\n    \n    const values = {}\n    \n    values['view'] = options.view !== undefined ? options.view : new View()\n    values['target'] = options.target\n    values['layers'] = options.layers !== undefined ? options.layers : []\n    \n    let components\n    if (options.components) {\n      components = options.components\n    } else {\n      components = componentsDefaults()\n    }\n  \n    let controls\n    if (options.controls) {\n      controls = options.controls\n    } else {\n      controls = controlDefaults()\n    }\n    \n    let overlays\n    if (options.overlays !== undefined) {\n      if (Array.isArray(options.overlays)) {\n        overlays = [...options.overlays]\n      }\n    } else {\n      overlays = []\n    }\n    \n    return {\n      rendererClass,\n      components,\n      controls,\n      values,\n      overlays\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/meek/map.js","/**\n * Created by zhangyong on 2017/6/26.\n */\n\nimport BaseObject from '../core/baseobject'\nimport {listen} from '../core/eventmanager'\nimport {RenderEventType} from '../renderer/rendereventtype'\nimport {ExtentUtil} from '../geometry/support/extentutil'\nimport {outerWidth, outerHeight, removeChildren} from '../utils/domutil'\n\n/**\n * Overlay类提供一个可以漂浮在map上的容器，\n * 凡是需要有和地图交互的表单，必须使用该容器承载\n *\n * @class Overlay\n * @extends BaseObject\n * @module meek\n * @constructor\n */\nexport default class Overlay extends BaseObject {\n\n  /**\n   * @constructor\n   * @param options\n   */\n  constructor (options = {}) {\n    super()\n  \n    /**\n     *\n     * @type {undefined}\n     * @private\n     */\n    this._element = undefined\n  \n    /**\n     *\n     * @type {undefined}\n     * @private\n     */\n    this._map = undefined\n  \n    /**\n     *\n     * @type {undefined}\n     * @private\n     */\n    this._offset = undefined\n  \n    /**\n     *\n     * @type {undefined}\n     * @private\n     */\n    this._position = undefined\n  \n    /**\n     *\n     * @type {undefined}\n     * @private\n     */\n    this._positioning = undefined\n    \n    \n    /**\n     * @private\n     * @type {number|string|undefined}\n     */\n    this._overlay = options.id\n  \n    /**\n     * @private\n     * @type {boolean}\n     */\n    this._insertFirst = options.insertFirst !== undefined ?\n      options.insertFirst : true\n  \n    /**\n     * @private\n     * @type {boolean}\n     */\n    this._stopEvent = options.stopEvent !== undefined ?\n      options.stopEvent : true\n  \n    /**\n     * @private\n     * @type {Element}\n     */\n    this._element = document.createElement('DIV')\n    this._element.className = 'dt-overlay-container dt-selectable'\n    this._element.style.position = 'absolute'\n  \n    /**\n     * @protected\n     * @type {boolean}\n     */\n    this.autoPan = options.autoPan !== undefined ? options.autoPan : false\n  \n    /**\n     * @private\n     */\n    this._autoPanAnimation = options.autoPanAnimation || {}\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._autoPanMargin = options.autoPanMargin !== undefined ?\n      options.autoPanMargin : 20\n  \n    /**\n     * @private\n     * @type {{bottom_: string,\n   *         left_: string,\n   *         right_: string,\n   *         top_: string,\n   *         visible: boolean}}\n     */\n    this._rendered = {\n      _bottom: '',\n      _left: '',\n      _right: '',\n      _top: '',\n      _visible: true\n    }\n  \n    /**\n     * @private\n     * @type {EventsKey}\n     */\n    this._mapPostrenderListenerKey = null\n  \n    if (options.element !== undefined) {\n      this.popupEelement = options.element\n    }\n  \n    this.offset = options.offset !== undefined ?\n      options.offset : [0, 0]\n  \n    this.positioning = options.positioning !== undefined ? options.positioning :\n      OverlayPositioning.TOP_LEFT\n  \n    if (options.position !== undefined) {\n      this.position = options.position\n    }\n  }\n  \n  /**\n   * 执行渲染\n   *\n   * @method render\n   */\n  render () {\n    this.updatePixelPosition()\n  }\n  \n  /**\n   * 更新鼠标点的位置信息\n   *\n   * @method updatePixelPosition\n   */\n  updatePixelPosition () {\n    const map = this.map\n    if (map) {\n      const position = this.position\n      if (!map || !map.isRendered() || !position) {\n        this.setVisible(false)\n        return\n      }\n  \n      const pixel = map.getPixelFromCoordinate(position)\n      const mapSize = map.size\n      this.updateRenderedPosition(pixel, mapSize)\n    }\n  }\n  \n  /**\n   * 更新渲染视图位置\n   *\n   * @param pixel {Array}\n   * @param mapSize {Number}\n   */\n  updateRenderedPosition (pixel, mapSize) {\n    const style = this._element.style\n    const offset = this.offset\n    const positioning = this.positioning\n    \n    this.setVisible(true)\n    \n    let offsetX = offset[0]\n    let offsetY = offset[1]\n    if (positioning == OverlayPositioning.BOTTOM_RIGHT ||\n      positioning == OverlayPositioning.CENTER_RIGHT ||\n      positioning == OverlayPositioning.TOP_RIGHT) {\n      if (this._rendered.left_ !== '') {\n        this._rendered.left_ = style.left = ''\n      }\n      \n      const right = `${Math.round(mapSize[0] - pixel[0] - offsetX)}px`\n      if (this._rendered.right_ != right) {\n        this._rendered.right_ = style.right = right\n      }\n    } else {\n      if (this._rendered.right_ !== '') {\n        this._rendered.right_ = style.right = ''\n      }\n      \n      if (positioning == OverlayPositioning.BOTTOM_CENTER ||\n        positioning == OverlayPositioning.CENTER_CENTER ||\n        positioning == OverlayPositioning.TOP_CENTER) {\n        offsetX -= this._element.offsetWidth / 2\n      }\n      \n      const left = `${Math.round(pixel[0] + offsetX)}px`\n      if (this._rendered.left_ != left) {\n        this._rendered.left_ = style.left = left\n      }\n    }\n    if (positioning == OverlayPositioning.BOTTOM_LEFT ||\n      positioning == OverlayPositioning.BOTTOM_CENTER ||\n      positioning == OverlayPositioning.BOTTOM_RIGHT) {\n      if (this._rendered.top_ !== '') {\n        this._rendered.top_ = style.top = ''\n      }\n      \n      const bottom = `${Math.round(mapSize[1] - pixel[1] - offsetY)}px`\n      if (this._rendered.bottom_ != bottom) {\n        this._rendered.bottom_ = style.bottom = bottom\n      }\n    } else {\n      if (this._rendered.bottom_ !== '') {\n        this._rendered.bottom_ = style.bottom = ''\n      }\n      \n      if (positioning == OverlayPositioning.CENTER_LEFT ||\n        positioning == OverlayPositioning.CENTER_CENTER ||\n        positioning == OverlayPositioning.CENTER_RIGHT) {\n        offsetY -= this._element.offsetHeight / 2\n      }\n      \n      const top = `${Math.round(pixel[1] + offsetY)}px`\n      if (this._rendered.top_ != top) {\n        this._rendered.top_ = style.top = top\n      }\n    }\n  }\n  \n  /**\n   * 设置浮云框是否可见\n   *\n   * @method setVisible\n   * @param visible\n   */\n  setVisible (visible) {\n    if (this._rendered.visible !== visible) {\n      this._element.style.display = visible ? '' : 'none'\n      this._rendered.visible = visible\n    }\n  }\n  \n  /**\n   * 表单自动适应视图范围\n   * 如果当前表单出现的位置不全在地图中，则会平移至地图\n   * 可视范围内\n   *\n   * @private\n   */\n  _panIntoView () {\n    const map = this.map\n    \n    if (!map || !map.getTargetElement()) {\n      return\n    }\n    \n    const mapRect = this._getRect(map.getTargetElement(), map.size)\n    const element = this.popupEelement\n\n    if(element.clientHeight === 0 && element.clientWidth === 0){\n      return\n    }\n    const overlayRect = this._getRect(element,\n      [outerWidth(element), outerHeight(element)])\n    \n    const margin = this._autoPanMargin\n    if (!ExtentUtil.containsExtent(mapRect, overlayRect)) {\n      // the overlay is not completely inside the viewport, so pan the map\n      const offsetLeft = overlayRect[0] - mapRect[0]\n      const offsetRight = mapRect[2] - overlayRect[2]\n      const offsetTop = overlayRect[1] - mapRect[1]\n      const offsetBottom = mapRect[3] - overlayRect[3]\n      \n      const delta = [0, 0]\n      if (offsetLeft < 0) {\n        // move map to the left\n        delta[0] = offsetLeft - margin\n      } else if (offsetRight < 0) {\n        // move map to the right\n        delta[0] = Math.abs(offsetRight) + margin\n      }\n      \n      if (offsetTop < 0) {\n        // move map up\n        delta[1] = offsetTop - margin\n      } else if (offsetBottom < 0) {\n        // move map down\n        delta[1] = Math.abs(offsetBottom) + margin\n      }\n      \n      if (delta[0] !== 0 || delta[1] !== 0) {\n        const center = map.view.center\n        const centerPx = map.getPixelFromCoordinate(center)\n        const newCenterPx = [\n          centerPx[0] + delta[0],\n          centerPx[1] + delta[1]\n        ]\n        \n        map.view.center = map.getCoordinateFromPixel(newCenterPx)\n      }\n    }\n  }\n\n  /**\n   *\n   * @param element\n   * @param size\n   * @return {*[]}\n   * @private\n   */\n  _getRect (element, size) {\n    const box = element.getBoundingClientRect()\n    const offsetX = box.left + window.pageXOffset\n    const offsetY = box.top + window.pageYOffset\n    return [\n      offsetX,\n      offsetY,\n      offsetX + size[0],\n      offsetY + size[1]\n    ]\n  }\n\n  /**\n   * 获取当前浮云框对象的 ID\n   *\n   * @property overlayId\n   * @type {number|string|undefined}\n   */\n  get overlayId () { return this._overlayId }\n\n  /**\n   * 获取表单元素\n   *\n   * @property popupEelement\n   * @type {DOM}\n   */\n  get popupEelement () { return this._popupEelement }\n  set popupEelement (value) {\n    this._popupEelement = value\n  \n    this._setElement()\n  }\n\n  /**\n   *\n   * @private\n   */\n  _setElement () {\n    removeChildren(this._element)\n    const pelement = this.popupEelement\n    if (pelement) {\n      this._element.appendChild(pelement)\n    }\n  }\n\n\n  /**\n   * map读写器, 读取设置当前map\n   *\n   * @property map\n   * @type {Datatang.map}\n   */\n  get map () { return this._map }\n  set map (value) {\n    this._map = value\n    if (this._map) {\n      const map = this._map\n      this._mapPostrenderListenerKey = listen(map,\n        RenderEventType.POSTRENDER, this.render, this)\n      this.updatePixelPosition()\n      const container = this._stopEvent ?\n        map.overlayContainerStopEvent : map.overlayContainer\n      if (this._insertFirst) {\n        container.insertBefore(this._element, container.childNodes[0] || null)\n      } else {\n        container.appendChild(this._element)\n      }\n    }\n  }\n\n  /**\n   * 偏移量读写器\n   *\n   * @property offset\n   * @return {*|undefined}\n   */\n  get offset () { return this._offset }\n  set offset (value) {\n    this._offset = value\n    this.updatePixelPosition()\n  }\n\n  /**\n   * 鼠标点位置读写器\n   *\n   * @property position\n   * @return {undefined|*}\n   */\n  get position () { return this._position }\n  set position (value) {\n    this._position = value\n    \n    this.updatePixelPosition()\n    \n    if (this._position && this.autoPan) {\n      this._panIntoView()\n    }\n  }\n\n  /**\n   *\n   *\n   * positioning\n   * @return {undefined|*}\n   */\n  get positioning () { return this._positioning }\n  set positioning (value) {\n    this._positioning = value\n    this.updatePixelPosition()\n  }\n}\n\n\nconst OverlayPositioning = {\n  BOTTOM_LEFT: 'bottom-left',\n  BOTTOM_CENTER: 'bottom-center',\n  BOTTOM_RIGHT: 'bottom-right',\n  CENTER_LEFT: 'center-left',\n  CENTER_CENTER: 'center-center',\n  CENTER_RIGHT: 'center-right',\n  TOP_LEFT: 'top-left',\n  TOP_CENTER: 'top-center',\n  TOP_RIGHT: 'top-right'\n}\n\n\n// WEBPACK FOOTER //\n// ./src/meek/overlay.js","\nimport SingleImageLayer from '../../lyr/singleimagelayer'\nimport FeatureLayer from '../../lyr/featurelayer'\nimport Renderer from '../renderer'\nimport FeatureLayerRenderer from '../canvas/featurelayerrenderer'\nimport ImageLayerRenderer from '../canvas/imagelayerrenderer'\nimport {createCanvasContext2D} from '../../utils/domutil'\nimport {Transform} from '../../data/matrix/transform'\nimport {RenderEventType} from '../rendereventtype'\nimport {stableSort} from '../../utils/array'\n\nimport RenderEvent from '../renderevent'\n\n\n/**\n * 图形渲染调度器\n *\n */\nexport default class CanvasRenderer extends Renderer {\n\n  constructor (container, map) {\n    super(container, map)\n\n    this._context = null\n    this._canvas = null\n  \n    this._rendererVisible = true\n    this._layerRenderers = []\n    this._transform = Transform.create()\n    \n    this._addToContainer(container)\n  }\n  \n  /**\n   * Add the canvas dom to the container\n   * @param container\n   * @private\n   */\n  _addToContainer (container) {\n    /**\n     * 创建CANVAS元素，并将其添加到container中\n     * 该canvas层作为图形绘制层\n     */\n    let _context = this.context\n    this._canvas = _context.canvas\n    this._canvas.style.width = '100%'\n    this._canvas.style.height = '100%'\n    this._canvas.className = 'dt-unselectable'\n    container.insertBefore(this._canvas, container.childNodes[0] || null)\n  }\n  \n  /**\n   * Render frame\n   * @param frameState\n   */\n  renderFrame (frameState) {\n    if (this.map === null) {\n      return\n    }\n    \n    if (!frameState) {\n      if (this._rendererVisible) {\n        this._canvas.style.display = 'none'\n        this._rendererVisible = false\n    \n        return\n      }\n    }\n    \n    const context = this.context\n    \n    const canvasWidth = frameState.size[0]\n    const canvasHeight = frameState.size[1]\n    \n    if (this._canvas.width !== canvasWidth || this._canvas.height !== canvasHeight) {\n      this._canvas.width = canvasWidth\n      this._canvas.height = canvasHeight\n    } else {\n      context.clearRect(0,0,canvasWidth,canvasHeight)\n    }\n\n    const layers = this.map.layers\n  \n    // layers rendered in order\n    stableSort(layers, this.sortByZIndex)\n    \n    // 更新转化运算矩阵\n    this.updateTransform(frameState)\n  \n    this._dispatchComposeEvent(RenderEventType.PRERENDER, frameState)\n    \n    layers.forEach( layer => {\n      if (layer.visible) {\n        let layerRender = this.getLayerRenderer(layer)\n  \n        if (layerRender.prepareFrame(frameState)) {\n          layerRender.composeFrame(frameState,context)\n        }\n      }\n    })\n  \n    this._dispatchComposeEvent(RenderEventType.POSTRENDER, frameState)\n  }\n  \n  /**\n   * Get the layer renderer by the params layer object\n   * @param layer\n   * @returns {*}\n   */\n  getLayerRenderer (layer) {\n    const layerKey = layer.id.toString()\n    // 应用层缓存\n    if (layerKey in this._layerRenderers) {\n      return this._layerRenderers[layerKey]\n    } else {\n      const layerRenderer = this.createLayerRenderer(layer)\n      this._layerRenderers[layerKey] = layerRenderer\n      return layerRenderer\n    }\n  }\n  \n  /**\n   * Create the layer renderer\n   * @param layer\n   * @returns {*}\n   */\n  createLayerRenderer(layer){\n    if (layer instanceof SingleImageLayer) {\n      return new ImageLayerRenderer(layer,this.context)\n    } else if (layer instanceof FeatureLayer) {\n      return new FeatureLayerRenderer(layer,this.context)\n    } else {\n      return null\n    }\n  }\n  \n  /**\n   * Update the transform\n   * @param frameState\n   */\n  updateTransform (frameState){\n    const viewState = frameState.viewState\n    const coordinateToPixelTransform = frameState.toPixelTransform\n    const pixelToCoordinateTransform = frameState.toCoordinateTransform\n    const size = frameState.size\n    const resolution = viewState.resolution\n    const center = viewState.center\n    const rotation = viewState.rotation\n  \n    Transform.compose(coordinateToPixelTransform,\n          size[0] / 2, size[1] / 2,\n          1 / resolution,  1 / resolution,\n          - rotation,\n          - center[0], - center[1])\n  \n    Transform.invert(Transform.setFromArray(pixelToCoordinateTransform, coordinateToPixelTransform))\n  }\n  \n  /**\n   *\n   * @param state1\n   * @param state2\n   * @returns {number}\n   */\n  sortByZIndex (state1, state2) {\n    return state1.zIndex - state2.zIndex\n  }\n  \n  get canvas(){ return this._canvas }\n  \n  get context(){\n    if(!this._context){\n      this._context = createCanvasContext2D()\n    }\n    \n    return this._context\n  }\n  \n  \n  /**\n   * \n   * @private\n   */\n  _dispatchComposeEvent (type, frameState) {\n    const map = this.map\n    const context = this.context\n    if (map.hasListener(type)) {\n    \n      // const transform = this.getTransform(frameState)\n    \n      const composeEvent = new RenderEvent(type,\n        frameState, context, null)\n      \n      map.dispatchEvent(composeEvent)\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/canvas/canvasrenderer.js","/**\n * Created by zhangyong on 2017/3/20.\n */\n\nimport LayerRenderer from '../../renderer/canvas/layerrenderer'\nimport PointRender from '../render/pointrender'\nimport LineRender from '../render/linerender'\nimport PolygonRender from '../render/polygonrender'\nimport TextRender from '../render/textrender'\n\nimport {Transform} from '../../data/matrix/transform'\nimport {ExtentUtil} from '../../geometry/support/extentutil'\n\nexport default class FeatureLayerRenderer extends LayerRenderer {\n  \n  \n  constructor (layer,context) {\n    super(layer, context)\n  \n    /**\n     *\n     * @type {Map}\n     * @private\n     */\n    this._geometryRenderGroup = new Map()\n  \n    /**\n     *\n     * @type {TextRender}\n     * @private\n     */\n    this._textRender = new TextRender(this.context)\n  \n    /**\n     *\n     * @type {null}\n     * @private\n     */\n    this._maxExtent = null\n  \n    /**\n     *\n     * @type {Array}\n     * @private\n     */\n    this._renderFeatures = []\n  \n    /**\n     *\n     * @type {NaN}\n     * @private\n     */\n    this._renderResolution = Number.NaN\n  \n    /**\n     *\n     * @type {[*]}\n     * @private\n     */\n    this._renderExtent = [Infinity, Infinity, -Infinity, -Infinity]\n  \n    /**\n     *\n     * @type {NaN}\n     * @private\n     */\n    this._renderRevision = NaN\n  \n    /**\n     *\n     * @type {boolean}\n     * @private\n     */\n    this._cacheableThisTime = true\n  \n  }\n  \n  /**\n   *  Get a renderer by geometry type\n   * @param geometry\n   * @returns {*}\n   * @private\n   */\n  _getGeometryRender (geometry) {\n    const type = geometry.geometryType\n    \n    if ( !this._geometryRenderGroup.has(type) ) {\n      this._geometryRenderGroup.set(type, new FeatureLayerRenderer.GeometryRender[type](this.context))\n    }\n    \n    return this._geometryRenderGroup.get(type)\n  }\n \n  \n  _renderFeaturesInOrder (features) {\n    if (features === null || features === undefined) {\n      return features\n    }\n    \n    if (features.length === 0) {\n      return features\n    }\n    \n  }\n  \n  /**\n   * 1、对渲染对象需要做切割 （当前范围内）\n   */\n  prepareFrame (frameState) {\n    const layer = this.layer\n    const frameExtent = frameState.extent\n    const viewState = frameState.viewState\n    const resolution = viewState.resolution\n    const layerRevision = layer.revision\n    const featureLayerRenderBuffer = layer.renderBuffer\n    \n    const renderExtent = ExtentUtil.buffer(frameExtent,\n      featureLayerRenderBuffer * resolution)\n    \n    if (this._renderResolution === resolution &&\n        this._renderRevision === layerRevision &&\n        ExtentUtil.containsExtent(this._renderExtent, renderExtent)) {\n      this._cacheableThisTime = true\n      \n      // return true\n    }\n  \n    // 加载当前屏的图形\n    const features = this.layer.loadFeature(renderExtent)\n    \n    this._cacheableThisTime = false\n    this._renderFeatures = features\n    this._maxExtent = renderExtent\n    this._renderResolution = resolution\n    this._renderExtent = renderExtent\n    this._renderRevision = layerRevision\n    \n    if (features.length === 0) {\n      return false\n    }\n    \n    return true\n  }\n  \n  /**\n   *\n   */\n  composeFrame (frameStateOpt, context) {\n    const frameState = frameStateOpt\n    const viewState = frameState.viewState\n    const layer = this.layer\n    const features = this._renderFeatures\n    const resolution = viewState.resolution\n  \n    const transform = this.getTransform(frameState, 0)\n  \n    this.preCompose(context, frameState, transform)\n    \n    // Clip the current extent so that the parts of geometries\n    // will not be rendered\n    this._clipExtent(transform, context)\n    \n    features.forEach(feature => {\n      let renderStyle\n      \n      if (feature.style) {\n        renderStyle = feature.style\n      } else {\n        let styleFunction = layer.styleFunction\n        if (styleFunction) {\n          renderStyle = styleFunction(feature, resolution)\n  \n          // 应用图层样式\n          feature.style = this._cloneRenderStyle(renderStyle)\n        }\n      }\n      \n      let geomertyRender = this._getGeometryRender(feature.geometry)\n      this._resetRender(geomertyRender)\n      geomertyRender.render(feature, renderStyle, transform)\n  \n      /**\n       * Render text\n       */\n      if (feature.textDisplay) {\n        this._textRender.render(feature, renderStyle, transform)\n      }\n    })\n  \n    context.restore()\n    \n    this.postCompose(context, frameState, transform)\n    \n    return true\n  }\n  \n  /**\n   *\n   * @param renderStyle\n   * @returns {*}\n   * @private\n   */\n  _cloneRenderStyle (renderStyle) {\n    if (renderStyle) {\n      const newStyle = []\n      renderStyle.forEach( rs => {\n        newStyle.push(rs.clone())\n      })\n      \n      return newStyle\n    }\n    \n    return null\n  }\n  \n  /**\n   * Clip the context\n   * @param transform\n   * @private\n   */\n  _clipExtent (transform, context) {\n    const flatClipCoords = this.getClipCoords(transform)\n    \n    context.save()\n    context.beginPath()\n    context.moveTo(flatClipCoords[0], flatClipCoords[1])\n    context.lineTo(flatClipCoords[2], flatClipCoords[3])\n    context.lineTo(flatClipCoords[4], flatClipCoords[5])\n    context.lineTo(flatClipCoords[6], flatClipCoords[7])\n    context.clip()\n  }\n  \n  /**\n   * Get clip coordinates\n   * @param transform\n   * @returns {[*,*,*,*,*,*,*,*]}\n   */\n  getClipCoords (transform) {\n    const maxExtent = this._maxExtent\n    const minX = maxExtent[0]\n    const minY = maxExtent[1]\n    const maxX = maxExtent[2]\n    const maxY = maxExtent[3]\n    const flatClipCoords = [minX, minY, minX, maxY, maxX, maxY, maxX, minY]\n    Transform.transform2D(flatClipCoords, 0, 8, 2, transform, flatClipCoords)\n    return flatClipCoords\n  }\n  \n  /**\n   *\n   * @param geomertyRender\n   * @private\n   */\n  _resetRender (geomertyRender) {\n    if (!this._cacheableThisTime) {\n      geomertyRender.resetRenderOption()\n    }\n  }\n  \n  preCompose () {\n    \n  }\n  \n  postCompose () {\n    \n  }\n  \n}\n\nFeatureLayerRenderer.GeometryRender = {}\n\nFeatureLayerRenderer.GeometryRender['point'] = PointRender\nFeatureLayerRenderer.GeometryRender['line'] = LineRender\nFeatureLayerRenderer.GeometryRender['polygon'] = PolygonRender\nFeatureLayerRenderer.GeometryRender['multi_polygon'] = PolygonRender\nFeatureLayerRenderer.GeometryRender['extent'] = PolygonRender\nFeatureLayerRenderer.GeometryRender['parallelogram'] = PolygonRender\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/canvas/featurelayerrenderer.js","/**\n * Created by zhangyong on 2017/3/20.\n */\n\nimport LayerRenderer from '../../renderer/canvas/layerrenderer'\n\nimport {Transform} from '../../data/matrix/transform'\nimport {ExtentUtil} from '../../geometry/support/extentutil'\n\nexport default class ImageLayerRenderer extends LayerRenderer {\n  constructor (layer) {\n    super(layer)\n    \n    this._image = null\n    \n    this._imageTransform = Transform.create()\n  \n    this.coordinateToCanvasPixelTransform = Transform.create()\n  }\n  \n  /**\n   * @inheritDoc\n   */\n  get image () {\n    return !this._image ? null : this._image.getDomImage()\n  }\n  \n  \n  /**\n   * @inheritDoc\n   */\n  get imageTransform () { return this._imageTransform }\n  \n  \n  /**\n   *\n   * @param frameState\n   * @param layerState\n   * @returns {boolean}\n   */\n  prepareFrame (frameState) {\n    const pixelRatio = frameState.pixelRatio\n    const size = frameState.size\n    const viewState = frameState.viewState\n    const viewCenter = viewState.center\n    const viewResolution = viewState.resolution\n    \n    let image\n    const imageLayer = this.layer\n    let renderedExtent = frameState.extent\n    \n    if (!ExtentUtil.isEmpty(renderedExtent)) {\n      const projection = viewState.projection\n\n      image = imageLayer.getImageInternal(renderedExtent,\n        viewResolution, pixelRatio, projection)\n      \n      // Load the image\n      if (image) {\n        const loaded = this.loadImage(image)\n        if (loaded) {\n          this._image = image\n        }\n      }\n    }\n    \n    if (this._image) {\n      image = this._image\n      const imageExtent = image.extent\n      const imageResolution = image.resolution\n      const imagePixelRatio = image.pixelRatio\n      const scale = pixelRatio * imageResolution /\n        (viewResolution * imagePixelRatio)\n      \n      const transform = Transform.compose(this.imageTransform,\n        pixelRatio * size[0] / 2, pixelRatio * size[1] / 2,\n        scale, -scale,\n        0,\n        imagePixelRatio * (imageExtent[0] - viewCenter[0]) / imageResolution,\n        imagePixelRatio * (viewCenter[1] - imageExtent[3]) / imageResolution)\n      \n      Transform.compose(this.coordinateToCanvasPixelTransform,\n        pixelRatio * size[0] / 2 - transform[4], pixelRatio * size[1] / 2 - transform[5],\n        pixelRatio / viewResolution, -pixelRatio / viewResolution,\n        0,\n        -viewCenter[0], -viewCenter[1])\n    }\n    \n    return !!this.image\n  }\n  \n  /**\n   *\n   * @param frameState\n   * @param layerState\n   * @param context\n   */\n  composeFrame (frameState, context) {\n    this.preCompose(context, frameState)\n    const image = this.image\n    if (image) {\n      // clipped rendering if layer extent is set\n      const extent = undefined\n      const clipped = extent !== undefined &&\n        !ExtentUtil.containsExtent(extent, frameState.extent) &&\n         ExtentUtil.intersects(extent, frameState.extent)\n      \n      if (clipped) {\n        this.clip(context, frameState, extent)\n      }\n  \n      const imageLayer = this.layer\n      const imageTransform = this.imageTransform\n      const alpha = context.globalAlpha\n      context.globalAlpha = imageLayer.opacity\n      \n      const dx = imageTransform[4]\n      const dy = imageTransform[5]\n      const dw = image.width * imageTransform[0]\n      const dh = image.height * imageTransform[3]\n      context.imageSmoothingEnabled = false\n      context.drawImage(image, 0, 0, +image.width, +image.height,\n        Math.round(dx), Math.round(dy), Math.round(dw), Math.round(dh))\n      \n      context.globalAlpha = alpha\n      \n      if (clipped) {\n        context.restore()\n      }\n    }\n    \n    this.postCompose(context, frameState)\n  }\n  \n  \n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/canvas/imagelayerrenderer.js","/**\n * Created by zhangyong on 2017/3/20.\n */\nimport GeometryRender from '../render/geomertyrender'\nimport LineStyle from '../../style/linestyle'\n\nimport {colorToString} from '../../utils/helpers'\nimport {Transform} from '../../data/matrix/transform'\n\nexport default class LineRender extends GeometryRender {\n  \n  constructor (context) {\n    super(context)\n  }\n  \n  /**\n   *\n   * @param feature\n   * @param renderStyle\n   * @param transform\n   */\n  render (feature, renderStyle, transform) {\n    if (!feature) {\n      return\n    }\n  \n    const ctx = this.context\n    const styleArray = renderStyle\n    const geometry = feature.geometry\n  \n    const transform2D =  Transform.transform2D\n    let coordinates = []\n    // TODO find a way to cache the rendered data\n    if (this._pixelCoordinates &&\n        this.equalsTransform(transform, this.renderedTransform)) {\n      coordinates = this._pixelCoordinates\n      // console.log('get the rendered data from chche for line')\n    } else {\n      const geometryCoordinates = geometry.getCoordinates()\n  \n      geometryCoordinates.forEach(function(points){\n        let coordinate = transform2D(\n          points, 0, points.length, 2,\n          transform)\n    \n        coordinate[0] = (coordinate[0] + 0.5 ) | 0\n        coordinate[1] = (coordinate[1] + 0.5 ) | 0\n    \n        coordinates.push(coordinate)\n      })\n  \n      this._pixelCoordinates = coordinates\n      Transform.setFromArray(this.renderedTransform, transform)\n      // console.log('caclulate the rendered data for line')\n    }\n    \n    const len = styleArray.length\n    for(let i = 0; i < len ; i ++){\n      let styleObj = styleArray[i]\n    \n      let renderOptions = {\n        coordinates: coordinates,\n        width: styleObj.width,\n        strokeStyle: colorToString(styleObj.color,styleObj.alpha),\n        lineCap: styleObj.lineCap,\n        lineJion: styleObj.lineJion,\n        miterLimit: styleObj.miterLimit,\n        hasDash: styleObj.style === LineStyle.DASH ? true : false\n      }\n      \n      this.drawLine(ctx, renderOptions)\n    }\n  }\n  \n  drawLine (ctx, renderOpt) {\n    ctx.save()\n    ctx.strokeStyle = renderOpt.strokeStyle\n    ctx.lineWidth = renderOpt.width\n  \n    ctx.lineCap = renderOpt.lineCap\n    ctx.lineJoin = renderOpt.lineJion\n    ctx.miterLimit = renderOpt.miterLimit\n  \n    ctx.beginPath()\n    const coordinates = renderOpt.coordinates\n    for (let i = 0,ii = coordinates.length ; i < ii - 1 ; i++) {\n      ctx.moveTo(coordinates[i][0],coordinates[i][1])\n      ctx.lineTo(coordinates[i + 1][0],coordinates[i + 1][1])\n    }\n  \n    if (renderOpt.hasDash) {\n      ctx.setLineDash([5, 5])\n    }\n  \n    ctx.stroke()\n    \n    ctx.closePath()\n    ctx.restore()\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/render/linerender.js","/**\n * Created by zhangyong on 2017/3/20.\n */\nimport GeometryRender from '../render/geomertyrender'\n\nimport {colorToString} from '../../utils/helpers'\nimport {Transform} from '../../data/matrix/transform'\n\nexport default class PointRender extends GeometryRender {\n  \n  constructor (context) {\n    super(context)\n  \n    this._pixelCoordinates = []\n  }\n  \n  /**\n   * Render a point\n   * @param feature\n   * @param transform\n   */\n  render (feature, renderStyle, transform) {\n    if(!feature){\n      return\n    }\n    \n    const ctx = this.context\n    const styleArray = renderStyle\n    const geomerty = feature.geometry\n  \n    const coordinates = [geomerty.x, geomerty.y]\n\n    // TODO  Should be cached\n    const pixelCoordinates = Transform.transform2D(\n      coordinates, 0, coordinates.length, 2,\n      transform, this._pixelCoordinates)\n    \n    const x = pixelCoordinates[0]\n    const y = pixelCoordinates[1]\n    \n    const len = styleArray.length\n    for(let i = 0; i < len ; i ++){\n      let styleObj = styleArray[i]\n      \n      let renderOptions = {\n        centerX: (x + 0.5) | 0,\n        centerY: (y + 0.5) | 0,\n        radius: styleObj.size / 2 || styleObj.borderStyle.width / 2,\n        fillStyle: colorToString(styleObj.color,styleObj.alpha),\n        borderStyle: styleObj.borderStyle\n      }\n      \n      this.drawCircle(ctx,renderOptions)\n    }\n    \n  }\n  \n  drawCircle (ctx,renderOptions) {\n    // console.log('类型为圆，开始绘制圆')\n    ctx.save()\n    ctx.beginPath()\n    ctx.arc(renderOptions.centerX, renderOptions.centerY,\n            renderOptions.radius, 0, 2 * Math.PI, true)\n  \n    if (renderOptions.fillStyle) {\n      ctx.fillStyle = renderOptions.fillStyle\n      ctx.fill()\n    }\n    \n    const borderStyle = renderOptions.borderStyle\n    if (borderStyle) {\n      ctx.strokeStyle = colorToString(borderStyle.color,borderStyle.alpha)\n      ctx.lineWidth = borderStyle.width\n\n      if (borderStyle.lineDash) {\n        ctx.setLineDash(borderStyle.lineDash)\n      }\n\n      ctx.stroke()\n    }\n    \n    ctx.closePath()\n    ctx.restore()\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/render/pointrender.js","/**\n * Created by zhangyong on 2017/3/20.\n */\nimport Geometry from '../../geometry/geometry'\nimport GeometryRender from '../render/geomertyrender'\nimport LineStyle from '../../style/linestyle'\nimport {Transform} from '../../data/matrix/transform'\nimport {colorToString} from '../../utils/helpers'\n\nexport default class PolygonRender extends GeometryRender {\n  \n  constructor (context) {\n    super(context)\n  }\n  \n  /**\n   * Render a polygon\n   * @param feature\n   * @param transform\n   * @returns {boolean}\n   */\n  render (feature, renderStyle, transform) {\n    if (!feature) {\n      return\n    }\n  \n    const ctx = this.context\n    const styleArray = renderStyle\n    const geometry = feature.geometry\n  \n    const  transform2D =  Transform.transform2D\n    let geometryCoordinages = geometry.getCoordinates()\n    if (geometry.geometryType === Geometry.EXTENT) {\n      geometryCoordinages = [geometryCoordinages]\n    }\n    \n    if (!geometryCoordinages) {\n      return false\n    }\n    \n    if (geometryCoordinages.length === 0) {\n      return false\n    }\n  \n    // TODO find a way to cache the rendered data\n    let coordinates = []\n    let renderCoords = []\n    \n    if (this._pixelCoordinates &&\n      this.equalsTransform(transform, this.renderedTransform)) {\n      renderCoords = this._pixelCoordinates\n    } else {\n      if (geometry.geometryType === Geometry.MULTI_POLYGON) {\n        let polygonCoords = []\n        // 遍历各个多边形\n        geometryCoordinages.forEach( polygon => {\n          polygon.forEach( rings => {\n            rings.forEach( points => {\n              let coordinate = transform2D(\n                points, 0, points.length, 2,\n                transform)\n  \n              coordinate[0] = (coordinate[0] + 0.5 ) | 0\n              coordinate[1] = (coordinate[1] + 0.5 ) | 0\n  \n              coordinates.push(coordinate)\n            })\n  \n            polygonCoords.push(coordinates)\n            coordinates = []\n          })\n          \n          renderCoords.push(polygonCoords)\n          polygonCoords = []\n        })\n        \n        this.renderMutilPolygon (ctx, styleArray, renderCoords)\n      } else {\n        // 遍历多边形各个环\n        geometryCoordinages.forEach( rings => {\n          rings.forEach(points => {\n            let coordinate = transform2D(\n              points, 0, points.length, 2,\n              transform)\n      \n            coordinate[0] = (coordinate[0] + 0.5 ) | 0\n            coordinate[1] = (coordinate[1] + 0.5 ) | 0\n      \n            coordinates.push(coordinate)\n          })\n    \n          renderCoords.push(coordinates)\n          coordinates = []\n        })\n      }\n      \n      this.renderPolygon(ctx, styleArray, renderCoords)\n    }\n  \n    this._pixelCoordinates = renderCoords\n    Transform.setFromArray(this.renderedTransform, transform)\n  \n    return true\n  }\n  \n  /**\n   *\n   * @param ctx\n   * @param styleArray\n   * @param renderCoords\n   */\n  renderMutilPolygon (ctx, styleArray, renderCoords) {\n    renderCoords.forEach( polygon => {\n      this.renderPolygon(ctx, styleArray, polygon)\n    })\n  }\n  \n  /**\n   *\n   * @param ctx\n   * @param styleArray\n   * @param renderCoords\n   */\n  renderPolygon (ctx, styleArray, renderCoords) {\n    const len = styleArray.length\n    for(let i = 0; i < len ; i ++){\n      let styleObj = styleArray[i]\n    \n      let renderOptions = {\n        coordinates: renderCoords,\n        fillStyle: colorToString(styleObj.color,styleObj.alpha),\n        borderStyle: styleObj.borderStyle\n      }\n    \n      this.drawStylePolygon(ctx, renderOptions)\n    }\n  }\n  \n  /**\n   * 绘制多边形，需要注意多边形各个环的绘制\n   * @param ctx\n   * @param renderOpt\n   */\n  drawStylePolygon (ctx, renderOpt) {\n    ctx.save()\n    \n    if (renderOpt.fillStyle) {\n      ctx.fillStyle = renderOpt.fillStyle\n    }\n  \n    const borderStyle = renderOpt.borderStyle\n    if (borderStyle) {\n      ctx.strokeStyle = colorToString(borderStyle.color,borderStyle.alpha)\n      ctx.lineWidth = borderStyle.width\n    \n      if (borderStyle.style === LineStyle.DASH) {\n        ctx.setLineDash([5, 5])\n      }\n    }\n    \n    const coords = renderOpt.coordinates\n    coords.forEach( (coordinates, index) => {\n      if (index === 0) {\n        ctx.beginPath()\n      }\n      \n      ctx.moveTo(coordinates[0][0],coordinates[0][1])\n      for(let k = 1, kk = coordinates.length ; k < kk ; k ++){\n        let cd = coordinates[k]\n        ctx.lineTo(cd[0],cd[1])\n      }\n  \n      ctx.closePath()\n    })\n  \n    ctx.fill()\n    ctx.stroke()\n    ctx.restore()\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/render/polygonrender.js","/**\n * Created by zhangyong on 2017/3/24.\n */\n\nimport GeometryRender from './geomertyrender'\nimport {Transform} from '../../data/matrix/transform'\nimport {colorToString} from '../../utils/helpers'\n// import TextStyle from '../../style/textstyle'\n// import LineStyle from '../../style/linestyle'\n\nexport default class TextRender extends GeometryRender {\n  \n  constructor (context) {\n    super(context)\n  \n    this._pixelCoordinates = []\n  }\n  \n  /**\n   *\n   * @param feature\n   * @param transform\n   */\n  render (feature, renderStyle, transform) {\n    let textStyle = renderStyle[0].textStyle\n    if (!feature.displayText || !textStyle) {\n      return\n    }\n    \n    const displayText = String(feature.displayText)\n    textStyle.text = displayText\n\n    const ctx = this.context\n    ctx.save()\n    \n    const geometry = feature.geometry\n    const coordinates = geometry.getFlatInteriorPoint()\n    \n    this._pixelCoordinates = []\n    const pixelCoordinates = Transform.transform2D(\n      coordinates, 0, coordinates.length, 2,\n      transform, this._pixelCoordinates)\n    \n    for (let i = 0, len = pixelCoordinates.length ;i < len ; i += 2) {\n      const xValue = pixelCoordinates[i]\n      const yValue = pixelCoordinates[i + 1]\n      \n      // set the context text style\n      this._setTextStyle(ctx, textStyle)\n  \n      const offsetX = textStyle.offsetX - 10\n      const offsetY = textStyle.offsetY - 10\n      const stroke = textStyle.stroke ? true : false\n      const fill = textStyle.fill ? true : false\n      const text = textStyle.text\n  \n      let x = xValue + offsetX\n      let y = yValue + offsetY\n  \n      let lines = text.split('\\n')\n      const numLines = lines.length\n      let fontSize, lineY\n      if (numLines > 1) {\n        fontSize = Math.round(ctx.measureText('M').width * 1.5)\n        lineY = y - (((numLines - 1) / 2) * fontSize)\n      } else {\n        fontSize = 0\n        lineY = y\n      }\n  \n      for (let lineIndex = 0; lineIndex < numLines; lineIndex++) {\n        const lineText = lines[lineIndex]\n        if (stroke) {\n          ctx.strokeText(lineText, x, lineY)\n        }\n        if (fill) {\n          ctx.fillText(lineText, x, lineY)\n        }\n    \n        lineY = lineY + fontSize\n      }\n    }\n  \n    ctx.restore()\n  }\n  \n  /**\n   *\n   * @param ctx\n   * @param textStyle\n   * @private\n   */\n  _setTextStyle (ctx, textStyle) {\n    const borderStyle = textStyle.stroke\n  \n    ctx.font = textStyle.font\n    ctx.strokeStyle = colorToString(borderStyle.color, 1)\n    ctx.fillStyle = colorToString(textStyle.fill, 1)\n    ctx.textBaseline = textStyle.textBaseline\n    ctx.textAlign = textStyle.textAlign\n    ctx.lineWidth = borderStyle.width\n    ctx.lineCap = borderStyle.lineCap\n    ctx.lineJoin = borderStyle.lineJion\n  }\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/render/textrender.js","/**\n * Created by zypc on 2016/11/15.\n */\n\n\nimport BaseObject from '../core/baseobject'\n\n/**\n * 地图渲染器基类，\n * @class Renderer\n * @extends BaseObject\n * @module renderer\n */\nexport default class Renderer extends BaseObject {\n\n  constructor (contianer, map) {\n    super()\n\n    this._map = map\n  }\n  \n  /**\n   * @property map\n   * @type {Datatang.Map}\n   */\n  get map () { return this._map }\n  \n  /**\n   *\n   * @method renderFrame\n   * @abstract\n   * @param frameState {Object}\n   */\n  renderFrame (frameState) {} // eslint-disable-line no-unused-vars\n\n  /**\n   * @method clear\n   * @abstract\n   */\n  clear () {}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/renderer.js","/**\n * Created by zhangyong on 2017/6/27.\n */\n\nimport BaseEvent from '../core/baseevent'\n\n/**\n * @class RenderEvent\n * @extends BaseEvent\n * @module renderer\n * @constructor\n */\nexport default class RenderEvent extends BaseEvent {\n  \n  constructor (type, frameState, context, trasform) {\n    \n    super(type)\n  \n  \n    /**\n     * @property frameState\n     * @type {Object}\n     */\n    this.frameState = frameState\n  \n  \n    /**\n     * @property trasform\n     * @type {Object}\n     */\n    this.trasform = trasform\n  \n    /**\n     *@property context\n     *@type {HTML5.}\n     */\n    this.context = context\n  }\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/renderevent.js"],"sourceRoot":""}